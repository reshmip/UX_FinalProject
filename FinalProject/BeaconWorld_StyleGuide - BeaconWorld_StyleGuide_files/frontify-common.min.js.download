(function(){var a,b,c=this;a="undefined"!=typeof exports?exports:c.Tc={},b=a.$=c.jQuery||c.Zepto||c.$,function(){var a=!1,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in c)f[g]="function"==typeof c[g]&&"function"==typeof e[g]&&b.test(c[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(g,c[g]):c[g];return d.prototype=f,d.constructor=d,d.extend=arguments.callee,d}}(),a.Config={dependencies:{css:"/css/dependencies",js:"/js/dependencies"}},a.Application=Class.extend({init:function(c,d){this.config=b.extend({},a.Config,d),this.$ctx=c||b("body"),this.modules=[],this.connectors={},this.sandbox=new a.Sandbox(this,this.config)},registerModules:function(c){var d=this,e=[],f=a.Utils.String;return c=c||this.$ctx,c.find('.mod:not([data-ignore="true"])').add(c).each(function(){var c=b(this),g=c.attr("class")||"";if(g=g.split(" "),g.length>1){for(var h,i,j=[],k=[],l=0,m=g.length;m>l;l++){var n=b.trim(g[l]);n&&(n.indexOf("-")>-1&&(n=f.toCamel(n)),0===n.indexOf("mod")&&n.length>3?h=n.substr(3):0===n.indexOf("skin")&&j.push(n.substr(4).replace(h,"")))}if(i=c.attr("data-connectors")){k=i.split(",");for(var l=0,m=k.length;m>l;l++){var o=b.trim(k[l]);o&&(k[l]=o)}}h&&a.Module[h]&&e.push(d.registerModule(c,h,j,k))}}),e},unregisterModules:function(a){var c=this.connectors;if(a=a||this.modules,a===this.modules)this.connectors=[],this.modules=[];else for(var d=0,e=a.length;e>d;d++){var f,g=a[d];for(var h in c)c.hasOwnProperty(h)&&c[h].unregisterComponent(g);f=b.inArray(g,this.modules),f>-1&&delete this.modules[f]}},end:function(a){"function"==typeof a&&this.sandbox.addCallback("end",a)},start:function(a){a=a||this.modules;for(var b=0,c=a.length;c>b;b++)a[b].start()},stop:function(a){a=a||this.modules;for(var b=0,c=a.length;c>b;b++)a[b].stop()},registerModule:function(b,c,d,e){var f=this.modules;if(c=c||void 0,d=d||[],e=e||[],c&&a.Module[c]){var g=f.length;b.data("terrific-id",g),f[g]=new a.Module[c](b,this.sandbox,g);for(var h=0,i=d.length;i>h;h++){var j=d[h];a.Module[c][j]&&(f[g]=f[g].getDecoratedModule(c,j))}for(var h=0,i=e.length;i>h;h++)this.registerConnection(e[h],f[g]);return f[g]}return null},registerConnection:function(c,d){c=b.trim(c);var e,f,g,h=c.split("-");if(1===h.length?g=f=h[0]:2===h.length&&(e=h[0],f=h[1],g=e+f),g){var i=this.connectors;i[g]||(e?a.Connector[e]&&(i[g]=new a.Connector[e](f)):i[g]=new a.Connector(f)),i[g]&&(d.attachConnector(i[g]),i[g].registerComponent(d))}},unregisterConnection:function(a,b){var c=this.connectors[a];c&&(c.unregisterComponent(b),b.detachConnector(c))}}),a.Sandbox=Class.extend({init:function(a,b){this.application=a,this.config=b,this.hooks={after:[],end:[]}},addModules:function(a){var b=[],c=this.application;return a&&(b=c.registerModules(a),c.start(b)),b},removeModules:function(a){var c=this,d=this.application;if(!b.isArray(a)){var e=a,f=[];e.find(".mod").add(e).each(function(){var a=b(this).data("terrific-id");if(void 0!==a){var d=c.getModuleById(a);d&&f.push(d)}}),a=f}a&&(d.stop(a),d.unregisterModules(a))},subscribe:function(b,c){var d=this.application;if(b+="",!c||!b)throw new Error("subscribe is expecting 2 parameters (connector, module)");if(!(c instanceof a.Module))throw new Error("the module param must be an instance of Tc.Module");d.registerConnection(b,c)},unsubscribe:function(b,c){var d=this.application;c instanceof a.Module&&b&&(b+="",d.unregisterConnection(b,c))},getModuleById:function(a){var b=this.application;if(void 0!==b.modules[a])return b.modules[a];throw new Error("the module with the id "+a+" does not exist")},getConfig:function(){return this.config},getConfigParam:function(a){var b=this.config;if(void 0!==b[a])return b[a];throw new Error("the config param "+a+" does not exist")},addCallback:function(a,b){null==b&&(a="end"),this.hooks[a].push(b)},ready:function(a){var b=this.hooks.after;if(b.push(a),this.application.modules.length===b.length){for(var c=0;c<b.length;c++){var d=b[c];"function"==typeof d&&(delete b[c],d())}for(var e=this.hooks.end,c=0;c<e.length;c++){var f=e[c];"function"==typeof f&&f()}}}}),a.Module=Class.extend({init:function(a,b,c){this.$ctx=a,this.id=c,this.connectors={},this.sandbox=b},start:function(){var a=this;this.on&&this.on(function(){a.initAfter()})},stop:function(){var a=this.$ctx;b("*",a).unbind().removeData(),a.unbind().removeData()},initAfter:function(){var a=this;this.sandbox.ready(function(){a.after&&a.after()})},fire:function(c,d,e,f){var g=this,h=this.connectors,i=!0;null==e&&null==f?"function"==typeof d?(f=d,d=void 0):b.isArray(d)&&(e=d,d=void 0):null==f&&("function"==typeof e&&(f=e,e=void 0),b.isArray(d)&&(e=d,d=void 0)),c=a.Utils.String.capitalize(c),d=d||{},e=e||Object.keys(h);for(var j=0,k=e.length;k>j;j++){var l=e[j];if(!h.hasOwnProperty(l))throw new Error("the module #"+g.id+" is not connected to connector "+l+" â€“ hint: please make sure that your data is an object and not an array");var m=h[l],n=m.notify(g,"on"+c,d)||!1;n||(i=!1)}i&&"function"==typeof f&&f(d)},attachConnector:function(a){this.connectors[a.connectorId]=a},detachConnector:function(a){delete this.connectors[a.connectorId]},getDecoratedModule:function(b,c){if(a.Module[b][c]){var d=a.Module[b][c];return d.prototype=this,d.prototype.constructor=a.Module[b][c],new d(this)}return null}}),a.Connector=Class.extend({init:function(a){this.connectorId=a,this.components={}},registerComponent:function(a){this.components[a.id]={component:a}},unregisterComponent:function(a){var b=this.components;b[a.id]&&delete b[a.id]},notify:function(a,b,c){var d=!0,e=this.components;for(var f in e)if(e.hasOwnProperty(f)){var g=e[f].component;g!==a&&g[b]&&g[b](c)===!1&&(d=!1)}return d}}),a.Utils={},Object.keys||(Object.keys=function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c}),a.Utils.String={capitalize:function(a){return a.substr(0,1).toUpperCase().concat(a.substr(1))},toCamel:function(a){return a.replace(/(\-[A-Za-z])/g,function(a){return a.toUpperCase().replace("-","")})}}}).call(this),function(){"use strict";function a(a){return"function"==typeof a||"object"==typeof a&&null!==a}function b(a){return"function"==typeof a}function c(a){return"object"==typeof a&&null!==a}function d(a){P=a}function e(a){T=a}function f(){return function(){process.nextTick(k)}}function g(){return function(){O(k)}}function h(){var a=0,b=new W(k),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function i(){var a=new MessageChannel;return a.port1.onmessage=k,function(){a.port2.postMessage(0)}}function j(){return function(){setTimeout(k,1)}}function k(){for(var a=0;S>a;a+=2){var b=Z[a],c=Z[a+1];b(c),Z[a]=void 0,Z[a+1]=void 0}S=0}function l(){try{var a=require,b=a("vertx");return O=b.runOnLoop||b.runOnContext,g()}catch(c){return j()}}function m(){}function n(){return new TypeError("You cannot resolve a promise with itself")}function o(){return new TypeError("A promises callback cannot return that same promise.")}function p(a){try{return a.then}catch(b){return ba.error=b,ba}}function q(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function r(a,b,c){T(function(a){var d=!1,e=q(c,b,function(c){d||(d=!0,b!==c?u(a,c):w(a,c))},function(b){d||(d=!0,x(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,x(a,e))},a)}function s(a,b){b._state===_?w(a,b._result):b._state===aa?x(a,b._result):y(b,void 0,function(b){u(a,b)},function(b){x(a,b)})}function t(a,c){if(c.constructor===a.constructor)s(a,c);else{var d=p(c);d===ba?x(a,ba.error):void 0===d?w(a,c):b(d)?r(a,c,d):w(a,c)}}function u(b,c){b===c?x(b,n()):a(c)?t(b,c):w(b,c)}function v(a){a._onerror&&a._onerror(a._result),z(a)}function w(a,b){a._state===$&&(a._result=b,a._state=_,0!==a._subscribers.length&&T(z,a))}function x(a,b){a._state===$&&(a._state=aa,a._result=b,T(v,a))}function y(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+_]=c,e[f+aa]=d,0===f&&a._state&&T(z,a)}function z(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?C(c,d,e,f):e(f);a._subscribers.length=0}}function A(){this.error=null}function B(a,b){try{return a(b)}catch(c){return ca.error=c,ca}}function C(a,c,d,e){var f,g,h,i,j=b(d);if(j){if(f=B(d,e),f===ca?(i=!0,g=f.error,f=null):h=!0,c===f)return void x(c,o())}else f=e,h=!0;c._state!==$||(j&&h?u(c,f):i?x(c,g):a===_?w(c,f):a===aa&&x(c,f))}function D(a,b){try{b(function(b){u(a,b)},function(b){x(a,b)})}catch(c){x(a,c)}}function E(a,b){var c=this;c._instanceConstructor=a,c.promise=new a(m),c._validateInput(b)?(c._input=b,c.length=b.length,c._remaining=b.length,c._init(),0===c.length?w(c.promise,c._result):(c.length=c.length||0,c._enumerate(),0===c._remaining&&w(c.promise,c._result))):x(c.promise,c._validationError())}function F(a){return new da(this,a).promise}function G(a){function b(a){u(e,a)}function c(a){x(e,a)}var d=this,e=new d(m);if(!R(a))return x(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;e._state===$&&f>g;g++)y(d.resolve(a[g]),void 0,b,c);return e}function H(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(m);return u(c,a),c}function I(a){var b=this,c=new b(m);return x(c,a),c}function J(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function K(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(a){this._id=ia++,this._state=void 0,this._result=void 0,this._subscribers=[],m!==a&&(b(a)||J(),this instanceof L||K(),D(this,a))}function M(){var a;if("undefined"!=typeof global)a=global;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(b){throw new Error("polyfill failed because global object is unavailable in this environment")}var c=a.Promise;(!c||"[object Promise]"!==Object.prototype.toString.call(c.resolve())||c.cast)&&(a.Promise=ja)}var N;N=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var O,P,Q,R=N,S=0,T=({}.toString,function(a,b){Z[S]=a,Z[S+1]=b,S+=2,2===S&&(P?P(k):Q())}),U="undefined"!=typeof window?window:void 0,V=U||{},W=V.MutationObserver||V.WebKitMutationObserver,X="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Y="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3);Q=X?f():W?h():Y?i():void 0===U&&"function"==typeof require?l():j();var $=void 0,_=1,aa=2,ba=new A,ca=new A;E.prototype._validateInput=function(a){return R(a)},E.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},E.prototype._init=function(){this._result=new Array(this.length)};var da=E;E.prototype._enumerate=function(){for(var a=this,b=a.length,c=a.promise,d=a._input,e=0;c._state===$&&b>e;e++)a._eachEntry(d[e],e)},E.prototype._eachEntry=function(a,b){var d=this,e=d._instanceConstructor;c(a)?a.constructor===e&&a._state!==$?(a._onerror=null,d._settledAt(a._state,b,a._result)):d._willSettleAt(e.resolve(a),b):(d._remaining--,d._result[b]=a)},E.prototype._settledAt=function(a,b,c){var d=this,e=d.promise;e._state===$&&(d._remaining--,a===aa?x(e,c):d._result[b]=c),0===d._remaining&&w(e,d._result)},E.prototype._willSettleAt=function(a,b){var c=this;y(a,void 0,function(a){c._settledAt(_,b,a)},function(a){c._settledAt(aa,b,a)})};var ea=F,fa=G,ga=H,ha=I,ia=0,ja=L;L.all=ea,L.race=fa,L.resolve=ga,L.reject=ha,L._setScheduler=d,L._setAsap=e,L._asap=T,L.prototype={constructor:L,then:function(a,b){var c=this,d=c._state;if(d===_&&!a||d===aa&&!b)return this;var e=new this.constructor(m),f=c._result;if(d){var g=arguments[d-1];T(function(){C(d,e,g,f)})}else y(c,e,a,b);return e},"catch":function(a){return this.then(null,a)}};var ka=M,la={Promise:ja,polyfill:ka};"function"==typeof define&&define.amd?define(function(){return la}):"undefined"!=typeof module&&module.exports?module.exports=la:"undefined"!=typeof this&&(this.ES6Promise=la),ka()}.call(this);var Promise=Promise||ES6Promise.Promise;!function(){function o(){var a={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},b=/&(?!#?\w+;)|<|>|"|'|\//g;return function(c){return c?c.toString().replace(b,function(b){return a[b]||b}):c}}function p(b,a,f){return("string"==typeof a?a:a.toString()).replace(b.define||h,function(g,e,c,i){return 0===e.indexOf("def.")&&(e=e.substring(4)),e in f||(":"===c?f[e]=i:eval("def['"+e+"']="+i)),""}).replace(b.use||h,function(g,e){var c=eval(e);return c?p(b,c,f):c})}function l(a){return a.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var j={version:"0.2.0",templateSettings:{evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0},m=function(){return this||(0,eval)("this")}();"undefined"!=typeof module&&module.exports?module.exports=j:"function"==typeof define&&define.amd?define(function(){return j}):m.doT=j,m.encodeHTML=o();var q={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},h=/$^/;j.template=function(a,b,c){b=b||j.templateSettings;var d,e,f=b.append?q.append:q.split,g=0;if(b.use||b.define){var i=m.def;m.def=c||{},a=p(b,a,m.def),m.def=i}a=("var out='"+(b.strip?a.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):a).replace(/'|\\/g,"\\$&").replace(b.interpolate||h,function(a,b){return f.start+l(b)+f.end}).replace(b.encode||h,function(a,b){return d=!0,f.startencode+l(b)+f.end}).replace(b.conditional||h,function(a,b,c){return b?c?"';}else if("+l(c)+"){out+='":"';}else{out+='":c?"';if("+l(c)+"){out+='":"';}out+='"}).replace(b.iterate||h,function(a,b,c,d){return b?(g+=1,e=d||"i"+g,b=l(b),"';var arr"+g+"="+b+";if(arr"+g+"){var "+c+","+e+"=-1,l"+g+"=arr"+g+".length-1;while("+e+"<l"+g+"){"+c+"=arr"+g+"["+e+"+=1];out+='"):"';} } out+='"}).replace(b.evaluate||h,function(a,b){return"';"+l(b)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|}|^|{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|}|^|{)out\+=''\+/g,"$1out+="),d&&b.selfcontained&&(a="var encodeHTML=("+o.toString()+"());"+a);try{return new Function(b.varname,a)}catch(k){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+a),k}},j.compile=function(a,b){return j.template(a,null,b)}}(),!function(a){function b(a){var b=a.length,d=c.type(a);return"function"===d||c.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===d||0===b||"number"==typeof b&&b>0&&b-1 in a}if(!a.jQuery){var c=function(a,b){return new c.fn.init(a,b)};c.isWindow=function(a){return null!=a&&a==a.window},c.type=function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?e[g.call(a)]||"object":typeof a},c.isArray=Array.isArray||function(a){return"array"===c.type(a)},c.isPlainObject=function(a){var b;if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!f.call(a,"constructor")&&!f.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(b in a);return void 0===b||f.call(a,b)},c.each=function(a,c,d){var e,f=0,g=a.length,h=b(a);if(d){if(h)for(;g>f&&(e=c.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=c.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=c.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=c.call(a[f],f,a[f]),e===!1)break;return a},c.data=function(a,b,e){if(void 0===e){var f=a[c.expando],g=f&&d[f];if(void 0===b)return g;if(g&&b in g)return g[b]}else if(void 0!==b){var f=a[c.expando]||(a[c.expando]=++c.uuid);return d[f]=d[f]||{},d[f][b]=e,e}},c.removeData=function(a,b){var e=a[c.expando],f=e&&d[e];f&&c.each(b,function(a,b){delete f[b]})},c.extend=function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"!=typeof h&&"function"!==c.type(h)&&(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(c.isPlainObject(d)||(b=c.isArray(d)))?(b?(b=!1,g=a&&c.isArray(a)?a:[]):g=a&&c.isPlainObject(a)?a:{},h[e]=c.extend(k,g,d)):void 0!==d&&(h[e]=d));return h},c.queue=function(a,d,e){function f(a,c){var d=c||[];return null!=a&&(b(Object(a))?!function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a}(d,"string"==typeof a?[a]:a):[].push.call(d,a)),d}if(a){d=(d||"fx")+"queue";var g=c.data(a,d);return e?(!g||c.isArray(e)?g=c.data(a,d,f(e)):g.push(e),g):g||[]}},c.dequeue=function(a,b){c.each(a.nodeType?[a]:a,function(a,d){b=b||"fx";var e=c.queue(d,b),f=e.shift();"inprogress"===f&&(f=e.shift()),f&&("fx"===b&&e.unshift("inprogress"),f.call(d,function(){c.dequeue(d,b)}))})},c.fn=c.prototype={init:function(a){if(a.nodeType)return this[0]=a,this;throw new Error("Not a DOM node.")},offset:function(){var b=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:b.top+(a.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:b.left+(a.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function a(){for(var a=this.offsetParent||document;a&&"html"===!a.nodeType.toLowerCase&&"static"===a.style.position;)a=a.offsetParent;return a||document}var b=this[0],a=a.apply(b),d=this.offset(),e=/^(?:body|html)$/i.test(a.nodeName)?{top:0,left:0}:c(a).offset();return d.top-=parseFloat(b.style.marginTop)||0,d.left-=parseFloat(b.style.marginLeft)||0,a.style&&(e.top+=parseFloat(a.style.borderTopWidth)||0,e.left+=parseFloat(a.style.borderLeftWidth)||0),{top:d.top-e.top,left:d.left-e.left}}};var d={};c.expando="velocity"+(new Date).getTime(),c.uuid=0;for(var e={},f=e.hasOwnProperty,g=e.toString,h="Boolean Number String Function Array Date RegExp Object Error".split(" "),i=0;i<h.length;i++)e["[object "+h[i]+"]"]=h[i].toLowerCase();c.fn.init.prototype=c.fn,a.Velocity={Utilities:c}}}(window),function(a){"object"==typeof module&&"object"==typeof module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):a()}(function(){return function(a,b,c,d){function e(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function f(a){return p.isWrapped(a)?a=[].slice.call(a):p.isNode(a)&&(a=[a]),a}function g(a){var b=m.data(a,"velocity");return null===b?d:b}function h(a){return function(b){return Math.round(b*a)*(1/a)}}function i(a,c,d,e){function f(a,b){return 1-3*b+3*a}function g(a,b){return 3*b-6*a}function h(a){return 3*a}function i(a,b,c){return((f(b,c)*a+g(b,c))*a+h(b))*a}function j(a,b,c){return 3*f(b,c)*a*a+2*g(b,c)*a+h(b)}function k(b,c){for(var e=0;p>e;++e){var f=j(c,a,d);if(0===f)return c;var g=i(c,a,d)-b;c-=g/f}return c}function l(){for(var b=0;t>b;++b)x[b]=i(b*u,a,d)}function m(b,c,e){var f,g,h=0;do g=c+(e-c)/2,f=i(g,a,d)-b,f>0?e=g:c=g;while(Math.abs(f)>r&&++h<s);return g}function n(b){for(var c=0,e=1,f=t-1;e!=f&&x[e]<=b;++e)c+=u;--e;var g=(b-x[e])/(x[e+1]-x[e]),h=c+g*u,i=j(h,a,d);return i>=q?k(b,h):0==i?h:m(b,c,c+u)}function o(){y=!0,(a!=c||d!=e)&&l()}var p=4,q=.001,r=1e-7,s=10,t=11,u=1/(t-1),v="Float32Array"in b;if(4!==arguments.length)return!1;for(var w=0;4>w;++w)if("number"!=typeof arguments[w]||isNaN(arguments[w])||!isFinite(arguments[w]))return!1;a=Math.min(a,1),d=Math.min(d,1),a=Math.max(a,0),d=Math.max(d,0);var x=v?new Float32Array(t):new Array(t),y=!1,z=function(b){return y||o(),a===c&&d===e?b:0===b?0:1===b?1:i(n(b),c,e)};z.getControlPoints=function(){return[{x:a,y:c},{x:d,y:e}]};var A="generateBezier("+[a,c,d,e]+")";return z.toString=function(){return A},z}function j(a,b){var c=a;return p.isString(a)?t.Easings[a]||(c=!1):c=p.isArray(a)&&1===a.length?h.apply(null,a):p.isArray(a)&&2===a.length?u.apply(null,a.concat([b])):p.isArray(a)&&4===a.length?i.apply(null,a):!1,c===!1&&(c=t.Easings[t.defaults.easing]?t.defaults.easing:s),c}function k(a){if(a){var b=(new Date).getTime(),c=t.State.calls.length;c>1e4&&(t.State.calls=e(t.State.calls));for(var f=0;c>f;f++)if(t.State.calls[f]){var h=t.State.calls[f],i=h[0],j=h[2],n=h[3],o=!!n,q=null;n||(n=t.State.calls[f][3]=b-16);for(var r=Math.min((b-n)/j.duration,1),s=0,u=i.length;u>s;s++){var w=i[s],y=w.element;if(g(y)){var z=!1;if(j.display!==d&&null!==j.display&&"none"!==j.display){if("flex"===j.display){var A=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];m.each(A,function(a,b){v.setPropertyValue(y,"display",b)})}v.setPropertyValue(y,"display",j.display)}j.visibility!==d&&"hidden"!==j.visibility&&v.setPropertyValue(y,"visibility",j.visibility);for(var B in w)if("element"!==B){var C,D=w[B],E=p.isString(D.easing)?t.Easings[D.easing]:D.easing;if(1===r)C=D.endValue;else{var F=D.endValue-D.startValue;if(C=D.startValue+F*E(r,j,F),!o&&C===D.currentValue)continue}if(D.currentValue=C,"tween"===B)q=C;else{if(v.Hooks.registered[B]){var G=v.Hooks.getRoot(B),H=g(y).rootPropertyValueCache[G];H&&(D.rootPropertyValue=H)}var I=v.setPropertyValue(y,B,D.currentValue+(0===parseFloat(C)?"":D.unitType),D.rootPropertyValue,D.scrollData);v.Hooks.registered[B]&&(g(y).rootPropertyValueCache[G]=v.Normalizations.registered[G]?v.Normalizations.registered[G]("extract",null,I[1]):I[1]),"transform"===I[0]&&(z=!0)}}j.mobileHA&&g(y).transformCache.translate3d===d&&(g(y).transformCache.translate3d="(0px, 0px, 0px)",z=!0),z&&v.flushTransformCache(y)}}j.display!==d&&"none"!==j.display&&(t.State.calls[f][2].display=!1),j.visibility!==d&&"hidden"!==j.visibility&&(t.State.calls[f][2].visibility=!1),j.progress&&j.progress.call(h[1],h[1],r,Math.max(0,n+j.duration-b),n,q),1===r&&l(f)}}t.State.isTicking&&x(k)}function l(a,b){if(!t.State.calls[a])return!1;for(var c=t.State.calls[a][0],e=t.State.calls[a][1],f=t.State.calls[a][2],h=t.State.calls[a][4],i=!1,j=0,k=c.length;k>j;j++){var l=c[j].element;if(b||f.loop||("none"===f.display&&v.setPropertyValue(l,"display",f.display),"hidden"===f.visibility&&v.setPropertyValue(l,"visibility",f.visibility)),f.loop!==!0&&(m.queue(l)[1]===d||!/\.velocityQueueEntryFlag/i.test(m.queue(l)[1]))&&g(l)){g(l).isAnimating=!1,g(l).rootPropertyValueCache={};var n=!1;m.each(v.Lists.transforms3D,function(a,b){var c=/^scale/.test(b)?1:0,e=g(l).transformCache[b];g(l).transformCache[b]!==d&&new RegExp("^\\("+c+"[^.]").test(e)&&(n=!0,delete g(l).transformCache[b])}),f.mobileHA&&(n=!0,delete g(l).transformCache.translate3d),n&&v.flushTransformCache(l),v.Values.removeClass(l,"velocity-animating")}if(!b&&f.complete&&!f.loop&&j===k-1)try{f.complete.call(e,e)}catch(o){setTimeout(function(){throw o},1)}h&&f.loop!==!0&&h(e),g(l)&&f.loop===!0&&!b&&(m.each(g(l).tweensContainer,function(a,b){/^rotate/.test(a)&&360===parseFloat(b.endValue)&&(b.endValue=0,b.startValue=360),/^backgroundPosition/.test(a)&&100===parseFloat(b.endValue)&&"%"===b.unitType&&(b.endValue=0,b.startValue=100)}),t(l,"reverse",{loop:!0,delay:f.delay})),f.queue!==!1&&m.dequeue(l,f.queue)}t.State.calls[a]=!1;for(var p=0,q=t.State.calls.length;q>p;p++)if(t.State.calls[p]!==!1){i=!0;break}i===!1&&(t.State.isTicking=!1,delete t.State.calls,t.State.calls=[])}var m,n=function(){if(c.documentMode)return c.documentMode;for(var a=7;a>4;a--){var b=c.createElement("div");if(b.innerHTML="<!--[if IE "+a+"]><span></span><![endif]-->",b.getElementsByTagName("span").length)return b=null,a}return d}(),o=function(){var a=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b){var c,d=(new Date).getTime();return c=Math.max(0,16-(d-a)),a=d+c,setTimeout(function(){b(d+c)},c)}}(),p={isString:function(a){return"string"==typeof a},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isNode:function(a){return a&&a.nodeType},isNodeList:function(a){return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a))&&a.length!==d&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},isWrapped:function(a){return a&&(a.jquery||b.Zepto&&b.Zepto.zepto.isZ(a))},isSVG:function(a){return b.SVGElement&&a instanceof b.SVGElement},isEmptyObject:function(a){for(var b in a)return!1;return!0}},q=!1;if(a.fn&&a.fn.jquery?(m=a,q=!0):m=b.Velocity.Utilities,8>=n&&!q)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=n)return void(jQuery.fn.velocity=jQuery.fn.animate);var r=400,s="swing",t={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:b.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:m,Redirects:{},Easings:{},Promise:b.Promise,defaults:{queue:"",duration:r,easing:s,begin:d,complete:d,progress:d,display:d,visibility:d,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(a){m.data(a,"velocity",{isSVG:p.isSVG(a),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};b.pageYOffset!==d?(t.State.scrollAnchor=b,t.State.scrollPropertyLeft="pageXOffset",t.State.scrollPropertyTop="pageYOffset"):(t.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,t.State.scrollPropertyLeft="scrollLeft",t.State.scrollPropertyTop="scrollTop");var u=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function d(a,b,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(a=parseFloat(a)||500,b=parseFloat(b)||20,e=e||null,i.tension=a,i.friction=b,f=null!==e,f?(k=d(a,b),g=k/e*m):g=m;h=c(h||i,g),j.push(1+h.x),k+=16,Math.abs(h.x)>l&&Math.abs(h.v)>l;);return f?function(a){return j[a*(j.length-1)|0]}:k}}();t.Easings={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)}},m.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(a,b){t.Easings[b[0]]=i.apply(null,b[1])});var v=t.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var a=0;a<v.Lists.colors.length;a++){var b="color"===v.Lists.colors[a]?"0 0 0 1":"255 255 255 1";v.Hooks.templates[v.Lists.colors[a]]=["Red Green Blue Alpha",b]}var c,d,e;if(n)for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");var f=d[1].match(v.RegEx.valueSplit);"Color"===e[0]&&(e.push(e.shift()),f.push(f.shift()),v.Hooks.templates[c]=[e.join(" "),f.join(" ")])}for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");for(var a in e){var g=c+e[a],h=a;v.Hooks.registered[g]=[c,h]}}},getRoot:function(a){var b=v.Hooks.registered[a];return b?b[0]:a},cleanRootPropertyValue:function(a,b){return v.RegEx.valueUnwrap.test(b)&&(b=b.match(v.RegEx.valueUnwrap)[1]),v.Values.isCSSNullValue(b)&&(b=v.Hooks.templates[a][1]),b},extractValue:function(a,b){var c=v.Hooks.registered[a];if(c){var d=c[0],e=c[1];return b=v.Hooks.cleanRootPropertyValue(d,b),b.toString().match(v.RegEx.valueSplit)[e]}return b},injectValue:function(a,b,c){var d=v.Hooks.registered[a];if(d){var e,f,g=d[0],h=d[1];return c=v.Hooks.cleanRootPropertyValue(g,c),e=c.toString().match(v.RegEx.valueSplit),e[h]=b,f=e.join(" ")}return c}},Normalizations:{registered:{clip:function(a,b,c){switch(a){case"name":return"clip";case"extract":var d;return v.RegEx.wrappedValueAlreadyExtracted.test(c)?d=c:(d=c.toString().match(v.RegEx.valueUnwrap),d=d?d[1].replace(/,(\s+)?/g," "):c),d;case"inject":return"rect("+c+")"}},blur:function(a,b,c){switch(a){case"name":return t.State.isFirefox?"filter":"-webkit-filter";case"extract":var d=parseFloat(c);if(!d&&0!==d){var e=c.toString().match(/blur\(([0-9]+[A-z]+)\)/i);d=e?e[1]:0}return d;case"inject":return parseFloat(c)?"blur("+c+")":"none"}},opacity:function(a,b,c){if(8>=n)switch(a){case"name":return"filter";case"extract":var d=c.toString().match(/alpha\(opacity=(.*)\)/i);return c=d?d[1]/100:1;case"inject":return b.style.zoom=1,parseFloat(c)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c),10)+")"}else switch(a){case"name":return"opacity";case"extract":return c;case"inject":return c}}},register:function(){9>=n||t.State.isGingerbread||(v.Lists.transformsBase=v.Lists.transformsBase.concat(v.Lists.transforms3D));for(var a=0;a<v.Lists.transformsBase.length;a++)!function(){var b=v.Lists.transformsBase[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return"transform";case"extract":return g(c)===d||g(c).transformCache[b]===d?/^scale/i.test(b)?1:0:g(c).transformCache[b].replace(/[()]/g,"");case"inject":var f=!1;switch(b.substr(0,b.length-1)){case"translate":f=!/(%|px|em|rem|vw|vh|\d)$/i.test(e);break;case"scal":case"scale":t.State.isAndroid&&g(c).transformCache[b]===d&&1>e&&(e=1),f=!/(\d)$/i.test(e);break;case"skew":f=!/(deg|\d)$/i.test(e);break;case"rotate":f=!/(deg|\d)$/i.test(e)}return f||(g(c).transformCache[b]="("+e+")"),g(c).transformCache[b]}}}();for(var a=0;a<v.Lists.colors.length;a++)!function(){var b=v.Lists.colors[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return b;case"extract":var f;if(v.RegEx.wrappedValueAlreadyExtracted.test(e))f=e;else{var g,h={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(e)?g=h[e]!==d?h[e]:h.black:v.RegEx.isHex.test(e)?g="rgb("+v.Values.hexToRgb(e).join(" ")+")":/^rgba?\(/i.test(e)||(g=h.black),f=(g||e).toString().match(v.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ");
}return 8>=n||3!==f.split(" ").length||(f+=" 1"),f;case"inject":return 8>=n?4===e.split(" ").length&&(e=e.split(/\s+/).slice(0,3).join(" ")):3===e.split(" ").length&&(e+=" 1"),(8>=n?"rgb":"rgba")+"("+e.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},SVGAttribute:function(a){var b="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(n||t.State.isAndroid&&!t.State.isChrome)&&(b+="|transform"),new RegExp("^("+b+")$","i").test(a)},prefixCheck:function(a){if(t.State.prefixMatches[a])return[t.State.prefixMatches[a],!0];for(var b=["","Webkit","Moz","ms","O"],c=0,d=b.length;d>c;c++){var e;if(e=0===c?a:b[c]+a.replace(/^\w/,function(a){return a.toUpperCase()}),p.isString(t.State.prefixElement.style[e]))return t.State.prefixMatches[a]=e,[e,!0]}return[a,!1]}},Values:{hexToRgb:function(a){var b,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=d.exec(a),b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:[0,0,0]},isCSSNullValue:function(a){return 0==a||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)},getUnitType:function(a){return/^(rotate|skew)/i.test(a)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a)?"":"px"},getDisplayType:function(a){var b=a&&a.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b)?"inline":/^(li)$/i.test(b)?"list-item":/^(tr)$/i.test(b)?"table-row":/^(table)$/i.test(b)?"table":/^(tbody)$/i.test(b)?"table-row-group":"block"},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=(a.className.length?" ":"")+b},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.toString().replace(new RegExp("(^|\\s)"+b.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(a,c,e,f){function h(a,c){function e(){j&&v.setPropertyValue(a,"display","none")}var i=0;if(8>=n)i=m.css(a,c);else{var j=!1;if(/^(width|height)$/.test(c)&&0===v.getPropertyValue(a,"display")&&(j=!0,v.setPropertyValue(a,"display",v.Values.getDisplayType(a))),!f){if("height"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var k=a.offsetHeight-(parseFloat(v.getPropertyValue(a,"borderTopWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderBottomWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingTop"))||0)-(parseFloat(v.getPropertyValue(a,"paddingBottom"))||0);return e(),k}if("width"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var l=a.offsetWidth-(parseFloat(v.getPropertyValue(a,"borderLeftWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderRightWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingLeft"))||0)-(parseFloat(v.getPropertyValue(a,"paddingRight"))||0);return e(),l}}var o;o=g(a)===d?b.getComputedStyle(a,null):g(a).computedStyle?g(a).computedStyle:g(a).computedStyle=b.getComputedStyle(a,null),"borderColor"===c&&(c="borderTopColor"),i=9===n&&"filter"===c?o.getPropertyValue(c):o[c],(""===i||null===i)&&(i=a.style[c]),e()}if("auto"===i&&/^(top|right|bottom|left)$/i.test(c)){var p=h(a,"position");("fixed"===p||"absolute"===p&&/top|left/i.test(c))&&(i=m(a).position()[c]+"px")}return i}var i;if(v.Hooks.registered[c]){var j=c,k=v.Hooks.getRoot(j);e===d&&(e=v.getPropertyValue(a,v.Names.prefixCheck(k)[0])),v.Normalizations.registered[k]&&(e=v.Normalizations.registered[k]("extract",a,e)),i=v.Hooks.extractValue(j,e)}else if(v.Normalizations.registered[c]){var l,o;l=v.Normalizations.registered[c]("name",a),"transform"!==l&&(o=h(a,v.Names.prefixCheck(l)[0]),v.Values.isCSSNullValue(o)&&v.Hooks.templates[c]&&(o=v.Hooks.templates[c][1])),i=v.Normalizations.registered[c]("extract",a,o)}if(!/^[\d-]/.test(i))if(g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c))if(/^(height|width)$/i.test(c))try{i=a.getBBox()[c]}catch(p){i=0}else i=a.getAttribute(c);else i=h(a,v.Names.prefixCheck(c)[0]);return v.Values.isCSSNullValue(i)&&(i=0),t.debug>=2&&console.log("Get "+c+": "+i),i},setPropertyValue:function(a,c,d,e,f){var h=c;if("scroll"===c)f.container?f.container["scroll"+f.direction]=d:"Left"===f.direction?b.scrollTo(d,f.alternateValue):b.scrollTo(f.alternateValue,d);else if(v.Normalizations.registered[c]&&"transform"===v.Normalizations.registered[c]("name",a))v.Normalizations.registered[c]("inject",a,d),h="transform",d=g(a).transformCache[c];else{if(v.Hooks.registered[c]){var i=c,j=v.Hooks.getRoot(c);e=e||v.getPropertyValue(a,j),d=v.Hooks.injectValue(i,d,e),c=j}if(v.Normalizations.registered[c]&&(d=v.Normalizations.registered[c]("inject",a,d),c=v.Normalizations.registered[c]("name",a)),h=v.Names.prefixCheck(c)[0],8>=n)try{a.style[h]=d}catch(k){t.debug&&console.log("Browser does not support ["+d+"] for ["+h+"]")}else g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c)?a.setAttribute(c,d):a.style[h]=d;t.debug>=2&&console.log("Set "+c+" ("+h+"): "+d)}return[h,d]},flushTransformCache:function(a){function b(b){return parseFloat(v.getPropertyValue(a,b))}var c="";if((n||t.State.isAndroid&&!t.State.isChrome)&&g(a).isSVG){var d={translate:[b("translateX"),b("translateY")],skewX:[b("skewX")],skewY:[b("skewY")],scale:1!==b("scale")?[b("scale"),b("scale")]:[b("scaleX"),b("scaleY")],rotate:[b("rotateZ"),0,0]};m.each(g(a).transformCache,function(a){/^translate/i.test(a)?a="translate":/^scale/i.test(a)?a="scale":/^rotate/i.test(a)&&(a="rotate"),d[a]&&(c+=a+"("+d[a].join(" ")+") ",delete d[a])})}else{var e,f;m.each(g(a).transformCache,function(b){return e=g(a).transformCache[b],"transformPerspective"===b?(f=e,!0):(9===n&&"rotateZ"===b&&(b="rotate"),void(c+=b+e+" "))}),f&&(c="perspective"+f+" "+c)}v.setPropertyValue(a,"transform",c)}};v.Hooks.register(),v.Normalizations.register(),t.hook=function(a,b,c){var e=d;return a=f(a),m.each(a,function(a,f){if(g(f)===d&&t.init(f),c===d)e===d&&(e=t.CSS.getPropertyValue(f,b));else{var h=t.CSS.setPropertyValue(f,b,c);"transform"===h[0]&&t.CSS.flushTransformCache(f),e=h}}),e};var w=function(){function a(){return h?B.promise||null:i}function e(){function a(){function a(a,b){var c=d,e=d,g=d;return p.isArray(a)?(c=a[0],!p.isArray(a[1])&&/^[\d-]/.test(a[1])||p.isFunction(a[1])||v.RegEx.isHex.test(a[1])?g=a[1]:(p.isString(a[1])&&!v.RegEx.isHex.test(a[1])||p.isArray(a[1]))&&(e=b?a[1]:j(a[1],h.duration),a[2]!==d&&(g=a[2]))):c=a,b||(e=e||h.easing),p.isFunction(c)&&(c=c.call(f,y,x)),p.isFunction(g)&&(g=g.call(f,y,x)),[c||0,e,g]}function l(a,b){var c,d;return d=(b||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(a){return c=a,""}),c||(c=v.Values.getUnitType(a)),[d,c]}function n(){var a={myParent:f.parentNode||c.body,position:v.getPropertyValue(f,"position"),fontSize:v.getPropertyValue(f,"fontSize")},d=a.position===I.lastPosition&&a.myParent===I.lastParent,e=a.fontSize===I.lastFontSize;I.lastParent=a.myParent,I.lastPosition=a.position,I.lastFontSize=a.fontSize;var h=100,i={};if(e&&d)i.emToPx=I.lastEmToPx,i.percentToPxWidth=I.lastPercentToPxWidth,i.percentToPxHeight=I.lastPercentToPxHeight;else{var j=g(f).isSVG?c.createElementNS("http://www.w3.org/2000/svg","rect"):c.createElement("div");t.init(j),a.myParent.appendChild(j),m.each(["overflow","overflowX","overflowY"],function(a,b){t.CSS.setPropertyValue(j,b,"hidden")}),t.CSS.setPropertyValue(j,"position",a.position),t.CSS.setPropertyValue(j,"fontSize",a.fontSize),t.CSS.setPropertyValue(j,"boxSizing","content-box"),m.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(a,b){t.CSS.setPropertyValue(j,b,h+"%")}),t.CSS.setPropertyValue(j,"paddingLeft",h+"em"),i.percentToPxWidth=I.lastPercentToPxWidth=(parseFloat(v.getPropertyValue(j,"width",null,!0))||1)/h,i.percentToPxHeight=I.lastPercentToPxHeight=(parseFloat(v.getPropertyValue(j,"height",null,!0))||1)/h,i.emToPx=I.lastEmToPx=(parseFloat(v.getPropertyValue(j,"paddingLeft"))||1)/h,a.myParent.removeChild(j)}return null===I.remToPx&&(I.remToPx=parseFloat(v.getPropertyValue(c.body,"fontSize"))||16),null===I.vwToPx&&(I.vwToPx=parseFloat(b.innerWidth)/100,I.vhToPx=parseFloat(b.innerHeight)/100),i.remToPx=I.remToPx,i.vwToPx=I.vwToPx,i.vhToPx=I.vhToPx,t.debug>=1&&console.log("Unit ratios: "+JSON.stringify(i),f),i}if(h.begin&&0===y)try{h.begin.call(o,o)}catch(r){setTimeout(function(){throw r},1)}if("scroll"===C){var u,w,z,A=/^x$/i.test(h.axis)?"Left":"Top",D=parseFloat(h.offset)||0;h.container?p.isWrapped(h.container)||p.isNode(h.container)?(h.container=h.container[0]||h.container,u=h.container["scroll"+A],z=u+m(f).position()[A.toLowerCase()]+D):h.container=null:(u=t.State.scrollAnchor[t.State["scrollProperty"+A]],w=t.State.scrollAnchor[t.State["scrollProperty"+("Left"===A?"Top":"Left")]],z=m(f).offset()[A.toLowerCase()]+D),i={scroll:{rootPropertyValue:!1,startValue:u,currentValue:u,endValue:z,unitType:"",easing:h.easing,scrollData:{container:h.container,direction:A,alternateValue:w}},element:f},t.debug&&console.log("tweensContainer (scroll): ",i.scroll,f)}else if("reverse"===C){if(!g(f).tweensContainer)return void m.dequeue(f,h.queue);"none"===g(f).opts.display&&(g(f).opts.display="auto"),"hidden"===g(f).opts.visibility&&(g(f).opts.visibility="visible"),g(f).opts.loop=!1,g(f).opts.begin=null,g(f).opts.complete=null,s.easing||delete h.easing,s.duration||delete h.duration,h=m.extend({},g(f).opts,h);var E=m.extend(!0,{},g(f).tweensContainer);for(var F in E)if("element"!==F){var G=E[F].startValue;E[F].startValue=E[F].currentValue=E[F].endValue,E[F].endValue=G,p.isEmptyObject(s)||(E[F].easing=h.easing),t.debug&&console.log("reverse tweensContainer ("+F+"): "+JSON.stringify(E[F]),f)}i=E}else if("start"===C){var E;g(f).tweensContainer&&g(f).isAnimating===!0&&(E=g(f).tweensContainer),m.each(q,function(b,c){if(RegExp("^"+v.Lists.colors.join("$|^")+"$").test(b)){var e=a(c,!0),f=e[0],g=e[1],h=e[2];if(v.RegEx.isHex.test(f)){for(var i=["Red","Green","Blue"],j=v.Values.hexToRgb(f),k=h?v.Values.hexToRgb(h):d,l=0;l<i.length;l++){var m=[j[l]];g&&m.push(g),k!==d&&m.push(k[l]),q[b+i[l]]=m}delete q[b]}}});for(var H in q){var K=a(q[H]),L=K[0],M=K[1],N=K[2];H=v.Names.camelCase(H);var O=v.Hooks.getRoot(H),P=!1;if(g(f).isSVG||"tween"===O||v.Names.prefixCheck(O)[1]!==!1||v.Normalizations.registered[O]!==d){(h.display!==d&&null!==h.display&&"none"!==h.display||h.visibility!==d&&"hidden"!==h.visibility)&&/opacity|filter/.test(H)&&!N&&0!==L&&(N=0),h._cacheValues&&E&&E[H]?(N===d&&(N=E[H].endValue+E[H].unitType),P=g(f).rootPropertyValueCache[O]):v.Hooks.registered[H]?N===d?(P=v.getPropertyValue(f,O),N=v.getPropertyValue(f,H,P)):P=v.Hooks.templates[O][1]:N===d&&(N=v.getPropertyValue(f,H));var Q,R,S,T=!1;if(Q=l(H,N),N=Q[0],S=Q[1],Q=l(H,L),L=Q[0].replace(/^([+-\/*])=/,function(a,b){return T=b,""}),R=Q[1],N=parseFloat(N)||0,L=parseFloat(L)||0,"%"===R&&(/^(fontSize|lineHeight)$/.test(H)?(L/=100,R="em"):/^scale/.test(H)?(L/=100,R=""):/(Red|Green|Blue)$/i.test(H)&&(L=L/100*255,R="")),/[\/*]/.test(T))R=S;else if(S!==R&&0!==N)if(0===L)R=S;else{e=e||n();var U=/margin|padding|left|right|width|text|word|letter/i.test(H)||/X$/.test(H)||"x"===H?"x":"y";switch(S){case"%":N*="x"===U?e.percentToPxWidth:e.percentToPxHeight;break;case"px":break;default:N*=e[S+"ToPx"]}switch(R){case"%":N*=1/("x"===U?e.percentToPxWidth:e.percentToPxHeight);break;case"px":break;default:N*=1/e[R+"ToPx"]}}switch(T){case"+":L=N+L;break;case"-":L=N-L;break;case"*":L=N*L;break;case"/":L=N/L}i[H]={rootPropertyValue:P,startValue:N,currentValue:N,endValue:L,unitType:R,easing:M},t.debug&&console.log("tweensContainer ("+H+"): "+JSON.stringify(i[H]),f)}else t.debug&&console.log("Skipping ["+O+"] due to a lack of browser support.")}i.element=f}i.element&&(v.Values.addClass(f,"velocity-animating"),J.push(i),""===h.queue&&(g(f).tweensContainer=i,g(f).opts=h),g(f).isAnimating=!0,y===x-1?(t.State.calls.push([J,o,h,null,B.resolver]),t.State.isTicking===!1&&(t.State.isTicking=!0,k())):y++)}var e,f=this,h=m.extend({},t.defaults,s),i={};switch(g(f)===d&&t.init(f),parseFloat(h.delay)&&h.queue!==!1&&m.queue(f,h.queue,function(a){t.velocityQueueEntryFlag=!0,g(f).delayTimer={setTimeout:setTimeout(a,parseFloat(h.delay)),next:a}}),h.duration.toString().toLowerCase()){case"fast":h.duration=200;break;case"normal":h.duration=r;break;case"slow":h.duration=600;break;default:h.duration=parseFloat(h.duration)||1}t.mock!==!1&&(t.mock===!0?h.duration=h.delay=1:(h.duration*=parseFloat(t.mock)||1,h.delay*=parseFloat(t.mock)||1)),h.easing=j(h.easing,h.duration),h.begin&&!p.isFunction(h.begin)&&(h.begin=null),h.progress&&!p.isFunction(h.progress)&&(h.progress=null),h.complete&&!p.isFunction(h.complete)&&(h.complete=null),h.display!==d&&null!==h.display&&(h.display=h.display.toString().toLowerCase(),"auto"===h.display&&(h.display=t.CSS.Values.getDisplayType(f))),h.visibility!==d&&null!==h.visibility&&(h.visibility=h.visibility.toString().toLowerCase()),h.mobileHA=h.mobileHA&&t.State.isMobile&&!t.State.isGingerbread,h.queue===!1?h.delay?setTimeout(a,h.delay):a():m.queue(f,h.queue,function(b,c){return c===!0?(B.promise&&B.resolver(o),!0):(t.velocityQueueEntryFlag=!0,void a(b))}),""!==h.queue&&"fx"!==h.queue||"inprogress"===m.queue(f)[0]||m.dequeue(f)}var h,i,n,o,q,s,u=arguments[0]&&(arguments[0].p||m.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||p.isString(arguments[0].properties));if(p.isWrapped(this)?(h=!1,n=0,o=this,i=this):(h=!0,n=1,o=u?arguments[0].elements||arguments[0].e:arguments[0]),o=f(o)){u?(q=arguments[0].properties||arguments[0].p,s=arguments[0].options||arguments[0].o):(q=arguments[n],s=arguments[n+1]);var x=o.length,y=0;if(!/^(stop|finish|finishAll)$/i.test(q)&&!m.isPlainObject(s)){var z=n+1;s={};for(var A=z;A<arguments.length;A++)p.isArray(arguments[A])||!/^(fast|normal|slow)$/i.test(arguments[A])&&!/^\d/.test(arguments[A])?p.isString(arguments[A])||p.isArray(arguments[A])?s.easing=arguments[A]:p.isFunction(arguments[A])&&(s.complete=arguments[A]):s.duration=arguments[A]}var B={promise:null,resolver:null,rejecter:null};h&&t.Promise&&(B.promise=new t.Promise(function(a,b){B.resolver=a,B.rejecter=b}));var C;switch(q){case"scroll":C="scroll";break;case"reverse":C="reverse";break;case"finish":case"finishAll":case"stop":m.each(o,function(a,b){g(b)&&g(b).delayTimer&&(clearTimeout(g(b).delayTimer.setTimeout),g(b).delayTimer.next&&g(b).delayTimer.next(),delete g(b).delayTimer),"finishAll"!==q||s!==!0&&!p.isString(s)||(m.each(m.queue(b,p.isString(s)?s:""),function(a,b){p.isFunction(b)&&b()}),m.queue(b,p.isString(s)?s:"",[]))});var D=[];return m.each(t.State.calls,function(a,b){b&&m.each(b[1],function(c,e){var f=s===d?"":s;return f===!0||b[2].queue===f||s===d&&b[2].queue===!1?void m.each(o,function(c,d){d===e&&((s===!0||p.isString(s))&&(m.each(m.queue(d,p.isString(s)?s:""),function(a,b){p.isFunction(b)&&b(null,!0)}),m.queue(d,p.isString(s)?s:"",[])),"stop"===q?(g(d)&&g(d).tweensContainer&&f!==!1&&m.each(g(d).tweensContainer,function(a,b){b.endValue=b.currentValue}),D.push(a)):("finish"===q||"finishAll"===q)&&(b[2].duration=1))}):!0})}),"stop"===q&&(m.each(D,function(a,b){l(b,!0)}),B.promise&&B.resolver(o)),a();default:if(!m.isPlainObject(q)||p.isEmptyObject(q)){if(p.isString(q)&&t.Redirects[q]){var E=m.extend({},s),F=E.duration,G=E.delay||0;return E.backwards===!0&&(o=m.extend(!0,[],o).reverse()),m.each(o,function(a,b){parseFloat(E.stagger)?E.delay=G+parseFloat(E.stagger)*a:p.isFunction(E.stagger)&&(E.delay=G+E.stagger.call(b,a,x)),E.drag&&(E.duration=parseFloat(F)||(/^(callout|transition)/.test(q)?1e3:r),E.duration=Math.max(E.duration*(E.backwards?1-a/x:(a+1)/x),.75*E.duration,200)),t.Redirects[q].call(b,b,E||{},a,x,o,B.promise?B:d)}),a()}var H="Velocity: First argument ("+q+") was not a property map, a known action, or a registered redirect. Aborting.";return B.promise?B.rejecter(new Error(H)):console.log(H),a()}C="start"}var I={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},J=[];m.each(o,function(a,b){p.isNode(b)&&e.call(b)});var K,E=m.extend({},t.defaults,s);if(E.loop=parseInt(E.loop),K=2*E.loop-1,E.loop)for(var L=0;K>L;L++){var M={delay:E.delay,progress:E.progress};L===K-1&&(M.display=E.display,M.visibility=E.visibility,M.complete=E.complete),w(o,"reverse",M)}return a()}};t=m.extend(w,t),t.animate=w;var x=b.requestAnimationFrame||o;return t.State.isMobile||c.hidden===d||c.addEventListener("visibilitychange",function(){c.hidden?(x=function(a){return setTimeout(function(){a(!0)},16)},k()):x=b.requestAnimationFrame||o}),a.Velocity=t,a!==b&&(a.fn.velocity=w,a.fn.velocity.defaults=t.defaults),m.each(["Down","Up"],function(a,b){t.Redirects["slide"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j=i.begin,k=i.complete,l={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},n={};i.display===d&&(i.display="Down"===b?"inline"===t.CSS.Values.getDisplayType(a)?"inline-block":"block":"none"),i.begin=function(){j&&j.call(g,g);for(var c in l){n[c]=a.style[c];var d=t.CSS.getPropertyValue(a,c);l[c]="Down"===b?[d,0]:[0,d]}n.overflow=a.style.overflow,a.style.overflow="hidden"},i.complete=function(){for(var b in n)a.style[b]=n[b];k&&k.call(g,g),h&&h.resolver(g)},t(a,l,i)}}),m.each(["In","Out"],function(a,b){t.Redirects["fade"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j={opacity:"In"===b?1:0},k=i.complete;i.complete=e!==f-1?i.begin=null:function(){k&&k.call(g,g),h&&h.resolver(g)},i.display===d&&(i.display="In"===b?"auto":"none"),t(this,j,i)}}),t}(window.jQuery||window.Zepto||window,window,document)}),!function(a){"function"==typeof require&&"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(["velocity"],a):a()}(function(){return function(a,b,c,d){function e(a,b){var c=[];return a&&b?(g.each([a,b],function(a,b){var d=[];g.each(b,function(a,b){for(;b.toString().length<5;)b="0"+b;d.push(b)}),c.push(d.join(""))}),parseFloat(c[0])>parseFloat(c[1])):!1}if(!a.Velocity||!a.Velocity.Utilities)return void(b.console&&console.log("Velocity UI Pack: Velocity must be loaded first. Aborting."));var f=a.Velocity,g=f.Utilities,h=f.version,i={major:1,minor:1,patch:0};if(e(i,h)){var j="Velocity UI Pack: You need to update Velocity (jquery.velocity.js) to a newer version. Visit http://github.com/julianshapiro/velocity.";throw alert(j),new Error(j)}f.RegisterEffect=f.RegisterUI=function(a,b){function c(a,b,c,d){var e,h=0;g.each(a.nodeType?[a]:a,function(a,b){d&&(c+=a*d),e=b.parentNode,g.each(["height","paddingTop","paddingBottom","marginTop","marginBottom"],function(a,c){h+=parseFloat(f.CSS.getPropertyValue(b,c))})}),f.animate(e,{height:("In"===b?"+":"-")+"="+h},{queue:!1,easing:"ease-in-out",duration:c*("In"===b?.6:1)})}return f.Redirects[a]=function(e,h,i,j,k,l){function m(){h.display!==d&&"none"!==h.display||!/Out$/.test(a)||g.each(k.nodeType?[k]:k,function(a,b){f.CSS.setPropertyValue(b,"display","none")}),h.complete&&h.complete.call(k,k),l&&l.resolver(k||e)}var n=i===j-1;b.defaultDuration="function"==typeof b.defaultDuration?b.defaultDuration.call(k,k):parseFloat(b.defaultDuration);for(var o=0;o<b.calls.length;o++){var p=b.calls[o],q=p[0],r=h.duration||b.defaultDuration||1e3,s=p[1],t=p[2]||{},u={};if(u.duration=r*(s||1),u.queue=h.queue||"",u.easing=t.easing||"ease",u.delay=parseFloat(t.delay)||0,u._cacheValues=t._cacheValues||!0,0===o){if(u.delay+=parseFloat(h.delay)||0,0===i&&(u.begin=function(){h.begin&&h.begin.call(k,k);var b=a.match(/(In|Out)$/);b&&"In"===b[0]&&q.opacity!==d&&g.each(k.nodeType?[k]:k,function(a,b){f.CSS.setPropertyValue(b,"opacity",0)}),h.animateParentHeight&&b&&c(k,b[0],r+u.delay,h.stagger)}),null!==h.display)if(h.display!==d&&"none"!==h.display)u.display=h.display;else if(/In$/.test(a)){var v=f.CSS.Values.getDisplayType(e);u.display="inline"===v?"inline-block":v}h.visibility&&"hidden"!==h.visibility&&(u.visibility=h.visibility)}o===b.calls.length-1&&(u.complete=function(){if(b.reset){for(var a in b.reset){var c=b.reset[a];f.CSS.Hooks.registered[a]!==d||"string"!=typeof c&&"number"!=typeof c||(b.reset[a]=[b.reset[a],b.reset[a]])}var g={duration:0,queue:!1};n&&(g.complete=m),f.animate(e,b.reset,g)}else n&&m()},"hidden"===h.visibility&&(u.visibility=h.visibility)),f.animate(e,q,u)}},f},f.RegisterEffect.packagedEffects={"callout.bounce":{defaultDuration:550,calls:[[{translateY:-30},.25],[{translateY:0},.125],[{translateY:-15},.125],[{translateY:0},.25]]},"callout.shake":{defaultDuration:800,calls:[[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:0},.125]]},"callout.flash":{defaultDuration:1100,calls:[[{opacity:[0,"easeInOutQuad",1]},.25],[{opacity:[1,"easeInOutQuad"]},.25],[{opacity:[0,"easeInOutQuad"]},.25],[{opacity:[1,"easeInOutQuad"]},.25]]},"callout.pulse":{defaultDuration:825,calls:[[{scaleX:1.1,scaleY:1.1},.5,{easing:"easeInExpo"}],[{scaleX:1,scaleY:1},.5]]},"callout.swing":{defaultDuration:950,calls:[[{rotateZ:15},.2],[{rotateZ:-10},.2],[{rotateZ:5},.2],[{rotateZ:-5},.2],[{rotateZ:0},.2]]},"callout.tada":{defaultDuration:1e3,calls:[[{scaleX:.9,scaleY:.9,rotateZ:-3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:-3},.1],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],[{scaleX:1,scaleY:1,rotateZ:0},.2]]},"transition.fadeIn":{defaultDuration:500,calls:[[{opacity:[1,0]}]]},"transition.fadeOut":{defaultDuration:500,calls:[[{opacity:[0,1]}]]},"transition.flipXIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateY:[0,-55]}]],reset:{transformPerspective:0}},"transition.flipXOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateY:55}]],reset:{transformPerspective:0,rotateY:0}},"transition.flipYIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateX:[0,-45]}]],reset:{transformPerspective:0}},"transition.flipYOut":{defaultDuration:800,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateX:25}]],reset:{transformPerspective:0,rotateX:0}},"transition.flipBounceXIn":{defaultDuration:900,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateY:[-10,90]},.5],[{opacity:.8,rotateY:10},.25],[{opacity:1,rotateY:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceXOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateY:-10},.5],[{opacity:0,rotateY:90},.5]],reset:{transformPerspective:0,rotateY:0}},"transition.flipBounceYIn":{defaultDuration:850,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateX:[-10,90]},.5],[{opacity:.8,rotateX:10},.25],[{opacity:1,rotateX:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceYOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateX:-15},.5],[{opacity:0,rotateX:90},.5]],reset:{transformPerspective:0,rotateX:0}},"transition.swoopIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["100%","50%"],transformOriginY:["100%","100%"],scaleX:[1,0],scaleY:[1,0],translateX:[0,-700],translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%"}},"transition.swoopOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformOriginX:["50%","100%"],transformOriginY:["100%","100%"],scaleX:0,scaleY:0,translateX:-700,translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%",scaleX:1,scaleY:1,translateX:0}},"transition.whirlIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,0],scaleY:[1,0],rotateY:[0,160]},1,{easing:"easeInOutSine"}]]},"transition.whirlOut":{defaultDuration:750,calls:[[{opacity:[0,"easeInOutQuint",1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:0,scaleY:0,rotateY:160},1,{easing:"swing"}]],reset:{scaleX:1,scaleY:1,rotateY:0}},"transition.shrinkIn":{defaultDuration:750,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,1.5],scaleY:[1,1.5],translateZ:0}]]},"transition.shrinkOut":{defaultDuration:600,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:1.3,scaleY:1.3,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.expandIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,.625],scaleY:[1,.625],translateZ:0}]]},"transition.expandOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:.5,scaleY:.5,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.bounceIn":{defaultDuration:800,calls:[[{opacity:[1,0],scaleX:[1.05,.3],scaleY:[1.05,.3]},.4],[{scaleX:.9,scaleY:.9,translateZ:0},.2],[{scaleX:1,scaleY:1},.5]]},"transition.bounceOut":{defaultDuration:800,calls:[[{scaleX:.95,scaleY:.95},.35],[{scaleX:1.1,scaleY:1.1,translateZ:0},.35],[{opacity:[0,1],scaleX:.3,scaleY:.3},.3]],reset:{scaleX:1,scaleY:1}},"transition.bounceUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[-30,1e3]},.6,{easing:"easeOutCirc"}],[{translateY:10},.2],[{translateY:0},.2]]},"transition.bounceUpOut":{defaultDuration:1e3,calls:[[{translateY:20},.2],[{opacity:[0,"easeInCirc",1],translateY:-1e3},.8]],reset:{translateY:0}},"transition.bounceDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[30,-1e3]},.6,{easing:"easeOutCirc"}],[{translateY:-10},.2],[{translateY:0},.2]]},"transition.bounceDownOut":{defaultDuration:1e3,calls:[[{translateY:-20},.2],[{opacity:[0,"easeInCirc",1],translateY:1e3},.8]],reset:{translateY:0}},"transition.bounceLeftIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[30,-1250]},.6,{easing:"easeOutCirc"}],[{translateX:-10},.2],[{translateX:0},.2]]},"transition.bounceLeftOut":{defaultDuration:750,calls:[[{translateX:30},.2],[{opacity:[0,"easeInCirc",1],translateX:-1250},.8]],reset:{translateX:0}},"transition.bounceRightIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[-30,1250]},.6,{easing:"easeOutCirc"}],[{translateX:10},.2],[{translateX:0},.2]]},"transition.bounceRightOut":{defaultDuration:750,calls:[[{translateX:-30},.2],[{opacity:[0,"easeInCirc",1],translateX:1250},.8]],reset:{translateX:0}},"transition.slideUpIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,20],translateZ:0}]]},"transition.slideUpOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:-20,translateZ:0}]],reset:{translateY:0}},"transition.slideDownIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,-20],translateZ:0}]]},"transition.slideDownOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:20,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,-20],translateZ:0}]]},"transition.slideLeftOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:-20,translateZ:0}]],reset:{translateX:0}},"transition.slideRightIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,20],translateZ:0}]]},"transition.slideRightOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:20,translateZ:0}]],reset:{translateX:0}},"transition.slideUpBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,75],translateZ:0}]]},"transition.slideUpBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:-75,translateZ:0}]],reset:{translateY:0}},"transition.slideDownBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,-75],translateZ:0}]]},"transition.slideDownBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:75,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,-75],translateZ:0}]]},"transition.slideLeftBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:-75,translateZ:0}]],reset:{translateX:0}},"transition.slideRightBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,75],translateZ:0}]]},"transition.slideRightBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:75,translateZ:0}]],reset:{translateX:0}},"transition.perspectiveUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveUpOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveDownOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveLeftIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveLeftOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}},"transition.perspectiveRightIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveRightOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}}};for(var k in f.RegisterEffect.packagedEffects)f.RegisterEffect(k,f.RegisterEffect.packagedEffects[k]);f.RunSequence=function(a){var b=g.extend(!0,[],a);b.length>1&&(g.each(b.reverse(),function(a,c){var d=b[a+1];if(d){var e=c.o||c.options,h=d.o||d.options,i=e&&e.sequenceQueue===!1?"begin":"complete",j=h&&h[i],k={};k[i]=function(){var a=d.e||d.elements,b=a.nodeType?[a]:a;j&&j.call(b,b),f(c)},d.o?d.o=g.extend({},h,k):d.options=g.extend({},h,k)}}),b.reverse()),f(b[0])}}(window.jQuery||window.Zepto||window,window,document)}),!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Pusher=b():a.Pusher=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";var d=c(1);a.exports=d["default"]},function(a,b,c){"use strict";function d(a){if(null===a||void 0===a)throw"You must pass your app key when you instantiate Pusher."}var e=c(2),f=c(9),g=c(23),h=c(38),i=c(39),j=c(40),k=c(12),l=c(5),m=c(62),n=c(8),o=c(42),p=function(){function a(b,c){var k=this;d(b),c=c||{},this.key=b,this.config=f.extend(m.getGlobalConfig(),c.cluster?m.getClusterConfig(c.cluster):{},c),this.channels=o["default"].createChannels(),this.global_emitter=new g["default"],this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new h["default"](this.key,this.sessionID,{cluster:this.config.cluster,features:a.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:i["default"].INFO,version:l["default"].VERSION}),this.config.disableStats||(this.timelineSender=o["default"].createTimelineSender(this.timeline,{
host:this.config.statsHost,path:"/timeline/v2/"+e["default"].TimelineTransport.name}));var p=function(a){var b=f.extend({},k.config,a);return j.build(e["default"].getDefaultStrategy(b),b)};this.connection=o["default"].createConnectionManager(this.key,f.extend({getStrategy:p,timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){k.subscribeAll(),k.timelineSender&&k.timelineSender.send(k.connection.isEncrypted())}),this.connection.bind("message",function(a){var b=0===a.event.indexOf("pusher_internal:");if(a.channel){var c=k.channel(a.channel);c&&c.handleEvent(a.event,a.data)}b||k.global_emitter.emit(a.event,a.data)}),this.connection.bind("disconnected",function(){k.channels.disconnect()}),this.connection.bind("error",function(a){n["default"].warn("Error",a)}),a.instances.push(this),this.timeline.info({instances:a.instances.length}),a.isReady&&this.connect()}return a.ready=function(){a.isReady=!0;for(var b=0,c=a.instances.length;c>b;b++)a.instances[b].connect()},a.log=function(b){var c=Function("return this")();a.logToConsole&&c.console&&c.console.log&&c.console.log(b)},a.getClientFeatures=function(){return f.keys(f.filterObject({ws:e["default"].Transports.ws},function(a){return a.isSupported({})}))},a.prototype.channel=function(a){return this.channels.find(a)},a.prototype.allChannels=function(){return this.channels.all()},a.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var a=this.connection.isEncrypted(),b=this.timelineSender;this.timelineSenderTimer=new k.PeriodicTimer(6e4,function(){b.send(a)})}},a.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},a.prototype.bind=function(a,b){return this.global_emitter.bind(a,b),this},a.prototype.bind_all=function(a){return this.global_emitter.bind_all(a),this},a.prototype.subscribeAll=function(){var a;for(a in this.channels.channels)this.channels.channels.hasOwnProperty(a)&&this.subscribe(a)},a.prototype.subscribe=function(a){var b=this.channels.add(a,this);return"connected"===this.connection.state&&b.subscribe(),b},a.prototype.unsubscribe=function(a){var b=this.channels.remove(a);b&&"connected"===this.connection.state&&b.unsubscribe()},a.prototype.send_event=function(a,b,c){return this.connection.send_event(a,b,c)},a.prototype.isEncrypted=function(){return"https:"===e["default"].getProtocol()?!0:Boolean(this.config.encrypted)},a.instances=[],a.isReady=!1,a.logToConsole=!1,a.Runtime=e["default"],a.ScriptReceivers=e["default"].ScriptReceivers,a.DependenciesReceivers=e["default"].DependenciesReceivers,a.auth_callbacks=e["default"].auth_callbacks,a}();b.__esModule=!0,b["default"]=p,e["default"].setup(p)},function(a,b,c){"use strict";var d=c(3),e=c(7),f=c(14),g=c(15),h=c(16),i=c(4),j=c(17),k=c(18),l=c(25),m=c(26),n=c(27),o=c(28),p={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:i.ScriptReceivers,DependenciesReceivers:d.DependenciesReceivers,getDefaultStrategy:m["default"],Transports:k["default"],transportConnectionInitializer:n["default"],HTTPFactory:o["default"],TimelineTransport:j["default"],getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(a){var b=this;window.Pusher=a;var c=function(){b.onDocumentBody(a.ready)};window.JSON?c():d.Dependencies.load("json2",{},c)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getGlobal:function(){return window},getAuthorizers:function(){return{ajax:e["default"],jsonp:f["default"]}},onDocumentBody:function(a){var b=this;document.body?a():setTimeout(function(){b.onDocumentBody(a)},0)},createJSONPRequest:function(a,b){return new h["default"](a,b)},createScriptRequest:function(a){return new g["default"](a)},getLocalStorage:function(){try{return window.localStorage}catch(a){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var a=this.getXHRAPI();return new a},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return l.Network},createWebSocket:function(a){var b=this.getWebSocketAPI();return new b(a)},createSocketRequest:function(a,b){if(this.isXHRSupported())return this.HTTPFactory.createXHR(a,b);if(this.isXDRSupported(0===b.indexOf("https:")))return this.HTTPFactory.createXDR(a,b);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var a=this.getXHRAPI();return Boolean(a)&&void 0!==(new a).withCredentials},isXDRSupported:function(a){var b=a?"https:":"http:",c=this.getProtocol();return Boolean(window.XDomainRequest)&&c===b},addUnloadListener:function(a){void 0!==window.addEventListener?window.addEventListener("unload",a,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",a)},removeUnloadListener:function(a){void 0!==window.addEventListener?window.removeEventListener("unload",a,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",a)}};b.__esModule=!0,b["default"]=p},function(a,b,c){"use strict";var d=c(4),e=c(5),f=c(6);b.DependenciesReceivers=new d.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers"),b.Dependencies=new f["default"]({cdn_http:e["default"].cdn_http,cdn_https:e["default"].cdn_https,version:e["default"].VERSION,suffix:e["default"].dependency_suffix,receivers:b.DependenciesReceivers})},function(a,b){"use strict";var c=function(){function a(a,b){this.lastId=0,this.prefix=a,this.name=b}return a.prototype.create=function(a){this.lastId++;var b=this.lastId,c=this.prefix+b,d=this.name+"["+b+"]",e=!1,f=function(){e||(a.apply(null,arguments),e=!0)};return this[b]=f,{number:b,id:c,name:d,callback:f}},a.prototype.remove=function(a){delete this[a.number]},a}();b.ScriptReceiverFactory=c,b.ScriptReceivers=new c("_pusher_script_","Pusher.ScriptReceivers")},function(a,b){"use strict";var c={VERSION:"3.1.0",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12e4,pong_timeout:3e4,unavailable_timeout:1e4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:".min"};b.__esModule=!0,b["default"]=c},function(a,b,c){"use strict";var d=c(4),e=c(2),f=function(){function a(a){this.options=a,this.receivers=a.receivers||d.ScriptReceivers,this.loading={}}return a.prototype.load=function(a,b,c){var d=this;if(d.loading[a]&&d.loading[a].length>0)d.loading[a].push(c);else{d.loading[a]=[c];var f=e["default"].createScriptRequest(d.getPath(a,b)),g=d.receivers.create(function(b){if(d.receivers.remove(g),d.loading[a]){var c=d.loading[a];delete d.loading[a];for(var e=function(a){a||f.cleanup()},h=0;h<c.length;h++)c[h](b,e)}});f.send(g)}},a.prototype.getRoot=function(a){var b,c=e["default"].getDocument().location.protocol;return b=a&&a.encrypted||"https:"===c?this.options.cdn_https:this.options.cdn_http,b.replace(/\/*$/,"")+"/"+this.options.version},a.prototype.getPath=function(a,b){return this.getRoot(b)+"/"+a+this.options.suffix+".js"},a}();b.__esModule=!0,b["default"]=f},function(a,b,c){"use strict";var d=c(8),e=c(2),f=function(a,b,c){var f,g=this;f=e["default"].createXHR(),f.open("POST",g.options.authEndpoint,!0),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var h in this.authOptions.headers)f.setRequestHeader(h,this.authOptions.headers[h]);return f.onreadystatechange=function(){if(4===f.readyState)if(200===f.status){var a,b=!1;try{a=JSON.parse(f.responseText),b=!0}catch(e){c(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+f.responseText)}b&&c(!1,a)}else d["default"].warn("Couldn't get auth info from your webapp",f.status),c(!0,f.status)},f.send(this.composeQuery(b)),f};b.__esModule=!0,b["default"]=f},function(a,b,c){"use strict";var d=c(9),e=c(1),f={debug:function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];e["default"].log&&e["default"].log(d.stringify.apply(this,arguments))},warn:function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=d.stringify.apply(this,arguments),f=Function("return this")();f.console&&(f.console.warn?f.console.warn(c):f.console.log&&f.console.log(c)),e["default"].log&&e["default"].log(c)}};b.__esModule=!0,b["default"]=f},function(a,b,c){"use strict";function d(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var e=0;e<b.length;e++){var f=b[e];for(var g in f)f[g]&&f[g].constructor&&f[g].constructor===Object?a[g]=d(a[g]||{},f[g]):a[g]=f[g]}return a}function e(){for(var a=["Pusher"],b=0;b<arguments.length;b++)"string"==typeof arguments[b]?a.push(arguments[b]):a.push(JSON.stringify(arguments[b]));return a.join(" : ")}function f(a,b){var c=Array.prototype.indexOf;if(null===a)return-1;if(c&&a.indexOf===c)return a.indexOf(b);for(var d=0,e=a.length;e>d;d++)if(a[d]===b)return d;return-1}function g(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(a[c],c,a)}function h(a){var b=[];return g(a,function(a,c){b.push(c)}),b}function i(a){var b=[];return g(a,function(a){b.push(a)}),b}function j(a,b,c){for(var d=0;d<a.length;d++)b.call(c||w,a[d],d,a)}function k(a,b){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d,a,c));return c}function l(a,b){var c={};return g(a,function(a,d){c[d]=b(a)}),c}function m(a,b){b=b||function(a){return!!a};for(var c=[],d=0;d<a.length;d++)b(a[d],d,a,c)&&c.push(a[d]);return c}function n(a,b){var c={};return g(a,function(d,e){(b&&b(d,e,a,c)||Boolean(d))&&(c[e]=d)}),c}function o(a){var b=[];return g(a,function(a,c){b.push([c,a])}),b}function p(a,b){for(var c=0;c<a.length;c++)if(b(a[c],c,a))return!0;return!1}function q(a,b){for(var c=0;c<a.length;c++)if(!b(a[c],c,a))return!1;return!0}function r(a){return l(a,function(a){return"object"==typeof a&&(a=JSON.stringify(a)),encodeURIComponent(u["default"](a.toString()))})}function s(a){var b=n(a,function(a){return void 0!==a}),c=k(o(r(b)),v["default"].method("join","=")).join("&");return c}function t(a){var b=[],c=JSON.stringify(a,function(a,c){if("object"==typeof c&&null!==c){if(-1!==b.indexOf(c))return;b.push(c)}return c});return b=null,c}var u=c(10),v=c(11),w=Function("return this")();b.extend=d,b.stringify=e,b.arrayIndexOf=f,b.objectApply=g,b.keys=h,b.values=i,b.apply=j,b.map=k,b.mapObject=l,b.filter=m,b.filterObject=n,b.flatten=o,b.any=p,b.all=q,b.encodeParamsObject=r,b.buildQueryString=s,b.safeJSONStringify=t},function(a,b){"use strict";function c(a){return m(k(a))}var d=Function("return this")();b.__esModule=!0,b["default"]=c;for(var e=String.fromCharCode,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g={},h=0,i=f.length;i>h;h++)g[f.charAt(h)]=h;var j=function(a){var b=a.charCodeAt(0);return 128>b?a:2048>b?e(192|b>>>6)+e(128|63&b):e(224|b>>>12&15)+e(128|b>>>6&63)+e(128|63&b)},k=function(a){return a.replace(/[^\x00-\x7F]/g,j)},l=function(a){var b=[0,2,1][a.length%3],c=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0),d=[f.charAt(c>>>18),f.charAt(c>>>12&63),b>=2?"=":f.charAt(c>>>6&63),b>=1?"=":f.charAt(63&c)];return d.join("")},m=d.btoa||function(a){return a.replace(/[\s\S]{1,3}/g,l)}},function(a,b,c){"use strict";var d=c(12),e={getGlobal:function(){return Function("return this")()},now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(a){return new d.OneOffTimer(0,a)},method:function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=Array.prototype.slice.call(arguments,1);return function(b){return b[a].apply(b,d.concat(arguments))}}};b.__esModule=!0,b["default"]=e},function(a,b,c){"use strict";function d(a){h.clearTimeout(a)}function e(a){h.clearInterval(a)}var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=c(13),h=Function("return this")(),i=function(a){function b(b,c){a.call(this,setTimeout,d,b,function(a){return c(),null})}return f(b,a),b}(g["default"]);b.OneOffTimer=i;var j=function(a){function b(b,c){a.call(this,setInterval,e,b,function(a){return c(),a})}return f(b,a),b}(g["default"]);b.PeriodicTimer=j},function(a,b){"use strict";var c=function(){function a(a,b,c,d){var e=this;this.clear=b,this.timer=a(function(){e.timer&&(e.timer=d(e.timer))},c)}return a.prototype.isRunning=function(){return null!==this.timer},a.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},a}();b.__esModule=!0,b["default"]=c},function(a,b,c){"use strict";var d=c(8),e=function(a,b,c){void 0!==this.authOptions.headers&&d["default"].warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var e=a.nextAuthCallbackID.toString();a.nextAuthCallbackID++;var f=a.getDocument(),g=f.createElement("script");a.auth_callbacks[e]=function(a){c(!1,a)};var h="Pusher.auth_callbacks['"+e+"']";g.src=this.options.authEndpoint+"?callback="+encodeURIComponent(h)+"&"+this.composeQuery(b);var i=f.getElementsByTagName("head")[0]||f.documentElement;i.insertBefore(g,i.firstChild)};b.__esModule=!0,b["default"]=e},function(a,b){"use strict";var c=function(){function a(a){this.src=a}return a.prototype.send=function(a){var b=this,c="Error loading "+b.src;b.script=document.createElement("script"),b.script.id=a.id,b.script.src=b.src,b.script.type="text/javascript",b.script.charset="UTF-8",b.script.addEventListener?(b.script.onerror=function(){a.callback(c)},b.script.onload=function(){a.callback(null)}):b.script.onreadystatechange=function(){("loaded"===b.script.readyState||"complete"===b.script.readyState)&&a.callback(null)},void 0===b.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(b.errorScript=document.createElement("script"),b.errorScript.id=a.id+"_error",b.errorScript.text=a.name+"('"+c+"');",b.script.async=b.errorScript.async=!1):b.script.async=!0;var d=document.getElementsByTagName("head")[0];d.insertBefore(b.script,d.firstChild),b.errorScript&&d.insertBefore(b.errorScript,b.script.nextSibling)},a.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},a}();b.__esModule=!0,b["default"]=c},function(a,b,c){"use strict";var d=c(9),e=c(2),f=function(){function a(a,b){this.url=a,this.data=b}return a.prototype.send=function(a){if(!this.request){var b=d.buildQueryString(this.data),c=this.url+"/"+a.number+"?"+b;this.request=e["default"].createScriptRequest(c),this.request.send(a)}},a.prototype.cleanup=function(){this.request&&this.request.cleanup()},a}();b.__esModule=!0,b["default"]=f},function(a,b,c){"use strict";var d=c(2),e=c(4),f=function(a,b){return function(c,f){var g="http"+(b?"s":"")+"://",h=g+(a.host||a.options.host)+a.options.path,i=d["default"].createJSONPRequest(h,c),j=d["default"].ScriptReceivers.create(function(b,c){e.ScriptReceivers.remove(j),i.cleanup(),c&&c.host&&(a.host=c.host),f&&f(b,c)});i.send(j)}},g={name:"jsonp",getAgent:f};b.__esModule=!0,b["default"]=g},function(a,b,c){"use strict";var d=c(19),e=c(21),f=c(20),g=c(2),h=c(3),i=c(9),j=new e["default"]({file:"sockjs",urls:f.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(a,b){return new window.SockJS(a,null,{js_path:h.Dependencies.getPath("sockjs",{encrypted:b.encrypted}),ignore_null_origin:b.ignoreNullOrigin})},beforeOpen:function(a,b){a.send(JSON.stringify({path:b}))}}),k={isSupported:function(a){var b=g["default"].isXDRSupported(a.encrypted);return b}},l=new e["default"](i.extend({},d.streamingConfiguration,k)),m=new e["default"](i.extend({},d.pollingConfiguration,k));d["default"].xdr_streaming=l,d["default"].xdr_polling=m,d["default"].sockjs=j,b.__esModule=!0,b["default"]=d["default"]},function(a,b,c){"use strict";var d=c(20),e=c(21),f=c(9),g=c(2),h=new e["default"]({urls:d.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(g["default"].getWebSocketAPI())},isSupported:function(){return Boolean(g["default"].getWebSocketAPI())},getSocket:function(a){return g["default"].createWebSocket(a)}}),i={urls:d.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}};b.streamingConfiguration=f.extend({getSocket:function(a){return g["default"].HTTPFactory.createStreamingSocket(a)}},i),b.pollingConfiguration=f.extend({getSocket:function(a){return g["default"].HTTPFactory.createPollingSocket(a)}},i);var j={isSupported:function(){return g["default"].isXHRSupported()}},k=new e["default"](f.extend({},b.streamingConfiguration,j)),l=new e["default"](f.extend({},b.pollingConfiguration,j)),m={ws:h,xhr_streaming:k,xhr_polling:l};b.__esModule=!0,b["default"]=m},function(a,b,c){"use strict";function d(a,b,c){var d=a+(b.encrypted?"s":""),e=b.encrypted?b.hostEncrypted:b.hostUnencrypted;return d+"://"+e+c}function e(a,b){var c="/app/"+a,d="?protocol="+f["default"].PROTOCOL+"&client=js&version="+f["default"].VERSION+(b?"&"+b:"");return c+d}var f=c(5);b.ws={getInitial:function(a,b){return d("ws",b,e(a,"flash=false"))}},b.http={getInitial:function(a,b){var c=(b.httpPath||"/pusher")+e(a);return d("http",b,c)}},b.sockjs={getInitial:function(a,b){return d("http",b,b.httpPath||"/pusher")},getPath:function(a,b){return e(a)}}},function(a,b,c){"use strict";var d=c(22),e=function(){function a(a){this.hooks=a}return a.prototype.isSupported=function(a){return this.hooks.isSupported(a)},a.prototype.createConnection=function(a,b,c,e){return new d["default"](this.hooks,a,b,c,e)},a}();b.__esModule=!0,b["default"]=e},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(11),f=c(9),g=c(23),h=c(8),i=c(2),j=function(a){function b(b,c,d,e,f){a.call(this),this.initialize=i["default"].transportConnectionInitializer,this.hooks=b,this.name=c,this.priority=d,this.key=e,this.options=f,this.state="new",this.timeline=f.timeline,this.activityTimeout=f.activityTimeout,this.id=this.timeline.generateUniqueID()}return d(b,a),b.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},b.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},b.prototype.connect=function(){var a=this;if(this.socket||"initialized"!==this.state)return!1;var b=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(b,this.options)}catch(c){return e["default"].defer(function(){a.onError(c),a.changeState("closed")}),!1}return this.bindListeners(),h["default"].debug("Connecting",{transport:this.name,url:b}),this.changeState("connecting"),!0},b.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1},b.prototype.send=function(a){var b=this;return"open"===this.state?(e["default"].defer(function(){b.socket&&b.socket.send(a)}),!0):!1},b.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},b.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},b.prototype.onError=function(a){this.emit("error",{type:"WebSocketError",error:a}),this.timeline.error(this.buildTimelineMessage({error:a.toString()}))},b.prototype.onClose=function(a){a?this.changeState("closed",{code:a.code,reason:a.reason,wasClean:a.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},b.prototype.onMessage=function(a){this.emit("message",a)},b.prototype.onActivity=function(){this.emit("activity")},b.prototype.bindListeners=function(){var a=this;this.socket.onopen=function(){a.onOpen()},this.socket.onerror=function(b){a.onError(b)},this.socket.onclose=function(b){a.onClose(b)},this.socket.onmessage=function(b){a.onMessage(b)},this.supportsPing()&&(this.socket.onactivity=function(){a.onActivity()})},b.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},b.prototype.changeState=function(a,b){this.state=a,this.timeline.info(this.buildTimelineMessage({state:a,params:b})),this.emit(a,b)},b.prototype.buildTimelineMessage=function(a){return f.extend({cid:this.id},a)},b}(g["default"]);b.__esModule=!0,b["default"]=j},function(a,b,c){"use strict";var d=c(24),e=Function("return this")(),f=function(){function a(a){this.callbacks=new d["default"],this.global_callbacks=[],this.failThrough=a}return a.prototype.bind=function(a,b,c){return this.callbacks.add(a,b,c),this},a.prototype.bind_all=function(a){return this.global_callbacks.push(a),this},a.prototype.unbind=function(a,b,c){return this.callbacks.remove(a,b,c),this},a.prototype.unbind_all=function(a,b){return this.callbacks.remove(a,b),this},a.prototype.emit=function(a,b){var c;for(c=0;c<this.global_callbacks.length;c++)this.global_callbacks[c](a,b);var d=this.callbacks.get(a);if(d&&d.length>0)for(c=0;c<d.length;c++)d[c].fn.call(d[c].context||e,b);else this.failThrough&&this.failThrough(a,b);return this},a}();b.__esModule=!0,b["default"]=f},function(a,b,c){"use strict";function d(a){return"_"+a}var e=c(9),f=function(){function a(){this._callbacks={}}return a.prototype.get=function(a){return this._callbacks[d(a)]},a.prototype.add=function(a,b,c){var e=d(a);this._callbacks[e]=this._callbacks[e]||[],this._callbacks[e].push({fn:b,context:c})},a.prototype.remove=function(a,b,c){if(!a&&!b&&!c)return void(this._callbacks={});var f=a?[d(a)]:e.keys(this._callbacks);b||c?this.removeCallback(f,b,c):this.removeAllCallbacks(f)},a.prototype.removeCallback=function(a,b,c){e.apply(a,function(a){this._callbacks[a]=e.filter(this._callbacks[a]||[],function(a){return b&&b!==a.fn||c&&c!==a.context}),0===this._callbacks[a].length&&delete this._callbacks[a]},this)},a.prototype.removeAllCallbacks=function(a){e.apply(a,function(a){delete this._callbacks[a]},this)},a}();b.__esModule=!0,b["default"]=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(23),f=function(a){function b(){a.call(this);var b=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){b.emit("online")},!1),window.addEventListener("offline",function(){b.emit("offline")},!1))}return d(b,a),b.prototype.isOnline=function(){return void 0===window.navigator.onLine?!0:window.navigator.onLine},b}(e["default"]);b.NetInfo=f,b.Network=new f},function(a,b){"use strict";var c=function(a){var b;return b=a.encrypted?[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_fallback_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_fallback_loop"]]],[[":def","ws_options",{hostUnencrypted:a.wsHost+":"+a.wsPort,hostEncrypted:a.wsHost+":"+a.wssPort}],[":def","wss_options",[":extend",":ws_options",{encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:a.httpHost+":"+a.httpPort,hostEncrypted:a.httpHost+":"+a.httpsPort,httpPath:a.httpPath}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:a.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:a.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling","xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],b,":http_fallback_loop"]]]]]};b.__esModule=!0,b["default"]=c},function(a,b,c){"use strict";function d(){var a=this;a.timeline.info(a.buildTimelineMessage({transport:a.name+(a.options.encrypted?"s":"")})),a.hooks.isInitialized()?a.changeState("initialized"):a.hooks.file?(a.changeState("initializing"),e.Dependencies.load(a.hooks.file,{encrypted:a.options.encrypted},function(b,c){a.hooks.isInitialized()?(a.changeState("initialized"),c(!0)):(b&&a.onError(b),a.onClose(),c(!1))})):a.onClose()}var e=c(3);b.__esModule=!0,b["default"]=d},function(a,b,c){"use strict";var d=c(29),e=c(31);e["default"].createXDR=function(a,b){return this.createRequest(d["default"],a,b)},b.__esModule=!0,b["default"]=e["default"]},function(a,b,c){"use strict";var d=c(30),e={getRequest:function(a){var b=new window.XDomainRequest;return b.ontimeout=function(){a.emit("error",new d.RequestTimedOut),a.close()},b.onerror=function(b){a.emit("error",b),a.close()},b.onprogress=function(){b.responseText&&b.responseText.length>0&&a.onChunk(200,b.responseText)},b.onload=function(){b.responseText&&b.responseText.length>0&&a.onChunk(200,b.responseText),a.emit("finished",200),a.close()},b},abortRequest:function(a){a.ontimeout=a.onerror=a.onprogress=a.onload=null,a.abort()}};b.__esModule=!0,b["default"]=e},function(a,b){"use strict";var c=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},d=function(a){function b(){a.apply(this,arguments)}return c(b,a),b}(Error);b.BadEventName=d;var e=function(a){function b(){a.apply(this,arguments)}return c(b,a),b}(Error);b.RequestTimedOut=e;var f=function(a){function b(){a.apply(this,arguments)}return c(b,a),b}(Error);b.TransportPriorityTooLow=f;var g=function(a){function b(){a.apply(this,arguments)}return c(b,a),b}(Error);b.TransportClosed=g;var h=function(a){function b(){a.apply(this,arguments)}return c(b,a),b}(Error);b.UnsupportedTransport=h;var i=function(a){function b(){a.apply(this,arguments)}return c(b,a),b}(Error);b.UnsupportedStrategy=i},function(a,b,c){"use strict";var d=c(32),e=c(33),f=c(35),g=c(36),h=c(37),i={createStreamingSocket:function(a){return this.createSocket(f["default"],a)},createPollingSocket:function(a){return this.createSocket(g["default"],a)},createSocket:function(a,b){return new e["default"](a,b)},createXHR:function(a,b){return this.createRequest(h["default"],a,b)},createRequest:function(a,b,c){return new d["default"](a,b,c)}};b.__esModule=!0,b["default"]=i},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(2),f=c(23),g=262144,h=function(a){function b(b,c,d){a.call(this),this.hooks=b,this.method=c,this.url=d}return d(b,a),b.prototype.start=function(a){var b=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){b.close()},e["default"].addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(a)},b.prototype.close=function(){this.unloader&&(e["default"].removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},b.prototype.onChunk=function(a,b){for(;;){var c=this.advanceBuffer(b);if(!c)break;this.emit("chunk",{status:a,data:c})}this.isBufferTooLong(b)&&this.emit("buffer_too_long")},b.prototype.advanceBuffer=function(a){var b=a.slice(this.position),c=b.indexOf("\n");return-1!==c?(this.position+=c+1,b.slice(0,c)):null},b.prototype.isBufferTooLong=function(a){return this.position===a.length&&a.length>g},b}(f["default"]);b.__esModule=!0,b["default"]=h},function(a,b,c){"use strict";function d(a){var b=/([^\?]*)\/*(\??.*)/.exec(a);return{base:b[1],queryString:b[2]}}function e(a,b){return a.base+"/"+b+"/xhr_send"}function f(a){var b=-1===a.indexOf("?")?"?":"&";return a+b+"t="+ +new Date+"&n="+m++}function g(a,b){var c=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(a);return c[1]+b+c[3]}function h(a){return Math.floor(Math.random()*a)}function i(a){for(var b=[],c=0;a>c;c++)b.push(h(32).toString(32));return b.join("")}var j=c(34),k=c(11),l=c(2),m=1,n=function(){function a(a,b){this.hooks=a,this.session=h(1e3)+"/"+i(8),this.location=d(b),this.readyState=j["default"].CONNECTING,this.openStream()}return a.prototype.send=function(a){return this.sendRaw(JSON.stringify([a]))},a.prototype.ping=function(){this.hooks.sendHeartbeat(this)},a.prototype.close=function(a,b){this.onClose(a,b,!0)},a.prototype.sendRaw=function(a){if(this.readyState!==j["default"].OPEN)return!1;try{return l["default"].createSocketRequest("POST",f(e(this.location,this.session))).start(a),!0}catch(b){return!1}},a.prototype.reconnect=function(){this.closeStream(),this.openStream()},a.prototype.onClose=function(a,b,c){this.closeStream(),this.readyState=j["default"].CLOSED,this.onclose&&this.onclose({code:a,reason:b,wasClean:c})},a.prototype.onChunk=function(a){if(200===a.status){this.readyState===j["default"].OPEN&&this.onActivity();var b,c=a.data.slice(0,1);switch(c){case"o":b=JSON.parse(a.data.slice(1)||"{}"),this.onOpen(b);break;case"a":b=JSON.parse(a.data.slice(1)||"[]");for(var d=0;d<b.length;d++)this.onEvent(b[d]);break;case"m":b=JSON.parse(a.data.slice(1)||"null"),this.onEvent(b);break;case"h":this.hooks.onHeartbeat(this);break;case"c":b=JSON.parse(a.data.slice(1)||"[]"),this.onClose(b[0],b[1],!0)}}},a.prototype.onOpen=function(a){this.readyState===j["default"].CONNECTING?(a&&a.hostname&&(this.location.base=g(this.location.base,a.hostname)),this.readyState=j["default"].OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},a.prototype.onEvent=function(a){this.readyState===j["default"].OPEN&&this.onmessage&&this.onmessage({data:a})},a.prototype.onActivity=function(){this.onactivity&&this.onactivity()},a.prototype.onError=function(a){this.onerror&&this.onerror(a)},a.prototype.openStream=function(){var a=this;this.stream=l["default"].createSocketRequest("POST",f(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(b){a.onChunk(b)}),this.stream.bind("finished",function(b){a.hooks.onFinished(a,b)}),this.stream.bind("buffer_too_long",function(){a.reconnect()});try{this.stream.start()}catch(b){k["default"].defer(function(){a.onError(b),a.onClose(1006,"Could not start streaming",!1)})}},a.prototype.closeStream=function(){
this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},a}();b.__esModule=!0,b["default"]=n},function(a,b){"use strict";var c;!function(a){a[a.CONNECTING=0]="CONNECTING",a[a.OPEN=1]="OPEN",a[a.CLOSED=3]="CLOSED"}(c||(c={})),b.__esModule=!0,b["default"]=c},function(a,b){"use strict";var c={getReceiveURL:function(a,b){return a.base+"/"+b+"/xhr_streaming"+a.queryString},onHeartbeat:function(a){a.sendRaw("[]")},sendHeartbeat:function(a){a.sendRaw("[]")},onFinished:function(a,b){a.onClose(1006,"Connection interrupted ("+b+")",!1)}};b.__esModule=!0,b["default"]=c},function(a,b){"use strict";var c={getReceiveURL:function(a,b){return a.base+"/"+b+"/xhr"+a.queryString},onHeartbeat:function(){},sendHeartbeat:function(a){a.sendRaw("[]")},onFinished:function(a,b){200===b?a.reconnect():a.onClose(1006,"Connection interrupted ("+b+")",!1)}};b.__esModule=!0,b["default"]=c},function(a,b,c){"use strict";var d=c(2),e={getRequest:function(a){var b=d["default"].getXHRAPI(),c=new b;return c.onreadystatechange=c.onprogress=function(){switch(c.readyState){case 3:c.responseText&&c.responseText.length>0&&a.onChunk(c.status,c.responseText);break;case 4:c.responseText&&c.responseText.length>0&&a.onChunk(c.status,c.responseText),a.emit("finished",c.status),a.close()}},c},abortRequest:function(a){a.onreadystatechange=null,a.abort()}};b.__esModule=!0,b["default"]=e},function(a,b,c){"use strict";var d=c(9),e=c(11),f=c(39),g=function(){function a(a,b,c){this.key=a,this.session=b,this.events=[],this.options=c||{},this.sent=0,this.uniqueID=0}return a.prototype.log=function(a,b){a<=this.options.level&&(this.events.push(d.extend({},b,{timestamp:e["default"].now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},a.prototype.error=function(a){this.log(f["default"].ERROR,a)},a.prototype.info=function(a){this.log(f["default"].INFO,a)},a.prototype.debug=function(a){this.log(f["default"].DEBUG,a)},a.prototype.isEmpty=function(){return 0===this.events.length},a.prototype.send=function(a,b){var c=this,e=d.extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],a(e,function(a,d){a||c.sent++,b&&b(a,d)}),!0},a.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},a}();b.__esModule=!0,b["default"]=g},function(a,b){"use strict";var c;!function(a){a[a.ERROR=3]="ERROR",a[a.INFO=6]="INFO",a[a.DEBUG=7]="DEBUG"}(c||(c={})),b.__esModule=!0,b["default"]=c},function(a,b,c){"use strict";function d(a){return function(b){return[a.apply(this,arguments),b]}}function e(a){return"string"==typeof a&&":"===a.charAt(0)}function f(a,b){return b[a.slice(1)]}function g(a,b){if(0===a.length)return[[],b];var c=j(a[0],b),d=g(a.slice(1),c[1]);return[[c[0]].concat(d[0]),d[1]]}function h(a,b){if(!e(a))return[a,b];var c=f(a,b);if(void 0===c)throw"Undefined symbol "+a;return[c,b]}function i(a,b){if(e(a[0])){var c=f(a[0],b);if(a.length>1){if("function"!=typeof c)throw"Calling non-function "+a[0];var d=[k.extend({},b)].concat(k.map(a.slice(1),function(a){return j(a,k.extend({},b))[0]}));return c.apply(this,d)}return[c,b]}return g(a,b)}function j(a,b){return"string"==typeof a?h(a,b):"object"==typeof a&&a instanceof Array&&a.length>0?i(a,b):[a,b]}var k=c(9),l=c(11),m=c(41),n=c(30),o=c(55),p=c(56),q=c(57),r=c(58),s=c(59),t=c(60),u=c(61),v=c(2),w=v["default"].Transports;b.build=function(a,b){var c=k.extend({},y,b);return j(a,c)[1].strategy};var x={isSupported:function(){return!1},connect:function(a,b){var c=l["default"].defer(function(){b(new n.UnsupportedStrategy)});return{abort:function(){c.ensureAborted()},forceMinPriority:function(){}}}},y={extend:function(a,b,c){return[k.extend({},b,c),a]},def:function(a,b,c){if(void 0!==a[b])throw"Redefining symbol "+b;return a[b]=c,[void 0,a]},def_transport:function(a,b,c,d,e,f){var g=w[c];if(!g)throw new n.UnsupportedTransport(c);var h,i=!(a.enabledTransports&&-1===k.arrayIndexOf(a.enabledTransports,b)||a.disabledTransports&&-1!==k.arrayIndexOf(a.disabledTransports,b));h=i?new o["default"](b,d,f?f.getAssistant(g):g,k.extend({key:a.key,encrypted:a.encrypted,timeline:a.timeline,ignoreNullOrigin:a.ignoreNullOrigin},e)):x;var j=a.def(a,b,h)[1];return j.Transports=a.Transports||{},j.Transports[b]=h,[void 0,j]},transport_manager:d(function(a,b){return new m["default"](b)}),sequential:d(function(a,b){var c=Array.prototype.slice.call(arguments,2);return new p["default"](c,b)}),cached:d(function(a,b,c){return new r["default"](c,a.Transports,{ttl:b,timeline:a.timeline,encrypted:a.encrypted})}),first_connected:d(function(a,b){return new u["default"](b)}),best_connected_ever:d(function(){var a=Array.prototype.slice.call(arguments,1);return new q["default"](a)}),delayed:d(function(a,b,c){return new s["default"](c,{delay:b})}),"if":d(function(a,b,c,d){return new t["default"](b,c,d)}),is_supported:d(function(a,b){return function(){return b.isSupported()}})}},function(a,b,c){"use strict";var d=c(42),e=function(){function a(a){this.options=a||{},this.livesLeft=this.options.lives||1/0}return a.prototype.getAssistant=function(a){return d["default"].createAssistantToTheTransportManager(this,a,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},a.prototype.isAlive=function(){return this.livesLeft>0},a.prototype.reportDeath=function(){this.livesLeft-=1},a}();b.__esModule=!0,b["default"]=e},function(a,b,c){"use strict";var d=c(43),e=c(44),f=c(47),g=c(48),h=c(49),i=c(50),j=c(51),k=c(53),l=c(54),m={createChannels:function(){return new l["default"]},createConnectionManager:function(a,b){return new k["default"](a,b)},createChannel:function(a,b){return new j["default"](a,b)},createPrivateChannel:function(a,b){return new i["default"](a,b)},createPresenceChannel:function(a,b){return new h["default"](a,b)},createTimelineSender:function(a,b){return new g["default"](a,b)},createAuthorizer:function(a,b){return new f["default"](a,b)},createHandshake:function(a,b){return new e["default"](a,b)},createAssistantToTheTransportManager:function(a,b,c){return new d["default"](a,b,c)}};b.__esModule=!0,b["default"]=m},function(a,b,c){"use strict";var d=c(11),e=c(9),f=function(){function a(a,b,c){this.manager=a,this.transport=b,this.minPingDelay=c.minPingDelay,this.maxPingDelay=c.maxPingDelay,this.pingDelay=void 0}return a.prototype.createConnection=function(a,b,c,f){var g=this;f=e.extend({},f,{activityTimeout:this.pingDelay});var h=this.transport.createConnection(a,b,c,f),i=null,j=function(){h.unbind("open",j),h.bind("closed",k),i=d["default"].now()},k=function(a){if(h.unbind("closed",k),1002===a.code||1003===a.code)g.manager.reportDeath();else if(!a.wasClean&&i){var b=d["default"].now()-i;b<2*g.maxPingDelay&&(g.manager.reportDeath(),g.pingDelay=Math.max(b/2,g.minPingDelay))}};return h.bind("open",j),h},a.prototype.isSupported=function(a){return this.manager.isAlive()&&this.transport.isSupported(a)},a}();b.__esModule=!0,b["default"]=f},function(a,b,c){"use strict";var d=c(9),e=c(45),f=c(46),g=function(){function a(a,b){this.transport=a,this.callback=b,this.bindListeners()}return a.prototype.close=function(){this.unbindListeners(),this.transport.close()},a.prototype.bindListeners=function(){var a=this;this.onMessage=function(b){a.unbindListeners();var c;try{c=e.processHandshake(b)}catch(d){return a.finish("error",{error:d}),void a.transport.close()}"connected"===c.action?a.finish("connected",{connection:new f["default"](c.id,a.transport),activityTimeout:c.activityTimeout}):(a.finish(c.action,{error:c.error}),a.transport.close())},this.onClosed=function(b){a.unbindListeners();var c=e.getCloseAction(b)||"backoff",d=e.getCloseError(b);a.finish(c,{error:d})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},a.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},a.prototype.finish=function(a,b){this.callback(d.extend({transport:this.transport,action:a},b))},a}();b.__esModule=!0,b["default"]=g},function(a,b){"use strict";b.decodeMessage=function(a){try{var b=JSON.parse(a.data);if("string"==typeof b.data)try{b.data=JSON.parse(b.data)}catch(c){if(!(c instanceof SyntaxError))throw c}return b}catch(c){throw{type:"MessageParseError",error:c,data:a.data}}},b.encodeMessage=function(a){return JSON.stringify(a)},b.processHandshake=function(a){if(a=b.decodeMessage(a),"pusher:connection_established"===a.event){if(!a.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:a.data.socket_id,activityTimeout:1e3*a.data.activity_timeout}}if("pusher:error"===a.event)return{action:this.getCloseAction(a.data),error:this.getCloseError(a.data)};throw"Invalid handshake"},b.getCloseAction=function(a){return a.code<4e3?a.code>=1002&&a.code<=1004?"backoff":null:4e3===a.code?"ssl_only":a.code<4100?"refused":a.code<4200?"backoff":a.code<4300?"retry":"refused"},b.getCloseError=function(a){return 1e3!==a.code&&1001!==a.code?{type:"PusherError",data:{code:a.code,message:a.reason||a.message}}:null}},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(9),f=c(23),g=c(45),h=c(8),i=function(a){function b(b,c){a.call(this),this.id=b,this.transport=c,this.activityTimeout=c.activityTimeout,this.bindListeners()}return d(b,a),b.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},b.prototype.send=function(a){return this.transport.send(a)},b.prototype.send_event=function(a,b,c){var d={event:a,data:b};return c&&(d.channel=c),h["default"].debug("Event sent",d),this.send(g.encodeMessage(d))},b.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},b.prototype.close=function(){this.transport.close()},b.prototype.bindListeners=function(){var a=this,b={message:function(b){var c;try{c=g.decodeMessage(b)}catch(d){a.emit("error",{type:"MessageParseError",error:d,data:b.data})}if(void 0!==c){switch(h["default"].debug("Event recd",c),c.event){case"pusher:error":a.emit("error",{type:"PusherError",data:c.data});break;case"pusher:ping":a.emit("ping");break;case"pusher:pong":a.emit("pong")}a.emit("message",c)}},activity:function(){a.emit("activity")},error:function(b){a.emit("error",{type:"WebSocketError",error:b})},closed:function(b){c(),b&&b.code&&a.handleCloseEvent(b),a.transport=null,a.emit("closed")}},c=function(){e.objectApply(b,function(b,c){a.transport.unbind(c,b)})};e.objectApply(b,function(b,c){a.transport.bind(c,b)})},b.prototype.handleCloseEvent=function(a){var b=g.getCloseAction(a),c=g.getCloseError(a);c&&this.emit("error",c),b&&this.emit(b)},b}(f["default"]);b.__esModule=!0,b["default"]=i},function(a,b,c){"use strict";var d=c(2),e=function(){function a(a,b){this.channel=a;var c=b.authTransport;if("undefined"==typeof d["default"].getAuthorizers()[c])throw"'"+c+"' is not a recognized auth transport";this.type=c,this.options=b,this.authOptions=(b||{}).auth||{}}return a.prototype.composeQuery=function(a){var b="socket_id="+encodeURIComponent(a)+"&channel_name="+encodeURIComponent(this.channel.name);for(var c in this.authOptions.params)b+="&"+encodeURIComponent(c)+"="+encodeURIComponent(this.authOptions.params[c]);return b},a.prototype.authorize=function(b,c){return a.authorizers=a.authorizers||d["default"].getAuthorizers(),a.authorizers[this.type].call(this,d["default"],b,c)},a}();b.__esModule=!0,b["default"]=e},function(a,b,c){"use strict";var d=c(2),e=function(){function a(a,b){this.timeline=a,this.options=b||{}}return a.prototype.send=function(a,b){this.timeline.isEmpty()||this.timeline.send(d["default"].TimelineTransport.getAgent(this,a),b)},a}();b.__esModule=!0,b["default"]=e},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(50),f=c(8),g=c(52),h=function(a){function b(b,c){a.call(this,b,c),this.members=new g["default"]}return d(b,a),b.prototype.authorize=function(b,c){var d=this;a.prototype.authorize.call(this,b,function(a,b){if(!a){if(void 0===b.channel_data)return f["default"].warn("Invalid auth response for channel '"+d.name+"', expected 'channel_data' field"),void c("Invalid auth response");var e=JSON.parse(b.channel_data);d.members.setMyID(e.user_id)}c(a,b)})},b.prototype.handleEvent=function(a,b){switch(a){case"pusher_internal:subscription_succeeded":this.members.onSubscription(b),this.subscribed=!0,this.emit("pusher:subscription_succeeded",this.members);break;case"pusher_internal:member_added":var c=this.members.addMember(b);this.emit("pusher:member_added",c);break;case"pusher_internal:member_removed":var d=this.members.removeMember(b);d&&this.emit("pusher:member_removed",d);break;default:e["default"].prototype.handleEvent.call(this,a,b)}},b.prototype.disconnect=function(){this.members.reset(),a.prototype.disconnect.call(this)},b}(e["default"]);b.__esModule=!0,b["default"]=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(42),f=c(51),g=function(a){function b(){a.apply(this,arguments)}return d(b,a),b.prototype.authorize=function(a,b){var c=e["default"].createAuthorizer(this,this.pusher.config);return c.authorize(a,b)},b}(f["default"]);b.__esModule=!0,b["default"]=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(23),f=c(30),g=c(8),h=function(a){function b(b,c){a.call(this,function(a,c){g["default"].debug("No callbacks on "+b+" for "+a)}),this.name=b,this.pusher=c,this.subscribed=!1}return d(b,a),b.prototype.authorize=function(a,b){return b(!1,{})},b.prototype.trigger=function(a,b){if(0!==a.indexOf("client-"))throw new f.BadEventName("Event '"+a+"' does not start with 'client-'");return this.pusher.send_event(a,b,this.name)},b.prototype.disconnect=function(){this.subscribed=!1},b.prototype.handleEvent=function(a,b){0===a.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===a&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",b)):this.emit(a,b)},b.prototype.subscribe=function(){var a=this;this.authorize(this.pusher.connection.socket_id,function(b,c){b?a.handleEvent("pusher:subscription_error",c):a.pusher.send_event("pusher:subscribe",{auth:c.auth,channel_data:c.channel_data,channel:a.name})})},b.prototype.unsubscribe=function(){this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},b}(e["default"]);b.__esModule=!0,b["default"]=h},function(a,b,c){"use strict";var d=c(9),e=function(){function a(){this.reset()}return a.prototype.get=function(a){return Object.prototype.hasOwnProperty.call(this.members,a)?{id:a,info:this.members[a]}:null},a.prototype.each=function(a){var b=this;d.objectApply(this.members,function(c,d){a(b.get(d))})},a.prototype.setMyID=function(a){this.myID=a},a.prototype.onSubscription=function(a){this.members=a.presence.hash,this.count=a.presence.count,this.me=this.get(this.myID)},a.prototype.addMember=function(a){return null===this.get(a.user_id)&&this.count++,this.members[a.user_id]=a.user_info,this.get(a.user_id)},a.prototype.removeMember=function(a){var b=this.get(a.user_id);return b&&(delete this.members[a.user_id],this.count--),b},a.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},a}();b.__esModule=!0,b["default"]=e},function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=c(23),f=c(12),g=c(8),h=c(9),i=c(2),j=function(a){function b(b,c){var d=this;a.call(this),this.key=b,this.options=c||{},this.state="initialized",this.connection=null,this.encrypted=!!c.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var e=i["default"].getNetwork();e.bind("online",function(){d.timeline.info({netinfo:"online"}),("connecting"===d.state||"unavailable"===d.state)&&d.retryIn(0)}),e.bind("offline",function(){d.timeline.info({netinfo:"offline"}),d.connection&&d.sendActivityCheck()}),this.updateStrategy()}return d(b,a),b.prototype.connect=function(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported())return void this.updateState("failed");this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},b.prototype.send=function(a){return this.connection?this.connection.send(a):!1},b.prototype.send_event=function(a,b,c){return this.connection?this.connection.send_event(a,b,c):!1},b.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},b.prototype.isEncrypted=function(){return this.encrypted},b.prototype.startConnecting=function(){var a=this,b=function(c,d){c?a.runner=a.strategy.connect(0,b):"error"===d.action?(a.emit("error",{type:"HandshakeError",error:d.error}),a.timeline.error({handshakeError:d.error})):(a.abortConnecting(),a.handshakeCallbacks[d.action](d))};this.runner=this.strategy.connect(0,b)},b.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},b.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var a=this.abandonConnection();a.close()}},b.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},b.prototype.retryIn=function(a){var b=this;this.timeline.info({action:"retry",delay:a}),a>0&&this.emit("connecting_in",Math.round(a/1e3)),this.retryTimer=new f.OneOffTimer(a||0,function(){b.disconnectInternally(),b.connect()})},b.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},b.prototype.setUnavailableTimer=function(){var a=this;this.unavailableTimer=new f.OneOffTimer(this.options.unavailableTimeout,function(){a.updateState("unavailable")})},b.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},b.prototype.sendActivityCheck=function(){var a=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new f.OneOffTimer(this.options.pongTimeout,function(){a.timeline.error({pong_timed_out:a.options.pongTimeout}),a.retryIn(0)})},b.prototype.resetActivityCheck=function(){var a=this;this.stopActivityCheck(),this.connection.handlesActivityChecks()||(this.activityTimer=new f.OneOffTimer(this.activityTimeout,function(){a.sendActivityCheck()}))},b.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},b.prototype.buildConnectionCallbacks=function(){var a=this;return{message:function(b){a.resetActivityCheck(),a.emit("message",b)},ping:function(){a.send_event("pusher:pong",{})},activity:function(){a.resetActivityCheck()},error:function(b){a.emit("error",{type:"WebSocketError",error:b})},closed:function(){a.abandonConnection(),a.shouldRetry()&&a.retryIn(1e3)}}},b.prototype.buildHandshakeCallbacks=function(a){var b=this;return h.extend({},a,{connected:function(a){b.activityTimeout=Math.min(b.options.activityTimeout,a.activityTimeout,a.connection.activityTimeout||1/0),b.clearUnavailableTimer(),b.setConnection(a.connection),b.socket_id=b.connection.id,b.updateState("connected",{socket_id:b.socket_id})}})},b.prototype.buildErrorCallbacks=function(){var a=this,b=function(b){return function(c){c.error&&a.emit("error",{type:"WebSocketError",error:c.error}),b(c)}};return{ssl_only:b(function(){a.encrypted=!0,a.updateStrategy(),a.retryIn(0)}),refused:b(function(){a.disconnect()}),backoff:b(function(){a.retryIn(1e3)}),retry:b(function(){a.retryIn(0)})}},b.prototype.setConnection=function(a){this.connection=a;for(var b in this.connectionCallbacks)this.connection.bind(b,this.connectionCallbacks[b]);this.resetActivityCheck()},b.prototype.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var a in this.connectionCallbacks)this.connection.unbind(a,this.connectionCallbacks[a]);var b=this.connection;return this.connection=null,b}},b.prototype.updateState=function(a,b){var c=this.state;if(this.state=a,c!==a){var d=a;"connected"===d&&(d+=" with new socket ID "+b.socket_id),g["default"].debug("State changed",c+" -> "+d),this.timeline.info({state:a,params:b}),this.emit("state_change",{previous:c,current:a}),this.emit(a,b)}},b.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},b}(e["default"]);b.__esModule=!0,b["default"]=j},function(a,b,c){"use strict";function d(a,b){return 0===a.indexOf("private-")?f["default"].createPrivateChannel(a,b):0===a.indexOf("presence-")?f["default"].createPresenceChannel(a,b):f["default"].createChannel(a,b)}var e=c(9),f=c(42),g=function(){function a(){this.channels={}}return a.prototype.add=function(a,b){return this.channels[a]||(this.channels[a]=d(a,b)),this.channels[a]},a.prototype.all=function(){return e.values(this.channels)},a.prototype.find=function(a){return this.channels[a]},a.prototype.remove=function(a){var b=this.channels[a];return delete this.channels[a],b},a.prototype.disconnect=function(){e.objectApply(this.channels,function(a){a.disconnect()})},a}();b.__esModule=!0,b["default"]=g},function(a,b,c){"use strict";function d(a,b){return f["default"].defer(function(){b(a)}),{abort:function(){},forceMinPriority:function(){}}}var e=c(42),f=c(11),g=c(30),h=c(9),i=function(){function a(a,b,c,d){this.name=a,this.priority=b,this.transport=c,this.options=d||{}}return a.prototype.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})},a.prototype.connect=function(a,b){var c=this;if(!this.isSupported())return d(new g.UnsupportedStrategy,b);if(this.priority<a)return d(new g.TransportPriorityTooLow,b);var f=!1,i=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),j=null,k=function(){i.unbind("initialized",k),i.connect()},l=function(){j=e["default"].createHandshake(i,function(a){f=!0,o(),b(null,a)})},m=function(a){o(),b(a)},n=function(){o();var a;try{a=JSON.stringify(i)}catch(c){a=h.safeJSONStringify(i)}b(new g.TransportClosed(a))},o=function(){i.unbind("initialized",k),i.unbind("open",l),i.unbind("error",m),i.unbind("closed",n)};return i.bind("initialized",k),i.bind("open",l),i.bind("error",m),i.bind("closed",n),i.initialize(),{abort:function(){f||(o(),j?j.close():i.close())},forceMinPriority:function(a){f||c.priority<a&&(j?j.close():i.close())}}},a}();b.__esModule=!0,b["default"]=i},function(a,b,c){"use strict";var d=c(9),e=c(11),f=c(12),g=function(){function a(a,b){this.strategies=a,this.loop=Boolean(b.loop),this.failFast=Boolean(b.failFast),this.timeout=b.timeout,this.timeoutLimit=b.timeoutLimit}return a.prototype.isSupported=function(){return d.any(this.strategies,e["default"].method("isSupported"))},a.prototype.connect=function(a,b){var c=this,d=this.strategies,e=0,f=this.timeout,g=null,h=function(i,j){j?b(null,j):(e+=1,c.loop&&(e%=d.length),e<d.length?(f&&(f=2*f,c.timeoutLimit&&(f=Math.min(f,c.timeoutLimit))),g=c.tryStrategy(d[e],a,{timeout:f,failFast:c.failFast},h)):b(!0))};return g=this.tryStrategy(d[e],a,{timeout:f,failFast:this.failFast},h),{abort:function(){g.abort()},forceMinPriority:function(b){a=b,g&&g.forceMinPriority(b)}}},a.prototype.tryStrategy=function(a,b,c,d){var e=null,g=null;return c.timeout>0&&(e=new f.OneOffTimer(c.timeout,function(){g.abort(),d(!0)})),g=a.connect(b,function(a,b){a&&e&&e.isRunning()&&!c.failFast||(e&&e.ensureAborted(),d(a,b))}),{abort:function(){e&&e.ensureAborted(),g.abort()},forceMinPriority:function(a){g.forceMinPriority(a)}}},a}();b.__esModule=!0,b["default"]=g},function(a,b,c){"use strict";function d(a,b,c){var d=g.map(a,function(a,d,e,f){return a.connect(b,c(d,f))});return{abort:function(){g.apply(d,f)},forceMinPriority:function(a){g.apply(d,function(b){b.forceMinPriority(a)})}}}function e(a){return g.all(a,function(a){return Boolean(a.error)})}function f(a){a.error||a.aborted||(a.abort(),a.aborted=!0)}var g=c(9),h=c(11),i=function(){function a(a){this.strategies=a}return a.prototype.isSupported=function(){return g.any(this.strategies,h["default"].method("isSupported"))},a.prototype.connect=function(a,b){return d(this.strategies,a,function(a,c){return function(d,f){return c[a].error=d,d?void(e(c)&&b(!0)):(g.apply(c,function(a){a.forceMinPriority(f.transport.priority)}),void b(null,f))}})},a}();b.__esModule=!0,b["default"]=i},function(a,b,c){"use strict";function d(a){return"pusherTransport"+(a?"Encrypted":"Unencrypted")}function e(a){var b=i["default"].getLocalStorage();if(b)try{var c=b[d(a)];if(c)return JSON.parse(c)}catch(e){g(a)}return null}function f(a,b,c){var e=i["default"].getLocalStorage();if(e)try{e[d(a)]=JSON.stringify({timestamp:h["default"].now(),transport:b,latency:c})}catch(f){}}function g(a){var b=i["default"].getLocalStorage();if(b)try{delete b[d(a)]}catch(c){}}var h=c(11),i=c(2),j=c(56),k=function(){function a(a,b,c){this.strategy=a,this.transports=b,this.ttl=c.ttl||18e5,this.encrypted=c.encrypted,this.timeline=c.timeline}return a.prototype.isSupported=function(){return this.strategy.isSupported()},a.prototype.connect=function(a,b){var c=this.encrypted,d=e(c),i=[this.strategy];if(d&&d.timestamp+this.ttl>=h["default"].now()){var k=this.transports[d.transport];k&&(this.timeline.info({cached:!0,transport:d.transport,latency:d.latency}),i.push(new j["default"]([k],{timeout:2*d.latency+1e3,failFast:!0})))}var l=h["default"].now(),m=i.pop().connect(a,function n(d,e){d?(g(c),i.length>0?(l=h["default"].now(),m=i.pop().connect(a,n)):b(d)):(f(c,e.transport.name,h["default"].now()-l),b(null,e))});return{abort:function(){m.abort()},forceMinPriority:function(b){a=b,m&&m.forceMinPriority(b)}}},a}();b.__esModule=!0,b["default"]=k},function(a,b,c){"use strict";var d=c(12),e=function(){function a(a,b){var c=b.delay;this.strategy=a,this.options={delay:c}}return a.prototype.isSupported=function(){return this.strategy.isSupported()},a.prototype.connect=function(a,b){var c,e=this.strategy,f=new d.OneOffTimer(this.options.delay,function(){c=e.connect(a,b)});return{abort:function(){f.ensureAborted(),c&&c.abort()},forceMinPriority:function(b){a=b,c&&c.forceMinPriority(b)}}},a}();b.__esModule=!0,b["default"]=e},function(a,b){"use strict";var c=function(){function a(a,b,c){this.test=a,this.trueBranch=b,this.falseBranch=c}return a.prototype.isSupported=function(){var a=this.test()?this.trueBranch:this.falseBranch;return a.isSupported()},a.prototype.connect=function(a,b){var c=this.test()?this.trueBranch:this.falseBranch;return c.connect(a,b)},a}();b.__esModule=!0,b["default"]=c},function(a,b){"use strict";var c=function(){function a(a){this.strategy=a}return a.prototype.isSupported=function(){return this.strategy.isSupported()},a.prototype.connect=function(a,b){var c=this.strategy.connect(a,function(a,d){d&&c.abort(),b(a,d)});return c},a}();b.__esModule=!0,b["default"]=c},function(a,b,c){"use strict";var d=c(5);b.getGlobalConfig=function(){return{wsHost:d["default"].host,wsPort:d["default"].ws_port,wssPort:d["default"].wss_port,httpHost:d["default"].sockjs_host,httpPort:d["default"].sockjs_http_port,httpsPort:d["default"].sockjs_https_port,httpPath:d["default"].sockjs_path,statsHost:d["default"].stats_host,authEndpoint:d["default"].channel_auth_endpoint,authTransport:d["default"].channel_auth_transport,activity_timeout:d["default"].activity_timeout,pong_timeout:d["default"].pong_timeout,unavailable_timeout:d["default"].unavailable_timeout}},b.getClusterConfig=function(a){return{wsHost:"ws-"+a+".pusher.com",httpHost:"sockjs-"+a+".pusher.com"}}}])}),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.page=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(c){"use strict";function d(a,b){if("function"==typeof a)return d("*",a);if("function"==typeof b)for(var c=new h(a),e=1;e<arguments.length;++e)d.callbacks.push(c.middleware(arguments[e]));else"string"==typeof a?d["string"==typeof b?"redirect":"show"](a,b):d.start(a)}function e(a){if(!a.handled){var b;b=t?s+p.hash.replace("#!",""):p.pathname+p.search,b!==a.canonicalPath&&(d.stop(),a.handled=!1,p.href=a.canonicalPath)}}function f(a){return"string"!=typeof a?a:r?decodeURIComponent(a.replace(/\+/g," ")):a}function g(a,b){"/"===a[0]&&0!==a.indexOf(s)&&(a=s+(t?"#!":"")+a);var c=a.indexOf("?");if(this.canonicalPath=a,this.path=a.replace(s,"")||"/",t&&(this.path=this.path.replace("#!","")||"/"),this.title=document.title,this.state=b||{},this.state.path=a,this.querystring=~c?f(a.slice(c+1)):"",this.pathname=f(~c?a.slice(0,c):a),this.params={},this.hash="",!t){if(!~this.path.indexOf("#"))return;var d=this.path.split("#");this.path=d[0],this.hash=f(d[1])||"",this.querystring=this.querystring.split("#")[0]}}function h(a,b){b=b||{},this.path="*"===a?"(.*)":a,this.method="GET",this.regexp=l(this.path,this.keys=[],b)}function i(a){if(1===j(a)&&!(a.metaKey||a.ctrlKey||a.shiftKey||a.defaultPrevented)){for(var b=a.path?a.path[0]:a.target;b&&"A"!==b.nodeName;)b=b.parentNode;if(b&&"A"===b.nodeName&&!b.hasAttribute("download")&&"external"!==b.getAttribute("rel")){var e=b.getAttribute("href");if((t||b.pathname!==p.pathname||!b.hash&&"#"!==e)&&!(e&&e.indexOf("mailto:")>-1)&&!b.target&&k(b.href)){var f=b.pathname+b.search+(b.hash||"");"undefined"!=typeof c&&f.match(/^\/[a-zA-Z]:\//)&&(f=f.replace(/^\/[a-zA-Z]:\//,"/"));var g=f;0===f.indexOf(s)&&(f=f.substr(s.length)),t&&(f=f.replace("#!","")),s&&g===f||(a.preventDefault(),d.show(g))}}}}function j(a){return a=a||window.event,null===a.which?a.button:a.which}function k(a){var b=p.protocol+"//"+p.hostname;return p.port&&(b+=":"+p.port),a&&0===a.indexOf(b)}var l=a("path-to-regexp");b.exports=d;var m,n,o="undefined"!=typeof document&&document.ontouchstart?"touchstart":"click",p="undefined"!=typeof window&&(window.history.location||window.location),q=!0,r=!0,s="",t=!1;d.callbacks=[],d.exits=[],d.current="",d.len=0,d.base=function(a){return 0===arguments.length?s:void(s=a)},d.start=function(a){if(a=a||{},!m&&(m=!0,!1===a.dispatch&&(q=!1),!1===a.decodeURLComponents&&(r=!1),!1!==a.popstate&&window.addEventListener("popstate",u,!1),!1!==a.click&&document.addEventListener(o,i,!1),!0===a.hashbang&&(t=!0),q)){var b=t&&~p.hash.indexOf("#!")?p.hash.substr(2)+p.search:p.pathname+p.search+p.hash;d.replace(b,null,!0,q)}},d.stop=function(){m&&(d.current="",d.len=0,m=!1,document.removeEventListener(o,i,!1),window.removeEventListener("popstate",u,!1))},d.show=function(a,b,c,e){var f=new g(a,b);return d.current=f.path,!1!==c&&d.dispatch(f),!1!==f.handled&&!1!==e&&f.pushState(),f},d.back=function(a,b){d.len>0?(history.back(),d.len--):a?setTimeout(function(){d.show(a,b)}):setTimeout(function(){
d.show(s,b)})},d.redirect=function(a,b){"string"==typeof a&&"string"==typeof b&&d(a,function(a){setTimeout(function(){d.replace(b)},0)}),"string"==typeof a&&"undefined"==typeof b&&setTimeout(function(){d.replace(a)},0)},d.replace=function(a,b,c,e){var f=new g(a,b);return d.current=f.path,f.init=c,f.save(),!1!==e&&d.dispatch(f),f},d.dispatch=function(a){function b(){var a=d.exits[h++];return a?void a(f,b):c()}function c(){var b=d.callbacks[g++];return a.path!==d.current?void(a.handled=!1):b?void b(a,c):e(a)}var f=n,g=0,h=0;n=a,f?b():c()},d.exit=function(a,b){if("function"==typeof a)return d.exit("*",a);for(var c=new h(a),e=1;e<arguments.length;++e)d.exits.push(c.middleware(arguments[e]))},d.Context=g,g.prototype.pushState=function(){d.len++,history.pushState(this.state,this.title,t&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},g.prototype.save=function(){history.replaceState(this.state,this.title,t&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},d.Route=h,h.prototype.middleware=function(a){var b=this;return function(c,d){return b.match(c.path,c.params)?a(c,d):void d()}},h.prototype.match=function(a,b){var c=this.keys,d=a.indexOf("?"),e=~d?a.slice(0,d):a,g=this.regexp.exec(decodeURIComponent(e));if(!g)return!1;for(var h=1,i=g.length;i>h;++h){var j=c[h-1],k=f(g[h]);void 0===k&&hasOwnProperty.call(b,j.name)||(b[j.name]=k)}return!0};var u=function(){var a=!1;if("undefined"!=typeof window)return"complete"===document.readyState?a=!0:window.addEventListener("load",function(){setTimeout(function(){a=!0},0)}),function(b){if(a)if(b.state){var c=b.state.path;d.replace(c,b.state)}else d.show(p.pathname+p.hash,void 0,void 0,!1)}}();d.sameOrigin=k}).call(this,a("_process"))},{_process:2,"path-to-regexp":3}],2:[function(a,b,c){function d(){}var e=b.exports={};e.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.MutationObserver,c="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};var d=[];if(b){var e=document.createElement("div"),f=new MutationObserver(function(){var a=d.slice();d.length=0,a.forEach(function(a){a()})});return f.observe(e,{attributes:!0}),function(a){d.length||e.setAttribute("yes","no"),d.push(a)}}return c?(window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),d.length>0)){var c=d.shift();c()}},!0),function(a){d.push(a),window.postMessage("process-tick","*")}):function(a){setTimeout(a,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(a){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(a){throw new Error("process.chdir is not supported")}},{}],3:[function(a,b,c){function d(a){for(var b,c=[],d=0,e=0,f="";null!=(b=q.exec(a));){var g=b[0],i=b[1],j=b.index;if(f+=a.slice(e,j),e=j+g.length,i)f+=i[1];else{f&&(c.push(f),f="");var k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],r="+"===o||"*"===o,s="?"===o||"*"===o,t=k||"/",u=m||n||(p?".*":"[^"+t+"]+?");c.push({name:l||d++,prefix:k||"",delimiter:t,optional:s,repeat:r,pattern:h(u)})}}return e<a.length&&(f+=a.substr(e)),f&&c.push(f),c}function e(a){return f(d(a))}function f(a){for(var b=new Array(a.length),c=0;c<a.length;c++)"object"==typeof a[c]&&(b[c]=new RegExp("^"+a[c].pattern+"$"));return function(c){for(var d="",e=c||{},f=0;f<a.length;f++){var g=a[f];if("string"!=typeof g){var h,i=e[g.name];if(null==i){if(g.optional)continue;throw new TypeError('Expected "'+g.name+'" to be defined')}if(p(i)){if(!g.repeat)throw new TypeError('Expected "'+g.name+'" to not repeat, but received "'+i+'"');if(0===i.length){if(g.optional)continue;throw new TypeError('Expected "'+g.name+'" to not be empty')}for(var j=0;j<i.length;j++){if(h=encodeURIComponent(i[j]),!b[f].test(h))throw new TypeError('Expected all "'+g.name+'" to match "'+g.pattern+'", but received "'+h+'"');d+=(0===j?g.prefix:g.delimiter)+h}}else{if(h=encodeURIComponent(i),!b[f].test(h))throw new TypeError('Expected "'+g.name+'" to match "'+g.pattern+'", but received "'+h+'"');d+=g.prefix+h}}else d+=g}return d}}function g(a){return a.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function h(a){return a.replace(/([=!:$\/()])/g,"\\$1")}function i(a,b){return a.keys=b,a}function j(a){return a.sensitive?"":"i"}function k(a,b){var c=a.source.match(/\((?!\?)/g);if(c)for(var d=0;d<c.length;d++)b.push({name:d,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return i(a,b)}function l(a,b,c){for(var d=[],e=0;e<a.length;e++)d.push(o(a[e],b,c).source);var f=new RegExp("(?:"+d.join("|")+")",j(c));return i(f,b)}function m(a,b,c){for(var e=d(a),f=n(e,c),g=0;g<e.length;g++)"string"!=typeof e[g]&&b.push(e[g]);return i(f,b)}function n(a,b){b=b||{};for(var c=b.strict,d=b.end!==!1,e="",f=a[a.length-1],h="string"==typeof f&&/\/$/.test(f),i=0;i<a.length;i++){var k=a[i];if("string"==typeof k)e+=g(k);else{var l=g(k.prefix),m=k.pattern;k.repeat&&(m+="(?:"+l+m+")*"),m=k.optional?l?"(?:"+l+"("+m+"))?":"("+m+")?":l+"("+m+")",e+=m}}return c||(e=(h?e.slice(0,-2):e)+"(?:\\/(?=$))?"),e+=d?"$":c&&h?"":"(?=\\/|$)",new RegExp("^"+e,j(b))}function o(a,b,c){return b=b||[],p(b)?c||(c={}):(c=b,b=[]),a instanceof RegExp?k(a,b,c):p(a)?l(a,b,c):m(a,b,c)}var p=a("isarray");b.exports=o,b.exports.parse=d,b.exports.compile=e,b.exports.tokensToFunction=f,b.exports.tokensToRegExp=n;var q=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},{isarray:4}],4:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}]},{},[1])(1)}),function(a){function b(a,d){if(a=a?a:"",d=d||{},a instanceof b)return a;if(!(this instanceof b))return new b(a,d);var e=c(a);this._originalInput=a,this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._roundA=O(100*this._a)/100,this._format=d.format||e.format,this._gradientType=d.gradientType,this._r<1&&(this._r=O(this._r)),this._g<1&&(this._g=O(this._g)),this._b<1&&(this._b=O(this._b)),this._ok=e.ok,this._tc_id=N++}function c(a){var b={r:0,g:0,b:0},c=1,e=null,g=null,i=null,j=!1,k=!1;return"string"==typeof a&&(a=J(a)),"object"==typeof a&&(I(a.r)&&I(a.g)&&I(a.b)?(b=d(a.r,a.g,a.b),j=!0,k="%"===String(a.r).substr(-1)?"prgb":"rgb"):I(a.h)&&I(a.s)&&I(a.v)?(e=F(a.s),g=F(a.v),b=h(a.h,e,g),j=!0,k="hsv"):I(a.h)&&I(a.s)&&I(a.l)&&(e=F(a.s),i=F(a.l),b=f(a.h,e,i),j=!0,k="hsl"),a.hasOwnProperty("a")&&(c=a.a)),c=y(c),{ok:j,format:a.format||k,r:P(255,Q(b.r,0)),g:P(255,Q(b.g,0)),b:P(255,Q(b.b,0)),a:c}}function d(a,b,c){return{r:255*z(a,255),g:255*z(b,255),b:255*z(c,255)}}function e(a,b,c){a=z(a,255),b=z(b,255),c=z(c,255);var d,e,f=Q(a,b,c),g=P(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:h}}function f(a,b,c){function d(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(a=z(a,360),b=z(b,100),c=z(c,100),0===b)e=f=g=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return{r:255*e,g:255*f,b:255*g}}function g(a,b,c){a=z(a,255),b=z(b,255),c=z(c,255);var d,e,f=Q(a,b,c),g=P(a,b,c),h=f,i=f-g;if(e=0===f?0:i/f,f==g)d=0;else{switch(f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,v:h}}function h(b,c,d){b=6*z(b,360),c=z(c,100),d=z(d,100);var e=a.floor(b),f=b-e,g=d*(1-c),h=d*(1-f*c),i=d*(1-(1-f)*c),j=e%6,k=[d,h,g,g,i,d][j],l=[i,d,d,h,g,g][j],m=[g,g,i,d,d,h][j];return{r:255*k,g:255*l,b:255*m}}function i(a,b,c,d){var e=[E(O(a).toString(16)),E(O(b).toString(16)),E(O(c).toString(16))];return d&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function j(a,b,c,d){var e=[E(G(d)),E(O(a).toString(16)),E(O(b).toString(16)),E(O(c).toString(16))];return e.join("")}function k(a,c){c=0===c?0:c||10;var d=b(a).toHsl();return d.s-=c/100,d.s=A(d.s),b(d)}function l(a,c){c=0===c?0:c||10;var d=b(a).toHsl();return d.s+=c/100,d.s=A(d.s),b(d)}function m(a){return b(a).desaturate(100)}function n(a,c){c=0===c?0:c||10;var d=b(a).toHsl();return d.l+=c/100,d.l=A(d.l),b(d)}function o(a,c){c=0===c?0:c||10;var d=b(a).toRgb();return d.r=Q(0,P(255,d.r-O(255*-(c/100)))),d.g=Q(0,P(255,d.g-O(255*-(c/100)))),d.b=Q(0,P(255,d.b-O(255*-(c/100)))),b(d)}function p(a,c){c=0===c?0:c||10;var d=b(a).toHsl();return d.l-=c/100,d.l=A(d.l),b(d)}function q(a,c){var d=b(a).toHsl(),e=(d.h+c)%360;return d.h=0>e?360+e:e,b(d)}function r(a){var c=b(a).toHsl();return c.h=(c.h+180)%360,b(c)}function s(a){var c=b(a).toHsl(),d=c.h;return[b(a),b({h:(d+120)%360,s:c.s,l:c.l}),b({h:(d+240)%360,s:c.s,l:c.l})]}function t(a){var c=b(a).toHsl(),d=c.h;return[b(a),b({h:(d+90)%360,s:c.s,l:c.l}),b({h:(d+180)%360,s:c.s,l:c.l}),b({h:(d+270)%360,s:c.s,l:c.l})]}function u(a){var c=b(a).toHsl(),d=c.h;return[b(a),b({h:(d+72)%360,s:c.s,l:c.l}),b({h:(d+216)%360,s:c.s,l:c.l})]}function v(a,c,d){c=c||6,d=d||30;var e=b(a).toHsl(),f=360/d,g=[b(a)];for(e.h=(e.h-(f*c>>1)+720)%360;--c;)e.h=(e.h+f)%360,g.push(b(e));return g}function w(a,c){c=c||6;for(var d=b(a).toHsv(),e=d.h,f=d.s,g=d.v,h=[],i=1/c;c--;)h.push(b({h:e,s:f,v:g})),g=(g+i)%1;return h}function x(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}function y(a){return a=parseFloat(a),(isNaN(a)||0>a||a>1)&&(a=1),a}function z(b,c){C(b)&&(b="100%");var d=D(b);return b=P(c,Q(0,parseFloat(b))),d&&(b=parseInt(b*c,10)/100),a.abs(b-c)<1e-6?1:b%c/parseFloat(c)}function A(a){return P(1,Q(0,a))}function B(a){return parseInt(a,16)}function C(a){return"string"==typeof a&&-1!=a.indexOf(".")&&1===parseFloat(a)}function D(a){return"string"==typeof a&&-1!=a.indexOf("%")}function E(a){return 1==a.length?"0"+a:""+a}function F(a){return 1>=a&&(a=100*a+"%"),a}function G(b){return a.round(255*parseFloat(b)).toString(16)}function H(a){return B(a)/255}function I(a){return!!U.CSS_UNIT.exec(a)}function J(a){a=a.replace(L,"").replace(M,"").toLowerCase();var b=!1;if(S[a])a=S[a],b=!0;else if("transparent"==a)return{r:0,g:0,b:0,a:0,format:"name"};var c;return(c=U.rgb.exec(a))?{r:c[1],g:c[2],b:c[3]}:(c=U.rgba.exec(a))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=U.hsl.exec(a))?{h:c[1],s:c[2],l:c[3]}:(c=U.hsla.exec(a))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=U.hsv.exec(a))?{h:c[1],s:c[2],v:c[3]}:(c=U.hsva.exec(a))?{h:c[1],s:c[2],v:c[3],a:c[4]}:(c=U.hex8.exec(a))?{a:H(c[1]),r:B(c[2]),g:B(c[3]),b:B(c[4]),format:b?"name":"hex8"}:(c=U.hex6.exec(a))?{r:B(c[1]),g:B(c[2]),b:B(c[3]),format:b?"name":"hex"}:(c=U.hex3.exec(a))?{r:B(c[1]+""+c[1]),g:B(c[2]+""+c[2]),b:B(c[3]+""+c[3]),format:b?"name":"hex"}:!1}function K(a){var b,c;return a=a||{level:"AA",size:"small"},b=(a.level||"AA").toUpperCase(),c=(a.size||"small").toLowerCase(),"AA"!==b&&"AAA"!==b&&(b="AA"),"small"!==c&&"large"!==c&&(c="small"),{level:b,size:c}}var L=/^\s+/,M=/\s+$/,N=0,O=a.round,P=a.min,Q=a.max,R=a.random;b.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1e3},getLuminance:function(){var b,c,d,e,f,g,h=this.toRgb();return b=h.r/255,c=h.g/255,d=h.b/255,e=.03928>=b?b/12.92:a.pow((b+.055)/1.055,2.4),f=.03928>=c?c/12.92:a.pow((c+.055)/1.055,2.4),g=.03928>=d?d/12.92:a.pow((d+.055)/1.055,2.4),.2126*e+.7152*f+.0722*g},setAlpha:function(a){return this._a=y(a),this._roundA=O(100*this._a)/100,this},toHsv:function(){var a=g(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=g(this._r,this._g,this._b),b=O(360*a.h),c=O(100*a.s),d=O(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHsl:function(){var a=e(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=e(this._r,this._g,this._b),b=O(360*a.h),c=O(100*a.s),d=O(100*a.l);return 1==this._a?"hsl("+b+", "+c+"%, "+d+"%)":"hsla("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHex:function(a){return i(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(){return j(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:O(this._r),g:O(this._g),b:O(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+O(this._r)+", "+O(this._g)+", "+O(this._b)+")":"rgba("+O(this._r)+", "+O(this._g)+", "+O(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:O(100*z(this._r,255))+"%",g:O(100*z(this._g,255))+"%",b:O(100*z(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+O(100*z(this._r,255))+"%, "+O(100*z(this._g,255))+"%, "+O(100*z(this._b,255))+"%)":"rgba("+O(100*z(this._r,255))+"%, "+O(100*z(this._g,255))+"%, "+O(100*z(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:T[i(this._r,this._g,this._b,!0)]||!1},toFilter:function(a){var c="#"+j(this._r,this._g,this._b,this._a),d=c,e=this._gradientType?"GradientType = 1, ":"";if(a){var f=b(a);d=f.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+e+"startColorstr="+c+",endColorstr="+d+")"},toString:function(a){var b=!!a;a=a||this._format;var c=!1,d=this._a<1&&this._a>=0,e=!b&&d&&("hex"===a||"hex6"===a||"hex3"===a||"name"===a);return e?"name"===a&&0===this._a?this.toName():this.toRgbString():("rgb"===a&&(c=this.toRgbString()),"prgb"===a&&(c=this.toPercentageRgbString()),("hex"===a||"hex6"===a)&&(c=this.toHexString()),"hex3"===a&&(c=this.toHexString(!0)),"hex8"===a&&(c=this.toHex8String()),"name"===a&&(c=this.toName()),"hsl"===a&&(c=this.toHslString()),"hsv"===a&&(c=this.toHsvString()),c||this.toHexString())},clone:function(){return b(this.toString())},_applyModification:function(a,b){var c=a.apply(null,[this].concat([].slice.call(b)));return this._r=c._r,this._g=c._g,this._b=c._b,this.setAlpha(c._a),this},lighten:function(){return this._applyModification(n,arguments)},brighten:function(){return this._applyModification(o,arguments)},darken:function(){return this._applyModification(p,arguments)},desaturate:function(){return this._applyModification(k,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(q,arguments)},_applyCombination:function(a,b){return a.apply(null,[this].concat([].slice.call(b)))},analogous:function(){return this._applyCombination(v,arguments)},complement:function(){return this._applyCombination(r,arguments)},monochromatic:function(){return this._applyCombination(w,arguments)},splitcomplement:function(){return this._applyCombination(u,arguments)},triad:function(){return this._applyCombination(s,arguments)},tetrad:function(){return this._applyCombination(t,arguments)}},b.fromRatio=function(a,c){if("object"==typeof a){var d={};for(var e in a)a.hasOwnProperty(e)&&("a"===e?d[e]=a[e]:d[e]=F(a[e]));a=d}return b(a,c)},b.equals=function(a,c){return a&&c?b(a).toRgbString()==b(c).toRgbString():!1},b.random=function(){return b.fromRatio({r:R(),g:R(),b:R()})},b.mix=function(a,c,d){d=0===d?0:d||50;var e=b(a).toRgb(),f=b(c).toRgb(),g=d/100,h={r:(f.r-e.r)*g+e.r,g:(f.g-e.g)*g+e.g,b:(f.b-e.b)*g+e.b,a:(f.a-e.a)*g+e.a};return b(h)},b.readability=function(c,d){var e=b(c),f=b(d);return(a.max(e.getLuminance(),f.getLuminance())+.05)/(a.min(e.getLuminance(),f.getLuminance())+.05)},b.isReadable=function(a,c,d){var e,f,g=b.readability(a,c);switch(f=!1,e=K(d),e.level+e.size){case"AAsmall":case"AAAlarge":f=g>=4.5;break;case"AAlarge":f=g>=3;break;case"AAAsmall":f=g>=7}return f},b.mostReadable=function(a,c,d){var e,f,g,h,i=null,j=0;d=d||{},f=d.includeFallbackColors,g=d.level,h=d.size;for(var k=0;k<c.length;k++)e=b.readability(a,c[k]),e>j&&(j=e,i=b(c[k]));return b.isReadable(a,i,{level:g,size:h})||!f?i:(d.includeFallbackColors=!1,b.mostReadable(a,["#fff","#000"],d))};var S=b.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=b.hexNames=x(S),U=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{CSS_UNIT:new RegExp(c),rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+e),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):window.tinycolor=b}(Math),Array.prototype.find||(Array.prototype.find=function(a){"use strict";if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;d>f;f++)if(b=c[f],a.call(e,b,f,c))return b;return void 0}),!function(a,b){var c=b(a,a.document);a.lazySizes=c,"object"==typeof module&&module.exports&&(module.exports=c)}(window,function(a,b){"use strict";if(b.getElementsByClassName){var c,d=b.documentElement,e=a.Date,f=a.HTMLPictureElement,g="addEventListener",h="getAttribute",i=a[g],j=a.setTimeout,k=a.requestAnimationFrame||j,l=a.requestIdleCallback,m=/^picture$/i,n=["load","error","lazyincluded","_lazyloaded"],o={},p=Array.prototype.forEach,q=function(a,b){return o[b]||(o[b]=new RegExp("(\\s|^)"+b+"(\\s|$)")),o[b].test(a[h]("class")||"")&&o[b]},r=function(a,b){q(a,b)||a.setAttribute("class",(a[h]("class")||"").trim()+" "+b)},s=function(a,b){var c;(c=q(a,b))&&a.setAttribute("class",(a[h]("class")||"").replace(c," "))},t=function(a,b,c){var d=c?g:"removeEventListener";c&&t(a,b),n.forEach(function(c){a[d](c,b)})},u=function(a,c,d,e,f){var g=b.createEvent("CustomEvent");return g.initCustomEvent(c,!e,!f,d||{}),a.dispatchEvent(g),g},v=function(b,d){var e;!f&&(e=a.picturefill||c.pf)?e({reevaluate:!0,elements:[b]}):d&&d.src&&(b.src=d.src)},w=function(a,b){return(getComputedStyle(a,null)||{})[b]},x=function(a,b,d){for(d=d||a.offsetWidth;d<c.minSize&&b&&!a._lazysizesWidth;)d=b.offsetWidth,b=b.parentNode;return d},y=function(){var a,c,d=[],e=function(){var b;for(a=!0,c=!1;d.length;)b=d.shift(),b[0].apply(b[1],b[2]);a=!1};return function(f){a?f.apply(this,arguments):(d.push([f,this,arguments]),c||(c=!0,(b.hidden?j:k)(e)))}}(),z=function(a,b){return b?function(){y(a)}:function(){var b=this,c=arguments;y(function(){a.apply(b,c)})}},A=function(a){var b,c=0,d=125,f=999,g=f,h=function(){b=!1,c=e.now(),a()},i=l?function(){l(h,{timeout:g}),g!==f&&(g=f)}:z(function(){j(h)},!0);return function(a){var f;(a=a===!0)&&(g=66),b||(b=!0,f=d-(e.now()-c),0>f&&(f=0),a||9>f&&l?i():j(i,f))}},B=function(a){var b,c,d=99,f=function(){b=null,a()},g=function(){var a=e.now()-c;d>a?j(g,d-a):(l||f)(f)};return function(){c=e.now(),b||(b=j(g,d))}},C=function(){var f,k,l,n,o,x,C,E,F,G,H,I,J,K,L,M=/^img$/i,N=/^iframe$/i,O="onscroll"in a&&!/glebot/.test(navigator.userAgent),P=0,Q=0,R=0,S=-1,T=function(a){R--,a&&a.target&&t(a.target,T),(!a||0>R||!a.target)&&(R=0)},U=function(a,c){var e,f=a,g="hidden"==w(b.body,"visibility")||"hidden"!=w(a,"visibility");for(F-=c,I+=c,G-=c,H+=c;g&&(f=f.offsetParent)&&f!=b.body&&f!=d;)g=(w(f,"opacity")||1)>0,g&&"visible"!=w(f,"overflow")&&(e=f.getBoundingClientRect(),g=H>e.left&&G<e.right&&I>e.top-1&&F<e.bottom+1);return g},V=function(){var a,e,g,i,j,m,n,p,q;if((o=c.loadMode)&&8>R&&(a=f.length)){e=0,S++,null==K&&("expand"in c||(c.expand=d.clientHeight>500?500:400),J=c.expand,K=J*c.expFactor),K>Q&&1>R&&S>2&&o>2&&!b.hidden?(Q=K,S=0):Q=o>1&&S>1&&6>R?J:P;for(;a>e;e++)if(f[e]&&!f[e]._lazyRace)if(O)if((p=f[e][h]("data-expand"))&&(m=1*p)||(m=Q),q!==m&&(C=innerWidth+m*L,E=innerHeight+m,n=-1*m,q=m),g=f[e].getBoundingClientRect(),(I=g.bottom)>=n&&(F=g.top)<=E&&(H=g.right)>=n*L&&(G=g.left)<=C&&(I||H||G||F)&&(l&&3>R&&!p&&(3>o||4>S)||U(f[e],m))){if(ba(f[e]),j=!0,R>9)break}else!j&&l&&!i&&4>R&&4>S&&o>2&&(k[0]||c.preloadAfterLoad)&&(k[0]||!p&&(I||H||G||F||"auto"!=f[e][h](c.sizesAttr)))&&(i=k[0]||f[e]);else ba(f[e]);i&&!j&&ba(i)}},W=A(V),X=function(a){r(a.target,c.loadedClass),s(a.target,c.loadingClass),t(a.target,Z)},Y=z(X),Z=function(a){Y({target:a.target})},$=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.src=b}},_=function(a){var b,d,e=a[h](c.srcsetAttr);(b=c.customMedia[a[h]("data-media")||a[h]("media")])&&a.setAttribute("media",b),e&&a.setAttribute("srcset",e),b&&(d=a.parentNode,d.insertBefore(a.cloneNode(),a),d.removeChild(a))},aa=z(function(a,b,d,e,f){var g,i,k,l,o,q;(o=u(a,"lazybeforeunveil",b)).defaultPrevented||(e&&(d?r(a,c.autosizesClass):a.setAttribute("sizes",e)),i=a[h](c.srcsetAttr),g=a[h](c.srcAttr),f&&(k=a.parentNode,l=k&&m.test(k.nodeName||"")),q=b.firesLoad||"src"in a&&(i||g||l),o={target:a},q&&(t(a,T,!0),clearTimeout(n),n=j(T,2500),r(a,c.loadingClass),t(a,Z,!0)),l&&p.call(k.getElementsByTagName("source"),_),i?a.setAttribute("srcset",i):g&&!l&&(N.test(a.nodeName)?$(a,g):a.src=g),(i||l)&&v(a,{src:g})),y(function(){a._lazyRace&&delete a._lazyRace,s(a,c.lazyClass),(!q||a.complete)&&(q?T(o):R--,X(o))})}),ba=function(a){var b,d=M.test(a.nodeName),e=d&&(a[h](c.sizesAttr)||a[h]("sizes")),f="auto"==e;(!f&&l||!d||!a.src&&!a.srcset||a.complete||q(a,c.errorClass))&&(b=u(a,"lazyunveilread").detail,f&&D.updateElem(a,!0,a.offsetWidth),a._lazyRace=!0,R++,aa(a,b,f,e,d))},ca=function(){if(!l){if(e.now()-x<999)return void j(ca,999);var a=B(function(){c.loadMode=3,W()});l=!0,c.loadMode=3,W(),i("scroll",function(){3==c.loadMode&&(c.loadMode=2),a()},!0)}};return{_:function(){x=e.now(),f=b.getElementsByClassName(c.lazyClass),k=b.getElementsByClassName(c.lazyClass+" "+c.preloadClass),L=c.hFac,i("scroll",W,!0),i("resize",W,!0),a.MutationObserver?new MutationObserver(W).observe(d,{childList:!0,subtree:!0,attributes:!0}):(d[g]("DOMNodeInserted",W,!0),d[g]("DOMAttrModified",W,!0),setInterval(W,999)),i("hashchange",W,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(a){b[g](a,W,!0)}),/d$|^c/.test(b.readyState)?ca():(i("load",ca),b[g]("DOMContentLoaded",W),j(ca,2e4)),W(f.length>0)},checkElems:W,unveil:ba}}(),D=function(){var a,d=z(function(a,b,c,d){var e,f,g;if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),m.test(b.nodeName||""))for(e=b.getElementsByTagName("source"),f=0,g=e.length;g>f;f++)e[f].setAttribute("sizes",d);c.detail.dataAttr||v(a,c.detail)}),e=function(a,b,c){var e,f=a.parentNode;f&&(c=x(a,f,c),e=u(a,"lazybeforesizes",{width:c,dataAttr:!!b}),e.defaultPrevented||(c=e.detail.width,c&&c!==a._lazysizesWidth&&d(a,f,e,c)))},f=function(){var b,c=a.length;if(c)for(b=0;c>b;b++)e(a[b])},g=B(f);return{_:function(){a=b.getElementsByClassName(c.autosizesClass),i("resize",g)},checkElems:g,updateElem:e}}(),E=function(){E.i||(E.i=!0,D._(),C._())};return function(){var b,d={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2};c=a.lazySizesConfig||a.lazysizesConfig||{};for(b in d)b in c||(c[b]=d[b]);a.lazySizesConfig=c,j(function(){c.init&&E()})}(),{cfg:c,autoSizer:D,loader:C,init:E,uP:v,aC:r,rC:s,hC:q,fire:u,gW:x,rAF:y}}}),!function(a){"use strict";"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():"undefined"!=typeof Package?Sortable=a():window.Sortable=a()}(function(){"use strict";function a(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(a);this.el=a,this.options=b=r({},b),a[L]=this;var c={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var d in c)!(d in b)&&(b[d]=c[d]);V(b);for(var f in this)"_"===f.charAt(0)&&(this[f]=this[f].bind(this));this.nativeDraggable=b.forceFallback?!1:P,e(a,"mousedown",this._onTapStart),e(a,"touchstart",this._onTapStart),this.nativeDraggable&&(e(a,"dragover",this),e(a,"dragenter",this)),T.push(this._onDragOver),b.store&&this.sort(b.store.get(this))}function b(a){v&&v.state!==a&&(h(v,"display",a?"none":""),!a&&v.state&&w.insertBefore(v,s),v.state=a)}function c(a,b,c){if(a){c=c||N,b=b.split(".");var d=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")(?=\\s)","g");do if(">*"===d&&a.parentNode===c||(""===d||a.nodeName.toUpperCase()==d)&&(!b.length||((" "+a.className+" ").match(e)||[]).length==b.length))return a;while(a!==c&&(a=a.parentNode))}return null}function d(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.preventDefault()}function e(a,b,c){a.addEventListener(b,c,!1)}function f(a,b,c){a.removeEventListener(b,c,!1)}function g(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(K," ").replace(" "+b+" "," ");a.className=(d+(c?" "+b:"")).replace(K," ")}}function h(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return N.defaultView&&N.defaultView.getComputedStyle?c=N.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b),d[b]=c+("string"==typeof c?"":"px")}}function i(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;f>e;e++)c(d[e],e);return d}return[]}function j(a,b,c,d,e,f,g){var h=N.createEvent("Event"),i=(a||b[L]).options,j="on"+c.charAt(0).toUpperCase()+c.substr(1);h.initEvent(c,!0,!0),h.to=b,h.from=e||b,h.item=d||b,h.clone=v,h.oldIndex=f,h.newIndex=g,b.dispatchEvent(h),i[j]&&i[j].call(a,h)}function k(a,b,c,d,e,f){var g,h,i=a[L],j=i.options.onMove;return g=N.createEvent("Event"),g.initEvent("move",!0,!0),g.to=b,g.from=a,g.dragged=c,g.draggedRect=d,g.related=e||b,g.relatedRect=f||b.getBoundingClientRect(),a.dispatchEvent(g),j&&(h=j.call(i,g)),h}function l(a){a.draggable=!1}function m(){R=!1}function n(a,b){var c=a.lastElementChild,d=c.getBoundingClientRect();return(b.clientY-(d.top+d.height)>5||b.clientX-(d.right+d.width)>5)&&c}function o(a){for(var b=a.tagName+a.className+a.src+a.href+a.textContent,c=b.length,d=0;c--;)d+=b.charCodeAt(c);return d.toString(36)}function p(a){var b=0;if(!a||!a.parentNode)return-1;for(;a&&(a=a.previousElementSibling);)"TEMPLATE"!==a.nodeName.toUpperCase()&&b++;return b}function q(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,setTimeout(function(){1===c.length?a.call(d,c[0]):a.apply(d,c),c=void 0},b))}}function r(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}var s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J={},K=/\s+/g,L="Sortable"+(new Date).getTime(),M=window,N=M.document,O=M.parseInt,P=!!("draggable"in N.createElement("div")),Q=function(a){return a=N.createElement("x"),a.style.cssText="pointer-events:auto","auto"===a.style.pointerEvents}(),R=!1,S=Math.abs,T=([].slice,[]),U=q(function(a,b,c){if(c&&b.scroll){var d,e,f,g,h=b.scrollSensitivity,i=b.scrollSpeed,j=a.clientX,k=a.clientY,l=window.innerWidth,m=window.innerHeight;if(z!==c&&(y=b.scroll,z=c,y===!0)){y=c;do if(y.offsetWidth<y.scrollWidth||y.offsetHeight<y.scrollHeight)break;while(y=y.parentNode)}y&&(d=y,e=y.getBoundingClientRect(),f=(S(e.right-j)<=h)-(S(e.left-j)<=h),g=(S(e.bottom-k)<=h)-(S(e.top-k)<=h)),f||g||(f=(h>=l-j)-(h>=j),g=(h>=m-k)-(h>=k),(f||g)&&(d=M)),(J.vx!==f||J.vy!==g||J.el!==d)&&(J.el=d,J.vx=f,J.vy=g,clearInterval(J.pid),d&&(J.pid=setInterval(function(){d===M?M.scrollTo(M.pageXOffset+f*i,M.pageYOffset+g*i):(g&&(d.scrollTop+=g*i),f&&(d.scrollLeft+=f*i))},24)))}},30),V=function(a){var b=a.group;b&&"object"==typeof b||(b=a.group={name:b}),["pull","put"].forEach(function(a){a in b||(b[a]=!0)}),a.groups=" "+b.name+(b.put.join?" "+b.put.join(" "):"")+" "};return a.prototype={constructor:a,_onTapStart:function(a){var b=this,d=this.el,e=this.options,f=a.type,g=a.touches&&a.touches[0],h=(g||a).target,i=h,k=e.filter;if(!("mousedown"===f&&0!==a.button||e.disabled)&&(h=c(h,e.draggable,d))){if(D=p(h),"function"==typeof k){if(k.call(this,a,h,this))return j(b,i,"filter",h,d,D),void a.preventDefault()}else if(k&&(k=k.split(",").some(function(a){return a=c(i,a.trim(),d),a?(j(b,a,"filter",h,d,D),!0):void 0})))return void a.preventDefault();(!e.handle||c(i,e.handle,d))&&this._prepareDragStart(a,g,h)}},_prepareDragStart:function(a,b,c){var d,f=this,h=f.el,j=f.options,k=h.ownerDocument;
c&&!s&&c.parentNode===h&&(G=a,w=h,s=c,t=s.parentNode,x=s.nextSibling,F=j.group,d=function(){f._disableDelayedDrag(),s.draggable=!0,g(s,f.options.chosenClass,!0),f._triggerDragStart(b)},j.ignore.split(",").forEach(function(a){i(s,a.trim(),l)}),e(k,"mouseup",f._onDrop),e(k,"touchend",f._onDrop),e(k,"touchcancel",f._onDrop),j.delay?(e(k,"mouseup",f._disableDelayedDrag),e(k,"touchend",f._disableDelayedDrag),e(k,"touchcancel",f._disableDelayedDrag),e(k,"mousemove",f._disableDelayedDrag),e(k,"touchmove",f._disableDelayedDrag),f._dragStartTimer=setTimeout(d,j.delay)):d())},_disableDelayedDrag:function(){var a=this.el.ownerDocument;clearTimeout(this._dragStartTimer),f(a,"mouseup",this._disableDelayedDrag),f(a,"touchend",this._disableDelayedDrag),f(a,"touchcancel",this._disableDelayedDrag),f(a,"mousemove",this._disableDelayedDrag),f(a,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(a){a?(G={target:s,clientX:a.clientX,clientY:a.clientY},this._onDragStart(G,"touch")):this.nativeDraggable?(e(s,"dragend",this),e(w,"dragstart",this._onDragStart)):this._onDragStart(G,!0);try{N.selection?N.selection.empty():window.getSelection().removeAllRanges()}catch(b){}},_dragStarted:function(){w&&s&&(g(s,this.options.ghostClass,!0),a.active=this,j(this,w,"start",s,w,D))},_emulateDragOver:function(){if(H){if(this._lastX===H.clientX&&this._lastY===H.clientY)return;this._lastX=H.clientX,this._lastY=H.clientY,Q||h(u,"display","none");var a=N.elementFromPoint(H.clientX,H.clientY),b=a,c=" "+this.options.group.name,d=T.length;if(b)do{if(b[L]&&b[L].options.groups.indexOf(c)>-1){for(;d--;)T[d]({clientX:H.clientX,clientY:H.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode);Q||h(u,"display","")}},_onTouchMove:function(b){if(G){a.active||this._dragStarted(),this._appendGhost();var c=b.touches?b.touches[0]:b,d=c.clientX-G.clientX,e=c.clientY-G.clientY,f=b.touches?"translate3d("+d+"px,"+e+"px,0)":"translate("+d+"px,"+e+"px)";I=!0,H=c,h(u,"webkitTransform",f),h(u,"mozTransform",f),h(u,"msTransform",f),h(u,"transform",f),b.preventDefault()}},_appendGhost:function(){if(!u){var a,b=s.getBoundingClientRect(),c=h(s);u=s.cloneNode(!0),g(u,this.options.ghostClass,!1),g(u,this.options.fallbackClass,!0),h(u,"top",b.top-O(c.marginTop,10)),h(u,"left",b.left-O(c.marginLeft,10)),h(u,"width",b.width),h(u,"height",b.height),h(u,"opacity","0.8"),h(u,"position","fixed"),h(u,"zIndex","100000"),h(u,"pointerEvents","none"),this.options.fallbackOnBody&&N.body.appendChild(u)||w.appendChild(u),a=u.getBoundingClientRect(),h(u,"width",2*b.width-a.width),h(u,"height",2*b.height-a.height)}},_onDragStart:function(a,b){var c=a.dataTransfer,d=this.options;this._offUpEvents(),"clone"==F.pull&&(v=s.cloneNode(!0),h(v,"display","none"),w.insertBefore(v,s)),b?("touch"===b?(e(N,"touchmove",this._onTouchMove),e(N,"touchend",this._onDrop),e(N,"touchcancel",this._onDrop)):(e(N,"mousemove",this._onTouchMove),e(N,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(c&&(c.effectAllowed="move",d.setData&&d.setData.call(this,c,s)),e(N,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(a){var d,e,f,g=this.el,i=this.options,j=i.group,l=j.put,o=F===j,p=i.sort;if(void 0!==a.preventDefault&&(a.preventDefault(),!i.dragoverBubble&&a.stopPropagation()),I=!0,F&&!i.disabled&&(o?p||(f=!w.contains(s)):F.pull&&l&&(F.name===j.name||l.indexOf&&~l.indexOf(F.name)))&&(void 0===a.rootEl||a.rootEl===this.el)){if(U(a,i,this.el),R)return;if(d=c(a.target,i.draggable,g),e=s.getBoundingClientRect(),f)return b(!0),void(v||x?w.insertBefore(s,v||x):p||w.appendChild(s));if(0===g.children.length||g.children[0]===u||g===a.target&&(d=n(g,a))){if(d){if(d.animated)return;r=d.getBoundingClientRect()}b(o),k(w,g,s,e,d,r)!==!1&&(s.contains(g)||(g.appendChild(s),t=g),this._animate(e,s),d&&this._animate(r,d))}else if(d&&!d.animated&&d!==s&&void 0!==d.parentNode[L]){A!==d&&(A=d,B=h(d),C=h(d.parentNode));var q,r=d.getBoundingClientRect(),y=r.right-r.left,z=r.bottom-r.top,D=/left|right|inline/.test(B.cssFloat+B.display)||"flex"==C.display&&0===C["flex-direction"].indexOf("row"),E=d.offsetWidth>s.offsetWidth,G=d.offsetHeight>s.offsetHeight,H=(D?(a.clientX-r.left)/y:(a.clientY-r.top)/z)>.5,J=d.nextElementSibling,K=k(w,g,s,e,d,r);if(K!==!1){if(R=!0,setTimeout(m,30),b(o),1===K||-1===K)q=1===K;else if(D){var M=s.offsetTop,N=d.offsetTop;q=M===N?d.previousElementSibling===s&&!E||H&&E:N>M}else q=J!==s&&!G||H&&G;s.contains(g)||(q&&!J?g.appendChild(s):d.parentNode.insertBefore(s,q?J:d)),t=s.parentNode,this._animate(e,s),this._animate(r,d)}}}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();h(b,"transition","none"),h(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)"),b.offsetWidth,h(b,"transition","all "+c+"ms"),h(b,"transform","translate3d(0,0,0)"),clearTimeout(b.animated),b.animated=setTimeout(function(){h(b,"transition",""),h(b,"transform",""),b.animated=!1},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;f(N,"touchmove",this._onTouchMove),f(a,"mouseup",this._onDrop),f(a,"touchend",this._onDrop),f(a,"touchcancel",this._onDrop)},_onDrop:function(b){var c=this.el,d=this.options;clearInterval(this._loopId),clearInterval(J.pid),clearTimeout(this._dragStartTimer),f(N,"mousemove",this._onTouchMove),this.nativeDraggable&&(f(N,"drop",this),f(c,"dragstart",this._onDragStart)),this._offUpEvents(),b&&(I&&(b.preventDefault(),!d.dropBubble&&b.stopPropagation()),u&&u.parentNode.removeChild(u),s&&(this.nativeDraggable&&f(s,"dragend",this),l(s),g(s,this.options.ghostClass,!1),g(s,this.options.chosenClass,!1),w!==t?(E=p(s),E>=0&&(j(null,t,"sort",s,w,D,E),j(this,w,"sort",s,w,D,E),j(null,t,"add",s,w,D,E),j(this,w,"remove",s,w,D,E))):(v&&v.parentNode.removeChild(v),s.nextSibling!==x&&(E=p(s),E>=0&&(j(this,w,"update",s,w,D,E),j(this,w,"sort",s,w,D,E)))),a.active&&((null===E||-1===E)&&(E=D),j(this,w,"end",s,w,D,E),this.save())),w=s=t=u=x=v=y=z=G=H=I=E=A=B=F=a.active=null)},handleEvent:function(a){var b=a.type;"dragover"===b||"dragenter"===b?s&&(this._onDragOver(a),d(a)):("drop"===b||"dragend"===b)&&this._onDrop(a)},toArray:function(){for(var a,b=[],d=this.el.children,e=0,f=d.length,g=this.options;f>e;e++)a=d[e],c(a,g.draggable,this.el)&&b.push(a.getAttribute(g.dataIdAttr)||o(a));return b},sort:function(a){var b={},d=this.el;this.toArray().forEach(function(a,e){var f=d.children[e];c(f,this.options.draggable,d)&&(b[a]=f)},this),a.forEach(function(a){b[a]&&(d.removeChild(b[a]),d.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return c(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;return void 0===b?c[a]:(c[a]=b,void("group"===a&&V(c)))},destroy:function(){var a=this.el;a[L]=null,f(a,"mousedown",this._onTapStart),f(a,"touchstart",this._onTapStart),this.nativeDraggable&&(f(a,"dragover",this),f(a,"dragenter",this)),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),T.splice(T.indexOf(this._onDragOver),1),this._onDrop(),this.el=a=null}},a.utils={on:e,off:f,css:h,find:i,is:function(a,b){return!!c(a,b,a)},extend:r,throttle:q,closest:c,toggleClass:g,index:p},a.create=function(b,c){return new a(b,c)},a.version="1.3.0",a}),!function(a,b){if("function"==typeof define&&define.amd)define(["exports","module"],b);else if("undefined"!=typeof exports&&"undefined"!=typeof module)b(exports,module);else{var c={exports:{}};b(c.exports,c),a.autosize=c.exports}}(this,function(a,b){"use strict";function c(a){function b(){var b=window.getComputedStyle(a,null);n=b.overflowY,"vertical"===b.resize?a.style.resize="none":"both"===b.resize&&(a.style.resize="horizontal"),m="content-box"===b.boxSizing?-(parseFloat(b.paddingTop)+parseFloat(b.paddingBottom)):parseFloat(b.borderTopWidth)+parseFloat(b.borderBottomWidth),isNaN(m)&&(m=0),e()}function c(b){var c=a.style.width;a.style.width="0px",a.offsetWidth,a.style.width=c,n=b,l&&(a.style.overflowY=b),d()}function d(){var b=window.pageYOffset,c=document.body.scrollTop,d=a.style.height;a.style.height="auto";var e=a.scrollHeight+m;return 0===a.scrollHeight?void(a.style.height=d):(a.style.height=e+"px",o=a.clientWidth,document.documentElement.scrollTop=b,void(document.body.scrollTop=c))}function e(){var b=a.style.height;d();var e=window.getComputedStyle(a,null);if(e.height!==a.style.height?"visible"!==n&&c("visible"):"hidden"!==n&&c("hidden"),b!==a.style.height){var f=g("autosize:resized");a.dispatchEvent(f)}}var h=void 0===arguments[1]?{}:arguments[1],i=h.setOverflowX,j=void 0===i?!0:i,k=h.setOverflowY,l=void 0===k?!0:k;if(a&&a.nodeName&&"TEXTAREA"===a.nodeName&&!f.has(a)){var m=null,n=null,o=a.clientWidth,p=function(){a.clientWidth!==o&&e()},q=function(b){window.removeEventListener("resize",p,!1),a.removeEventListener("input",e,!1),a.removeEventListener("keyup",e,!1),a.removeEventListener("autosize:destroy",q,!1),a.removeEventListener("autosize:update",e,!1),f["delete"](a),Object.keys(b).forEach(function(c){a.style[c]=b[c]})}.bind(a,{height:a.style.height,resize:a.style.resize,overflowY:a.style.overflowY,overflowX:a.style.overflowX,wordWrap:a.style.wordWrap});a.addEventListener("autosize:destroy",q,!1),"onpropertychange"in a&&"oninput"in a&&a.addEventListener("keyup",e,!1),window.addEventListener("resize",p,!1),a.addEventListener("input",e,!1),a.addEventListener("autosize:update",e,!1),f.add(a),j&&(a.style.overflowX="hidden",a.style.wordWrap="break-word"),b()}}function d(a){if(a&&a.nodeName&&"TEXTAREA"===a.nodeName){var b=g("autosize:destroy");a.dispatchEvent(b)}}function e(a){if(a&&a.nodeName&&"TEXTAREA"===a.nodeName){var b=g("autosize:update");a.dispatchEvent(b)}}var f="function"==typeof Set?new Set:function(){var a=[];return{has:function(b){return Boolean(a.indexOf(b)>-1)},add:function(b){a.push(b)},"delete":function(b){a.splice(a.indexOf(b),1)}}}(),g=function(a){return new Event(a)};try{new Event("test")}catch(h){g=function(a){var b=document.createEvent("Event");return b.initEvent(a,!0,!1),b}}var i=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(i=function(a){return a},i.destroy=function(a){return a},i.update=function(a){return a}):(i=function(a,b){return a&&Array.prototype.forEach.call(a.length?a:[a],function(a){return c(a,b)}),a},i.destroy=function(a){return a&&Array.prototype.forEach.call(a.length?a:[a],d),a},i.update=function(a){return a&&Array.prototype.forEach.call(a.length?a:[a],e),a}),b.exports=i}),!function(a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else{if("function"==typeof define&&define.amd)return define([],a);(this||window).CodeMirror=a()}}(function(){"use strict";function a(c,d){if(!(this instanceof a))return new a(c,d);this.options=d=d?Ke(d):{},Ke($f,d,!1),n(d);var e=d.value;"string"==typeof e&&(e=new wg(e,d.mode,null,d.lineSeparator)),this.doc=e;var f=new a.inputStyles[d.inputStyle](this),g=this.display=new b(c,e,f);g.wrapper.CodeMirror=this,j(this),h(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),d.autofocus&&!Cf&&g.input.focus(),r(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new De,keySeq:null,specialChars:null};var i=this;sf&&11>tf&&setTimeout(function(){i.display.input.reset(!0)},20),Qb(this),We(),ub(this),this.curOp.forceUpdate=!0,Xd(this,e),d.autofocus&&!Cf||i.hasFocus()?setTimeout(Le(qc,this),20):rc(this);for(var k in _f)_f.hasOwnProperty(k)&&_f[k](this,d[k],ag);w(this),d.finishInit&&d.finishInit(this);for(var l=0;l<eg.length;++l)eg[l](this);wb(this),uf&&d.lineWrapping&&"optimizelegibility"==getComputedStyle(g.lineDiv).textRendering&&(g.lineDiv.style.textRendering="auto")}function b(a,b,c){var d=this;this.input=c,d.scrollbarFiller=Pe("div",null,"CodeMirror-scrollbar-filler"),d.scrollbarFiller.setAttribute("cm-not-content","true"),d.gutterFiller=Pe("div",null,"CodeMirror-gutter-filler"),d.gutterFiller.setAttribute("cm-not-content","true"),d.lineDiv=Pe("div",null,"CodeMirror-code"),d.selectionDiv=Pe("div",null,null,"position: relative; z-index: 1"),d.cursorDiv=Pe("div",null,"CodeMirror-cursors"),d.measure=Pe("div",null,"CodeMirror-measure"),d.lineMeasure=Pe("div",null,"CodeMirror-measure"),d.lineSpace=Pe("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none"),d.mover=Pe("div",[Pe("div",[d.lineSpace],"CodeMirror-lines")],null,"position: relative"),d.sizer=Pe("div",[d.mover],"CodeMirror-sizer"),d.sizerWidth=null,d.heightForcer=Pe("div",null,null,"position: absolute; height: "+Hg+"px; width: 1px;"),d.gutters=Pe("div",null,"CodeMirror-gutters"),d.lineGutter=null,d.scroller=Pe("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll"),d.scroller.setAttribute("tabIndex","-1"),d.wrapper=Pe("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror"),sf&&8>tf&&(d.gutters.style.zIndex=-1,d.scroller.style.paddingRight=0),uf||pf&&Cf||(d.scroller.draggable=!0),a&&(a.appendChild?a.appendChild(d.wrapper):a(d.wrapper)),d.viewFrom=d.viewTo=b.first,d.reportedViewFrom=d.reportedViewTo=b.first,d.view=[],d.renderedView=null,d.externalMeasured=null,d.viewOffset=0,d.lastWrapHeight=d.lastWrapWidth=0,d.updateLineNumbers=null,d.nativeBarWidth=d.barHeight=d.barWidth=0,d.scrollbarsClipped=!1,d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null,d.alignWidgets=!1,d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.maxLine=null,d.maxLineLength=0,d.maxLineChanged=!1,d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null,d.shift=!1,d.selForContextMenu=null,d.activeTouch=null,c.init(d)}function c(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption),d(b)}function d(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),a.doc.frontier=a.doc.first,Na(a,100),a.state.modeGen++,a.curOp&&Jb(a)}function e(a){a.options.lineWrapping?(Yg(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(Xg(a.display.wrapper,"CodeMirror-wrap"),m(a)),g(a),Jb(a),hb(a),setTimeout(function(){s(a)},100)}function f(a){var b=sb(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/tb(a.display)-3);return function(e){if(vd(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function g(a){var b=a.doc,c=f(a);b.iter(function(a){var b=c(a);b!=a.height&&_d(a,b)})}function h(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),hb(a)}function i(a){j(a),Jb(a),setTimeout(function(){v(a)},20)}function j(a){var b=a.display.gutters,c=a.options.gutters;Qe(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(Pe("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none",k(a)}function k(a){var b=a.display.gutters.offsetWidth;a.display.sizer.style.marginLeft=b+"px"}function l(a){if(0==a.height)return 0;for(var b,c=a.text.length,d=a;b=od(d);){var e=b.find(0,!0);d=e.from.line,c+=e.from.ch-e.to.ch}for(d=a;b=pd(d);){var e=b.find(0,!0);c-=d.text.length-e.from.ch,d=e.to.line,c+=d.text.length-e.to.ch}return c}function m(a){var b=a.display,c=a.doc;b.maxLine=Yd(c,c.first),b.maxLineLength=l(b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var c=l(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function n(a){var b=Ge(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):b>-1&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function o(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+Sa(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+Ua(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function p(a,b,c){this.cm=c;var d=this.vert=Pe("div",[Pe("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=Pe("div",[Pe("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a(d),a(e),Cg(d,"scroll",function(){d.clientHeight&&b(d.scrollTop,"vertical")}),Cg(e,"scroll",function(){e.clientWidth&&b(e.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,sf&&8>tf&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function q(){}function r(b){b.display.scrollbars&&(b.display.scrollbars.clear(),b.display.scrollbars.addClass&&Xg(b.display.wrapper,b.display.scrollbars.addClass)),b.display.scrollbars=new a.scrollbarModel[b.options.scrollbarStyle](function(a){b.display.wrapper.insertBefore(a,b.display.scrollbarFiller),Cg(a,"mousedown",function(){b.state.focused&&setTimeout(function(){b.display.input.focus()},0)}),a.setAttribute("cm-not-content","true")},function(a,c){"horizontal"==c?ec(b,a):dc(b,a)},b),b.display.scrollbars.addClass&&Yg(b.display.wrapper,b.display.scrollbars.addClass)}function s(a,b){b||(b=o(a));var c=a.display.barWidth,d=a.display.barHeight;t(a,b);for(var e=0;4>e&&c!=a.display.barWidth||d!=a.display.barHeight;e++)c!=a.display.barWidth&&a.options.lineWrapping&&F(a),t(a,o(a)),c=a.display.barWidth,d=a.display.barHeight}function t(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px",c.heightForcer.style.borderBottom=d.bottom+"px solid transparent",d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="",d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function u(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop;d=Math.floor(d-Ra(a));var e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,f=be(b,d),g=be(b,e);if(c&&c.ensure){var h=c.ensure.from.line,i=c.ensure.to.line;f>h?(f=h,g=be(b,ce(Yd(b,h))+a.wrapper.clientHeight)):Math.min(i,b.lastLine())>=g&&(f=be(b,ce(Yd(b,i))-a.wrapper.clientHeight),g=i)}return{from:f,to:Math.max(g,f+1)}}function v(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=y(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&c[g].gutter&&(c[g].gutter.style.left=f);var h=c[g].alignable;if(h)for(var i=0;i<h.length;i++)h[i].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function w(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=x(a.options,b.first+b.size-1),d=a.display;if(c.length!=d.lineNumChars){var e=d.measure.appendChild(Pe("div",[Pe("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,g=e.offsetWidth-f;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(f,d.lineGutter.offsetWidth-g)+1,d.lineNumWidth=d.lineNumInnerWidth+g,d.lineNumChars=d.lineNumInnerWidth?c.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",k(a),!0}return!1}function x(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function y(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function z(a,b,c){var d=a.display;this.viewport=b,this.visible=u(d,a.doc,b),this.editorIsHidden=!d.wrapper.offsetWidth,this.wrapperHeight=d.wrapper.clientHeight,this.wrapperWidth=d.wrapper.clientWidth,this.oldDisplayWidth=Va(a),this.force=c,this.dims=H(a),this.events=[]}function A(a){var b=a.display;!b.scrollbarsClipped&&b.scroller.offsetWidth&&(b.nativeBarWidth=b.scroller.offsetWidth-b.scroller.clientWidth,b.heightForcer.style.height=Ua(a)+"px",b.sizer.style.marginBottom=-b.nativeBarWidth+"px",b.sizer.style.borderRightWidth=Ua(a)+"px",b.scrollbarsClipped=!0)}function B(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return Lb(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==Pb(a))return!1;w(a)&&(Lb(a),b.dims=H(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);c.viewFrom<f&&f-c.viewFrom<20&&(f=Math.max(d.first,c.viewFrom)),c.viewTo>g&&c.viewTo-g<20&&(g=Math.min(e,c.viewTo)),Jf&&(f=td(a.doc,f),g=ud(a.doc,g));var h=f!=c.viewFrom||g!=c.viewTo||c.lastWrapHeight!=b.wrapperHeight||c.lastWrapWidth!=b.wrapperWidth;Ob(a,f,g),c.viewOffset=ce(Yd(a.doc,c.viewFrom)),a.display.mover.style.top=c.viewOffset+"px";var i=Pb(a);if(!h&&0==i&&!b.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;var j=Se();return i>4&&(c.lineDiv.style.display="none"),I(a,c.updateLineNumbers,b.dims),i>4&&(c.lineDiv.style.display=""),c.renderedView=c.view,j&&Se()!=j&&j.offsetHeight&&j.focus(),Qe(c.cursorDiv),Qe(c.selectionDiv),c.gutters.style.height=c.sizer.style.minHeight=0,h&&(c.lastWrapHeight=b.wrapperHeight,c.lastWrapWidth=b.wrapperWidth,Na(a,400)),c.updateLineNumbers=null,!0}function C(a,b){for(var c=b.viewport,d=!0;(d&&a.options.lineWrapping&&b.oldDisplayWidth!=Va(a)||(c&&null!=c.top&&(c={top:Math.min(a.doc.height+Sa(a.display)-Wa(a),c.top)}),b.visible=u(a.display,a.doc,c),!(b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)))&&B(a,b);d=!1){F(a);var e=o(a);Ia(a),s(a,e),E(a,e)}b.signal(a,"update",a),(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)&&(b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo)}function D(a,b){var c=new z(a,b);if(B(a,c)){F(a),C(a,c);var d=o(a);Ia(a),s(a,d),E(a,d),c.finish()}}function E(a,b){a.display.sizer.style.minHeight=b.docHeight+"px",a.display.heightForcer.style.top=b.docHeight+"px",a.display.gutters.style.height=b.docHeight+a.display.barHeight+Ua(a)+"px"}function F(a){for(var b=a.display,c=b.lineDiv.offsetTop,d=0;d<b.view.length;d++){var e,f=b.view[d];if(!f.hidden){if(sf&&8>tf){var g=f.node.offsetTop+f.node.offsetHeight;e=g-c,c=g}else{var h=f.node.getBoundingClientRect();e=h.bottom-h.top}var i=f.line.height-e;if(2>e&&(e=sb(b)),(i>.001||-.001>i)&&(_d(f.line,e),G(f.line),f.rest))for(var j=0;j<f.rest.length;j++)G(f.rest[j])}}}function G(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.parentNode.offsetHeight}function H(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{fixedPos:y(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function I(a,b,c){function d(b){var c=b.nextSibling;return uf&&Df&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b),c}for(var e=a.display,f=a.options.lineNumbers,g=e.lineDiv,h=g.firstChild,i=e.view,j=e.viewFrom,k=0;k<i.length;k++){var l=i[k];if(l.hidden);else if(l.node&&l.node.parentNode==g){for(;h!=l.node;)h=d(h);var m=f&&null!=b&&j>=b&&l.lineNumber;l.changes&&(Ge(l.changes,"gutter")>-1&&(m=!1),J(a,l,j,c)),m&&(Qe(l.lineNumber),l.lineNumber.appendChild(document.createTextNode(x(a.options,j)))),h=l.node.nextSibling}else{var n=R(a,l,j,c);g.insertBefore(n,h)}j+=l.size}for(;h;)h=d(h)}function J(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];"text"==f?N(a,b):"gutter"==f?P(a,b,c,d):"class"==f?O(b):"widget"==f&&Q(a,b,d)}b.changes=null}function K(a){return a.node==a.text&&(a.node=Pe("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),sf&&8>tf&&(a.node.style.zIndex=2)),a.node}function L(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;if(b&&(b+=" CodeMirror-linebackground"),a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=K(a);a.background=c.insertBefore(Pe("div",null,b),c.firstChild)}}function M(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):Ld(a,b)}function N(a,b){var c=b.text.className,d=M(a,b);b.text==b.node&&(b.node=d.pre),b.text.parentNode.replaceChild(d.pre,b.text),b.text=d.pre,d.bgClass!=b.bgClass||d.textClass!=b.textClass?(b.bgClass=d.bgClass,b.textClass=d.textClass,O(b)):c&&(b.text.className=c)}function O(a){L(a),a.line.wrapClass?K(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");var b=a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass;a.text.className=b||""}function P(a,b,c,d){if(b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null),b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null),b.line.gutterClass){var e=K(b);b.gutterBackground=Pe("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px"),e.insertBefore(b.gutterBackground,b.text)}var f=b.line.gutterMarkers;if(a.options.lineNumbers||f){var e=K(b),g=b.gutter=Pe("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");if(a.display.input.setUneditable(g),e.insertBefore(g,b.text),b.line.gutterClass&&(g.className+=" "+b.line.gutterClass),!a.options.lineNumbers||f&&f["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(Pe("div",x(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),f)for(var h=0;h<a.options.gutters.length;++h){var i=a.options.gutters[h],j=f.hasOwnProperty(i)&&f[i];j&&g.appendChild(Pe("div",[j],"CodeMirror-gutter-elt","left: "+d.gutterLeft[i]+"px; width: "+d.gutterWidth[i]+"px"))}}}function Q(a,b,c){b.alignable&&(b.alignable=null);for(var d,e=b.node.firstChild;e;e=d){var d=e.nextSibling;"CodeMirror-linewidget"==e.className&&b.node.removeChild(e)}S(a,b,c)}function R(a,b,c,d){var e=M(a,b);return b.text=b.node=e.pre,e.bgClass&&(b.bgClass=e.bgClass),e.textClass&&(b.textClass=e.textClass),O(b),P(a,b,c,d),S(a,b,d),b.node}function S(a,b,c){if(T(a,b.line,b,c,!0),b.rest)for(var d=0;d<b.rest.length;d++)T(a,b.rest[d],b,c,!1)}function T(a,b,c,d,e){if(b.widgets)for(var f=K(c),g=0,h=b.widgets;g<h.length;++g){var i=h[g],j=Pe("div",[i.node],"CodeMirror-linewidget");i.handleMouseEvents||j.setAttribute("cm-ignore-events","true"),U(i,j,c,d),a.display.input.setUneditable(j),e&&i.above?f.insertBefore(j,c.gutter||c.text):f.appendChild(j),xe(i,"redraw")}}function U(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function V(a){return Kf(a.line,a.ch)}function W(a,b){return Lf(a,b)<0?b:a}function X(a,b){return Lf(a,b)<0?a:b}function Y(a){a.state.focused||(a.display.input.focus(),qc(a))}function Z(a,b,c,d,e){var f=a.doc;a.display.shift=!1,d||(d=f.sel);var g=a.state.pasteIncoming||"paste"==e,h=f.splitLines(b),i=null;if(g&&d.ranges.length>1)if(Mf&&Mf.join("\n")==b){if(d.ranges.length%Mf.length==0){i=[];for(var j=0;j<Mf.length;j++)i.push(f.splitLines(Mf[j]))}}else h.length==d.ranges.length&&(i=He(h,function(a){return[a]}));for(var j=d.ranges.length-1;j>=0;j--){var k=d.ranges[j],l=k.from(),m=k.to();k.empty()&&(c&&c>0?l=Kf(l.line,l.ch-c):a.state.overwrite&&!g&&(m=Kf(m.line,Math.min(Yd(f,m.line).text.length,m.ch+Fe(h).length))));var n=a.curOp.updateInput,o={from:l,to:m,text:i?i[j%i.length]:h,origin:e||(g?"paste":a.state.cutIncoming?"cut":"+input")};zc(a.doc,o),xe(a,"inputRead",a,o)}b&&!g&&_(a,b),Lc(a),a.curOp.updateInput=n,a.curOp.typing=!0,a.state.pasteIncoming=a.state.cutIncoming=!1}function $(a,b){var c=a.clipboardData&&a.clipboardData.getData("text/plain");return c?(a.preventDefault(),b.isReadOnly()||b.options.disableInput||Db(b,function(){Z(b,c,0,null,"paste")}),!0):void 0}function _(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;d>=0;d--){var e=c.ranges[d];if(!(e.head.ch>100||d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars){for(var h=0;h<f.electricChars.length;h++)if(b.indexOf(f.electricChars.charAt(h))>-1){g=Nc(a,e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(Yd(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=Nc(a,e.head.line,"smart"));g&&xe(a,"electricInput",a,e.head.line)}}}function aa(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line,f={anchor:Kf(e,0),head:Kf(e+1,0)};c.push(f),b.push(a.getRange(f.anchor,f.head))}return{text:b,ranges:c}}function ba(a){a.setAttribute("autocorrect","off"),a.setAttribute("autocapitalize","off"),a.setAttribute("spellcheck","false")}function ca(a){this.cm=a,this.prevInput="",this.pollingFast=!1,this.polling=new De,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function da(){var a=Pe("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),b=Pe("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return uf?a.style.width="1000px":a.setAttribute("wrap","off"),Bf&&(a.style.border="1px solid black"),ba(a),b}function ea(a){this.cm=a,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new De,this.gracePeriod=!1}function fa(a,b){var c=_a(a,b.line);if(!c||c.hidden)return null;var d=Yd(a.doc,b.line),e=Ya(c,d,b.line),f=de(d),g="left";if(f){var h=jf(f,b.ch);g=h%2?"right":"left"}var i=cb(e.map,b.ch,g);return i.offset="right"==i.collapse?i.end:i.start,i}function ga(a,b){return b&&(a.bad=!0),a}function ha(a,b,c){var d;if(b==a.display.lineDiv){if(d=a.display.lineDiv.childNodes[c],!d)return ga(a.clipPos(Kf(a.display.viewTo-1)),!0);b=null,c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return ia(f,b,c)}}function ia(a,b,c){function d(b,c,d){for(var e=-1;e<(k?k.length:0);e++)for(var f=0>e?j.map:k[e],g=0;g<f.length;g+=3){var h=f[g+2];if(h==b||h==c){var i=ae(0>e?a.line:a.rest[e]),l=f[g]+d;return(0>d||h!=b)&&(l=f[g+(d?1:0)]),Kf(i,l)}}}var e=a.text.firstChild,f=!1;if(!b||!Ug(e,b))return ga(Kf(ae(a.line),0),!0);if(b==e&&(f=!0,b=e.childNodes[c],c=0,!b)){var g=a.rest?Fe(a.rest):a.line;return ga(Kf(ae(g),g.text.length),f)}var h=3==b.nodeType?b:null,i=b;for(h||1!=b.childNodes.length||3!=b.firstChild.nodeType||(h=b.firstChild,c&&(c=h.nodeValue.length));i.parentNode!=e;)i=i.parentNode;var j=a.measure,k=j.maps,l=d(h,i,c);if(l)return ga(l,f);for(var m=i.nextSibling,n=h?h.nodeValue.length-c:0;m;m=m.nextSibling){if(l=d(m,m.firstChild,0))return ga(Kf(l.line,l.ch-n),f);n+=m.textContent.length}for(var o=i.previousSibling,n=c;o;o=o.previousSibling){if(l=d(o,o.firstChild,-1))return ga(Kf(l.line,l.ch+n),f);n+=m.textContent.length}}function ja(a,b,c,d,e){function f(a){return function(b){return b.id==a}}function g(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(null!=c)return""==c&&(c=b.textContent.replace(/\u200b/g,"")),void(h+=c);var k,l=b.getAttribute("cm-marker");if(l){var m=a.findMarks(Kf(d,0),Kf(e+1,0),f(+l));return void(m.length&&(k=m[0].find())&&(h+=Zd(a.doc,k.from,k.to).join(j)));
}if("false"==b.getAttribute("contenteditable"))return;for(var n=0;n<b.childNodes.length;n++)g(b.childNodes[n]);/^(pre|div|p)$/i.test(b.nodeName)&&(i=!0)}else if(3==b.nodeType){var o=b.nodeValue;if(!o)return;i&&(h+=j,i=!1),h+=o}}for(var h="",i=!1,j=a.doc.lineSeparator();g(b),b!=c;)b=b.nextSibling;return h}function ka(a,b){this.ranges=a,this.primIndex=b}function la(a,b){this.anchor=a,this.head=b}function ma(a,b){var c=a[b];a.sort(function(a,b){return Lf(a.from(),b.from())}),b=Ge(a,c);for(var d=1;d<a.length;d++){var e=a[d],f=a[d-1];if(Lf(f.to(),e.from())>=0){var g=X(f.from(),e.from()),h=W(f.to(),e.to()),i=f.empty()?e.from()==e.head:f.from()==f.head;b>=d&&--b,a.splice(--d,2,new la(i?h:g,i?g:h))}}return new ka(a,b)}function na(a,b){return new ka([new la(a,b||a)],0)}function oa(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function pa(a,b){if(b.line<a.first)return Kf(a.first,0);var c=a.first+a.size-1;return b.line>c?Kf(c,Yd(a,c).text.length):qa(b,Yd(a,b.line).text.length)}function qa(a,b){var c=a.ch;return null==c||c>b?Kf(a.line,b):0>c?Kf(a.line,0):a}function ra(a,b){return b>=a.first&&b<a.first+a.size}function sa(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=pa(a,b[d]);return c}function ta(a,b,c,d){if(a.cm&&a.cm.display.shift||a.extend){var e=b.anchor;if(d){var f=Lf(c,e)<0;f!=Lf(d,e)<0?(e=c,c=d):f!=Lf(c,d)<0&&(c=d)}return new la(e,c)}return new la(d||c,c)}function ua(a,b,c,d){Aa(a,new ka([ta(a,a.sel.primary(),b,c)],0),d)}function va(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=ta(a,a.sel.ranges[e],b[e],null);var f=ma(d,a.sel.primIndex);Aa(a,f,c)}function wa(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c,Aa(a,ma(e,a.sel.primIndex),d)}function xa(a,b,c,d){Aa(a,na(b,c),d)}function ya(a,b,c){var d={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new la(pa(a,b[c].anchor),pa(a,b[c].head))},origin:c&&c.origin};return Fg(a,"beforeSelectionChange",a,d),a.cm&&Fg(a.cm,"beforeSelectionChange",a.cm,d),d.ranges!=b.ranges?ma(d.ranges,d.ranges.length-1):b}function za(a,b,c){var d=a.history.done,e=Fe(d);e&&e.ranges?(d[d.length-1]=b,Ba(a,b,c)):Aa(a,b,c)}function Aa(a,b,c){Ba(a,b,c),ke(a,a.sel,a.cm?a.cm.curOp.id:NaN,c)}function Ba(a,b,c){(Be(a,"beforeSelectionChange")||a.cm&&Be(a.cm,"beforeSelectionChange"))&&(b=ya(a,b,c));var d=c&&c.bias||(Lf(b.primary().head,a.sel.primary().head)<0?-1:1);Ca(a,Ea(a,b,d,!0)),c&&c.scroll===!1||!a.cm||Lc(a.cm)}function Ca(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,Ae(a.cm)),xe(a,"cursorActivity",a))}function Da(a){Ca(a,Ea(a,a.sel,null,!1),Jg)}function Ea(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=b.ranges.length==a.sel.ranges.length&&a.sel.ranges[f],i=Ga(a,g.anchor,h&&h.anchor,c,d),j=Ga(a,g.head,h&&h.head,c,d);(e||i!=g.anchor||j!=g.head)&&(e||(e=b.ranges.slice(0,f)),e[f]=new la(i,j))}return e?ma(e,b.primIndex):b}function Fa(a,b,c,d,e){var f=Yd(a,b.line);if(f.markedSpans)for(var g=0;g<f.markedSpans.length;++g){var h=f.markedSpans[g],i=h.marker;if((null==h.from||(i.inclusiveLeft?h.from<=b.ch:h.from<b.ch))&&(null==h.to||(i.inclusiveRight?h.to>=b.ch:h.to>b.ch))){if(e&&(Fg(i,"beforeCursorEnter"),i.explicitlyCleared)){if(f.markedSpans){--g;continue}break}if(!i.atomic)continue;if(c){var j,k=i.find(0>d?1:-1);if((0>d?i.inclusiveRight:i.inclusiveLeft)&&(k=Ha(a,k,-d,k&&k.line==b.line?f:null)),k&&k.line==b.line&&(j=Lf(k,c))&&(0>d?0>j:j>0))return Fa(a,k,b,d,e)}var l=i.find(0>d?-1:1);return(0>d?i.inclusiveLeft:i.inclusiveRight)&&(l=Ha(a,l,d,l.line==b.line?f:null)),l?Fa(a,l,b,d,e):null}}return b}function Ga(a,b,c,d,e){var f=d||1,g=Fa(a,b,c,f,e)||!e&&Fa(a,b,c,f,!0)||Fa(a,b,c,-f,e)||!e&&Fa(a,b,c,-f,!0);return g?g:(a.cantEdit=!0,Kf(a.first,0))}function Ha(a,b,c,d){return 0>c&&0==b.ch?b.line>a.first?pa(a,Kf(b.line-1)):null:c>0&&b.ch==(d||Yd(a,b.line)).text.length?b.line<a.first+a.size-1?Kf(b.line+1,0):null:new Kf(b.line,b.ch+c)}function Ia(a){a.display.input.showSelection(a.display.input.prepareSelection())}function Ja(a,b){for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(b!==!1||g!=c.sel.primIndex){var h=c.sel.ranges[g];if(!(h.from().line>=a.display.viewTo||h.to().line<a.display.viewFrom)){var i=h.empty();(i||a.options.showCursorWhenSelecting)&&Ka(a,h.head,e),i||La(a,h,f)}}return d}function Ka(a,b,c){var d=nb(a,b,"div",null,null,!a.options.singleCursorHeightPerLine),e=c.appendChild(Pe("div","Â ","CodeMirror-cursor"));if(e.style.left=d.left+"px",e.style.top=d.top+"px",e.style.height=Math.max(0,d.bottom-d.top)*a.options.cursorHeight+"px",d.other){var f=c.appendChild(Pe("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"));f.style.display="",f.style.left=d.other.left+"px",f.style.top=d.other.top+"px",f.style.height=.85*(d.other.bottom-d.other.top)+"px"}}function La(a,b,c){function d(a,b,c,d){0>b&&(b=0),b=Math.round(b),d=Math.round(d),h.appendChild(Pe("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?k-a:c)+"px; height: "+(d-b)+"px"))}function e(b,c,e){function f(c,d){return mb(a,Kf(b,c),"div",l,d)}var h,i,l=Yd(g,b),m=l.text.length;return _e(de(l),c||0,null==e?m:e,function(a,b,g){var l,n,o,p=f(a,"left");if(a==b)l=p,n=o=p.left;else{if(l=f(b-1,"right"),"rtl"==g){var q=p;p=l,l=q}n=p.left,o=l.right}null==c&&0==a&&(n=j),l.top-p.top>3&&(d(n,p.top,null,p.bottom),n=j,p.bottom<l.top&&d(n,p.bottom,null,l.top)),null==e&&b==m&&(o=k),(!h||p.top<h.top||p.top==h.top&&p.left<h.left)&&(h=p),(!i||l.bottom>i.bottom||l.bottom==i.bottom&&l.right>i.right)&&(i=l),j+1>n&&(n=j),d(n,l.top,o-n,l.bottom)}),{start:h,end:i}}var f=a.display,g=a.doc,h=document.createDocumentFragment(),i=Ta(a.display),j=i.left,k=Math.max(f.sizerWidth,Va(a)-f.sizer.offsetLeft)-i.right,l=b.from(),m=b.to();if(l.line==m.line)e(l.line,l.ch,m.ch);else{var n=Yd(g,l.line),o=Yd(g,m.line),p=rd(n)==rd(o),q=e(l.line,l.ch,p?n.text.length+1:null).end,r=e(m.line,p?0:null,m.ch).start;p&&(q.top<r.top-2?(d(q.right,q.top,null,q.bottom),d(j,r.top,r.left,r.bottom)):d(q.right,q.top,r.left-q.right,q.bottom)),q.bottom<r.top&&d(j,q.bottom,null,r.top)}c.appendChild(h)}function Ma(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="",a.options.cursorBlinkRate>0?b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):a.options.cursorBlinkRate<0&&(b.cursorDiv.style.visibility="hidden")}}function Na(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,Le(Oa,a))}function Oa(a){var b=a.doc;if(b.frontier<b.first&&(b.frontier=b.first),!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=gg(b.mode,Qa(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(b.frontier>=a.display.viewFrom){var g=f.styles,h=f.text.length>a.options.maxHighlightLength,i=Hd(a,f,h?gg(b.mode,d):d,!0);f.styles=i.styles;var j=f.styleClasses,k=i.classes;k?f.styleClasses=k:j&&(f.styleClasses=null);for(var l=!g||g.length!=f.styles.length||j!=k&&(!j||!k||j.bgClass!=k.bgClass||j.textClass!=k.textClass),m=0;!l&&m<g.length;++m)l=g[m]!=f.styles[m];l&&e.push(b.frontier),f.stateAfter=h?d:gg(b.mode,d)}else f.text.length<=a.options.maxHighlightLength&&Jd(a,f.text,d),f.stateAfter=b.frontier%5==0?gg(b.mode,d):null;return++b.frontier,+new Date>c?(Na(a,a.options.workDelay),!0):void 0}),e.length&&Db(a,function(){for(var b=0;b<e.length;b++)Kb(a,e[b],"text")})}}function Pa(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1e3:100),h=b;h>g;--h){if(h<=f.first)return f.first;var i=Yd(f,h-1);if(i.stateAfter&&(!c||h<=f.frontier))return h;var j=Mg(i.text,null,a.options.tabSize);(null==e||d>j)&&(e=h-1,d=j)}return e}function Qa(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=Pa(a,b,c),g=f>d.first&&Yd(d,f-1).stateAfter;return g=g?gg(d.mode,g):hg(d.mode),d.iter(f,b,function(c){Jd(a,c.text,g);var h=f==b-1||f%5==0||f>=e.viewFrom&&f<e.viewTo;c.stateAfter=h?gg(d.mode,g):null,++f}),c&&(d.frontier=f),g}function Ra(a){return a.lineSpace.offsetTop}function Sa(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function Ta(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=Re(a.measure,Pe("pre","x")),c=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,d={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};return isNaN(d.left)||isNaN(d.right)||(a.cachedPaddingH=d),d}function Ua(a){return Hg-a.display.nativeBarWidth}function Va(a){return a.display.scroller.clientWidth-Ua(a)-a.display.barWidth}function Wa(a){return a.display.scroller.clientHeight-Ua(a)-a.display.barHeight}function Xa(a,b,c){var d=a.options.lineWrapping,e=d&&Va(a);if(!b.measure.heights||d&&b.measure.width!=e){var f=b.measure.heights=[];if(d){b.measure.width=e;for(var g=b.text.firstChild.getClientRects(),h=0;h<g.length-1;h++){var i=g[h],j=g[h+1];Math.abs(i.bottom-j.bottom)>2&&f.push((i.bottom+j.top)/2-c.top)}}f.push(c.bottom-c.top)}}function Ya(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(var d=0;d<a.rest.length;d++)if(ae(a.rest[d])>c)return{map:a.measure.maps[d],cache:a.measure.caches[d],before:!0}}function Za(a,b){b=rd(b);var c=ae(b),d=a.display.externalMeasured=new Hb(a.doc,b,c);d.lineN=c;var e=d.built=Ld(a,d);return d.text=e.pre,Re(a.display.lineMeasure,e.pre),d}function $a(a,b,c,d){return bb(a,ab(a,b),c,d)}function _a(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[Mb(a,b)];var c=a.display.externalMeasured;return c&&b>=c.lineN&&b<c.lineN+c.size?c:void 0}function ab(a,b){var c=ae(b),d=_a(a,c);d&&!d.text?d=null:d&&d.changes&&(J(a,d,c,H(a)),a.curOp.forceUpdate=!0),d||(d=Za(a,b));var e=Ya(d,b,c);return{line:b,view:d,rect:null,map:e.map,cache:e.cache,before:e.before,hasHeights:!1}}function bb(a,b,c,d,e){b.before&&(c=-1);var f,g=c+(d||"");return b.cache.hasOwnProperty(g)?f=b.cache[g]:(b.rect||(b.rect=b.view.text.getBoundingClientRect()),b.hasHeights||(Xa(a,b.view,b.rect),b.hasHeights=!0),f=db(a,b,c,d),f.bogus||(b.cache[g]=f)),{left:f.left,right:f.right,top:e?f.rtop:f.top,bottom:e?f.rbottom:f.bottom}}function cb(a,b,c){for(var d,e,f,g,h=0;h<a.length;h+=3){var i=a[h],j=a[h+1];if(i>b?(e=0,f=1,g="left"):j>b?(e=b-i,f=e+1):(h==a.length-3||b==j&&a[h+3]>b)&&(f=j-i,e=f-1,b>=j&&(g="right")),null!=e){if(d=a[h+2],i==j&&c==(d.insertLeft?"left":"right")&&(g=c),"left"==c&&0==e)for(;h&&a[h-2]==a[h-3]&&a[h-1].insertLeft;)d=a[(h-=3)+2],g="left";if("right"==c&&e==j-i)for(;h<a.length-3&&a[h+3]==a[h+4]&&!a[h+5].insertLeft;)d=a[(h+=3)+2],g="right";break}}return{node:d,start:e,end:f,collapse:g,coverStart:i,coverEnd:j}}function db(a,b,c,d){var e,f=cb(b.map,c,d),g=f.node,h=f.start,i=f.end,j=f.collapse;if(3==g.nodeType){for(var k=0;4>k;k++){for(;h&&Oe(b.line.text.charAt(f.coverStart+h));)--h;for(;f.coverStart+i<f.coverEnd&&Oe(b.line.text.charAt(f.coverStart+i));)++i;if(sf&&9>tf&&0==h&&i==f.coverEnd-f.coverStart)e=g.parentNode.getBoundingClientRect();else if(sf&&a.options.lineWrapping){var l=Qg(g,h,i).getClientRects();e=l.length?l["right"==d?l.length-1:0]:Qf}else e=Qg(g,h,i).getBoundingClientRect()||Qf;if(e.left||e.right||0==h)break;i=h,h-=1,j="right"}sf&&11>tf&&(e=eb(a.display.measure,e))}else{h>0&&(j=d="right");var l;e=a.options.lineWrapping&&(l=g.getClientRects()).length>1?l["right"==d?l.length-1:0]:g.getBoundingClientRect()}if(sf&&9>tf&&!h&&(!e||!e.left&&!e.right)){var m=g.parentNode.getClientRects()[0];e=m?{left:m.left,right:m.left+tb(a.display),top:m.top,bottom:m.bottom}:Qf}for(var n=e.top-b.rect.top,o=e.bottom-b.rect.top,p=(n+o)/2,q=b.view.measure.heights,k=0;k<q.length-1&&!(p<q[k]);k++);var r=k?q[k-1]:0,s=q[k],t={left:("right"==j?e.right:e.left)-b.rect.left,right:("left"==j?e.left:e.right)-b.rect.left,top:r,bottom:s};return e.left||e.right||(t.bogus=!0),a.options.singleCursorHeightPerLine||(t.rtop=n,t.rbottom=o),t}function eb(a,b){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!$e(a))return b;var c=screen.logicalXDPI/screen.deviceXDPI,d=screen.logicalYDPI/screen.deviceYDPI;return{left:b.left*c,right:b.right*c,top:b.top*d,bottom:b.bottom*d}}function fb(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function gb(a){a.display.externalMeasure=null,Qe(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)fb(a.display.view[b])}function hb(a){gb(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function ib(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function jb(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function kb(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=yd(b.widgets[e]);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=ce(b);if("local"==d?g+=Ra(a.display):g-=a.display.viewOffset,"page"==d||"window"==d){var h=a.display.lineSpace.getBoundingClientRect();g+=h.top+("window"==d?0:jb());var i=h.left+("window"==d?0:ib());c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function lb(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;if("page"==c)d-=ib(),e-=jb();else if("local"==c||!c){var f=a.display.sizer.getBoundingClientRect();d+=f.left,e+=f.top}var g=a.display.lineSpace.getBoundingClientRect();return{left:d-g.left,top:e-g.top}}function mb(a,b,c,d,e){return d||(d=Yd(a.doc,b.line)),kb(a,d,$a(a,d,b.ch,e),c)}function nb(a,b,c,d,e,f){function g(b,g){var h=bb(a,e,b,g?"right":"left",f);return g?h.left=h.right:h.right=h.left,kb(a,d,h,c)}function h(a,b){var c=i[b],d=c.level%2;return a==af(c)&&b&&c.level<i[b-1].level?(c=i[--b],a=bf(c)-(c.level%2?0:1),d=!0):a==bf(c)&&b<i.length-1&&c.level<i[b+1].level&&(c=i[++b],a=af(c)-c.level%2,d=!1),d&&a==c.to&&a>c.from?g(a-1):g(a,d)}d=d||Yd(a.doc,b.line),e||(e=ab(a,d));var i=de(d),j=b.ch;if(!i)return g(j);var k=jf(i,j),l=h(j,k);return null!=eh&&(l.other=h(j,eh)),l}function ob(a,b){var c=0,b=pa(a.doc,b);a.options.lineWrapping||(c=tb(a.display)*b.ch);var d=Yd(a.doc,b.line),e=ce(d)+Ra(a.display);return{left:c,right:c,top:e,bottom:e+d.height}}function pb(a,b,c,d){var e=Kf(a,b);return e.xRel=d,c&&(e.outside=!0),e}function qb(a,b,c){var d=a.doc;if(c+=a.display.viewOffset,0>c)return pb(d.first,0,!0,-1);var e=be(d,c),f=d.first+d.size-1;if(e>f)return pb(d.first+d.size-1,Yd(d,f).text.length,!0,1);0>b&&(b=0);for(var g=Yd(d,e);;){var h=rb(a,g,e,b,c),i=pd(g),j=i&&i.find(0,!0);if(!i||!(h.ch>j.from.ch||h.ch==j.from.ch&&h.xRel>0))return h;e=ae(g=j.to.line)}}function rb(a,b,c,d,e){function f(d){var e=nb(a,Kf(c,d),"line",b,j);return h=!0,g>e.bottom?e.left-i:g<e.top?e.left+i:(h=!1,e.left)}var g=e-ce(b),h=!1,i=2*a.display.wrapper.clientWidth,j=ab(a,b),k=de(b),l=b.text.length,m=cf(b),n=df(b),o=f(m),p=h,q=f(n),r=h;if(d>q)return pb(c,n,r,1);for(;;){if(k?n==m||n==lf(b,m,1):1>=n-m){for(var s=o>d||q-d>=d-o?m:n,t=d-(s==m?o:q);Oe(b.text.charAt(s));)++s;var u=pb(c,s,s==m?p:r,-1>t?-1:t>1?1:0);return u}var v=Math.ceil(l/2),w=m+v;if(k){w=m;for(var x=0;v>x;++x)w=lf(b,w,1)}var y=f(w);y>d?(n=w,q=y,(r=h)&&(q+=1e3),l=v):(m=w,o=y,p=h,l-=v)}}function sb(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Nf){Nf=Pe("pre");for(var b=0;49>b;++b)Nf.appendChild(document.createTextNode("x")),Nf.appendChild(Pe("br"));Nf.appendChild(document.createTextNode("x"))}Re(a.measure,Nf);var c=Nf.offsetHeight/50;return c>3&&(a.cachedTextHeight=c),Qe(a.measure),c||1}function tb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=Pe("span","xxxxxxxxxx"),c=Pe("pre",[b]);Re(a.measure,c);var d=b.getBoundingClientRect(),e=(d.right-d.left)/10;return e>2&&(a.cachedCharWidth=e),e||10}function ub(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Sf},Rf?Rf.ops.push(a.curOp):a.curOp.ownsGroup=Rf={ops:[a.curOp],delayedCallbacks:[]}}function vb(a){var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c].call(null);for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++].call(null,e.cm)}}while(c<b.length)}function wb(a){var b=a.curOp,c=b.ownsGroup;if(c)try{vb(c)}finally{Rf=null;for(var d=0;d<c.ops.length;d++)c.ops[d].cm.curOp=null;xb(c)}}function xb(a){for(var b=a.ops,c=0;c<b.length;c++)yb(b[c]);for(var c=0;c<b.length;c++)zb(b[c]);for(var c=0;c<b.length;c++)Ab(b[c]);for(var c=0;c<b.length;c++)Bb(b[c]);for(var c=0;c<b.length;c++)Cb(b[c])}function yb(a){var b=a.cm,c=b.display;A(b),a.updateMaxLine&&m(b),a.mustUpdate=a.viewChanged||a.forceUpdate||null!=a.scrollTop||a.scrollToPos&&(a.scrollToPos.from.line<c.viewFrom||a.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&b.options.lineWrapping,a.update=a.mustUpdate&&new z(b,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}function zb(a){a.updatedDisplay=a.mustUpdate&&B(a.cm,a.update)}function Ab(a){var b=a.cm,c=b.display;a.updatedDisplay&&F(b),a.barMeasure=o(b),c.maxLineChanged&&!b.options.lineWrapping&&(a.adjustWidthTo=$a(b,c.maxLine,c.maxLine.text.length).left+3,b.display.sizerWidth=a.adjustWidthTo,a.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+a.adjustWidthTo+Ua(b)+b.display.barWidth),a.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+a.adjustWidthTo-Va(b))),(a.updatedDisplay||a.selectionChanged)&&(a.preparedSelection=c.input.prepareSelection())}function Bb(a){var b=a.cm;null!=a.adjustWidthTo&&(b.display.sizer.style.minWidth=a.adjustWidthTo+"px",a.maxScrollLeft<b.doc.scrollLeft&&ec(b,Math.min(b.display.scroller.scrollLeft,a.maxScrollLeft),!0),b.display.maxLineChanged=!1),a.preparedSelection&&b.display.input.showSelection(a.preparedSelection),(a.updatedDisplay||a.startHeight!=b.doc.height)&&s(b,a.barMeasure),a.updatedDisplay&&E(b,a.barMeasure),a.selectionChanged&&Ma(b),b.state.focused&&a.updateInput&&b.display.input.reset(a.typing),!a.focus||a.focus!=Se()||document.hasFocus&&!document.hasFocus()||Y(a.cm)}function Cb(a){var b=a.cm,c=b.display,d=b.doc;if(a.updatedDisplay&&C(b,a.update),null==c.wheelStartX||null==a.scrollTop&&null==a.scrollLeft&&!a.scrollToPos||(c.wheelStartX=c.wheelStartY=null),null==a.scrollTop||c.scroller.scrollTop==a.scrollTop&&!a.forceScroll||(d.scrollTop=Math.max(0,Math.min(c.scroller.scrollHeight-c.scroller.clientHeight,a.scrollTop)),c.scrollbars.setScrollTop(d.scrollTop),c.scroller.scrollTop=d.scrollTop),null==a.scrollLeft||c.scroller.scrollLeft==a.scrollLeft&&!a.forceScroll||(d.scrollLeft=Math.max(0,Math.min(c.scroller.scrollWidth-c.scroller.clientWidth,a.scrollLeft)),c.scrollbars.setScrollLeft(d.scrollLeft),c.scroller.scrollLeft=d.scrollLeft,v(b)),a.scrollToPos){var e=Hc(b,pa(d,a.scrollToPos.from),pa(d,a.scrollToPos.to),a.scrollToPos.margin);a.scrollToPos.isCursor&&b.state.focused&&Gc(b,e)}var f=a.maybeHiddenMarkers,g=a.maybeUnhiddenMarkers;if(f)for(var h=0;h<f.length;++h)f[h].lines.length||Fg(f[h],"hide");if(g)for(var h=0;h<g.length;++h)g[h].lines.length&&Fg(g[h],"unhide");c.wrapper.offsetHeight&&(d.scrollTop=b.display.scroller.scrollTop),a.changeObjs&&Fg(b,"changes",b,a.changeObjs),a.update&&a.update.finish()}function Db(a,b){if(a.curOp)return b();ub(a);try{return b()}finally{wb(a)}}function Eb(a,b){return function(){if(a.curOp)return b.apply(a,arguments);ub(a);try{return b.apply(a,arguments)}finally{wb(a)}}}function Fb(a){return function(){if(this.curOp)return a.apply(this,arguments);ub(this);try{return a.apply(this,arguments)}finally{wb(this)}}}function Gb(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);ub(b);try{return a.apply(this,arguments)}finally{wb(b)}}}function Hb(a,b,c){this.line=b,this.rest=sd(b),this.size=this.rest?ae(Fe(this.rest))-c+1:1,this.node=this.text=null,this.hidden=vd(a,b)}function Ib(a,b,c){for(var d,e=[],f=b;c>f;f=d){var g=new Hb(a.doc,Yd(a.doc,f),f);d=f+g.size,e.push(g)}return e}function Jb(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),d||(d=0);var e=a.display;if(d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b),a.curOp.viewChanged=!0,b>=e.viewTo)Jf&&td(a.doc,b)<e.viewTo&&Lb(a);else if(c<=e.viewFrom)Jf&&ud(a.doc,c+d)>e.viewFrom?Lb(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Lb(a);else if(b<=e.viewFrom){var f=Nb(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Lb(a)}else if(c>=e.viewTo){var f=Nb(a,b,b,-1);f?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):Lb(a)}else{var g=Nb(a,b,b,-1),h=Nb(a,c,c+d,1);g&&h?(e.view=e.view.slice(0,g.index).concat(Ib(a,g.lineN,h.lineN)).concat(e.view.slice(h.index)),e.viewTo+=d):Lb(a)}var i=e.externalMeasured;i&&(c<i.lineN?i.lineN+=d:b<i.lineN+i.size&&(e.externalMeasured=null))}function Kb(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;if(e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null),!(b<d.viewFrom||b>=d.viewTo)){var f=d.view[Mb(a,b)];if(null!=f.node){var g=f.changes||(f.changes=[]);-1==Ge(g,c)&&g.push(c)}}}function Lb(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function Mb(a,b){if(b>=a.display.viewTo)return null;if(b-=a.display.viewFrom,0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,0>b)return d}function Nb(a,b,c,d){var e,f=Mb(a,b),g=a.display.view;if(!Jf||c==a.doc.first+a.doc.size)return{index:f,lineN:c};for(var h=0,i=a.display.viewFrom;f>h;h++)i+=g[h].size;if(i!=b){if(d>0){if(f==g.length-1)return null;e=i+g[f].size-b,f++}else e=i-b;b+=e,c+=e}for(;td(a.doc,c)!=c;){if(f==(0>d?0:g.length-1))return null;c+=d*g[f-(0>d?1:0)].size,f+=d}return{index:f,lineN:c}}function Ob(a,b,c){var d=a.display,e=d.view;0==e.length||b>=d.viewTo||c<=d.viewFrom?(d.view=Ib(a,b,c),d.viewFrom=b):(d.viewFrom>b?d.view=Ib(a,b,d.viewFrom).concat(d.view):d.viewFrom<b&&(d.view=d.view.slice(Mb(a,b))),d.viewFrom=b,d.viewTo<c?d.view=d.view.concat(Ib(a,d.viewTo,c)):d.viewTo>c&&(d.view=d.view.slice(0,Mb(a,c)))),d.viewTo=c}function Pb(a){for(var b=a.display.view,c=0,d=0;d<b.length;d++){var e=b[d];e.hidden||e.node&&!e.changes||++c}return c}function Qb(a){function b(){e.activeTouch&&(f=setTimeout(function(){e.activeTouch=null},1e3),g=e.activeTouch,g.end=+new Date)}function c(a){if(1!=a.touches.length)return!1;var b=a.touches[0];return b.radiusX<=1&&b.radiusY<=1}function d(a,b){if(null==b.left)return!0;var c=b.left-a.left,d=b.top-a.top;return c*c+d*d>400}var e=a.display;Cg(e.scroller,"mousedown",Eb(a,Vb)),sf&&11>tf?Cg(e.scroller,"dblclick",Eb(a,function(b){if(!ze(a,b)){var c=Ub(a,b);if(c&&!$b(a,b)&&!Tb(a.display,b)){zg(b);var d=a.findWordAt(c);ua(a.doc,d.anchor,d.head)}}})):Cg(e.scroller,"dblclick",function(b){ze(a,b)||zg(b)}),Hf||Cg(e.scroller,"contextmenu",function(b){sc(a,b)});var f,g={end:0};Cg(e.scroller,"touchstart",function(b){if(!ze(a,b)&&!c(b)){clearTimeout(f);var d=+new Date;e.activeTouch={start:d,moved:!1,prev:d-g.end<=300?g:null},1==b.touches.length&&(e.activeTouch.left=b.touches[0].pageX,e.activeTouch.top=b.touches[0].pageY)}}),Cg(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)}),Cg(e.scroller,"touchend",function(c){var f=e.activeTouch;if(f&&!Tb(e,c)&&null!=f.left&&!f.moved&&new Date-f.start<300){var g,h=a.coordsChar(e.activeTouch,"page");g=!f.prev||d(f,f.prev)?new la(h,h):!f.prev.prev||d(f,f.prev.prev)?a.findWordAt(h):new la(Kf(h.line,0),pa(a.doc,Kf(h.line+1,0))),a.setSelection(g.anchor,g.head),a.focus(),zg(c)}b()}),Cg(e.scroller,"touchcancel",b),Cg(e.scroller,"scroll",function(){e.scroller.clientHeight&&(dc(a,e.scroller.scrollTop),ec(a,e.scroller.scrollLeft,!0),Fg(a,"scroll",a))}),Cg(e.scroller,"mousewheel",function(b){fc(a,b)}),Cg(e.scroller,"DOMMouseScroll",function(b){fc(a,b)}),Cg(e.wrapper,"scroll",function(){e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),e.dragFunctions={enter:function(b){ze(a,b)||Bg(b)},over:function(b){ze(a,b)||(bc(a,b),Bg(b))},start:function(b){ac(a,b)},drop:Eb(a,_b),leave:function(b){ze(a,b)||cc(a)}};var h=e.input.getField();Cg(h,"keyup",function(b){nc.call(a,b)}),Cg(h,"keydown",Eb(a,lc)),Cg(h,"keypress",Eb(a,oc)),Cg(h,"focus",Le(qc,a)),Cg(h,"blur",Le(rc,a))}function Rb(b,c,d){var e=d&&d!=a.Init;if(!c!=!e){var f=b.display.dragFunctions,g=c?Cg:Eg;g(b.display.scroller,"dragstart",f.start),g(b.display.scroller,"dragenter",f.enter),g(b.display.scroller,"dragover",f.over),g(b.display.scroller,"dragleave",f.leave),g(b.display.scroller,"drop",f.drop)}}function Sb(a){var b=a.display;(b.lastWrapHeight!=b.wrapper.clientHeight||b.lastWrapWidth!=b.wrapper.clientWidth)&&(b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize())}function Tb(a,b){for(var c=ue(b);c!=a.wrapper;c=c.parentNode)if(!c||1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==a.sizer&&c!=a.mover)return!0}function Ub(a,b,c,d){var e=a.display;if(!c&&"true"==ue(b).getAttribute("cm-not-content"))return null;var f,g,h=e.lineSpace.getBoundingClientRect();try{f=b.clientX-h.left,g=b.clientY-h.top}catch(b){return null}var i,j=qb(a,f,g);if(d&&1==j.xRel&&(i=Yd(a.doc,j.line).text).length==j.ch){var k=Mg(i,i.length,a.options.tabSize)-i.length;j=Kf(j.line,Math.max(0,Math.round((f-Ta(a.display).left)/tb(a.display))-k))}return j}function Vb(a){var b=this,c=b.display;if(!(ze(b,a)||c.activeTouch&&c.input.supportsTouch())){if(c.shift=a.shiftKey,Tb(c,a))return void(uf||(c.scroller.draggable=!1,setTimeout(function(){c.scroller.draggable=!0},100)));if(!$b(b,a)){var d=Ub(b,a);switch(window.focus(),ve(a)){case 1:b.state.selectingText?b.state.selectingText(a):d?Wb(b,a,d):ue(a)==c.scroller&&zg(a);break;case 2:uf&&(b.state.lastMiddleDown=+new Date),d&&ua(b.doc,d),setTimeout(function(){c.input.focus()},20),zg(a);break;case 3:Hf?sc(b,a):pc(b)}}}}function Wb(a,b,c){sf?setTimeout(Le(Y,a),0):a.curOp.focus=Se();var d,e=+new Date;Pf&&Pf.time>e-400&&0==Lf(Pf.pos,c)?d="triple":Of&&Of.time>e-400&&0==Lf(Of.pos,c)?(d="double",Pf={time:e,pos:c}):(d="single",Of={time:e,pos:c});var f,g=a.doc.sel,h=Df?b.metaKey:b.ctrlKey;a.options.dragDrop&&$g&&!a.isReadOnly()&&"single"==d&&(f=g.contains(c))>-1&&(Lf((f=g.ranges[f]).from(),c)<0||c.xRel>0)&&(Lf(f.to(),c)>0||c.xRel<0)?Xb(a,b,c,h):Yb(a,b,c,d,h)}function Xb(a,b,c,d){var e=a.display,f=+new Date,g=Eb(a,function(h){uf&&(e.scroller.draggable=!1),a.state.draggingText=!1,Eg(document,"mouseup",g),Eg(e.scroller,"drop",g),Math.abs(b.clientX-h.clientX)+Math.abs(b.clientY-h.clientY)<10&&(zg(h),!d&&+new Date-200<f&&ua(a.doc,c),uf||sf&&9==tf?setTimeout(function(){document.body.focus(),e.input.focus()},20):e.input.focus())});uf&&(e.scroller.draggable=!0),a.state.draggingText=g,e.scroller.dragDrop&&e.scroller.dragDrop(),Cg(document,"mouseup",g),Cg(e.scroller,"drop",g)}function Yb(a,b,c,d,e){function f(b){if(0!=Lf(q,b))if(q=b,"rect"==d){for(var e=[],f=a.options.tabSize,g=Mg(Yd(j,c.line).text,c.ch,f),h=Mg(Yd(j,b.line).text,b.ch,f),i=Math.min(g,h),n=Math.max(g,h),o=Math.min(c.line,b.line),p=Math.min(a.lastLine(),Math.max(c.line,b.line));p>=o;o++){var r=Yd(j,o).text,s=Ng(r,i,f);i==n?e.push(new la(Kf(o,s),Kf(o,s))):r.length>s&&e.push(new la(Kf(o,s),Kf(o,Ng(r,n,f))))}e.length||e.push(new la(c,c)),Aa(j,ma(m.ranges.slice(0,l).concat(e),l),{origin:"*mouse",scroll:!1}),a.scrollIntoView(b)}else{var t=k,u=t.anchor,v=b;if("single"!=d){if("double"==d)var w=a.findWordAt(b);else var w=new la(Kf(b.line,0),pa(j,Kf(b.line+1,0)));Lf(w.anchor,u)>0?(v=w.head,u=X(t.from(),w.anchor)):(v=w.anchor,u=W(t.to(),w.head))}var e=m.ranges.slice(0);e[l]=new la(pa(j,u),v),Aa(j,ma(e,l),Kg)}}function g(b){var c=++s,e=Ub(a,b,!0,"rect"==d);if(e)if(0!=Lf(e,q)){a.curOp.focus=Se(),f(e);var h=u(i,j);(e.line>=h.to||e.line<h.from)&&setTimeout(Eb(a,function(){s==c&&g(b)}),150)}else{var k=b.clientY<r.top?-20:b.clientY>r.bottom?20:0;k&&setTimeout(Eb(a,function(){s==c&&(i.scroller.scrollTop+=k,g(b))}),50)}}function h(b){a.state.selectingText=!1,s=1/0,zg(b),i.input.focus(),Eg(document,"mousemove",t),Eg(document,"mouseup",v),j.history.lastSelOrigin=null}var i=a.display,j=a.doc;zg(b);var k,l,m=j.sel,n=m.ranges;if(e&&!b.shiftKey?(l=j.sel.contains(c),k=l>-1?n[l]:new la(c,c)):(k=j.sel.primary(),l=j.sel.primIndex),b.altKey)d="rect",e||(k=new la(c,c)),c=Ub(a,b,!0,!0),l=-1;else if("double"==d){var o=a.findWordAt(c);k=a.display.shift||j.extend?ta(j,k,o.anchor,o.head):o}else if("triple"==d){var p=new la(Kf(c.line,0),pa(j,Kf(c.line+1,0)));k=a.display.shift||j.extend?ta(j,k,p.anchor,p.head):p}else k=ta(j,k,c);e?-1==l?(l=n.length,Aa(j,ma(n.concat([k]),l),{scroll:!1,origin:"*mouse"})):n.length>1&&n[l].empty()&&"single"==d&&!b.shiftKey?(Aa(j,ma(n.slice(0,l).concat(n.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),m=j.sel):wa(j,l,k,Kg):(l=0,Aa(j,new ka([k],0),Kg),m=j.sel);var q=c,r=i.wrapper.getBoundingClientRect(),s=0,t=Eb(a,function(a){ve(a)?g(a):h(a)}),v=Eb(a,h);a.state.selectingText=v,Cg(document,"mousemove",t),Cg(document,"mouseup",v)}function Zb(a,b,c,d){try{var e=b.clientX,f=b.clientY}catch(b){return!1}if(e>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&zg(b);var g=a.display,h=g.lineDiv.getBoundingClientRect();if(f>h.bottom||!Be(a,c))return te(b);f-=h.top-g.viewOffset;for(var i=0;i<a.options.gutters.length;++i){var j=g.gutters.childNodes[i];if(j&&j.getBoundingClientRect().right>=e){var k=be(a.doc,f),l=a.options.gutters[i];return Fg(a,c,a,k,l,b),te(b)}}}function $b(a,b){return Zb(a,b,"gutterClick",!0)}function _b(a){var b=this;if(cc(b),!ze(b,a)&&!Tb(b.display,a)){zg(a),sf&&(Tf=+new Date);var c=Ub(b,a,!0),d=a.dataTransfer.files;if(c&&!b.isReadOnly())if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(a,d){if(!b.options.allowDropFileTypes||-1!=Ge(b.options.allowDropFileTypes,a.type)){var h=new FileReader;h.onload=Eb(b,function(){var a=h.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(a)&&(a=""),f[d]=a,++g==e){c=pa(b.doc,c);var i={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"};zc(b.doc,i),za(b.doc,na(c,Zf(i)))}}),h.readAsText(a)}},i=0;e>i;++i)h(d[i],i);else{if(b.state.draggingText&&b.doc.sel.contains(c)>-1)return b.state.draggingText(a),void setTimeout(function(){b.display.input.focus()},20);try{var f=a.dataTransfer.getData("Text");if(f){if(b.state.draggingText&&!(Df?a.altKey:a.ctrlKey))var j=b.listSelections();if(Ba(b.doc,na(c,c)),j)for(var i=0;i<j.length;++i)Fc(b.doc,"",j[i].anchor,j[i].head,"drag");b.replaceSelection(f,"around","paste"),b.display.input.focus()}}catch(a){}}}}function ac(a,b){if(sf&&(!a.state.draggingText||+new Date-Tf<100))return void Bg(b);if(!ze(a,b)&&!Tb(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.setDragImage&&!yf)){var c=Pe("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",xf&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop),b.dataTransfer.setDragImage(c,0,0),xf&&c.parentNode.removeChild(c)}}function bc(a,b){var c=Ub(a,b);if(c){var d=document.createDocumentFragment();Ka(a,c,d),a.display.dragCursor||(a.display.dragCursor=Pe("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv)),Re(a.display.dragCursor,d)}}function cc(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function dc(a,b){Math.abs(a.doc.scrollTop-b)<2||(a.doc.scrollTop=b,pf||D(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbars.setScrollTop(b),pf&&D(a),Na(a,100))}function ec(a,b,c){(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),
a.doc.scrollLeft=b,v(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function fc(a,b){var c=Wf(b),d=c.x,e=c.y,f=a.display,g=f.scroller,h=g.scrollWidth>g.clientWidth,i=g.scrollHeight>g.clientHeight;if(d&&h||e&&i){if(e&&Df&&uf)a:for(var j=b.target,k=f.view;j!=g;j=j.parentNode)for(var l=0;l<k.length;l++)if(k[l].node==j){a.display.currentWheelTarget=j;break a}if(d&&!pf&&!xf&&null!=Vf)return e&&i&&dc(a,Math.max(0,Math.min(g.scrollTop+e*Vf,g.scrollHeight-g.clientHeight))),ec(a,Math.max(0,Math.min(g.scrollLeft+d*Vf,g.scrollWidth-g.clientWidth))),(!e||e&&i)&&zg(b),void(f.wheelStartX=null);if(e&&null!=Vf){var m=e*Vf,n=a.doc.scrollTop,o=n+f.wrapper.clientHeight;0>m?n=Math.max(0,n+m-50):o=Math.min(a.doc.height,o+m+50),D(a,{top:n,bottom:o})}20>Uf&&(null==f.wheelStartX?(f.wheelStartX=g.scrollLeft,f.wheelStartY=g.scrollTop,f.wheelDX=d,f.wheelDY=e,setTimeout(function(){if(null!=f.wheelStartX){var a=g.scrollLeft-f.wheelStartX,b=g.scrollTop-f.wheelStartY,c=b&&f.wheelDY&&b/f.wheelDY||a&&f.wheelDX&&a/f.wheelDX;f.wheelStartX=f.wheelStartY=null,c&&(Vf=(Vf*Uf+c)/(Uf+1),++Uf)}},200)):(f.wheelDX+=d,f.wheelDY+=e))}}function gc(a,b,c){if("string"==typeof b&&(b=ig[b],!b))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Ig}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function hc(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=kg(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&kg(b,a.options.extraKeys,c,a)||kg(b,a.options.keyMap,c,a)}function ic(a,b,c,d){var e=a.state.keySeq;if(e){if(lg(b))return"handled";Xf.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())}),b=e+" "+b}var f=hc(a,b,d);return"multi"==f&&(a.state.keySeq=b),"handled"==f&&xe(a,"keyHandled",a,b,c),("handled"==f||"multi"==f)&&(zg(c),Ma(a)),e&&!f&&/\'$/.test(b)?(zg(c),!0):!!f}function jc(a,b){var c=mg(b,!0);return c?b.shiftKey&&!a.state.keySeq?ic(a,"Shift-"+c,b,function(b){return gc(a,b,!0)})||ic(a,c,b,function(b){return("string"==typeof b?/^go[A-Z]/.test(b):b.motion)?gc(a,b):void 0}):ic(a,c,b,function(b){return gc(a,b)}):!1}function kc(a,b,c){return ic(a,"'"+c+"'",b,function(b){return gc(a,b,!0)})}function lc(a){var b=this;if(b.curOp.focus=Se(),!ze(b,a)){sf&&11>tf&&27==a.keyCode&&(a.returnValue=!1);var c=a.keyCode;b.display.shift=16==c||a.shiftKey;var d=jc(b,a);xf&&(Yf=d?c:null,!d&&88==c&&!bh&&(Df?a.metaKey:a.ctrlKey)&&b.replaceSelection("",null,"cut")),18!=c||/\bCodeMirror-crosshair\b/.test(b.display.lineDiv.className)||mc(b)}}function mc(a){function b(a){18!=a.keyCode&&a.altKey||(Xg(c,"CodeMirror-crosshair"),Eg(document,"keyup",b),Eg(document,"mouseover",b))}var c=a.display.lineDiv;Yg(c,"CodeMirror-crosshair"),Cg(document,"keyup",b),Cg(document,"mouseover",b)}function nc(a){16==a.keyCode&&(this.doc.sel.shift=!1),ze(this,a)}function oc(a){var b=this;if(!(Tb(b.display,a)||ze(b,a)||a.ctrlKey&&!a.altKey||Df&&a.metaKey)){var c=a.keyCode,d=a.charCode;if(xf&&c==Yf)return Yf=null,void zg(a);if(!xf||a.which&&!(a.which<10)||!jc(b,a)){var e=String.fromCharCode(null==d?c:d);kc(b,a,e)||b.display.input.onKeyPress(a)}}}function pc(a){a.state.delayingBlurEvent=!0,setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,rc(a))},100)}function qc(a){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1),"nocursor"!=a.options.readOnly&&(a.state.focused||(Fg(a,"focus",a),a.state.focused=!0,Yg(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),uf&&setTimeout(function(){a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),Ma(a))}function rc(a){a.state.delayingBlurEvent||(a.state.focused&&(Fg(a,"blur",a),a.state.focused=!1,Xg(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function sc(a,b){Tb(a.display,b)||tc(a,b)||ze(a,b,"contextmenu")||a.display.input.onContextMenu(b)}function tc(a,b){return Be(a,"gutterContextMenu")?Zb(a,b,"gutterContextMenu",!1):!1}function uc(a,b){if(Lf(a,b.from)<0)return a;if(Lf(a,b.to)<=0)return Zf(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;return a.line==b.to.line&&(d+=Zf(b).ch-b.to.ch),Kf(c,d)}function vc(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new la(uc(e.anchor,b),uc(e.head,b)))}return ma(c,a.sel.primIndex)}function wc(a,b,c){return a.line==b.line?Kf(c.line,a.ch-b.ch+c.ch):Kf(c.line+(a.line-b.line),a.ch)}function xc(a,b,c){for(var d=[],e=Kf(a.first,0),f=e,g=0;g<b.length;g++){var h=b[g],i=wc(h.from,e,f),j=wc(Zf(h),e,f);if(e=h.to,f=j,"around"==c){var k=a.sel.ranges[g],l=Lf(k.head,k.anchor)<0;d[g]=new la(l?j:i,l?i:j)}else d[g]=new la(i,i)}return new ka(d,a.sel.primIndex)}function yc(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};return c&&(d.update=function(b,c,d,e){b&&(this.from=pa(a,b)),c&&(this.to=pa(a,c)),d&&(this.text=d),void 0!==e&&(this.origin=e)}),Fg(a,"beforeChange",a,d),a.cm&&Fg(a.cm,"beforeChange",a.cm,d),d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function zc(a,b,c){if(a.cm){if(!a.cm.curOp)return Eb(a.cm,zc)(a,b,c);if(a.cm.state.suppressEdits)return}if(!(Be(a,"beforeChange")||a.cm&&Be(a.cm,"beforeChange"))||(b=yc(a,b,!0))){var d=If&&!c&&hd(a,b.from,b.to);if(d)for(var e=d.length-1;e>=0;--e)Ac(a,{from:d[e].from,to:d[e].to,text:e?[""]:b.text});else Ac(a,b)}}function Ac(a,b){if(1!=b.text.length||""!=b.text[0]||0!=Lf(b.from,b.to)){var c=vc(a,b);ie(a,b,c,a.cm?a.cm.curOp.id:NaN),Dc(a,b,c,ed(a,b));var d=[];Wd(a,function(a,c){c||-1!=Ge(d,a.history)||(se(a.history,b),d.push(a.history)),Dc(a,b,null,ed(a,b))})}}function Bc(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d,e=a.history,f=a.sel,g="undo"==b?e.done:e.undone,h="undo"==b?e.undone:e.done,i=0;i<g.length&&(d=g[i],c?!d.ranges||d.equals(a.sel):d.ranges);i++);if(i!=g.length){for(e.lastOrigin=e.lastSelOrigin=null;d=g.pop(),d.ranges;){if(le(d,h),c&&!d.equals(a.sel))return void Aa(a,d,{clearRedo:!1});f=d}var j=[];le(f,h),h.push({changes:j,generation:e.generation}),e.generation=d.generation||++e.maxGeneration;for(var k=Be(a,"beforeChange")||a.cm&&Be(a.cm,"beforeChange"),i=d.changes.length-1;i>=0;--i){var l=d.changes[i];if(l.origin=b,k&&!yc(a,l,!1))return void(g.length=0);j.push(fe(a,l));var m=i?vc(a,l):Fe(g);Dc(a,l,m,gd(a,l)),!i&&a.cm&&a.cm.scrollIntoView({from:l.from,to:Zf(l)});var n=[];Wd(a,function(a,b){b||-1!=Ge(n,a.history)||(se(a.history,l),n.push(a.history)),Dc(a,l,null,gd(a,l))})}}}}function Cc(a,b){if(0!=b&&(a.first+=b,a.sel=new ka(He(a.sel.ranges,function(a){return new la(Kf(a.anchor.line+b,a.anchor.ch),Kf(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){Jb(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)Kb(a.cm,d,"gutter")}}function Dc(a,b,c,d){if(a.cm&&!a.cm.curOp)return Eb(a.cm,Dc)(a,b,c,d);if(b.to.line<a.first)return void Cc(a,b.text.length-1-(b.to.line-b.from.line));if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Cc(a,e),b={from:Kf(a.first,0),to:Kf(b.to.line+e,b.to.ch),text:[Fe(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:Kf(f,Yd(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=Zd(a,b.from,b.to),c||(c=vc(a,b)),a.cm?Ec(a.cm,b,d):Td(a,b,d),Ba(a,c,Jg)}}function Ec(a,b,c){var d=a.doc,e=a.display,g=b.from,h=b.to,i=!1,j=g.line;a.options.lineWrapping||(j=ae(rd(Yd(d,g.line))),d.iter(j,h.line+1,function(a){return a==e.maxLine?(i=!0,!0):void 0})),d.sel.contains(b.from,b.to)>-1&&Ae(a),Td(d,b,c,f(a)),a.options.lineWrapping||(d.iter(j,g.line+b.text.length,function(a){var b=l(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,i=!1)}),i&&(a.curOp.updateMaxLine=!0)),d.frontier=Math.min(d.frontier,g.line),Na(a,400);var k=b.text.length-(h.line-g.line)-1;b.full?Jb(a):g.line!=h.line||1!=b.text.length||Sd(a.doc,b)?Jb(a,g.line,h.line+1,k):Kb(a,g.line,"text");var m=Be(a,"changes"),n=Be(a,"change");if(n||m){var o={from:g,to:h,text:b.text,removed:b.removed,origin:b.origin};n&&xe(a,"change",a,o),m&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(o)}a.display.selForContextMenu=null}function Fc(a,b,c,d,e){if(d||(d=c),Lf(d,c)<0){var f=d;d=c,c=f}"string"==typeof b&&(b=a.splitLines(b)),zc(a,{from:c,to:d,text:b,origin:e})}function Gc(a,b){if(!ze(a,"scrollCursorIntoView")){var c=a.display,d=c.sizer.getBoundingClientRect(),e=null;if(b.top+d.top<0?e=!0:b.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(e=!1),null!=e&&!Af){var f=Pe("div","â€‹",null,"position: absolute; top: "+(b.top-c.viewOffset-Ra(a.display))+"px; height: "+(b.bottom-b.top+Ua(a)+c.barHeight)+"px; left: "+b.left+"px; width: 2px;");a.display.lineSpace.appendChild(f),f.scrollIntoView(e),a.display.lineSpace.removeChild(f)}}}function Hc(a,b,c,d){null==d&&(d=0);for(var e=0;5>e;e++){var f=!1,g=nb(a,b),h=c&&c!=b?nb(a,c):g,i=Jc(a,Math.min(g.left,h.left),Math.min(g.top,h.top)-d,Math.max(g.left,h.left),Math.max(g.bottom,h.bottom)+d),j=a.doc.scrollTop,k=a.doc.scrollLeft;if(null!=i.scrollTop&&(dc(a,i.scrollTop),Math.abs(a.doc.scrollTop-j)>1&&(f=!0)),null!=i.scrollLeft&&(ec(a,i.scrollLeft),Math.abs(a.doc.scrollLeft-k)>1&&(f=!0)),!f)break}return g}function Ic(a,b,c,d,e){var f=Jc(a,b,c,d,e);null!=f.scrollTop&&dc(a,f.scrollTop),null!=f.scrollLeft&&ec(a,f.scrollLeft)}function Jc(a,b,c,d,e){var f=a.display,g=sb(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,i=Wa(a),j={};e-c>i&&(e=c+i);var k=a.doc.height+Sa(f),l=g>c,m=e>k-g;if(h>c)j.scrollTop=l?0:c;else if(e>h+i){var n=Math.min(c,(m?k:e)-i);n!=h&&(j.scrollTop=n)}var o=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft,p=Va(a)-(a.options.fixedGutter?f.gutters.offsetWidth:0),q=d-b>p;return q&&(d=b+p),10>b?j.scrollLeft=0:o>b?j.scrollLeft=Math.max(0,b-(q?0:10)):d>p+o-3&&(j.scrollLeft=d+(q?0:10)-p),j}function Kc(a,b,c){(null!=b||null!=c)&&Mc(a),null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b),null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function Lc(a){Mc(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?Kf(b.line,b.ch-1):b,d=Kf(b.line,b.ch+1)),a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function Mc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=ob(a,b.from),d=ob(a,b.to),e=Jc(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(e.scrollLeft,e.scrollTop)}}function Nc(a,b,c,d){var e,f=a.doc;null==c&&(c="add"),"smart"==c&&(f.mode.indent?e=Qa(a,b):c="prev");var g=a.options.tabSize,h=Yd(f,b),i=Mg(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var j,k=h.text.match(/^\s*/)[0];if(d||/\S/.test(h.text)){if("smart"==c&&(j=f.mode.indent(e,h.text.slice(k.length),h.text),j==Ig||j>150)){if(!d)return;c="prev"}}else j=0,c="not";"prev"==c?j=b>f.first?Mg(Yd(f,b-1).text,null,g):0:"add"==c?j=i+a.options.indentUnit:"subtract"==c?j=i-a.options.indentUnit:"number"==typeof c&&(j=i+c),j=Math.max(0,j);var l="",m=0;if(a.options.indentWithTabs)for(var n=Math.floor(j/g);n;--n)m+=g,l+="	";if(j>m&&(l+=Ee(j-m)),l!=k)return Fc(f,l,Kf(b,0),Kf(b,k.length),"+input"),h.stateAfter=null,!0;for(var n=0;n<f.sel.ranges.length;n++){var o=f.sel.ranges[n];if(o.head.line==b&&o.head.ch<k.length){var m=Kf(b,k.length);wa(f,n,new la(m,m));break}}}function Oc(a,b,c,d){var e=b,f=b;return"number"==typeof b?f=Yd(a,oa(a,b)):e=ae(b),null==e?null:(d(f,e)&&a.cm&&Kb(a.cm,e,c),f)}function Pc(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&Lf(f.from,Fe(d).to)<=0;){var g=d.pop();if(Lf(g.from,f.from)<0){f.from=g.from;break}}d.push(f)}Db(a,function(){for(var b=d.length-1;b>=0;b--)Fc(a.doc,"",d[b].from,d[b].to,"+delete");Lc(a)})}function Qc(a,b,c,d,e){function f(){var b=h+c;return b<a.first||b>=a.first+a.size?!1:(h=b,k=Yd(a,b))}function g(a){var b=(e?lf:mf)(k,i,c,!0);if(null==b){if(a||!f())return!1;i=e?(0>c?df:cf)(k):0>c?k.text.length:0}else i=b;return!0}var h=b.line,i=b.ch,j=c,k=Yd(a,h);if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d)for(var l=null,m="group"==d,n=a.cm&&a.cm.getHelper(b,"wordChars"),o=!0;!(0>c)||g(!o);o=!1){var p=k.text.charAt(i)||"\n",q=Me(p,n)?"w":m&&"\n"==p?"n":!m||/\s/.test(p)?null:"p";if(!m||o||q||(q="s"),l&&l!=q){0>c&&(c=1,g());break}if(q&&(l=q),c>0&&!g(!o))break}var r=Ga(a,Kf(h,i),b,j,!0);return Lf(b,r)||(r.hitSide=!0),r}function Rc(a,b,c,d){var e,f=a.doc,g=b.left;if("page"==d){var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);e=b.top+c*(h-(0>c?1.5:.5)*sb(a.display))}else"line"==d&&(e=c>0?b.bottom+3:b.top-3);for(;;){var i=qb(a,g,e);if(!i.outside)break;if(0>c?0>=e:e>=f.height){i.hitSide=!0;break}e+=5*c}return i}function Sc(b,c,d,e){a.defaults[b]=c,d&&(_f[b]=e?function(a,b,c){c!=ag&&d(a,b,c)}:d)}function Tc(a){for(var b,c,d,e,f=a.split(/-(?!$)/),a=f[f.length-1],g=0;g<f.length-1;g++){var h=f[g];if(/^(cmd|meta|m)$/i.test(h))e=!0;else if(/^a(lt)?$/i.test(h))b=!0;else if(/^(c|ctrl|control)$/i.test(h))c=!0;else{if(!/^s(hift)$/i.test(h))throw new Error("Unrecognized modifier name: "+h);d=!0}}return b&&(a="Alt-"+a),c&&(a="Ctrl-"+a),e&&(a="Cmd-"+a),d&&(a="Shift-"+a),a}function Uc(a){return"string"==typeof a?jg[a]:a}function Vc(a,b,c,d,e){if(d&&d.shared)return Wc(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return Eb(a.cm,Vc)(a,b,c,d,e);var f=new pg(a,e),g=Lf(b,c);if(d&&Ke(d,f,!1),g>0||0==g&&f.clearWhenEmpty!==!1)return f;if(f.replacedWith&&(f.collapsed=!0,f.widgetNode=Pe("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(f.widgetNode.insertLeft=!0)),f.collapsed){if(qd(a,b.line,b,c,f)||b.line!=c.line&&qd(a,c.line,b,c,f))throw new Error("Inserting collapsed marker partially overlapping an existing one");Jf=!0}f.addToHistory&&ie(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var h,i=b.line,j=a.cm;if(a.iter(i,c.line+1,function(a){j&&f.collapsed&&!j.options.lineWrapping&&rd(a)==j.display.maxLine&&(h=!0),f.collapsed&&i!=b.line&&_d(a,0),bd(a,new $c(f,i==b.line?b.ch:null,i==c.line?c.ch:null)),++i}),f.collapsed&&a.iter(b.line,c.line+1,function(b){vd(a,b)&&_d(b,0)}),f.clearOnEnter&&Cg(f,"beforeCursorEnter",function(){f.clear()}),f.readOnly&&(If=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory()),f.collapsed&&(f.id=++og,f.atomic=!0),j){if(h&&(j.curOp.updateMaxLine=!0),f.collapsed)Jb(j,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle||f.css)for(var k=b.line;k<=c.line;k++)Kb(j,k,"text");f.atomic&&Da(j.doc),xe(j,"markerAdded",j,f)}return f}function Wc(a,b,c,d,e){d=Ke(d),d.shared=!1;var f=[Vc(a,b,c,d,e)],g=f[0],h=d.widgetNode;return Wd(a,function(a){h&&(d.widgetNode=h.cloneNode(!0)),f.push(Vc(a,pa(a,b),pa(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;g=Fe(f)}),new qg(f,g)}function Xc(a){return a.findMarks(Kf(a.first,0),a.clipPos(Kf(a.lastLine())),function(a){return a.parent})}function Yc(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.find(),f=a.clipPos(e.from),g=a.clipPos(e.to);if(Lf(f,g)){var h=Vc(a,f,g,d.primary,d.primary.type);d.markers.push(h),h.parent=d}}}function Zc(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];Wd(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==Ge(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function $c(a,b,c){this.marker=a,this.from=b,this.to=c}function _c(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function ad(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function bd(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function cd(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||f.from==b&&"bookmark"==g.type&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push(new $c(g,f.from,i?null:f.to))}}return d}function dd(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||f.from==b&&"bookmark"==g.type&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push(new $c(g,i?null:f.from-b,null==f.to?null:f.to-b))}}return d}function ed(a,b){if(b.full)return null;var c=ra(a,b.from.line)&&Yd(a,b.from.line).markedSpans,d=ra(a,b.to.line)&&Yd(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==Lf(b.from,b.to),h=cd(c,e,g),i=dd(d,f,g),j=1==b.text.length,k=Fe(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=_c(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var l=0;l<i.length;++l){var m=i[l];if(null!=m.to&&(m.to+=k),null==m.from){var n=_c(h,m.marker);n||(m.from=k,j&&(h||(h=[])).push(m))}else m.from+=k,j&&(h||(h=[])).push(m)}h&&(h=fd(h)),i&&i!=h&&(i=fd(i));var o=[h];if(!j){var p,q=b.text.length-2;if(q>0&&h)for(var l=0;l<h.length;++l)null==h[l].to&&(p||(p=[])).push(new $c(h[l].marker,null,null));for(var l=0;q>l;++l)o.push(p);o.push(i)}return o}function fd(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&c.marker.clearWhenEmpty!==!1&&a.splice(b--,1)}return a.length?a:null}function gd(a,b){var c=oe(a,b),d=ed(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function hd(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=Ge(d,c)||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(0),i=0;i<e.length;++i){var j=e[i];if(!(Lf(j.to,h.from)<0||Lf(j.from,h.to)>0)){var k=[i,1],l=Lf(j.from,h.from),m=Lf(j.to,h.to);(0>l||!g.inclusiveLeft&&!l)&&k.push({from:j.from,to:h.from}),(m>0||!g.inclusiveRight&&!m)&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-1}}return e}function id(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function jd(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function kd(a){return a.inclusiveLeft?-1:0}function ld(a){return a.inclusiveRight?1:0}function md(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var d=a.find(),e=b.find(),f=Lf(d.from,e.from)||kd(a)-kd(b);if(f)return-f;var g=Lf(d.to,e.to)||ld(a)-ld(b);return g?g:b.id-a.id}function nd(a,b){var c,d=Jf&&a.markedSpans;if(d)for(var e,f=0;f<d.length;++f)e=d[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!c||md(c,e.marker)<0)&&(c=e.marker);return c}function od(a){return nd(a,!0)}function pd(a){return nd(a,!1)}function qd(a,b,c,d,e){var f=Yd(a,b),g=Jf&&f.markedSpans;if(g)for(var h=0;h<g.length;++h){var i=g[h];if(i.marker.collapsed){var j=i.marker.find(0),k=Lf(j.from,c)||kd(i.marker)-kd(e),l=Lf(j.to,d)||ld(i.marker)-ld(e);if(!(k>=0&&0>=l||0>=k&&l>=0)&&(0>=k&&(Lf(j.to,c)>0||i.marker.inclusiveRight&&e.inclusiveLeft)||k>=0&&(Lf(j.from,d)<0||i.marker.inclusiveLeft&&e.inclusiveRight)))return!0}}}function rd(a){for(var b;b=od(a);)a=b.find(-1,!0).line;return a}function sd(a){for(var b,c;b=pd(a);)a=b.find(1,!0).line,(c||(c=[])).push(a);return c}function td(a,b){var c=Yd(a,b),d=rd(c);return c==d?b:ae(d)}function ud(a,b){if(b>a.lastLine())return b;var c,d=Yd(a,b);if(!vd(a,d))return b;for(;c=pd(d);)d=c.find(1,!0).line;return ae(d)+1}function vd(a,b){var c=Jf&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&wd(a,b,d))return!0}}function wd(a,b,c){if(null==c.to){var d=c.marker.find(1,!0);return wd(a,d.line,_c(d.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var e,f=0;f<b.markedSpans.length;++f)if(e=b.markedSpans[f],e.marker.collapsed&&!e.marker.widgetNode&&e.from==c.to&&(null==e.to||e.to!=c.from)&&(e.marker.inclusiveLeft||c.marker.inclusiveRight)&&wd(a,b,e))return!0}function xd(a,b,c){ce(b)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&Kc(a,null,c)}function yd(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!Ug(document.body,a.node)){var c="position: relative;";a.coverGutter&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;"),a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;"),Re(b.display.measure,Pe("div",[a.node],null,c))}return a.height=a.node.parentNode.offsetHeight}function zd(a,b,c,d){var e=new rg(a,c,d),f=a.cm;return f&&e.noHScroll&&(f.display.alignWidgets=!0),Oc(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);if(null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e),e.line=b,f&&!vd(a,b)){var d=ce(b)<a.scrollTop;_d(b,b.height+yd(e)),d&&Kc(f,null,e.height),f.curOp.forceUpdate=!0}return!0}),e}function Ad(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),id(a),jd(a,c);var e=d?d(a):1;e!=a.height&&_d(a,e)}function Bd(a){a.parent=null,id(a)}function Cd(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:new RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||(b[d]+=" "+c[2])}return a}function Dd(b,c){if(b.blankLine)return b.blankLine(c);if(b.innerMode){var d=a.innerMode(b,c);return d.mode.blankLine?d.mode.blankLine(d.state):void 0}}function Ed(b,c,d,e){for(var f=0;10>f;f++){e&&(e[0]=a.innerMode(b,d).mode);var g=b.token(c,d);if(c.pos>c.start)return g}throw new Error("Mode "+b.name+" failed to advance stream.")}function Fd(a,b,c,d){function e(a){return{start:l.start,end:l.pos,string:l.current(),type:f||null,state:a?gg(g.mode,k):k}}var f,g=a.doc,h=g.mode;b=pa(g,b);var i,j=Yd(g,b.line),k=Qa(a,b.line,c),l=new ng(j.text,a.options.tabSize);for(d&&(i=[]);(d||l.pos<b.ch)&&!l.eol();)l.start=l.pos,f=Ed(h,l,k),d&&i.push(e(!0));return d?i:e()}function Gd(a,b,c,d,e,f,g){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var i,j=0,k=null,l=new ng(b,a.options.tabSize),m=a.options.addModeClass&&[null];for(""==b&&Cd(Dd(c,d),f);!l.eol();){if(l.pos>a.options.maxHighlightLength?(h=!1,g&&Jd(a,b,d,l.pos),l.pos=b.length,i=null):i=Cd(Ed(c,l,d,m),f),m){var n=m[0].name;n&&(i="m-"+(i?n+" "+i:n))}if(!h||k!=i){for(;j<l.start;)j=Math.min(l.start,j+5e4),e(j,k);k=i}l.start=l.pos}for(;j<l.pos;){var o=Math.min(l.pos,j+5e4);e(o,k),j=o}}function Hd(a,b,c,d){var e=[a.state.modeGen],f={};Gd(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},f,d);for(var g=0;g<a.state.overlays.length;++g){var h=a.state.overlays[g],i=1,j=0;Gd(a,b.text,h.mode,!0,function(a,b){for(var c=i;a>j;){var d=e[i];d>a&&e.splice(i,1,a,e[i+1],d),i+=2,j=Math.min(a,d)}if(b)if(h.opaque)e.splice(c,i-c,a,"cm-overlay "+b),i=c+2;else for(;i>c;c+=2){var f=e[c+1];e[c+1]=(f?f+" ":"")+"cm-overlay "+b}},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function Id(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=Qa(a,ae(b)),e=Hd(a,b,b.text.length>a.options.maxHighlightLength?gg(a.doc.mode,d):d);b.stateAfter=d,b.styles=e.styles,e.classes?b.styleClasses=e.classes:b.styleClasses&&(b.styleClasses=null),c===a.doc.frontier&&a.doc.frontier++}return b.styles}function Jd(a,b,c,d){var e=a.doc.mode,f=new ng(b,a.options.tabSize);for(f.start=f.pos=d||0,""==b&&Dd(e,c);!f.eol();)Ed(e,f,c),f.start=f.pos}function Kd(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?ug:tg;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function Ld(a,b){var c=Pe("span",null,null,uf?"padding-right: .1px":null),d={pre:Pe("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,splitSpaces:(sf||uf)&&a.getOption("lineWrapping")};b.measure={};for(var e=0;e<=(b.rest?b.rest.length:0);e++){var f,g=e?b.rest[e-1]:b.line;d.pos=0,d.addToken=Nd,Ze(a.display.measure)&&(f=de(g))&&(d.addToken=Pd(d.addToken,f)),d.map=[];var h=b!=a.display.externalMeasured&&ae(g);Rd(g,d,Id(a,g,h)),g.styleClasses&&(g.styleClasses.bgClass&&(d.bgClass=Ue(g.styleClasses.bgClass,d.bgClass||"")),g.styleClasses.textClass&&(d.textClass=Ue(g.styleClasses.textClass,d.textClass||""))),0==d.map.length&&d.map.push(0,0,d.content.appendChild(Ye(a.display.measure))),0==e?(b.measure.map=d.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(d.map),(b.measure.caches||(b.measure.caches=[])).push({}))}return uf&&/\bcm-tab\b/.test(d.content.lastChild.className)&&(d.content.className="cm-tab-wrap-hack"),Fg(a,"renderLine",a,b.line,d.pre),d.pre.className&&(d.textClass=Ue(d.pre.className,d.textClass||"")),d}function Md(a){var b=Pe("span","â€¢","cm-invalidchar");return b.title="\\u"+a.charCodeAt(0).toString(16),b.setAttribute("aria-label",b.title),b}function Nd(a,b,c,d,e,f,g){if(b){var h=a.splitSpaces?b.replace(/ {3,}/g,Od):b,i=a.cm.state.specialChars,j=!1;if(i.test(b))for(var k=document.createDocumentFragment(),l=0;;){i.lastIndex=l;var m=i.exec(b),n=m?m.index-l:b.length-l;if(n){var o=document.createTextNode(h.slice(l,l+n));sf&&9>tf?k.appendChild(Pe("span",[o])):k.appendChild(o),a.map.push(a.pos,a.pos+n,o),a.col+=n,a.pos+=n}if(!m)break;if(l+=n+1,"	"==m[0]){var p=a.cm.options.tabSize,q=p-a.col%p,o=k.appendChild(Pe("span",Ee(q),"cm-tab"));o.setAttribute("role","presentation"),o.setAttribute("cm-text","	"),a.col+=q}else if("\r"==m[0]||"\n"==m[0]){var o=k.appendChild(Pe("span","\r"==m[0]?"â":"â¤","cm-invalidchar"));o.setAttribute("cm-text",m[0]),a.col+=1}else{var o=a.cm.options.specialCharPlaceholder(m[0]);o.setAttribute("cm-text",m[0]),sf&&9>tf?k.appendChild(Pe("span",[o])):k.appendChild(o),a.col+=1}a.map.push(a.pos,a.pos+1,o),a.pos++}else{a.col+=b.length;var k=document.createTextNode(h);a.map.push(a.pos,a.pos+b.length,k),sf&&9>tf&&(j=!0),a.pos+=b.length}if(c||d||e||j||g){var r=c||"";d&&(r+=d),e&&(r+=e);var s=Pe("span",[k],r,g);return f&&(s.title=f),a.content.appendChild(s)}a.content.appendChild(k)}}function Od(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":"Â ";return b+=" "}function Pd(a,b){return function(c,d,e,f,g,h,i){e=e?e+" cm-force-border":"cm-force-border";for(var j=c.pos,k=j+d.length;;){for(var l=0;l<b.length;l++){var m=b[l];if(m.to>j&&m.from<=j)break}if(m.to>=k)return a(c,d,e,f,g,h,i);a(c,d.slice(0,m.to-j),e,f,null,h,i),f=null,d=d.slice(m.to-j),j=m.to}}}function Qd(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e),!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id)),e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e)),a.pos+=b}function Rd(a,b,c){var d=a.markedSpans,e=a.text,f=0;if(d)for(var g,h,i,j,k,l,m,n=e.length,o=0,p=1,q="",r=0;;){if(r==o){i=j=k=l=h="",m=null,r=1/0;for(var s,t=[],u=0;u<d.length;++u){var v=d[u],w=v.marker;"bookmark"==w.type&&v.from==o&&w.widgetNode?t.push(w):v.from<=o&&(null==v.to||v.to>o||w.collapsed&&v.to==o&&v.from==o)?(null!=v.to&&v.to!=o&&r>v.to&&(r=v.to,j=""),w.className&&(i+=" "+w.className),w.css&&(h=(h?h+";":"")+w.css),w.startStyle&&v.from==o&&(k+=" "+w.startStyle),w.endStyle&&v.to==r&&(s||(s=[])).push(w.endStyle,v.to),w.title&&!l&&(l=w.title),w.collapsed&&(!m||md(m.marker,w)<0)&&(m=v)):v.from>o&&r>v.from&&(r=v.from)}if(s)for(var u=0;u<s.length;u+=2)s[u+1]==r&&(j+=" "+s[u]);if(!m||m.from==o)for(var u=0;u<t.length;++u)Qd(b,0,t[u]);if(m&&(m.from||0)==o){if(Qd(b,(null==m.to?n+1:m.to)-o,m.marker,null==m.from),null==m.to)return;m.to==o&&(m=!1)}}if(o>=n)break;for(var x=Math.min(n,r);;){if(q){var y=o+q.length;if(!m){var z=y>x?q.slice(0,x-o):q;b.addToken(b,z,g?g+i:i,k,o+z.length==r?j:"",l,h)}if(y>=x){q=q.slice(x-o),o=x;break}o=y,k=""}q=e.slice(f,f=c[p++]),g=Kd(c[p++],b.cm.options)}}else for(var p=1;p<c.length;p+=2)b.addToken(b,e.slice(f,f=c[p]),Kd(c[p+1],b.cm.options))}function Sd(a,b){return 0==b.from.ch&&0==b.to.ch&&""==Fe(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Td(a,b,c,d){function e(a){return c?c[a]:null}function f(a,c,e){Ad(a,c,e,d),xe(a,"change",a,b)}function g(a,b){for(var c=a,f=[];b>c;++c)f.push(new sg(j[c],e(c),d));return f}var h=b.from,i=b.to,j=b.text,k=Yd(a,h.line),l=Yd(a,i.line),m=Fe(j),n=e(j.length-1),o=i.line-h.line;if(b.full)a.insert(0,g(0,j.length)),a.remove(j.length,a.size-j.length);else if(Sd(a,b)){var p=g(0,j.length-1);f(l,l.text,n),o&&a.remove(h.line,o),p.length&&a.insert(h.line,p)}else if(k==l)if(1==j.length)f(k,k.text.slice(0,h.ch)+m+k.text.slice(i.ch),n);else{var p=g(1,j.length-1);p.push(new sg(m+k.text.slice(i.ch),n,d)),f(k,k.text.slice(0,h.ch)+j[0],e(0)),a.insert(h.line+1,p)}else if(1==j.length)f(k,k.text.slice(0,h.ch)+j[0]+l.text.slice(i.ch),e(0)),a.remove(h.line+1,o);else{f(k,k.text.slice(0,h.ch)+j[0],e(0)),f(l,m+l.text.slice(i.ch),n);var p=g(1,j.length-1);o>1&&a.remove(h.line+1,o-1),a.insert(h.line+1,p)}xe(a,"change",a,b)}function Ud(a){this.lines=a,this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function Vd(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d];b+=e.chunkSize(),c+=e.height,e.parent=this}this.size=b,this.height=c,this.parent=null}function Wd(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;(!c||i)&&(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function Xd(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,g(a),c(a),a.options.lineWrapping||m(a),a.options.mode=b.modeOption,Jb(a)}function Yd(a,b){if(b-=a.first,0>b||b>=a.size)throw new Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(f>b){c=e;break}b-=f}return c.lines[b]}function Zd(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function $d(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function _d(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function ae(a){if(null==a.parent)return null;for(var b=a.parent,c=Ge(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function be(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(f>b){a=e;continue a}b-=f,c+=e.chunkSize()}return c}while(!a.lines);for(var d=0;d<a.lines.length;++d){var g=a.lines[d],h=g.height;if(h>b)break;b-=h}return c+d}function ce(a){a=rd(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;b+=e.height}for(var f=c.parent;f;c=f,f=c.parent)for(var d=0;d<f.children.length;++d){var g=f.children[d];if(g==c)break;b+=g.height}return b}function de(a){var b=a.order;return null==b&&(b=a.order=fh(a.text)),b}function ee(a){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a||1}function fe(a,b){var c={from:V(b.from),to:Zf(b),text:Zd(a,b.from,b.to)};return me(a,c,b.from.line,b.to.line+1),Wd(a,function(a){me(a,c,b.from.line,b.to.line+1)},!0),c}function ge(a){for(;a.length;){var b=Fe(a);if(!b.ranges)break;a.pop()}}function he(a,b){return b?(ge(a.done),Fe(a.done)):a.done.length&&!Fe(a.done).ranges?Fe(a.done):a.done.length>1&&!a.done[a.done.length-2].ranges?(a.done.pop(),Fe(a.done)):void 0}function ie(a,b,c,d){var e=a.history;e.undone.length=0;var f,g=+new Date;if((e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>g-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))&&(f=he(e,e.lastOp==d))){
var h=Fe(f.changes);0==Lf(b.from,b.to)&&0==Lf(b.from,h.to)?h.to=Zf(b):f.changes.push(fe(a,b))}else{var i=Fe(e.done);for(i&&i.ranges||le(a.sel,e.done),f={changes:[fe(a,b)],generation:e.generation},e.done.push(f);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift()}e.done.push(c),e.generation=++e.maxGeneration,e.lastModTime=e.lastSelTime=g,e.lastOp=e.lastSelOp=d,e.lastOrigin=e.lastSelOrigin=b.origin,h||Fg(a,"historyAdded")}function je(a,b,c,d){var e=b.charAt(0);return"*"==e||"+"==e&&c.ranges.length==d.ranges.length&&c.somethingSelected()==d.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}function ke(a,b,c,d){var e=a.history,f=d&&d.origin;c==e.lastSelOp||f&&e.lastSelOrigin==f&&(e.lastModTime==e.lastSelTime&&e.lastOrigin==f||je(a,f,Fe(e.done),b))?e.done[e.done.length-1]=b:le(b,e.done),e.lastSelTime=+new Date,e.lastSelOrigin=f,e.lastSelOp=c,d&&d.clearRedo!==!1&&ge(e.undone)}function le(a,b){var c=Fe(b);c&&c.ranges&&c.equals(a)||b.push(a)}function me(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function ne(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function oe(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=0,e=[];d<b.text.length;++d)e.push(ne(c[d]));return e}function pe(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?ka.prototype.deepCopy.call(f):f);else{var g=f.changes,h=[];e.push({changes:h});for(var i=0;i<g.length;++i){var j,k=g[i];if(h.push({from:k.from,to:k.to,text:k.text}),b)for(var l in k)(j=l.match(/^spans_(\d+)$/))&&Ge(b,Number(j[1]))>-1&&(Fe(h)[l]=k[l],delete k[l])}}}return e}function qe(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function re(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)qe(f.ranges[h].anchor,b,c,d),qe(f.ranges[h].head,b,c,d)}else{for(var h=0;h<f.changes.length;++h){var i=f.changes[h];if(c<i.from.line)i.from=Kf(i.from.line+d,i.from.ch),i.to=Kf(i.to.line+d,i.to.ch);else if(b<=i.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function se(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;re(a.done,c,d,e),re(a.undone,c,d,e)}function te(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function ue(a){return a.target||a.srcElement}function ve(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),Df&&a.ctrlKey&&1==b&&(b=3),b}function we(a,b,c){var d=a._handlers&&a._handlers[b];return c?d&&d.length>0?d.slice():Dg:d||Dg}function xe(a,b){function c(a){return function(){a.apply(null,f)}}var d=we(a,b,!1);if(d.length){var e,f=Array.prototype.slice.call(arguments,2);Rf?e=Rf.delayedCallbacks:Gg?e=Gg:(e=Gg=[],setTimeout(ye,0));for(var g=0;g<d.length;++g)e.push(c(d[g]))}}function ye(){var a=Gg;Gg=null;for(var b=0;b<a.length;++b)a[b]()}function ze(a,b,c){return"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}}),Fg(a,c||b.type,a,b),te(b)||b.codemirrorIgnore}function Ae(a){var b=a._handlers&&a._handlers.cursorActivity;if(b)for(var c=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]),d=0;d<b.length;++d)-1==Ge(c,b[d])&&c.push(b[d])}function Be(a,b){return we(a,b).length>0}function Ce(a){a.prototype.on=function(a,b){Cg(this,a,b)},a.prototype.off=function(a,b){Eg(this,a,b)}}function De(){this.id=null}function Ee(a){for(;Og.length<=a;)Og.push(Fe(Og)+" ");return Og[a]}function Fe(a){return a[a.length-1]}function Ge(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function He(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function Ie(){}function Je(a,b){var c;return Object.create?c=Object.create(a):(Ie.prototype=a,c=new Ie),b&&Ke(b,c),c}function Ke(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||c===!1&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function Le(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Me(a,b){return b?b.source.indexOf("\\w")>-1&&Sg(a)?!0:b.test(a):Sg(a)}function Ne(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function Oe(a){return a.charCodeAt(0)>=768&&Tg.test(a)}function Pe(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)e.appendChild(document.createTextNode(b));else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function Qe(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function Re(a,b){return Qe(a).appendChild(b)}function Se(){for(var a=document.activeElement;a&&a.root&&a.root.activeElement;)a=a.root.activeElement;return a}function Te(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function Ue(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!Te(c[d]).test(b)&&(b+=" "+c[d]);return b}function Ve(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function We(){Zg||(Xe(),Zg=!0)}function Xe(){var a;Cg(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null,Ve(Sb)},100))}),Cg(window,"blur",function(){Ve(rc)})}function Ye(a){if(null==Vg){var b=Pe("span","â€‹");Re(a,Pe("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(Vg=b.offsetWidth<=1&&b.offsetHeight>2&&!(sf&&8>tf))}var c=Vg?Pe("span","â€‹"):Pe("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px");return c.setAttribute("cm-text",""),c}function Ze(a){if(null!=Wg)return Wg;var b=Re(a,document.createTextNode("AØ®A")),c=Qg(b,0,1).getBoundingClientRect();if(!c||c.left==c.right)return!1;var d=Qg(b,1,2).getBoundingClientRect();return Wg=d.right-c.right<3}function $e(a){if(null!=ch)return ch;var b=Re(a,Pe("span","x")),c=b.getBoundingClientRect(),d=Qg(b,0,1).getBoundingClientRect();return ch=Math.abs(c.left-d.left)>1}function _e(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];(g.from<c&&g.to>b||b==c&&g.to==b)&&(d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0)}e||d(b,c,"ltr")}function af(a){return a.level%2?a.to:a.from}function bf(a){return a.level%2?a.from:a.to}function cf(a){var b=de(a);return b?af(b[0]):0}function df(a){var b=de(a);return b?bf(Fe(b)):a.text.length}function ef(a,b){var c=Yd(a.doc,b),d=rd(c);d!=c&&(b=ae(d));var e=de(d),f=e?e[0].level%2?df(d):cf(d):0;return Kf(b,f)}function ff(a,b){for(var c,d=Yd(a.doc,b);c=pd(d);)d=c.find(1,!0).line,b=null;var e=de(d),f=e?e[0].level%2?cf(d):df(d):d.text.length;return Kf(null==b?ae(d):b,f)}function gf(a,b){var c=ef(a,b.line),d=Yd(a.doc,c.line),e=de(d);if(!e||0==e[0].level){var f=Math.max(0,d.text.search(/\S/)),g=b.line==c.line&&b.ch<=f&&b.ch;return Kf(c.line,g?0:f)}return c}function hf(a,b,c){var d=a[0].level;return b==d?!0:c==d?!1:c>b}function jf(a,b){eh=null;for(var c,d=0;d<a.length;++d){var e=a[d];if(e.from<b&&e.to>b)return d;if(e.from==b||e.to==b){if(null!=c)return hf(a,e.level,a[c].level)?(e.from!=e.to&&(eh=c),d):(e.from!=e.to&&(eh=d),c);c=d}}return c}function kf(a,b,c,d){if(!d)return b+c;do b+=c;while(b>0&&Oe(a.text.charAt(b)));return b}function lf(a,b,c,d){var e=de(a);if(!e)return mf(a,b,c,d);for(var f=jf(e,b),g=e[f],h=kf(a,b,g.level%2?-c:c,d);;){if(h>g.from&&h<g.to)return h;if(h==g.from||h==g.to)return jf(e,h)==f?h:(g=e[f+=c],c>0==g.level%2?g.to:g.from);if(g=e[f+=c],!g)return null;h=c>0==g.level%2?kf(a,g.to,-1,d):kf(a,g.from,1,d)}}function mf(a,b,c,d){var e=b+c;if(d)for(;e>0&&Oe(a.text.charAt(e));)e+=c;return 0>e||e>a.text.length?null:e}var nf=navigator.userAgent,of=navigator.platform,pf=/gecko\/\d/i.test(nf),qf=/MSIE \d/.test(nf),rf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nf),sf=qf||rf,tf=sf&&(qf?document.documentMode||6:rf[1]),uf=/WebKit\//.test(nf),vf=uf&&/Qt\/\d+\.\d+/.test(nf),wf=/Chrome\//.test(nf),xf=/Opera\//.test(nf),yf=/Apple Computer/.test(navigator.vendor),zf=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(nf),Af=/PhantomJS/.test(nf),Bf=/AppleWebKit/.test(nf)&&/Mobile\/\w+/.test(nf),Cf=Bf||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(nf),Df=Bf||/Mac/.test(of),Ef=/win/i.test(of),Ff=xf&&nf.match(/Version\/(\d*\.\d*)/);Ff&&(Ff=Number(Ff[1])),Ff&&Ff>=15&&(xf=!1,uf=!0);var Gf=Df&&(vf||xf&&(null==Ff||12.11>Ff)),Hf=pf||sf&&tf>=9,If=!1,Jf=!1;p.prototype=Ke({update:function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0";var e=a.viewHeight-(b?d:0);this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+e)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(b){this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px";var f=a.viewWidth-a.barLeft-(c?d:0);this.horiz.firstChild.style.width=a.scrollWidth-a.clientWidth+f+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&a.clientHeight>0&&(0==d&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?d:0,bottom:b?d:0}},setScrollLeft:function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var a=Df&&!zf?"12px":"18px";this.horiz.style.height=this.vert.style.width=a,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new De,this.disableVert=new De},enableZeroWidthBar:function(a,b){function c(){var d=a.getBoundingClientRect(),e=document.elementFromPoint(d.left+1,d.bottom-1);e!=a?a.style.pointerEvents="none":b.set(1e3,c)}a.style.pointerEvents="auto",b.set(1e3,c)},clear:function(){var a=this.horiz.parentNode;a.removeChild(this.horiz),a.removeChild(this.vert)}},p.prototype),q.prototype=Ke({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},q.prototype),a.scrollbarModel={"native":p,"null":q},z.prototype.signal=function(a,b){Be(a,b)&&this.events.push(arguments)},z.prototype.finish=function(){for(var a=0;a<this.events.length;a++)Fg.apply(null,this.events[a])};var Kf=a.Pos=function(a,b){return this instanceof Kf?(this.line=a,void(this.ch=b)):new Kf(a,b)},Lf=a.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch},Mf=null;ca.prototype=Ke({init:function(a){function b(a){if(!ze(d,a)){if(d.somethingSelected())Mf=d.getSelections(),c.inaccurateSelection&&(c.prevInput="",c.inaccurateSelection=!1,f.value=Mf.join("\n"),Pg(f));else{if(!d.options.lineWiseCopyCut)return;var b=aa(d);Mf=b.text,"cut"==a.type?d.setSelections(b.ranges,null,Jg):(c.prevInput="",f.value=b.text.join("\n"),Pg(f))}"cut"==a.type&&(d.state.cutIncoming=!0)}}var c=this,d=this.cm,e=this.wrapper=da(),f=this.textarea=e.firstChild;a.wrapper.insertBefore(e,a.wrapper.firstChild),Bf&&(f.style.width="0px"),Cg(f,"input",function(){sf&&tf>=9&&c.hasSelection&&(c.hasSelection=null),c.poll()}),Cg(f,"paste",function(a){ze(d,a)||$(a,d)||(d.state.pasteIncoming=!0,c.fastPoll())}),Cg(f,"cut",b),Cg(f,"copy",b),Cg(a.scroller,"paste",function(b){Tb(a,b)||ze(d,b)||(d.state.pasteIncoming=!0,c.focus())}),Cg(a.lineSpace,"selectstart",function(b){Tb(a,b)||zg(b)}),Cg(f,"compositionstart",function(){var a=d.getCursor("from");c.composing&&c.composing.range.clear(),c.composing={start:a,range:d.markText(a,d.getCursor("to"),{className:"CodeMirror-composing"})}}),Cg(f,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},prepareSelection:function(){var a=this.cm,b=a.display,c=a.doc,d=Ja(a);if(a.options.moveInputWithCursor){var e=nb(a,c.sel.primary().head,"div"),f=b.wrapper.getBoundingClientRect(),g=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,e.top+g.top-f.top)),d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,e.left+g.left-f.left))}return d},showSelection:function(a){var b=this.cm,c=b.display;Re(c.cursorDiv,a.cursors),Re(c.selectionDiv,a.selection),null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},reset:function(a){if(!this.contextMenuPending){var b,c,d=this.cm,e=d.doc;if(d.somethingSelected()){this.prevInput="";var f=e.sel.primary();b=bh&&(f.to().line-f.from().line>100||(c=d.getSelection()).length>1e3);var g=b?"-":c||d.getSelection();this.textarea.value=g,d.state.focused&&Pg(this.textarea),sf&&tf>=9&&(this.hasSelection=g)}else a||(this.prevInput=this.textarea.value="",sf&&tf>=9&&(this.hasSelection=null));this.inaccurateSelection=b}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!Cf||Se()!=this.textarea))try{this.textarea.focus()}catch(a){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var a=this;a.pollingFast||a.polling.set(this.cm.options.pollInterval,function(){a.poll(),a.cm.state.focused&&a.slowPoll()})},fastPoll:function(){function a(){var d=c.poll();d||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0,c.polling.set(20,a)},poll:function(){var a=this.cm,b=this.textarea,c=this.prevInput;if(this.contextMenuPending||!a.state.focused||ah(b)&&!c&&!this.composing||a.isReadOnly()||a.options.disableInput||a.state.keySeq)return!1;var d=b.value;if(d==c&&!a.somethingSelected())return!1;if(sf&&tf>=9&&this.hasSelection===d||Df&&/[\uf700-\uf7ff]/.test(d))return a.display.input.reset(),!1;if(a.doc.sel==a.display.selForContextMenu){var e=d.charCodeAt(0);if(8203!=e||c||(c="â€‹"),8666==e)return this.reset(),this.cm.execCommand("undo")}for(var f=0,g=Math.min(c.length,d.length);g>f&&c.charCodeAt(f)==d.charCodeAt(f);)++f;var h=this;return Db(a,function(){Z(a,d.slice(f),c.length-f,null,h.composing?"*compose":null),d.length>1e3||d.indexOf("\n")>-1?b.value=h.prevInput="":h.prevInput=d,h.composing&&(h.composing.range.clear(),h.composing.range=a.markText(h.composing.start,a.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){sf&&tf>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),b="â€‹"+(a?g.value:"");g.value="â‡š",g.value=b,d.prevInput=a?"":"â€‹",g.selectionStart=1,g.selectionEnd=b.length,f.selForContextMenu=e.doc.sel}}function c(){if(d.contextMenuPending=!1,d.wrapper.style.cssText=l,g.style.cssText=k,sf&&9>tf&&f.scrollbars.setScrollTop(f.scroller.scrollTop=i),null!=g.selectionStart){(!sf||sf&&9>tf)&&b();var a=0,c=function(){f.selForContextMenu==e.doc.sel&&0==g.selectionStart&&g.selectionEnd>0&&"â€‹"==d.prevInput?Eb(e,ig.selectAll)(e):a++<10?f.detectingSelectAll=setTimeout(c,500):f.input.reset()};f.detectingSelectAll=setTimeout(c,200)}}var d=this,e=d.cm,f=e.display,g=d.textarea,h=Ub(e,a),i=f.scroller.scrollTop;if(h&&!xf){var j=e.options.resetSelectionOnContextMenu;j&&-1==e.doc.sel.contains(h)&&Eb(e,Aa)(e.doc,na(h),Jg);var k=g.style.cssText,l=d.wrapper.style.cssText;d.wrapper.style.cssText="position: absolute";var m=d.wrapper.getBoundingClientRect();if(g.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(a.clientY-m.top-5)+"px; left: "+(a.clientX-m.left-5)+"px; z-index: 1000; background: "+(sf?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",uf)var n=window.scrollY;if(f.input.focus(),uf&&window.scrollTo(null,n),f.input.reset(),e.somethingSelected()||(g.value=d.prevInput=" "),d.contextMenuPending=!0,f.selForContextMenu=e.doc.sel,clearTimeout(f.detectingSelectAll),sf&&tf>=9&&b(),Hf){Bg(a);var o=function(){Eg(window,"mouseup",o),setTimeout(c,20)};Cg(window,"mouseup",o)}else setTimeout(c,50)}},readOnlyChanged:function(a){a||this.reset()},setUneditable:Ie,needsContentAttribute:!1},ca.prototype),ea.prototype=Ke({init:function(a){function b(a){if(!ze(d,a)){if(d.somethingSelected())Mf=d.getSelections(),"cut"==a.type&&d.replaceSelection("",null,"cut");else{if(!d.options.lineWiseCopyCut)return;var b=aa(d);Mf=b.text,"cut"==a.type&&d.operation(function(){d.setSelections(b.ranges,0,Jg),d.replaceSelection("",null,"cut")})}if(a.clipboardData&&!Bf)a.preventDefault(),a.clipboardData.clearData(),a.clipboardData.setData("text/plain",Mf.join("\n"));else{var c=da(),e=c.firstChild;d.display.lineSpace.insertBefore(c,d.display.lineSpace.firstChild),e.value=Mf.join("\n");var f=document.activeElement;Pg(e),setTimeout(function(){d.display.lineSpace.removeChild(c),f.focus()},50)}}}var c=this,d=c.cm,e=c.div=a.lineDiv;ba(e),Cg(e,"paste",function(a){ze(d,a)||$(a,d)}),Cg(e,"compositionstart",function(a){var b=a.data;if(c.composing={sel:d.doc.sel,data:b,startData:b},b){var e=d.doc.sel.primary(),f=d.getLine(e.head.line),g=f.indexOf(b,Math.max(0,e.head.ch-b.length));g>-1&&g<=e.head.ch&&(c.composing.sel=na(Kf(e.head.line,g),Kf(e.head.line,g+b.length)))}}),Cg(e,"compositionupdate",function(a){c.composing.data=a.data}),Cg(e,"compositionend",function(a){var b=c.composing;b&&(a.data==b.startData||/\u200b/.test(a.data)||(b.data=a.data),setTimeout(function(){b.handled||c.applyComposition(b),c.composing==b&&(c.composing=null)},50))}),Cg(e,"touchstart",function(){c.forceCompositionEnd()}),Cg(e,"input",function(){c.composing||(d.isReadOnly()||!c.pollContent())&&Db(c.cm,function(){Jb(d)})}),Cg(e,"copy",b),Cg(e,"cut",b)},prepareSelection:function(){var a=Ja(this.cm,!1);return a.focus=this.cm.state.focused,a},showSelection:function(a){a&&this.cm.display.view.length&&(a.focus&&this.showPrimarySelection(),this.showMultipleSelections(a))},showPrimarySelection:function(){var a=window.getSelection(),b=this.cm.doc.sel.primary(),c=ha(this.cm,a.anchorNode,a.anchorOffset),d=ha(this.cm,a.focusNode,a.focusOffset);if(!c||c.bad||!d||d.bad||0!=Lf(X(c,d),b.from())||0!=Lf(W(c,d),b.to())){var e=fa(this.cm,b.from()),f=fa(this.cm,b.to());if(e||f){var g=this.cm.display.view,h=a.rangeCount&&a.getRangeAt(0);if(e){if(!f){var i=g[g.length-1].measure,j=i.maps?i.maps[i.maps.length-1]:i.map;f={node:j[j.length-1],offset:j[j.length-2]-j[j.length-3]}}}else e={node:g[0].measure.map[2],offset:0};try{var k=Qg(e.node,e.offset,f.offset,f.node)}catch(l){}k&&(!pf&&this.cm.state.focused?(a.collapse(e.node,e.offset),k.collapsed||a.addRange(k)):(a.removeAllRanges(),a.addRange(k)),h&&null==a.anchorNode?a.addRange(h):pf&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var a=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){a.gracePeriod=!1,a.selectionChanged()&&a.cm.operation(function(){a.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(a){Re(this.cm.display.cursorDiv,a.cursors),Re(this.cm.display.selectionDiv,a.selection)},rememberSelection:function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode,this.lastAnchorOffset=a.anchorOffset,this.lastFocusNode=a.focusNode,this.lastFocusOffset=a.focusOffset},selectionInEditor:function(){var a=window.getSelection();if(!a.rangeCount)return!1;var b=a.getRangeAt(0).commonAncestorContainer;return Ug(this.div,b)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():Db(this.cm,function(){b.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,a)},selectionChanged:function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var a=window.getSelection(),b=this.cm;this.rememberSelection();var c=ha(b,a.anchorNode,a.anchorOffset),d=ha(b,a.focusNode,a.focusOffset);c&&d&&Db(b,function(){Aa(b.doc,na(c,d),Jg),(c.bad||d.bad)&&(b.curOp.selectionChanged=!0)})}},pollContent:function(){var a=this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from(),e=c.to();if(d.line<b.viewFrom||e.line>b.viewTo-1)return!1;var f;if(d.line==b.viewFrom||0==(f=Mb(a,d.line)))var g=ae(b.view[0].line),h=b.view[0].node;else var g=ae(b.view[f].line),h=b.view[f-1].node.nextSibling;var i=Mb(a,e.line);if(i==b.view.length-1)var j=b.viewTo-1,k=b.lineDiv.lastChild;else var j=ae(b.view[i+1].line)-1,k=b.view[i+1].node.previousSibling;for(var l=a.doc.splitLines(ja(a,h,k,g,j)),m=Zd(a.doc,Kf(g,0),Kf(j,Yd(a.doc,j).text.length));l.length>1&&m.length>1;)if(Fe(l)==Fe(m))l.pop(),m.pop(),j--;else{if(l[0]!=m[0])break;l.shift(),m.shift(),g++}for(var n=0,o=0,p=l[0],q=m[0],r=Math.min(p.length,q.length);r>n&&p.charCodeAt(n)==q.charCodeAt(n);)++n;for(var s=Fe(l),t=Fe(m),u=Math.min(s.length-(1==l.length?n:0),t.length-(1==m.length?n:0));u>o&&s.charCodeAt(s.length-o-1)==t.charCodeAt(t.length-o-1);)++o;l[l.length-1]=s.slice(0,s.length-o),l[0]=l[0].slice(n);var v=Kf(g,n),w=Kf(j,m.length?Fe(m).length-o:0);return l.length>1||l[0]||Lf(v,w)?(Fc(a.doc,l,v,w,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(a){this.cm.isReadOnly()?Eb(this.cm,Jb)(this.cm):a.data&&a.data!=a.startData&&Eb(this.cm,Z)(this.cm,a.data,0,a.sel)},setUneditable:function(a){a.contentEditable="false"},onKeyPress:function(a){a.preventDefault(),this.cm.isReadOnly()||Eb(this.cm,Z)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0)},readOnlyChanged:function(a){this.div.contentEditable=String("nocursor"!=a)},onContextMenu:Ie,resetPosition:Ie,needsContentAttribute:!0},ea.prototype),a.inputStyles={textarea:ca,contenteditable:ea},ka.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=Lf(c.anchor,d.anchor)||0!=Lf(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new la(V(this.ranges[b].anchor),V(this.ranges[b].head));return new ka(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(Lf(b,d.from())>=0&&Lf(a,d.to())<=0)return c}return-1}},la.prototype={from:function(){return X(this.anchor,this.head)},to:function(){return W(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Nf,Of,Pf,Qf={left:0,right:0,top:0,bottom:0},Rf=null,Sf=0,Tf=0,Uf=0,Vf=null;sf?Vf=-.53:pf?Vf=15:wf?Vf=-.7:yf&&(Vf=-1/3);var Wf=function(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;return null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail),null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta),{x:b,y:c}};a.wheelEventPixels=function(a){var b=Wf(a);return b.x*=Vf,b.y*=Vf,b};var Xf=new De,Yf=null,Zf=a.changeEnd=function(a){return a.text?Kf(a.from.line+a.text.length-1,Fe(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};a.prototype={constructor:a,focus:function(){window.focus(),this.display.input.focus()},setOption:function(a,b){var c=this.options,d=c[a];(c[a]!=b||"mode"==a)&&(c[a]=b,_f.hasOwnProperty(a)&&Eb(this,_f[a])(this,b,d))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](Uc(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:Fb(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque}),this.state.modeGen++,Jb(this)}),removeOverlay:Fb(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a)return b.splice(c,1),this.state.modeGen++,void Jb(this)}}),indentLine:Fb(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),ra(this.doc,a)&&Nc(this,a,b,c)}),indentSelection:Fb(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(Nc(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&Lc(this));else{var f=e.from(),g=e.to(),h=Math.max(c,f.line);c=Math.min(this.lastLine(),g.line-(g.ch?0:1))+1;for(var i=h;c>i;++i)Nc(this,i,a);var j=this.doc.sel.ranges;0==f.ch&&b.length==j.length&&j[d].from().ch>0&&wa(this.doc,d,new la(f,j[d].to()),Jg)}}}),getTokenAt:function(a,b){return Fd(this,a,b)},getLineTokens:function(a,b){return Fd(this,Kf(a),b,!0)},getTokenTypeAt:function(a){a=pa(this.doc,a);var b,c=Id(this,Yd(this.doc,a.line)),d=0,e=(c.length-1)/2,f=a.ch;if(0==f)b=c[2];else for(;;){var g=d+e>>1;if((g?c[2*g-1]:0)>=f)e=g;else{if(!(c[2*g+1]<f)){b=c[2*g+2];break}d=g+1}}var h=b?b.indexOf("cm-overlay "):-1;return 0>h?b:0==h?null:b.slice(0,h-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!fg.hasOwnProperty(b))return c;var d=fg[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(var f=0;f<d._global.length;f++){var h=d._global[f];h.pred(e,this)&&-1==Ge(c,h.val)&&c.push(h.val)}return c},getStateAfter:function(a,b){var c=this.doc;return a=oa(c,null==a?c.first+c.size-1:a),Qa(this,a+1,b)},cursorCoords:function(a,b){var c,d=this.doc.sel.primary();return c=null==a?d.head:"object"==typeof a?pa(this.doc,a):a?d.from():d.to(),nb(this,c,b||"page")},charCoords:function(a,b){return mb(this,pa(this.doc,a),b||"page")},coordsChar:function(a,b){return a=lb(this,a,b||"page"),qb(this,a.left,a.top)},lineAtHeight:function(a,b){return a=lb(this,{top:a,left:0},b||"page").top,be(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c,d=!1;if("number"==typeof a){var e=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>e&&(a=e,d=!0),c=Yd(this.doc,a)}else c=a;return kb(this,c,{top:0,left:0},b||"page").top+(d?this.doc.height-ce(c):0)},defaultTextHeight:function(){return sb(this.display)},defaultCharWidth:function(){return tb(this.display)},setGutterMarker:Fb(function(a,b,c){return Oc(this.doc,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&Ne(d)&&(a.gutterMarkers=null),!0})}),clearGutter:Fb(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,Kb(b,d,"gutter"),Ne(c.gutterMarkers)&&(c.gutterMarkers=null)),++d})}),lineInfo:function(a){if("number"==typeof a){if(!ra(this.doc,a))return null;var b=a;if(a=Yd(this.doc,a),!a)return null}else{var b=ae(a);if(null==b)return null}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=nb(this,pa(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",b.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(b),f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&Ic(this,h,g,h+b.offsetWidth,g+b.offsetHeight)},triggerOnKeyDown:Fb(lc),triggerOnKeyPress:Fb(oc),triggerOnKeyUp:nc,execCommand:function(a){return ig.hasOwnProperty(a)?ig[a].call(null,this):void 0},triggerElectric:Fb(function(a){_(this,a)}),findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);for(var f=0,g=pa(this.doc,a);b>f&&(g=Qc(this.doc,g,e,c,d),!g.hitSide);++f);return g},moveH:Fb(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?Qc(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},Lg)}),deleteH:Fb(function(a,b){var c=this.doc.sel,d=this.doc;c.somethingSelected()?d.replaceSelection("",null,"+delete"):Pc(this,function(c){var e=Qc(d,c.head,a,b,!1);return 0>a?{from:e,to:c.head}:{from:c.head,to:e}})}),findPosV:function(a,b,c,d){var e=1,f=d;0>b&&(e=-1,b=-b);for(var g=0,h=pa(this.doc,a);b>g;++g){var i=nb(this,h,"div");if(null==f?f=i.left:i.left=f,h=Rc(this,i,e,c),h.hitSide)break}return h},moveV:Fb(function(a,b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();if(d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var h=nb(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn),e.push(h.left);var i=Rc(c,h,a,b);return"page"==b&&g==d.sel.primary()&&Kc(c,null,mb(c,i,"div").top-h.top),i},Lg),e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=this.doc,c=Yd(b,a.line).text,d=a.ch,e=a.ch;if(c){var f=this.getHelper(a,"wordChars");(a.xRel<0||e==c.length)&&d?--d:++e;for(var g=c.charAt(d),h=Me(g,f)?function(a){return Me(a,f)}:/\s/.test(g)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Me(a)};d>0&&h(c.charAt(d-1));)--d;for(;e<c.length&&h(c.charAt(e));)++e}return new la(Kf(a.line,d),Kf(a.line,e))},toggleOverwrite:function(a){(null==a||a!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?Yg(this.display.cursorDiv,"CodeMirror-overwrite"):Xg(this.display.cursorDiv,"CodeMirror-overwrite"),Fg(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Se()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Fb(function(a,b){(null!=a||null!=b)&&Mc(this),null!=a&&(this.curOp.scrollLeft=a),null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-Ua(this)-this.display.barHeight,width:a.scrollWidth-Ua(this)-this.display.barWidth,clientHeight:Wa(this),clientWidth:Va(this)}},scrollIntoView:Fb(function(a,b){if(null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:Kf(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=b||0,null!=a.from.line)Mc(this),this.curOp.scrollToPos=a;else{var c=Jc(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin);this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:Fb(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a;
}var d=this;null!=a&&(d.display.wrapper.style.width=c(a)),null!=b&&(d.display.wrapper.style.height=c(b)),d.options.lineWrapping&&gb(this);var e=d.display.viewFrom;d.doc.iter(e,d.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){Kb(d,e,"widget");break}++e}),d.curOp.forceUpdate=!0,Fg(d,"refresh",this)}),operation:function(a){return Db(this,a)},refresh:Fb(function(){var a=this.display.cachedTextHeight;Jb(this),this.curOp.forceUpdate=!0,hb(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),k(this),(null==a||Math.abs(a-sb(this.display))>.5)&&g(this),Fg(this,"refresh",this)}),swapDoc:Fb(function(a){var b=this.doc;return b.cm=null,Xd(this,a),hb(this),this.display.input.reset(),this.scrollTo(a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,xe(this,"swapDoc",this,b),b}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ce(a);var $f=a.defaults={},_f=a.optionHandlers={},ag=a.Init={toString:function(){return"CodeMirror.Init"}};Sc("value","",function(a,b){a.setValue(b)},!0),Sc("mode",null,function(a,b){a.doc.modeOption=b,c(a)},!0),Sc("indentUnit",2,c,!0),Sc("indentWithTabs",!1),Sc("smartIndent",!0),Sc("tabSize",4,function(a){d(a),hb(a),Jb(a)},!0),Sc("lineSeparator",null,function(a,b){if(a.doc.lineSep=b,b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var f=a.text.indexOf(b,e);if(-1==f)break;e=f+b.length,c.push(Kf(d,f))}d++});for(var e=c.length-1;e>=0;e--)Fc(a.doc,b,c[e],Kf(c[e].line,c[e].ch+b.length))}}),Sc("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(b,c,d){b.state.specialChars=new RegExp(c.source+(c.test("	")?"":"|	"),"g"),d!=a.Init&&b.refresh()}),Sc("specialCharPlaceholder",Md,function(a){a.refresh()},!0),Sc("electricChars",!0),Sc("inputStyle",Cf?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Sc("rtlMoveVisually",!Ef),Sc("wholeLineUpdateBefore",!0),Sc("theme","default",function(a){h(a),i(a)},!0),Sc("keyMap","default",function(b,c,d){var e=Uc(c),f=d!=a.Init&&Uc(d);f&&f.detach&&f.detach(b,e),e.attach&&e.attach(b,f||null)}),Sc("extraKeys",null),Sc("lineWrapping",!1,e,!0),Sc("gutters",[],function(a){n(a.options),i(a)},!0),Sc("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?y(a.display)+"px":"0",a.refresh()},!0),Sc("coverGutterNextToScrollbar",!1,function(a){s(a)},!0),Sc("scrollbarStyle","native",function(a){r(a),s(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),Sc("lineNumbers",!1,function(a){n(a.options),i(a)},!0),Sc("firstLineNumber",1,i,!0),Sc("lineNumberFormatter",function(a){return a},i,!0),Sc("showCursorWhenSelecting",!1,Ia,!0),Sc("resetSelectionOnContextMenu",!0),Sc("lineWiseCopyCut",!0),Sc("readOnly",!1,function(a,b){"nocursor"==b?(rc(a),a.display.input.blur(),a.display.disabled=!0):a.display.disabled=!1,a.display.input.readOnlyChanged(b)}),Sc("disableInput",!1,function(a,b){b||a.display.input.reset()},!0),Sc("dragDrop",!0,Rb),Sc("allowDropFileTypes",null),Sc("cursorBlinkRate",530),Sc("cursorScrollMargin",0),Sc("cursorHeight",1,Ia,!0),Sc("singleCursorHeightPerLine",!0,Ia,!0),Sc("workTime",100),Sc("workDelay",100),Sc("flattenSpans",!0,d,!0),Sc("addModeClass",!1,d,!0),Sc("pollInterval",100),Sc("undoDepth",200,function(a,b){a.doc.history.undoDepth=b}),Sc("historyEventDelay",1250),Sc("viewportMargin",10,function(a){a.refresh()},!0),Sc("maxHighlightLength",1e4,d,!0),Sc("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()}),Sc("tabindex",null,function(a,b){a.display.input.getField().tabIndex=b||""}),Sc("autofocus",null);var bg=a.modes={},cg=a.mimeModes={};a.defineMode=function(b,c){a.defaults.mode||"null"==b||(a.defaults.mode=b),arguments.length>2&&(c.dependencies=Array.prototype.slice.call(arguments,2)),bg[b]=c},a.defineMIME=function(a,b){cg[a]=b},a.resolveMode=function(b){if("string"==typeof b&&cg.hasOwnProperty(b))b=cg[b];else if(b&&"string"==typeof b.name&&cg.hasOwnProperty(b.name)){var c=cg[b.name];"string"==typeof c&&(c={name:c}),b=Je(c,b),b.name=c.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}},a.getMode=function(b,c){var c=a.resolveMode(c),d=bg[c.name];if(!d)return a.getMode(b,"text/plain");var e=d(b,c);if(dg.hasOwnProperty(c.name)){var f=dg[c.name];for(var g in f)f.hasOwnProperty(g)&&(e.hasOwnProperty(g)&&(e["_"+g]=e[g]),e[g]=f[g])}if(e.name=c.name,c.helperType&&(e.helperType=c.helperType),c.modeProps)for(var g in c.modeProps)e[g]=c.modeProps[g];return e},a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var dg=a.modeExtensions={};a.extendMode=function(a,b){var c=dg.hasOwnProperty(a)?dg[a]:dg[a]={};Ke(b,c)},a.defineExtension=function(b,c){a.prototype[b]=c},a.defineDocExtension=function(a,b){wg.prototype[a]=b},a.defineOption=Sc;var eg=[];a.defineInitHook=function(a){eg.push(a)};var fg=a.helpers={};a.registerHelper=function(b,c,d){fg.hasOwnProperty(b)||(fg[b]=a[b]={_global:[]}),fg[b][c]=d},a.registerGlobalHelper=function(b,c,d,e){a.registerHelper(b,c,e),fg[b]._global.push({pred:d,val:e})};var gg=a.copyState=function(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c},hg=a.startState=function(a,b,c){return a.startState?a.startState(b,c):!0};a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state,a=c.mode}return c||{mode:a,state:b}};var ig=a.commands={selectAll:function(a){a.setSelection(Kf(a.firstLine(),0),Kf(a.lastLine()),Jg)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Jg)},killLine:function(a){Pc(a,function(b){if(b.empty()){var c=Yd(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:Kf(b.head.line+1,0)}:{from:b.head,to:Kf(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){Pc(a,function(b){return{from:Kf(b.from().line,0),to:pa(a.doc,Kf(b.to().line+1,0))}})},delLineLeft:function(a){Pc(a,function(a){return{from:Kf(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){Pc(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:0,top:c},"div");return{from:d,to:b.from()}})},delWrappedLineRight:function(a){Pc(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:d}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(Kf(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(Kf(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return ef(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return gf(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){return ff(a,b.head.line)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div")},Lg)},goLineLeft:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:c},"div")},Lg)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:0,top:c},"div");return d.ch<a.getLine(d.line).search(/\S/)?gf(a,b.head):d},Lg)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("	")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),g=Mg(a.getLine(f.line),f.ch,d);b.push(new Array(d-g%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){Db(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,f=Yd(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new Kf(e.line,e.ch-1)),e.ch>0)e=new Kf(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),Kf(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=Yd(a.doc,e.line-1).text;g&&a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+g.charAt(g.length-1),Kf(e.line-1,g.length-1),Kf(e.line,1),"+transpose")}c.push(new la(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){Db(a,function(){for(var b=a.listSelections().length,c=0;b>c;c++){var d=a.listSelections()[c];a.replaceRange(a.doc.lineSeparator(),d.anchor,d.head,"+input"),a.indentLine(d.from().line+1,null,!0)}Lc(a)})},toggleOverwrite:function(a){a.toggleOverwrite()}},jg=a.keyMap={};jg.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},jg.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},jg.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},jg.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},jg["default"]=Df?jg.macDefault:jg.pcDefault,a.normalizeKeyMap=function(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if("..."==d){delete a[c];continue}for(var e=He(c.split(" "),Tc),f=0;f<e.length;f++){var g,h;f==e.length-1?(h=e.join(" "),g=d):(h=e.slice(0,f+1).join(" "),g="...");var i=b[h];if(i){if(i!=g)throw new Error("Inconsistent bindings for "+h)}else b[h]=g}delete a[c]}for(var j in b)a[j]=b[j];return a};var kg=a.lookupKey=function(a,b,c,d){b=Uc(b);var e=b.call?b.call(a,d):b[a];if(e===!1)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return kg(a,b.fallthrough,c,d);for(var f=0;f<b.fallthrough.length;f++){var g=kg(a,b.fallthrough[f],c,d);if(g)return g}}},lg=a.isModifierKey=function(a){var b="string"==typeof a?a:dh[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b},mg=a.keyName=function(a,b){if(xf&&34==a.keyCode&&a["char"])return!1;var c=dh[a.keyCode],d=c;return null==d||a.altGraphKey?!1:(a.altKey&&"Alt"!=c&&(d="Alt-"+d),(Gf?a.metaKey:a.ctrlKey)&&"Ctrl"!=c&&(d="Ctrl-"+d),(Gf?a.ctrlKey:a.metaKey)&&"Cmd"!=c&&(d="Cmd-"+d),!b&&a.shiftKey&&"Shift"!=c&&(d="Shift-"+d),d)};a.fromTextArea=function(b,c){function d(){b.value=j.getValue()}if(c=c?Ke(c):{},c.value=b.value,!c.tabindex&&b.tabIndex&&(c.tabindex=b.tabIndex),!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder),null==c.autofocus){var e=Se();c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(Cg(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var f=b.form,g=f.submit;try{var h=f.submit=function(){d(),f.submit=g,f.submit(),f.submit=h}}catch(i){}}c.finishInit=function(a){a.save=d,a.getTextArea=function(){return b},a.toTextArea=function(){a.toTextArea=isNaN,d(),b.parentNode.removeChild(a.getWrapperElement()),b.style.display="",b.form&&(Eg(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=g))}},b.style.display="none";var j=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return j};var ng=a.StringStream=function(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};ng.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));return c?(++this.pos,b):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);return b>-1?(this.pos=b,!0):void 0},backUp:function(a){this.pos-=a},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Mg(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Mg(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Mg(this.string,null,this.tabSize)-(this.lineStart?Mg(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&b!==!1&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a},f=this.string.substr(this.pos,a.length);return e(f)==e(a)?(b!==!1&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var og=0,pg=a.TextMarker=function(a,b){this.lines=[],this.type=b,this.doc=a,this.id=++og};Ce(pg),pg.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;if(b&&ub(a),Be(this,"clear")){var c=this.find();c&&xe(this,"clear",c.from,c.to)}for(var d=null,e=null,f=0;f<this.lines.length;++f){var g=this.lines[f],h=_c(g.markedSpans,this);a&&!this.collapsed?Kb(a,ae(g),"text"):a&&(null!=h.to&&(e=ae(g)),null!=h.from&&(d=ae(g))),g.markedSpans=ad(g.markedSpans,h),null==h.from&&this.collapsed&&!vd(this.doc,g)&&a&&_d(g,sb(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var f=0;f<this.lines.length;++f){var i=rd(this.lines[f]),j=l(i);j>a.display.maxLineLength&&(a.display.maxLine=i,a.display.maxLineLength=j,a.display.maxLineChanged=!0)}null!=d&&a&&this.collapsed&&Jb(a,d,e+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&Da(a.doc)),a&&xe(a,"markerCleared",a,this),b&&wb(a),this.parent&&this.parent.clear()}},pg.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=_c(f.markedSpans,this);if(null!=g.from&&(c=Kf(b?f:ae(f),g.from),-1==a))return c;if(null!=g.to&&(d=Kf(b?f:ae(f),g.to),1==a))return d}return c&&{from:c,to:d}},pg.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&Db(c,function(){var d=a.line,e=ae(a.line),f=_a(c,e);if(f&&(fb(f),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!vd(b.doc,d)&&null!=b.height){var g=b.height;b.height=null;var h=yd(b)-g;h&&_d(d,d.height+h)}})},pg.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=Ge(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},pg.prototype.detachLine=function(a){if(this.lines.splice(Ge(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}};var og=0,qg=a.SharedTextMarker=function(a,b){this.markers=a,this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};Ce(qg),qg.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();xe(this,"clear")}},qg.prototype.find=function(a,b){return this.primary.find(a,b)};var rg=a.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a,this.node=b};Ce(rg),rg.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,d=ae(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=yd(this);_d(c,Math.max(0,c.height-f)),a&&Db(a,function(){xd(a,c,-f),Kb(a,d,"widget")})}},rg.prototype.changed=function(){var a=this.height,b=this.doc.cm,c=this.line;this.height=null;var d=yd(this)-a;d&&(_d(c,c.height+d),b&&Db(b,function(){b.curOp.forceUpdate=!0,xd(b,c,d)}))};var sg=a.Line=function(a,b,c){this.text=a,jd(this,b),this.height=c?c(this):1};Ce(sg),sg.prototype.lineNo=function(){return ae(this)};var tg={},ug={};Ud.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;d>c;++c){var e=this.lines[c];this.height-=e.height,Bd(e),xe(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0;d<b.length;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;d>a;++a)if(c(this.lines[a]))return!0}},Vd.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(e>a){var f=Math.min(b,e-a),g=d.height;if(d.removeInner(a,f),this.height-=g-d.height,e==f&&(this.children.splice(c--,1),d.parent=null),0==(b-=f))break;a=0}else a-=e}if(this.size-b<25&&(this.children.length>1||!(this.children[0]instanceof Ud))){var h=[];this.collapse(h),this.children=[new Ud(h)],this.children[0].parent=this}},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(f>=a){if(e.insertInner(a,b,c),e.lines&&e.lines.length>50){for(;e.lines.length>50;){var g=e.lines.splice(e.lines.length-25,25),h=new Ud(g);e.height-=h.height,this.children.splice(d+1,0,h),h.parent=this}this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new Vd(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=Ge(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new Vd(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(f>a){var g=Math.min(b,f-a);if(e.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=f}}};var vg=0,wg=a.Doc=function(a,b,c,d){if(!(this instanceof wg))return new wg(a,b,c,d);null==c&&(c=0),Vd.call(this,[new Ud([new sg("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=c;var e=Kf(c,0);this.sel=na(e),this.history=new ee(null),this.id=++vg,this.modeOption=b,this.lineSep=d,this.extend=!1,"string"==typeof a&&(a=this.splitLines(a)),Td(this,{from:e,to:e,text:a}),Aa(this,na(e),Jg)};wg.prototype=Je(Vd.prototype,{constructor:wg,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=$d(this,this.first,this.first+this.size);return a===!1?b:b.join(a||this.lineSeparator())},setValue:Gb(function(a){var b=Kf(this.first,0),c=this.first+this.size-1;zc(this,{from:b,to:Kf(c,Yd(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0),Aa(this,na(b))}),replaceRange:function(a,b,c,d){b=pa(this,b),c=c?pa(this,c):b,Fc(this,a,b,c,d)},getRange:function(a,b,c){var d=Zd(this,pa(this,a),pa(this,b));return c===!1?d:d.join(c||this.lineSeparator())},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},getLineHandle:function(a){return ra(this,a)?Yd(this,a):void 0},getLineNumber:function(a){return ae(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=Yd(this,a)),rd(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return pa(this,a)},getCursor:function(a){var b,c=this.sel.primary();return b=null==a||"head"==a?c.head:"anchor"==a?c.anchor:"end"==a||"to"==a||a===!1?c.to():c.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Gb(function(a,b,c){xa(this,pa(this,"number"==typeof a?Kf(a,b||0):a),null,c)}),setSelection:Gb(function(a,b,c){xa(this,pa(this,a),pa(this,b||a),c)}),extendSelection:Gb(function(a,b,c){ua(this,pa(this,a),b&&pa(this,b),c)}),extendSelections:Gb(function(a,b){va(this,sa(this,a),b)}),extendSelectionsBy:Gb(function(a,b){var c=He(this.sel.ranges,a);va(this,sa(this,c),b)}),setSelections:Gb(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new la(pa(this,a[d].anchor),pa(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex)),Aa(this,ma(e,b),c)}}),addSelection:Gb(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new la(pa(this,a),pa(this,b||a))),Aa(this,ma(d,d.length-1),c)}),getSelection:function(a){for(var b,c=this.sel.ranges,d=0;d<c.length;d++){var e=Zd(this,c[d].from(),c[d].to());b=b?b.concat(e):e}return a===!1?b:b.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=Zd(this,c[d].from(),c[d].to());a!==!1&&(e=e.join(a||this.lineSeparator())),b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:Gb(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:this.splitLines(a[f]),origin:c}}for(var h=b&&"end"!=b&&xc(this,d,b),f=d.length-1;f>=0;f--)zc(this,d[f]);h?za(this,h):this.cm&&Lc(this.cm)}),undo:Gb(function(){Bc(this,"undo")}),redo:Gb(function(){Bc(this,"redo")}),undoSelection:Gb(function(){Bc(this,"undo",!0)}),redoSelection:Gb(function(){Bc(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(var d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new ee(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:pe(this.history.done),undone:pe(this.history.undone)}},setHistory:function(a){var b=this.history=new ee(this.history.maxGeneration);b.done=pe(a.done.slice(0),null,!0),b.undone=pe(a.undone.slice(0),null,!0)},addLineClass:Gb(function(a,b,c){return Oc(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(a[d]){if(Te(c).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:Gb(function(a,b,c){return Oc(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",e=a[d];if(!e)return!1;if(null==c)a[d]=null;else{var f=e.match(Te(c));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}return!0})}),addLineWidget:Gb(function(a,b,c){return zd(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return Vc(this,pa(this,a),pa(this,b),c,c&&c.type||"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};return a=pa(this,a),Vc(this,a,a,c,"bookmark")},findMarksAt:function(a){a=pa(this,a);var b=[],c=Yd(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=pa(this,a),b=pa(this,b);var d=[],e=a.line;return this.iter(a.line,b.line+1,function(f){var g=f.markedSpans;if(g)for(var h=0;h<g.length;h++){var i=g[h];null!=i.to&&e==a.line&&a.ch>i.to||null==i.from&&e!=a.line||null!=i.from&&e==b.line&&i.from>b.ch||c&&!c(i.marker)||d.push(i.marker.parent||i.marker)}++e}),d},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first,d=this.lineSeparator().length;return this.iter(function(e){var f=e.text.length+d;return f>a?(b=a,!0):(a-=f,void++c)}),pa(this,Kf(c,b))},indexFromPos:function(a){a=pa(this,a);var b=a.ch;if(a.line<this.first||a.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,a.line,function(a){b+=a.text.length+c}),b},copy:function(a){var b=new wg($d(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel=this.sel,b.extend=!1,a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new wg($d(this,b,c),a.mode||this.modeOption,b,this.lineSep);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],Yc(d,Xc(this)),d},unlinkDoc:function(b){if(b instanceof a&&(b=b.doc),this.linked)for(var c=0;c<this.linked.length;++c){var d=this.linked[c];if(d.doc==b){this.linked.splice(c,1),b.unlinkDoc(this),Zc(Xc(this));break}}if(b.history==this.history){var e=[b.id];Wd(b,function(a){e.push(a.id)},!0),b.history=new ee(null),b.history.done=pe(this.history.done,e),b.history.undone=pe(this.history.undone,e)}},iterLinkedDocs:function(a){Wd(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):_g(a)},lineSeparator:function(){return this.lineSep||"\n"}}),wg.prototype.eachLine=wg.prototype.iter;var xg="iter insert remove copy getEditor constructor".split(" ");for(var yg in wg.prototype)wg.prototype.hasOwnProperty(yg)&&Ge(xg,yg)<0&&(a.prototype[yg]=function(a){return function(){return a.apply(this.doc,arguments)}}(wg.prototype[yg]));Ce(wg);var zg=a.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},Ag=a.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},Bg=a.e_stop=function(a){zg(a),Ag(a)},Cg=a.on=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={}),e=d[b]||(d[b]=[]);e.push(c)}},Dg=[],Eg=a.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else for(var d=we(a,b,!1),e=0;e<d.length;++e)if(d[e]==c){d.splice(e,1);break}},Fg=a.signal=function(a,b){var c=we(a,b,!0);if(c.length)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},Gg=null,Hg=30,Ig=a.Pass={toString:function(){return"CodeMirror.Pass"}},Jg={scroll:!1},Kg={origin:"*mouse"},Lg={origin:"+move"};De.prototype.set=function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)};var Mg=a.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var f=d||0,g=e||0;;){var h=a.indexOf("	",f);if(0>h||h>=b)return g+(b-f);g+=h-f,g+=c-g%c,f=h+1}},Ng=a.findColumn=function(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("	",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);if(e+=f-d,e+=c-e%c,d=f+1,e>=b)return d}},Og=[""],Pg=function(a){a.select()};Bf?Pg=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:sf&&(Pg=function(a){try{a.select()}catch(b){}});var Qg,Rg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Sg=a.isWordChar=function(a){return/\w/.test(a)||a>"Â€"&&(a.toUpperCase()!=a.toLowerCase()||Rg.test(a))},Tg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
Qg=document.createRange?function(a,b,c,d){var e=document.createRange();return e.setEnd(d||a,c),e.setStart(a,b),e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(e){return d}return d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d};var Ug=a.contains=function(a,b){if(3==b.nodeType&&(b=b.parentNode),a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)};sf&&11>tf&&(Se=function(){try{return document.activeElement}catch(a){return document.body}});var Vg,Wg,Xg=a.rmClass=function(a,b){var c=a.className,d=Te(b).exec(c);if(d){var e=c.slice(d.index+d[0].length);a.className=c.slice(0,d.index)+(e?d[1]+e:"")}},Yg=a.addClass=function(a,b){var c=a.className;Te(b).test(c)||(a.className+=(c?" ":"")+b)},Zg=!1,$g=function(){if(sf&&9>tf)return!1;var a=Pe("div");return"draggable"in a||"dragDrop"in a}(),_g=a.splitLines=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;d>=b;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},ah=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},bh=function(){var a=Pe("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),ch=null,dh=a.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};!function(){for(var a=0;10>a;a++)dh[a+48]=dh[a+96]=String(a);for(var a=65;90>=a;a++)dh[a]=String.fromCharCode(a);for(var a=1;12>=a;a++)dh[a+111]=dh[a+63235]="F"+a}();var eh,fh=function(){function a(a){return 247>=a?c.charAt(a):a>=1424&&1524>=a?"R":a>=1536&&1773>=a?d.charAt(a-1536):a>=1774&&2220>=a?"r":a>=8192&&8203>=a?"w":8204==a?"b":"L"}function b(a,b,c){this.level=a,this.from=b,this.to=c}var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,f=/[stwN]/,g=/[LRr]/,h=/[Lb1n]/,i=/[1n]/,j="L";return function(c){if(!e.test(c))return!1;for(var d,k=c.length,l=[],m=0;k>m;++m)l.push(d=a(c.charCodeAt(m)));for(var m=0,n=j;k>m;++m){var d=l[m];"m"==d?l[m]=n:n=d}for(var m=0,o=j;k>m;++m){var d=l[m];"1"==d&&"r"==o?l[m]="n":g.test(d)&&(o=d,"r"==d&&(l[m]="R"))}for(var m=1,n=l[0];k-1>m;++m){var d=l[m];"+"==d&&"1"==n&&"1"==l[m+1]?l[m]="1":","!=d||n!=l[m+1]||"1"!=n&&"n"!=n||(l[m]=n),n=d}for(var m=0;k>m;++m){var d=l[m];if(","==d)l[m]="N";else if("%"==d){for(var p=m+1;k>p&&"%"==l[p];++p);for(var q=m&&"!"==l[m-1]||k>p&&"1"==l[p]?"1":"N",r=m;p>r;++r)l[r]=q;m=p-1}}for(var m=0,o=j;k>m;++m){var d=l[m];"L"==o&&"1"==d?l[m]="L":g.test(d)&&(o=d)}for(var m=0;k>m;++m)if(f.test(l[m])){for(var p=m+1;k>p&&f.test(l[p]);++p);for(var s="L"==(m?l[m-1]:j),t="L"==(k>p?l[p]:j),q=s||t?"L":"R",r=m;p>r;++r)l[r]=q;m=p-1}for(var u,v=[],m=0;k>m;)if(h.test(l[m])){var w=m;for(++m;k>m&&h.test(l[m]);++m);v.push(new b(0,w,m))}else{var x=m,y=v.length;for(++m;k>m&&"L"!=l[m];++m);for(var r=x;m>r;)if(i.test(l[r])){r>x&&v.splice(y,0,new b(1,x,r));var z=r;for(++r;m>r&&i.test(l[r]);++r);v.splice(y,0,new b(2,z,r)),x=r}else++r;m>x&&v.splice(y,0,new b(1,x,m))}return 1==v[0].level&&(u=c.match(/^\s+/))&&(v[0].from=u[0].length,v.unshift(new b(0,0,u[0].length))),1==Fe(v).level&&(u=c.match(/\s+$/))&&(Fe(v).to-=u[0].length,v.push(new b(0,k-u[0].length,k))),2==v[0].level&&v.unshift(new b(1,v[0].to,v[0].to)),v[0].level!=Fe(v).level&&v.push(new b(v[0].level,k,k)),v}}();return a.version="5.13.3",a}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(a,b,c,d,e){this.indented=a,this.column=b,this.type=c,this.align=d,this.prev=e}function c(a){return"statement"==a||"switchstatement"==a||"namespace"==a}function d(a,d,e){var f=a.indented;return a.context&&c(a.context.type)&&!c(e)&&(f=a.context.indented),a.context=new b(f,d,e,null,a.context)}function e(a){var b=a.context.type;return(")"==b||"]"==b||"}"==b)&&(a.indented=a.context.indented),a.context=a.context.prev}function f(a,b){return"variable"==b.prevToken||"variable-3"==b.prevToken?!0:/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(a.string.slice(0,a.start))?!0:void 0}function g(a){for(;;){if(!a||"top"==a.type)return!0;if("}"==a.type&&"namespace"!=a.prev.type)return!1;a=a.prev}}function h(a){for(var b={},c=a.split(" "),d=0;d<c.length;++d)b[c[d]]=!0;return b}function i(a,b){return"function"==typeof a?a(b):a.propertyIsEnumerable(b)}function j(a,b){if(!b.startOfLine)return!1;for(var c,d=null;c=a.peek();){if("\\"==c&&a.match(/^.$/)){d=j;break}if("/"==c&&a.match(/^\/[\/\*]/,!1))break;a.next()}return b.tokenize=d,"meta"}function k(a,b){return"variable-3"==b.prevToken?"variable-3":!1}function l(a){return a.eatWhile(/[\w\.']/),"number"}function m(a,b){if(a.backUp(1),a.match(/(R|u8R|uR|UR|LR)/)){var c=a.match(/"([^\s\\()]{0,16})\(/);return c?(b.cpp11RawStringDelim=c[1],b.tokenize=p,p(a,b)):!1}return a.match(/(u8|u|U|L)/)?a.match(/["']/,!1)?"string":!1:(a.next(),!1)}function n(a){var b=/(\w+)::(\w+)$/.exec(a);return b&&b[1]==b[2]}function o(a,b){for(var c;null!=(c=a.next());)if('"'==c&&!a.eat('"')){b.tokenize=null;break}return"string"}function p(a,b){var c=b.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),d=a.match(new RegExp(".*?\\)"+c+'"'));return d?b.tokenize=null:a.skipToEnd(),"string"}function q(b,c){function d(a){if(a)for(var b in a)a.hasOwnProperty(b)&&e.push(b)}"string"==typeof b&&(b=[b]);var e=[];d(c.keywords),d(c.types),d(c.builtin),d(c.atoms),e.length&&(c.helperType=b[0],a.registerHelper("hintWords",b[0],e));for(var f=0;f<b.length;++f)a.defineMIME(b[f],c)}function r(a,b){for(var c=!1;!a.eol();){if(!c&&a.match('"""')){b.tokenize=null;break}c="\\"==a.next()&&!c}return"string"}function s(a){return function(b,c){for(var d,e=!1,f=!1;!b.eol();){if(!a&&!e&&b.match('"')){f=!0;break}if(a&&b.match('"""')){f=!0;break}d=b.next(),!e&&"$"==d&&b.match("{")&&b.skipTo("}"),e=!e&&"\\"==d&&!a}return(f||!a)&&(c.tokenize=null),"string"}}function t(a){return function(b,c){for(var d,e=!1,f=!1;!b.eol();){if(!e&&b.match('"')&&("single"==a||b.match('""'))){f=!0;break}if(!e&&b.match("``")){w=t(a),f=!0;break}d=b.next(),e="single"==a&&!e&&"\\"==d}return f&&(c.tokenize=null),"string"}}a.defineMode("clike",function(h,j){function k(a,b){var c=a.next();if(y[c]){var d=y[c](a,b);if(d!==!1)return d}if('"'==c||"'"==c)return b.tokenize=l(c),b.tokenize(a,b);if(D.test(c))return n=c,null;if(E.test(c)){if(a.backUp(1),a.match(F))return"number";a.next()}if("/"==c){if(a.eat("*"))return b.tokenize=m,m(a,b);if(a.eat("/"))return a.skipToEnd(),"comment"}if(G.test(c)){for(;!a.match(/^\/[\/*]/,!1)&&a.eat(G););return"operator"}if(a.eatWhile(/[\w\$_\xa1-\uffff]/),C)for(;a.match(C);)a.eatWhile(/[\w\$_\xa1-\uffff]/);var e=a.current();return i(s,e)?(i(v,e)&&(n="newstatement"),i(w,e)&&(o=!0),"keyword"):i(t,e)?"variable-3":i(u,e)?(i(v,e)&&(n="newstatement"),"builtin"):i(x,e)?"atom":"variable"}function l(a){return function(b,c){for(var d,e=!1,f=!1;null!=(d=b.next());){if(d==a&&!e){f=!0;break}e=!e&&"\\"==d}return(f||!e&&!z)&&(c.tokenize=null),"string"}}function m(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=null;break}d="*"==c}return"comment"}var n,o,p=h.indentUnit,q=j.statementIndentUnit||p,r=j.dontAlignCalls,s=j.keywords||{},t=j.types||{},u=j.builtin||{},v=j.blockKeywords||{},w=j.defKeywords||{},x=j.atoms||{},y=j.hooks||{},z=j.multiLineStrings,A=j.indentStatements!==!1,B=j.indentSwitch!==!1,C=j.namespaceSeparator,D=j.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,E=j.numberStart||/[\d\.]/,F=j.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,G=j.isOperatorChar||/[+\-*&%=<>!?|\/]/,H=j.endStatement||/^[;:,]$/;return{startState:function(a){return{tokenize:null,context:new b((a||0)-p,0,"top",!1),indented:0,startOfLine:!0,prevToken:null}},token:function(a,b){var h=b.context;if(a.sol()&&(null==h.align&&(h.align=!1),b.indented=a.indentation(),b.startOfLine=!0),a.eatSpace())return null;n=o=null;var i=(b.tokenize||k)(a,b);if("comment"==i||"meta"==i)return i;if(null==h.align&&(h.align=!0),H.test(n))for(;c(b.context.type);)e(b);else if("{"==n)d(b,a.column(),"}");else if("["==n)d(b,a.column(),"]");else if("("==n)d(b,a.column(),")");else if("}"==n){for(;c(h.type);)h=e(b);for("}"==h.type&&(h=e(b));c(h.type);)h=e(b)}else if(n==h.type)e(b);else if(A&&(("}"==h.type||"top"==h.type)&&";"!=n||c(h.type)&&"newstatement"==n)){var l="statement";"newstatement"==n&&B&&"switch"==a.current()?l="switchstatement":"keyword"==i&&"namespace"==a.current()&&(l="namespace"),d(b,a.column(),l)}if("variable"==i&&("def"==b.prevToken||j.typeFirstDefinitions&&f(a,b)&&g(b.context)&&a.match(/^\s*\(/,!1))&&(i="def"),y.token){var m=y.token(a,b,i);void 0!==m&&(i=m)}return"def"==i&&j.styleDefs===!1&&(i="variable"),b.startOfLine=!1,b.prevToken=o?"def":i||n,i},indent:function(b,d){if(b.tokenize!=k&&null!=b.tokenize)return a.Pass;var e=b.context,f=d&&d.charAt(0);if(c(e.type)&&"}"==f&&(e=e.prev),y.indent){var g=y.indent(b,e,d);if("number"==typeof g)return g}var h=f==e.type,i=e.prev&&"switchstatement"==e.prev.type;if(j.allmanIndentation&&/[{(]/.test(f)){for(;"top"!=e.type&&"}"!=e.type;)e=e.prev;return e.indented}return c(e.type)?e.indented+("{"==f?0:q):!e.align||r&&")"==e.type?")"!=e.type||h?e.indented+(h?0:p)+(h||!i||/^(?:case|default)\b/.test(d)?0:p):e.indented+q:e.column+(h?0:1)},electricInput:B?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});var u="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile",v="int long char short double float unsigned signed void size_t ptrdiff_t";q(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:h(u),types:h(v+" bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:h("case do else for if switch while struct"),defKeywords:h("struct"),typeFirstDefinitions:!0,atoms:h("null true false"),hooks:{"#":j,"*":k},modeProps:{fold:["brace","include"]}}),q(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:h(u+" asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),types:h(v+" bool wchar_t"),blockKeywords:h("catch class do else finally for if struct switch try while"),defKeywords:h("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:h("true false null"),hooks:{"#":j,"*":k,u:m,U:m,L:m,R:m,0:l,1:l,2:l,3:l,4:l,5:l,6:l,7:l,8:l,9:l,token:function(a,b,c){return"variable"!=c||"("!=a.peek()||";"!=b.prevToken&&null!=b.prevToken&&"}"!=b.prevToken||!n(a.current())?void 0:"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),q("text/x-java",{name:"clike",keywords:h("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while"),types:h("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:h("catch class do else finally for if switch try while"),defKeywords:h("class interface package enum"),typeFirstDefinitions:!0,atoms:h("true false null"),endStatement:/^[;:]$/,hooks:{"@":function(a){return a.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),q("text/x-csharp",{name:"clike",keywords:h("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:h("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:h("catch class do else finally for foreach if struct switch try while"),defKeywords:h("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:h("true false null"),hooks:{"@":function(a,b){return a.eat('"')?(b.tokenize=o,o(a,b)):(a.eatWhile(/[\w\$_]/),"meta")}}}),q("text/x-scala",{name:"clike",keywords:h("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble :: #:: "),types:h("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:h("catch class do else finally for forSome if match switch try while"),defKeywords:h("class def object package trait type val var"),atoms:h("true false null"),indentStatements:!1,indentSwitch:!1,hooks:{"@":function(a){return a.eatWhile(/[\w\$_]/),"meta"},'"':function(a,b){return a.match('""')?(b.tokenize=r,b.tokenize(a,b)):!1},"'":function(a){return a.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(a,c){var d=c.context;return"}"==d.type&&d.align&&a.eat(">")?(c.context=new b(d.indented,d.column,d.type,null,d.prev),"operator"):!1}},modeProps:{closeBrackets:{triples:'"'}}}),q("text/x-kotlin",{name:"clike",keywords:h("package as typealias class interface this super val var fun for is in This throw return break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix"),types:h("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,blockKeywords:h("catch class do else finally for if where try while enum"),defKeywords:h("class val var object package interface fun"),atoms:h("true false null this"),hooks:{'"':function(a,b){return b.tokenize=s(a.match('""')),b.tokenize(a,b)}},modeProps:{closeBrackets:{triples:'"'}}}),q(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:h("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:h("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:h("for while do if else struct"),builtin:h("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:h("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":j},modeProps:{fold:["brace","include"]}}),q("text/x-nesc",{name:"clike",keywords:h(u+"as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:h(v),blockKeywords:h("case do else for if switch while struct"),atoms:h("null true false"),hooks:{"#":j},modeProps:{fold:["brace","include"]}}),q("text/x-objectivec",{name:"clike",keywords:h(u+"inline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),types:h(v),atoms:h("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(a){return a.eatWhile(/[\w\$]/),"keyword"},"#":j,indent:function(a,b,c){return"statement"==b.type&&/^@\w/.test(c)?b.indented:void 0}},modeProps:{fold:"brace"}}),q("text/x-squirrel",{name:"clike",keywords:h("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:h(v),blockKeywords:h("case catch class else for foreach if switch try while"),defKeywords:h("function local class"),typeFirstDefinitions:!0,atoms:h("true false null"),hooks:{"#":j},modeProps:{fold:["brace","include"]}});var w=null;q("text/x-ceylon",{name:"clike",keywords:h("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(a){var b=a.charAt(0);return b===b.toUpperCase()&&b!==b.toLowerCase()},blockKeywords:h("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:h("class dynamic function interface module object package value"),builtin:h("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:h("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(a){return a.eatWhile(/[\w\$_]/),"meta"},'"':function(a,b){return b.tokenize=t(a.match('""')?"triple":"single"),b.tokenize(a,b)},"`":function(a,b){return w&&a.match("`")?(b.tokenize=w,w=null,b.tokenize(a,b)):!1},"'":function(a){return a.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(a,b,c){return"variable"!=c&&"variable-3"!=c||"."!=b.prevToken?void 0:"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("coffeescript",function(a,b){function c(a){return new RegExp("^(("+a.join(")|(")+"))\\b")}function d(a,b){if(a.sol()){null===b.scope.align&&(b.scope.align=!1);var c=b.scope.offset;if(a.eatSpace()){var d=a.indentation();return d>c&&"coffee"==b.scope.type?"indent":c>d?"dedent":null}c>0&&h(a,b)}if(a.eatSpace())return null;var g=a.peek();if(a.match("####"))return a.skipToEnd(),"comment";if(a.match("###"))return b.tokenize=f,b.tokenize(a,b);if("#"===g)return a.skipToEnd(),"comment";if(a.match(/^-?[0-9\.]/,!1)){var i=!1;if(a.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)&&(i=!0),a.match(/^-?\d+\.\d*/)&&(i=!0),a.match(/^-?\.\d+/)&&(i=!0),i)return"."==a.peek()&&a.backUp(1),"number";var p=!1;if(a.match(/^-?0x[0-9a-f]+/i)&&(p=!0),a.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)&&(p=!0),a.match(/^-?0(?![\dx])/i)&&(p=!0),p)return"number"}if(a.match(s))return b.tokenize=e(a.current(),!1,"string"),b.tokenize(a,b);if(a.match(t)){if("/"!=a.current()||a.match(/^.*\//,!1))return b.tokenize=e(a.current(),!0,"string-2"),b.tokenize(a,b);a.backUp(1)}return a.match(k)||a.match(o)?"operator":a.match(l)?"punctuation":a.match(v)?"atom":a.match(n)||b.prop&&a.match(m)?"property":a.match(r)?"keyword":a.match(m)?"variable":(a.next(),j)}function e(a,c,e){return function(f,g){for(;!f.eol();)if(f.eatWhile(/[^'"\/\\]/),f.eat("\\")){if(f.next(),c&&f.eol())return e}else{if(f.match(a))return g.tokenize=d,e;f.eat(/['"\/]/)}return c&&(b.singleLineStringErrors?e=j:g.tokenize=d),e}}function f(a,b){for(;!a.eol();){if(a.eatWhile(/[^#]/),a.match("###")){b.tokenize=d;break}a.eatWhile("#")}return"comment"}function g(b,c,d){d=d||"coffee";for(var e=0,f=!1,g=null,h=c.scope;h;h=h.prev)if("coffee"===h.type||"}"==h.type){e=h.offset+a.indentUnit;break}"coffee"!==d?(f=null,g=b.column()+b.current().length):c.scope.align&&(c.scope.align=!1),c.scope={offset:e,type:d,prev:c.scope,align:f,alignOffset:g}}function h(a,b){if(b.scope.prev){if("coffee"===b.scope.type){for(var c=a.indentation(),d=!1,e=b.scope;e;e=e.prev)if(c===e.offset){d=!0;break}if(!d)return!0;for(;b.scope.prev&&b.scope.offset!==c;)b.scope=b.scope.prev;return!1}return b.scope=b.scope.prev,!1}}function i(a,b){var c=b.tokenize(a,b),d=a.current();"return"===d&&(b.dedent=!0),(("->"===d||"=>"===d)&&a.eol()||"indent"===c)&&g(a,b);var e="[({".indexOf(d);if(-1!==e&&g(a,b,"])}".slice(e,e+1)),p.exec(d)&&g(a,b),"then"==d&&h(a,b),"dedent"===c&&h(a,b))return j;if(e="])}".indexOf(d),-1!==e){for(;"coffee"==b.scope.type&&b.scope.prev;)b.scope=b.scope.prev;b.scope.type==d&&(b.scope=b.scope.prev)}return b.dedent&&a.eol()&&("coffee"==b.scope.type&&b.scope.prev&&(b.scope=b.scope.prev),b.dedent=!1),c}var j="error",k=/^(?:->|=>|\+[+=]?|-[\-=]?|\*[\*=]?|\/[\/=]?|[=!]=|<[><]?=?|>>?=?|%=?|&=?|\|=?|\^=?|\~|!|\?|(or|and|\|\||&&|\?)=)/,l=/^(?:[()\[\]{},:`=;]|\.\.?\.?)/,m=/^[_A-Za-z$][_A-Za-z$0-9]*/,n=/^@[_A-Za-z$][_A-Za-z$0-9]*/,o=c(["and","or","not","is","isnt","in","instanceof","typeof"]),p=["for","while","loop","if","unless","else","switch","try","catch","finally","class"],q=["break","by","continue","debugger","delete","do","in","of","new","return","then","this","@","throw","when","until","extends"],r=c(p.concat(q));p=c(p);var s=/^('{3}|\"{3}|['\"])/,t=/^(\/{3}|\/)/,u=["Infinity","NaN","undefined","null","true","false","on","off","yes","no"],v=c(u),w={startState:function(a){return{tokenize:d,scope:{offset:a||0,type:"coffee",prev:null,align:!1},prop:!1,dedent:0}},token:function(a,b){var c=null===b.scope.align&&b.scope;c&&a.sol()&&(c.align=!1);var d=i(a,b);return d&&"comment"!=d&&(c&&(c.align=!0),b.prop="punctuation"==d&&"."==a.current()),d},indent:function(a,b){if(a.tokenize!=d)return 0;var c=a.scope,e=b&&"])}".indexOf(b.charAt(0))>-1;if(e)for(;"coffee"==c.type&&c.prev;)c=c.prev;var f=e&&c.type===b.charAt(0);return c.align?c.alignOffset-(f?1:0):(f?c.prev:c).offset},lineComment:"#",fold:"indent"};return w}),a.defineMIME("text/x-coffeescript","coffeescript"),a.defineMIME("text/coffeescript","coffeescript")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(a){for(var b={},c=0;c<a.length;++c)b[a[c]]=!0;return b}function c(a,b){for(var c,d=!1;null!=(c=a.next());){if(d&&"/"==c){b.tokenize=null;break}d="*"==c}return["comment","comment"]}a.defineMode("css",function(b,c){function d(a,b){return o=b,a}function e(a,b){var c=a.next();if(r[c]){var e=r[c](a,b);if(e!==!1)return e}return"@"==c?(a.eatWhile(/[\w\\\-]/),d("def",a.current())):"="==c||("~"==c||"|"==c)&&a.eat("=")?d(null,"compare"):'"'==c||"'"==c?(b.tokenize=f(c),b.tokenize(a,b)):"#"==c?(a.eatWhile(/[\w\\\-]/),d("atom","hash")):"!"==c?(a.match(/^\s*\w*/),d("keyword","important")):/\d/.test(c)||"."==c&&a.eat(/\d/)?(a.eatWhile(/[\w.%]/),d("number","unit")):"-"!==c?/[,+>*\/]/.test(c)?d(null,"select-op"):"."==c&&a.match(/^-?[_a-z][_a-z0-9-]*/i)?d("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(c)?d(null,c):"u"==c&&a.match(/rl(-prefix)?\(/)||"d"==c&&a.match("omain(")||"r"==c&&a.match("egexp(")?(a.backUp(1),b.tokenize=g,d("property","word")):/[\w\\\-]/.test(c)?(a.eatWhile(/[\w\\\-]/),d("property","word")):d(null,null):/[\d.]/.test(a.peek())?(a.eatWhile(/[\w.%]/),d("number","unit")):a.match(/^-[\w\\\-]+/)?(a.eatWhile(/[\w\\\-]/),a.match(/^\s*:/,!1)?d("variable-2","variable-definition"):d("variable-2","variable")):a.match(/^\w+-/)?d("meta","meta"):void 0}function f(a){return function(b,c){for(var e,f=!1;null!=(e=b.next());){if(e==a&&!f){")"==a&&b.backUp(1);break}f=!f&&"\\"==e}return(e==a||!f&&")"!=a)&&(c.tokenize=null),d("string","string")}}function g(a,b){return a.next(),a.match(/\s*[\"\')]/,!1)?b.tokenize=null:b.tokenize=f(")"),d(null,"(")}function h(a,b,c){this.type=a,this.indent=b,this.prev=c}function i(a,b,c,d){return a.context=new h(c,b.indentation()+(d===!1?0:q),a.context),c}function j(a){return a.context.prev&&(a.context=a.context.prev),a.context.type}function k(a,b,c){return E[c.context.type](a,b,c)}function l(a,b,c,d){for(var e=d||1;e>0;e--)c.context=c.context.prev;return k(a,b,c)}function m(a){var b=a.current().toLowerCase();p=B.hasOwnProperty(b)?"atom":A.hasOwnProperty(b)?"keyword":"variable"}var n=c.inline;c.propertyKeywords||(c=a.resolveMode("text/css"));var o,p,q=b.indentUnit,r=c.tokenHooks,s=c.documentTypes||{},t=c.mediaTypes||{},u=c.mediaFeatures||{},v=c.mediaValueKeywords||{},w=c.propertyKeywords||{},x=c.nonStandardPropertyKeywords||{},y=c.fontProperties||{},z=c.counterDescriptors||{},A=c.colorKeywords||{},B=c.valueKeywords||{},C=c.allowNested,D=c.supportsAtComponent===!0,E={};return E.top=function(a,b,c){if("{"==a)return i(c,b,"block");if("}"==a&&c.context.prev)return j(c);if(D&&/@component/.test(a))return i(c,b,"atComponentBlock");if(/^@(-moz-)?document$/.test(a))return i(c,b,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/.test(a))return i(c,b,"atBlock");if(/^@(font-face|counter-style)/.test(a))return c.stateArg=a,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(a))return"keyframes";if(a&&"@"==a.charAt(0))return i(c,b,"at");if("hash"==a)p="builtin";else if("word"==a)p="tag";else{if("variable-definition"==a)return"maybeprop";if("interpolation"==a)return i(c,b,"interpolation");if(":"==a)return"pseudo";if(C&&"("==a)return i(c,b,"parens")}return c.context.type},E.block=function(a,b,c){if("word"==a){var d=b.current().toLowerCase();return w.hasOwnProperty(d)?(p="property","maybeprop"):x.hasOwnProperty(d)?(p="string-2","maybeprop"):C?(p=b.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(p+=" error","maybeprop")}return"meta"==a?"block":C||"hash"!=a&&"qualifier"!=a?E.top(a,b,c):(p="error","block")},E.maybeprop=function(a,b,c){return":"==a?i(c,b,"prop"):k(a,b,c)},E.prop=function(a,b,c){if(";"==a)return j(c);if("{"==a&&C)return i(c,b,"propBlock");if("}"==a||"{"==a)return l(a,b,c);if("("==a)return i(c,b,"parens");if("hash"!=a||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(b.current())){if("word"==a)m(b);else if("interpolation"==a)return i(c,b,"interpolation")}else p+=" error";return"prop"},E.propBlock=function(a,b,c){return"}"==a?j(c):"word"==a?(p="property","maybeprop"):c.context.type},E.parens=function(a,b,c){return"{"==a||"}"==a?l(a,b,c):")"==a?j(c):"("==a?i(c,b,"parens"):"interpolation"==a?i(c,b,"interpolation"):("word"==a&&m(b),"parens")},E.pseudo=function(a,b,c){return"word"==a?(p="variable-3",c.context.type):k(a,b,c)},E.documentTypes=function(a,b,c){return"word"==a&&s.hasOwnProperty(b.current())?(p="tag",c.context.type):E.atBlock(a,b,c)},E.atBlock=function(a,b,c){if("("==a)return i(c,b,"atBlock_parens");if("}"==a||";"==a)return l(a,b,c);if("{"==a)return j(c)&&i(c,b,C?"block":"top");if("interpolation"==a)return i(c,b,"interpolation");if("word"==a){var d=b.current().toLowerCase();p="only"==d||"not"==d||"and"==d||"or"==d?"keyword":t.hasOwnProperty(d)?"attribute":u.hasOwnProperty(d)?"property":v.hasOwnProperty(d)?"keyword":w.hasOwnProperty(d)?"property":x.hasOwnProperty(d)?"string-2":B.hasOwnProperty(d)?"atom":A.hasOwnProperty(d)?"keyword":"error"}return c.context.type},E.atComponentBlock=function(a,b,c){return"}"==a?l(a,b,c):"{"==a?j(c)&&i(c,b,C?"block":"top",!1):("word"==a&&(p="error"),c.context.type)},E.atBlock_parens=function(a,b,c){return")"==a?j(c):"{"==a||"}"==a?l(a,b,c,2):E.atBlock(a,b,c)},E.restricted_atBlock_before=function(a,b,c){return"{"==a?i(c,b,"restricted_atBlock"):"word"==a&&"@counter-style"==c.stateArg?(p="variable",
"restricted_atBlock_before"):k(a,b,c)},E.restricted_atBlock=function(a,b,c){return"}"==a?(c.stateArg=null,j(c)):"word"==a?(p="@font-face"==c.stateArg&&!y.hasOwnProperty(b.current().toLowerCase())||"@counter-style"==c.stateArg&&!z.hasOwnProperty(b.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},E.keyframes=function(a,b,c){return"word"==a?(p="variable","keyframes"):"{"==a?i(c,b,"top"):k(a,b,c)},E.at=function(a,b,c){return";"==a?j(c):"{"==a||"}"==a?l(a,b,c):("word"==a?p="tag":"hash"==a&&(p="builtin"),"at")},E.interpolation=function(a,b,c){return"}"==a?j(c):"{"==a||";"==a?l(a,b,c):("word"==a?p="variable":"variable"!=a&&"("!=a&&")"!=a&&(p="error"),"interpolation")},{startState:function(a){return{tokenize:null,state:n?"block":"top",stateArg:null,context:new h(n?"block":"top",a||0,null)}},token:function(a,b){if(!b.tokenize&&a.eatSpace())return null;var c=(b.tokenize||e)(a,b);return c&&"object"==typeof c&&(o=c[1],c=c[0]),p=c,b.state=E[b.state](o,a,b),p},indent:function(a,b){var c=a.context,d=b&&b.charAt(0),e=c.indent;return"prop"!=c.type||"}"!=d&&")"!=d||(c=c.prev),c.prev&&("}"!=d||"block"!=c.type&&"top"!=c.type&&"interpolation"!=c.type&&"restricted_atBlock"!=c.type?(")"==d&&("parens"==c.type||"atBlock_parens"==c.type)||"{"==d&&("at"==c.type||"atBlock"==c.type))&&(e=Math.max(0,c.indent-q),c=c.prev):(c=c.prev,e=c.indent)),e},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var d=["domain","regexp","url","url-prefix"],e=b(d),f=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],g=b(f),h=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],i=b(h),j=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],k=b(j),l=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],m=b(l),n=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],o=b(n),p=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],q=b(p),r=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],s=b(r),t=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],u=b(t),v=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],w=b(v),x=d.concat(f).concat(h).concat(j).concat(l).concat(n).concat(t).concat(v);a.registerHelper("hintWords","css",x),a.defineMIME("text/css",{documentTypes:e,mediaTypes:g,mediaFeatures:i,mediaValueKeywords:k,propertyKeywords:m,nonStandardPropertyKeywords:o,fontProperties:q,counterDescriptors:s,colorKeywords:u,valueKeywords:w,tokenHooks:{"/":function(a,b){return a.eat("*")?(b.tokenize=c,c(a,b)):!1}},name:"css"}),a.defineMIME("text/x-scss",{mediaTypes:g,mediaFeatures:i,mediaValueKeywords:k,propertyKeywords:m,nonStandardPropertyKeywords:o,colorKeywords:u,valueKeywords:w,fontProperties:q,allowNested:!0,tokenHooks:{"/":function(a,b){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(b.tokenize=c,c(a,b)):["operator","operator"]},":":function(a){return a.match(/\s*\{/)?[null,"{"]:!1},$:function(a){return a.match(/^[\w-]+/),a.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(a){return a.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),a.defineMIME("text/x-less",{mediaTypes:g,mediaFeatures:i,mediaValueKeywords:k,propertyKeywords:m,nonStandardPropertyKeywords:o,colorKeywords:u,valueKeywords:w,fontProperties:q,allowNested:!0,tokenHooks:{"/":function(a,b){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(b.tokenize=c,c(a,b)):["operator","operator"]},"@":function(a){return a.eat("{")?[null,"interpolation"]:a.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)?!1:(a.eatWhile(/[\w\\\-]/),a.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),a.defineMIME("text/x-gss",{documentTypes:e,mediaTypes:g,mediaFeatures:i,propertyKeywords:m,nonStandardPropertyKeywords:o,fontProperties:q,counterDescriptors:s,colorKeywords:u,valueKeywords:w,supportsAtComponent:!0,tokenHooks:{"/":function(a,b){return a.eat("*")?(b.tokenize=c,c(a,b)):!1}},name:"css",helperType:"gss"})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../ruby/ruby")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../ruby/ruby"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("haml",function(b){function c(a){return function(b,c){var f=b.peek();return f==a&&1==c.rubyState.tokenize.length?(b.next(),c.tokenize=e,"closeAttributeTag"):d(b,c)}}function d(a,b){return a.match("-#")?(a.skipToEnd(),"comment"):g.token(a,b.rubyState)}function e(a,b){var e=a.peek();if("comment"==b.previousToken.style&&b.indented>b.previousToken.indented)return a.skipToEnd(),"commentLine";if(b.startOfLine){if("!"==e&&a.match("!!"))return a.skipToEnd(),"tag";if(a.match(/^%[\w:#\.]+=/))return b.tokenize=d,"hamlTag";if(a.match(/^%[\w:]+/))return"hamlTag";if("/"==e)return a.skipToEnd(),"comment"}if((b.startOfLine||"hamlTag"==b.previousToken.style)&&("#"==e||"."==e))return a.match(/[\w-#\.]*/),"hamlAttribute";if(b.startOfLine&&!a.match("-->",!1)&&("="==e||"-"==e))return b.tokenize=d,b.tokenize(a,b);if("hamlTag"==b.previousToken.style||"closeAttributeTag"==b.previousToken.style||"hamlAttribute"==b.previousToken.style){if("("==e)return b.tokenize=c(")"),b.tokenize(a,b);if("{"==e&&!a.match(/^\{%.*/))return b.tokenize=c("}"),b.tokenize(a,b)}return f.token(a,b.htmlState)}var f=a.getMode(b,{name:"htmlmixed"}),g=a.getMode(b,"ruby");return{startState:function(){var a=f.startState(),b=g.startState();return{htmlState:a,rubyState:b,indented:0,previousToken:{style:null,indented:0},tokenize:e}},copyState:function(b){return{htmlState:a.copyState(f,b.htmlState),rubyState:a.copyState(g,b.rubyState),indented:b.indented,previousToken:b.previousToken,tokenize:b.tokenize}},token:function(a,b){if(a.sol()&&(b.indented=a.indentation(),b.startOfLine=!0),a.eatSpace())return null;var c=b.tokenize(a,b);if(b.startOfLine=!1,c&&"commentLine"!=c&&(b.previousToken={style:c,indented:b.indented}),a.eol()&&b.tokenize==d){a.backUp(1);var f=a.peek();a.next(),f&&","!=f&&(b.tokenize=e)}return"hamlTag"==c?c="tag":"commentLine"==c?c="comment":"hamlAttribute"==c?c="attribute":"closeAttributeTag"==c&&(c=null),c}}},"htmlmixed","ruby"),a.defineMIME("text/x-haml","haml")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../../addon/mode/multiplex")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../../addon/mode/multiplex"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("htmlembedded",function(b,c){return a.multiplexingMode(a.getMode(b,"htmlmixed"),{open:c.open||c.scriptStartRegex||"<%",close:c.close||c.scriptEndRegex||"%>",mode:a.getMode(b,c.scriptingModeSpec)})},"htmlmixed"),a.defineMIME("application/x-ejs",{name:"htmlembedded",scriptingModeSpec:"javascript"}),a.defineMIME("application/x-aspx",{name:"htmlembedded",scriptingModeSpec:"text/x-csharp"}),a.defineMIME("application/x-jsp",{name:"htmlembedded",scriptingModeSpec:"text/x-java"}),a.defineMIME("application/x-erb",{name:"htmlembedded",scriptingModeSpec:"ruby"})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],a):a(CodeMirror)}(function(a){"use strict";function b(a,b,c){var d=a.current(),e=d.search(b);return e>-1?a.backUp(d.length-e):d.match(/<\/?$/)&&(a.backUp(d.length),a.match(b,!1)||a.match(d)),c}function c(a){var b=i[a];return b?b:i[a]=new RegExp("\\s+"+a+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*")}function d(a,b){var d=a.match(c(b));return d?d[2]:""}function e(a,b){return new RegExp((b?"^":"")+"</s*"+a+"s*>","i")}function f(a,b){for(var c in a)for(var d=b[c]||(b[c]=[]),e=a[c],f=e.length-1;f>=0;f--)d.unshift(e[f])}function g(a,b){for(var c=0;c<a.length;c++){var e=a[c];if(!e[0]||e[1].test(d(b,e[0])))return e[2]}}var h={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},i={};a.defineMode("htmlmixed",function(c,d){function i(d,f){var h,l=j.token(d,f.htmlState),m=/\btag\b/.test(l);if(m&&!/[<>\s\/]/.test(d.current())&&(h=f.htmlState.tagName&&f.htmlState.tagName.toLowerCase())&&k.hasOwnProperty(h))f.inTag=h+" ";else if(f.inTag&&m&&/>$/.test(d.current())){var n=/^([\S]+) (.*)/.exec(f.inTag);f.inTag=null;var o=">"==d.current()&&g(k[n[1]],n[2]),p=a.getMode(c,o),q=e(n[1],!0),r=e(n[1],!1);f.token=function(a,c){return a.match(q,!1)?(c.token=i,c.localState=c.localMode=null,null):b(a,r,c.localMode.token(a,c.localState))},f.localMode=p,f.localState=a.startState(p,j.indent(f.htmlState,""))}else f.inTag&&(f.inTag+=d.current(),d.eol()&&(f.inTag+=" "));return l}var j=a.getMode(c,{name:"xml",htmlMode:!0,multilineTagIndentFactor:d.multilineTagIndentFactor,multilineTagIndentPastTag:d.multilineTagIndentPastTag}),k={},l=d&&d.tags,m=d&&d.scriptTypes;if(f(h,k),l&&f(l,k),m)for(var n=m.length-1;n>=0;n--)k.script.unshift(["type",m[n].matches,m[n].mode]);return{startState:function(){var a=j.startState();return{token:i,inTag:null,localMode:null,localState:null,htmlState:a}},copyState:function(b){var c;return b.localState&&(c=a.copyState(b.localMode,b.localState)),{token:b.token,inTag:b.inTag,localMode:b.localMode,localState:c,htmlState:a.copyState(j,b.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(b,c){return!b.localMode||/^\s*<\//.test(c)?j.indent(b.htmlState,c):b.localMode.indent?b.localMode.indent(b.localState,c):a.Pass},innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||j}}}},"xml","javascript","css"),a.defineMIME("text/html","htmlmixed")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../javascript/javascript"),require("../css/css"),require("../htmlmixed/htmlmixed")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../javascript/javascript","../css/css","../htmlmixed/htmlmixed"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("jade",function(b){function c(){this.javaScriptLine=!1,this.javaScriptLineExcludesColon=!1,this.javaScriptArguments=!1,this.javaScriptArgumentsDepth=0,this.isInterpolating=!1,this.interpolationNesting=0,this.jsState=Z.startState(),this.restOfLine="",this.isIncludeFiltered=!1,this.isEach=!1,this.lastTag="",this.scriptType="",this.isAttrs=!1,this.attrsNest=[],this.inAttributeName=!0,this.attributeIsType=!1,this.attrValue="",this.indentOf=1/0,this.indentToken="",this.innerMode=null,this.innerState=null,this.innerModeForLine=!1}function d(a,b){if(a.sol()&&(b.javaScriptLine=!1,b.javaScriptLineExcludesColon=!1),b.javaScriptLine){if(b.javaScriptLineExcludesColon&&":"===a.peek())return b.javaScriptLine=!1,void(b.javaScriptLineExcludesColon=!1);var c=Z.token(a,b.jsState);return a.eol()&&(b.javaScriptLine=!1),c||!0}}function e(a,b){if(b.javaScriptArguments){if(0===b.javaScriptArgumentsDepth&&"("!==a.peek())return void(b.javaScriptArguments=!1);if("("===a.peek()?b.javaScriptArgumentsDepth++:")"===a.peek()&&b.javaScriptArgumentsDepth--,0===b.javaScriptArgumentsDepth)return void(b.javaScriptArguments=!1);var c=Z.token(a,b.jsState);return c||!0}}function f(a){return a.match(/^yield\b/)?"keyword":void 0}function g(a){return a.match(/^(?:doctype) *([^\n]+)?/)?V:void 0}function h(a,b){return a.match("#{")?(b.isInterpolating=!0,b.interpolationNesting=0,"punctuation"):void 0}function i(a,b){if(b.isInterpolating){if("}"===a.peek()){if(b.interpolationNesting--,b.interpolationNesting<0)return a.next(),b.isInterpolating=!1,"punctuation"}else"{"===a.peek()&&b.interpolationNesting++;return Z.token(a,b.jsState)||!0}}function j(a,b){return a.match(/^case\b/)?(b.javaScriptLine=!0,U):void 0}function k(a,b){return a.match(/^when\b/)?(b.javaScriptLine=!0,b.javaScriptLineExcludesColon=!0,U):void 0}function l(a){return a.match(/^default\b/)?U:void 0}function m(a,b){return a.match(/^extends?\b/)?(b.restOfLine="string",U):void 0}function n(a,b){return a.match(/^append\b/)?(b.restOfLine="variable",U):void 0}function o(a,b){return a.match(/^prepend\b/)?(b.restOfLine="variable",U):void 0}function p(a,b){return a.match(/^block\b *(?:(prepend|append)\b)?/)?(b.restOfLine="variable",U):void 0}function q(a,b){return a.match(/^include\b/)?(b.restOfLine="string",U):void 0}function r(a,b){return a.match(/^include:([a-zA-Z0-9\-]+)/,!1)&&a.match("include")?(b.isIncludeFiltered=!0,U):void 0}function s(a,b){if(b.isIncludeFiltered){var c=B(a,b);return b.isIncludeFiltered=!1,b.restOfLine="string",c}}function t(a,b){return a.match(/^mixin\b/)?(b.javaScriptLine=!0,U):void 0}function u(a,b){return a.match(/^\+([-\w]+)/)?(a.match(/^\( *[-\w]+ *=/,!1)||(b.javaScriptArguments=!0,b.javaScriptArgumentsDepth=0),"variable"):a.match(/^\+#{/,!1)?(a.next(),b.mixinCallAfter=!0,h(a,b)):void 0}function v(a,b){return b.mixinCallAfter?(b.mixinCallAfter=!1,a.match(/^\( *[-\w]+ *=/,!1)||(b.javaScriptArguments=!0,b.javaScriptArgumentsDepth=0),!0):void 0}function w(a,b){return a.match(/^(if|unless|else if|else)\b/)?(b.javaScriptLine=!0,U):void 0}function x(a,b){return a.match(/^(- *)?(each|for)\b/)?(b.isEach=!0,U):void 0}function y(a,b){if(b.isEach){if(a.match(/^ in\b/))return b.javaScriptLine=!0,b.isEach=!1,U;if(a.sol()||a.eol())b.isEach=!1;else if(a.next()){for(;!a.match(/^ in\b/,!1)&&a.next(););return"variable"}}}function z(a,b){return a.match(/^while\b/)?(b.javaScriptLine=!0,U):void 0}function A(a,b){var c;return(c=a.match(/^(\w(?:[-:\w]*\w)?)\/?/))?(b.lastTag=c[1].toLowerCase(),"script"===b.lastTag&&(b.scriptType="application/javascript"),"tag"):void 0}function B(c,d){if(c.match(/^:([\w\-]+)/)){var e;return b&&b.innerModes&&(e=b.innerModes(c.current().substring(1))),e||(e=c.current().substring(1)),"string"==typeof e&&(e=a.getMode(b,e)),O(c,d,e),"atom"}}function C(a,b){return a.match(/^(!?=|-)/)?(b.javaScriptLine=!0,"punctuation"):void 0}function D(a){return a.match(/^#([\w-]+)/)?W:void 0}function E(a){return a.match(/^\.([\w-]+)/)?X:void 0}function F(a,b){return"("==a.peek()?(a.next(),b.isAttrs=!0,b.attrsNest=[],b.inAttributeName=!0,b.attrValue="",b.attributeIsType=!1,"punctuation"):void 0}function G(a,b){if(b.isAttrs){if(Y[a.peek()]&&b.attrsNest.push(Y[a.peek()]),b.attrsNest[b.attrsNest.length-1]===a.peek())b.attrsNest.pop();else if(a.eat(")"))return b.isAttrs=!1,"punctuation";if(b.inAttributeName&&a.match(/^[^=,\)!]+/))return("="===a.peek()||"!"===a.peek())&&(b.inAttributeName=!1,b.jsState=Z.startState(),"script"===b.lastTag&&"type"===a.current().trim().toLowerCase()?b.attributeIsType=!0:b.attributeIsType=!1),"attribute";var c=Z.token(a,b.jsState);if(b.attributeIsType&&"string"===c&&(b.scriptType=a.current().toString()),0===b.attrsNest.length&&("string"===c||"variable"===c||"keyword"===c))try{return Function("","var x "+b.attrValue.replace(/,\s*$/,"").replace(/^!/,"")),b.inAttributeName=!0,b.attrValue="",a.backUp(a.current().length),G(a,b)}catch(d){}return b.attrValue+=a.current(),c||!0}}function H(a,b){return a.match(/^&attributes\b/)?(b.javaScriptArguments=!0,b.javaScriptArgumentsDepth=0,"keyword"):void 0}function I(a){return a.sol()&&a.eatSpace()?"indent":void 0}function J(a,b){return a.match(/^ *\/\/(-)?([^\n]*)/)?(b.indentOf=a.indentation(),b.indentToken="comment","comment"):void 0}function K(a){return a.match(/^: */)?"colon":void 0}function L(a,b){return a.match(/^(?:\| ?| )([^\n]+)/)?"string":a.match(/^(<[^\n]*)/,!1)?(O(a,b,"htmlmixed"),b.innerModeForLine=!0,P(a,b,!0)):void 0}function M(a,b){if(a.eat(".")){var c=null;return"script"===b.lastTag&&-1!=b.scriptType.toLowerCase().indexOf("javascript")?c=b.scriptType.toLowerCase().replace(/"|'/g,""):"style"===b.lastTag&&(c="css"),O(a,b,c),"dot"}}function N(a){return a.next(),null}function O(c,d,e){e=a.mimeModes[e]||e,e=b.innerModes?b.innerModes(e)||e:e,e=a.mimeModes[e]||e,e=a.getMode(b,e),d.indentOf=c.indentation(),e&&"null"!==e.name?d.innerMode=e:d.indentToken="string"}function P(a,b,c){return a.indentation()>b.indentOf||b.innerModeForLine&&!a.sol()||c?b.innerMode?(b.innerState||(b.innerState=b.innerMode.startState?b.innerMode.startState(a.indentation()):{}),a.hideFirstChars(b.indentOf+2,function(){return b.innerMode.token(a,b.innerState)||!0})):(a.skipToEnd(),b.indentToken):void(a.sol()&&(b.indentOf=1/0,b.indentToken=null,b.innerMode=null,b.innerState=null))}function Q(a,b){if(a.sol()&&(b.restOfLine=""),b.restOfLine){a.skipToEnd();var c=b.restOfLine;return b.restOfLine="",c}}function R(){return new c}function S(a){return a.copy()}function T(a,b){var c=P(a,b)||Q(a,b)||i(a,b)||s(a,b)||y(a,b)||G(a,b)||d(a,b)||e(a,b)||v(a,b)||f(a,b)||g(a,b)||h(a,b)||j(a,b)||k(a,b)||l(a,b)||m(a,b)||n(a,b)||o(a,b)||p(a,b)||q(a,b)||r(a,b)||t(a,b)||u(a,b)||w(a,b)||x(a,b)||z(a,b)||A(a,b)||B(a,b)||C(a,b)||D(a,b)||E(a,b)||F(a,b)||H(a,b)||I(a,b)||L(a,b)||J(a,b)||K(a,b)||M(a,b)||N(a,b);
return c===!0?null:c}var U="keyword",V="meta",W="builtin",X="qualifier",Y={"{":"}","(":")","[":"]"},Z=a.getMode(b,"javascript");return c.prototype.copy=function(){var b=new c;return b.javaScriptLine=this.javaScriptLine,b.javaScriptLineExcludesColon=this.javaScriptLineExcludesColon,b.javaScriptArguments=this.javaScriptArguments,b.javaScriptArgumentsDepth=this.javaScriptArgumentsDepth,b.isInterpolating=this.isInterpolating,b.interpolationNesting=this.interpolationNesting,b.jsState=a.copyState(Z,this.jsState),b.innerMode=this.innerMode,this.innerMode&&this.innerState&&(b.innerState=a.copyState(this.innerMode,this.innerState)),b.restOfLine=this.restOfLine,b.isIncludeFiltered=this.isIncludeFiltered,b.isEach=this.isEach,b.lastTag=this.lastTag,b.scriptType=this.scriptType,b.isAttrs=this.isAttrs,b.attrsNest=this.attrsNest.slice(),b.inAttributeName=this.inAttributeName,b.attributeIsType=this.attributeIsType,b.attrValue=this.attrValue,b.indentOf=this.indentOf,b.indentToken=this.indentToken,b.innerModeForLine=this.innerModeForLine,b},{startState:R,copyState:S,token:T}},"javascript","css","htmlmixed"),a.defineMIME("text/x-jade","jade")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(a,b,c){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(b.lastType)||"quasi"==b.lastType&&/\{\s*$/.test(a.string.slice(0,a.pos-(c||0)))}a.defineMode("javascript",function(c,d){function e(a){for(var b,c=!1,d=!1;null!=(b=a.next());){if(!c){if("/"==b&&!d)return;"["==b?d=!0:d&&"]"==b&&(d=!1)}c=!c&&"\\"==b}}function f(a,b,c){return ua=a,va=c,b}function g(a,c){var d=a.next();if('"'==d||"'"==d)return c.tokenize=h(d),c.tokenize(a,c);if("."==d&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return f("number","number");if("."==d&&a.match(".."))return f("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(d))return f(d);if("="==d&&a.eat(">"))return f("=>","operator");if("0"==d&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),f("number","number");if("0"==d&&a.eat(/o/i))return a.eatWhile(/[0-7]/i),f("number","number");if("0"==d&&a.eat(/b/i))return a.eatWhile(/[01]/i),f("number","number");if(/\d/.test(d))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),f("number","number");if("/"==d)return a.eat("*")?(c.tokenize=i,i(a,c)):a.eat("/")?(a.skipToEnd(),f("comment","comment")):b(a,c,1)?(e(a),a.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),f("regexp","string-2")):(a.eatWhile(Da),f("operator","operator",a.current()));if("`"==d)return c.tokenize=j,j(a,c);if("#"==d)return a.skipToEnd(),f("error","error");if(Da.test(d))return a.eatWhile(Da),f("operator","operator",a.current());if(Ba.test(d)){a.eatWhile(Ba);var g=a.current(),k=Ca.propertyIsEnumerable(g)&&Ca[g];return k&&"."!=c.lastType?f(k.type,k.style,g):f("variable","variable",g)}}function h(a){return function(b,c){var d,e=!1;if(ya&&"@"==b.peek()&&b.match(Ea))return c.tokenize=g,f("jsonld-keyword","meta");for(;null!=(d=b.next())&&(d!=a||e);)e=!e&&"\\"==d;return e||(c.tokenize=g),f("string","string")}}function i(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=g;break}d="*"==c}return f("comment","comment")}function j(a,b){for(var c,d=!1;null!=(c=a.next());){if(!d&&("`"==c||"$"==c&&a.eat("{"))){b.tokenize=g;break}d=!d&&"\\"==c}return f("quasi","string-2",a.current())}function k(a,b){b.fatArrowAt&&(b.fatArrowAt=null);var c=a.string.indexOf("=>",a.start);if(!(0>c)){for(var d=0,e=!1,f=c-1;f>=0;--f){var g=a.string.charAt(f),h=Fa.indexOf(g);if(h>=0&&3>h){if(!d){++f;break}if(0==--d)break}else if(h>=3&&6>h)++d;else if(Ba.test(g))e=!0;else{if(/["'\/]/.test(g))return;if(e&&!d){++f;break}}}e&&!d&&(b.fatArrowAt=f)}}function l(a,b,c,d,e,f){this.indented=a,this.column=b,this.type=c,this.prev=e,this.info=f,null!=d&&(this.align=d)}function m(a,b){for(var c=a.localVars;c;c=c.next)if(c.name==b)return!0;for(var d=a.context;d;d=d.prev)for(var c=d.vars;c;c=c.next)if(c.name==b)return!0}function n(a,b,c,d,e){var f=a.cc;for(Ha.state=a,Ha.stream=e,Ha.marked=null,Ha.cc=f,Ha.style=b,a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);;){var g=f.length?f.pop():za?x:w;if(g(c,d)){for(;f.length&&f[f.length-1].lex;)f.pop()();return Ha.marked?Ha.marked:"variable"==c&&m(a,d)?"variable-2":b}}}function o(){for(var a=arguments.length-1;a>=0;a--)Ha.cc.push(arguments[a])}function p(){return o.apply(null,arguments),!0}function q(a){function b(b){for(var c=b;c;c=c.next)if(c.name==a)return!0;return!1}var c=Ha.state;if(Ha.marked="def",c.context){if(b(c.localVars))return;c.localVars={name:a,next:c.localVars}}else{if(b(c.globalVars))return;d.globalVars&&(c.globalVars={name:a,next:c.globalVars})}}function r(){Ha.state.context={prev:Ha.state.context,vars:Ha.state.localVars},Ha.state.localVars=Ia}function s(){Ha.state.localVars=Ha.state.context.vars,Ha.state.context=Ha.state.context.prev}function t(a,b){var c=function(){var c=Ha.state,d=c.indented;if("stat"==c.lexical.type)d=c.lexical.indented;else for(var e=c.lexical;e&&")"==e.type&&e.align;e=e.prev)d=e.indented;c.lexical=new l(d,Ha.stream.column(),a,null,c.lexical,b)};return c.lex=!0,c}function u(){var a=Ha.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function v(a){function b(c){return c==a?p():";"==a?o():p(b)}return b}function w(a,b){return"var"==a?p(t("vardef",b.length),W,v(";"),u):"keyword a"==a?p(t("form"),x,w,u):"keyword b"==a?p(t("form"),w,u):"{"==a?p(t("}"),S,u):";"==a?p():"if"==a?("else"==Ha.state.lexical.info&&Ha.state.cc[Ha.state.cc.length-1]==u&&Ha.state.cc.pop()(),p(t("form"),x,w,u,_)):"function"==a?p(fa):"for"==a?p(t("form"),aa,w,u):"variable"==a?p(t("stat"),L):"switch"==a?p(t("form"),x,t("}","switch"),v("{"),S,u,u):"case"==a?p(x,v(":")):"default"==a?p(v(":")):"catch"==a?p(t("form"),r,v("("),ga,v(")"),w,u,s):"class"==a?p(t("form"),ha,u):"export"==a?p(t("stat"),la,u):"import"==a?p(t("stat"),ma,u):"module"==a?p(t("form"),X,t("}"),v("{"),S,u,u):o(t("stat"),x,v(";"),u)}function x(a){return z(a,!1)}function y(a){return z(a,!0)}function z(a,b){if(Ha.state.fatArrowAt==Ha.stream.start){var c=b?H:G;if("("==a)return p(r,t(")"),Q(X,")"),u,v("=>"),c,s);if("variable"==a)return o(r,X,v("=>"),c,s)}var d=b?D:C;return Ga.hasOwnProperty(a)?p(d):"function"==a?p(fa,d):"keyword c"==a?p(b?B:A):"("==a?p(t(")"),A,sa,v(")"),u,d):"operator"==a||"spread"==a?p(b?y:x):"["==a?p(t("]"),qa,u,d):"{"==a?R(N,"}",null,d):"quasi"==a?o(E,d):"new"==a?p(I(b)):p()}function A(a){return a.match(/[;\}\)\],]/)?o():o(x)}function B(a){return a.match(/[;\}\)\],]/)?o():o(y)}function C(a,b){return","==a?p(x):D(a,b,!1)}function D(a,b,c){var d=0==c?C:D,e=0==c?x:y;return"=>"==a?p(r,c?H:G,s):"operator"==a?/\+\+|--/.test(b)?p(d):"?"==b?p(x,v(":"),e):p(e):"quasi"==a?o(E,d):";"!=a?"("==a?R(y,")","call",d):"."==a?p(M,d):"["==a?p(t("]"),A,v("]"),u,d):void 0:void 0}function E(a,b){return"quasi"!=a?o():"${"!=b.slice(b.length-2)?p(E):p(x,F)}function F(a){return"}"==a?(Ha.marked="string-2",Ha.state.tokenize=j,p(E)):void 0}function G(a){return k(Ha.stream,Ha.state),o("{"==a?w:x)}function H(a){return k(Ha.stream,Ha.state),o("{"==a?w:y)}function I(a){return function(b){return"."==b?p(a?K:J):o(a?y:x)}}function J(a,b){return"target"==b?(Ha.marked="keyword",p(C)):void 0}function K(a,b){return"target"==b?(Ha.marked="keyword",p(D)):void 0}function L(a){return":"==a?p(u,w):o(C,v(";"),u)}function M(a){return"variable"==a?(Ha.marked="property",p()):void 0}function N(a,b){return"variable"==a||"keyword"==Ha.style?(Ha.marked="property",p("get"==b||"set"==b?O:P)):"number"==a||"string"==a?(Ha.marked=ya?"property":Ha.style+" property",p(P)):"jsonld-keyword"==a?p(P):"modifier"==a?p(N):"["==a?p(x,v("]"),P):"spread"==a?p(x):void 0}function O(a){return"variable"!=a?o(P):(Ha.marked="property",p(fa))}function P(a){return":"==a?p(y):"("==a?o(fa):void 0}function Q(a,b){function c(d){if(","==d){var e=Ha.state.lexical;return"call"==e.info&&(e.pos=(e.pos||0)+1),p(a,c)}return d==b?p():p(v(b))}return function(d){return d==b?p():o(a,c)}}function R(a,b,c){for(var d=3;d<arguments.length;d++)Ha.cc.push(arguments[d]);return p(t(b,c),Q(a,b),u)}function S(a){return"}"==a?p():o(w,S)}function T(a){return Aa&&":"==a?p(V):void 0}function U(a,b){return"="==b?p(y):void 0}function V(a){return"variable"==a?(Ha.marked="variable-3",p()):void 0}function W(){return o(X,T,Z,$)}function X(a,b){return"modifier"==a?p(X):"variable"==a?(q(b),p()):"spread"==a?p(X):"["==a?R(X,"]"):"{"==a?R(Y,"}"):void 0}function Y(a,b){return"variable"!=a||Ha.stream.match(/^\s*:/,!1)?("variable"==a&&(Ha.marked="property"),"spread"==a?p(X):"}"==a?o():p(v(":"),X,Z)):(q(b),p(Z))}function Z(a,b){return"="==b?p(y):void 0}function $(a){return","==a?p(W):void 0}function _(a,b){return"keyword b"==a&&"else"==b?p(t("form","else"),w,u):void 0}function aa(a){return"("==a?p(t(")"),ba,v(")"),u):void 0}function ba(a){return"var"==a?p(W,v(";"),da):";"==a?p(da):"variable"==a?p(ca):o(x,v(";"),da)}function ca(a,b){return"in"==b||"of"==b?(Ha.marked="keyword",p(x)):p(C,da)}function da(a,b){return";"==a?p(ea):"in"==b||"of"==b?(Ha.marked="keyword",p(x)):o(x,v(";"),ea)}function ea(a){")"!=a&&p(x)}function fa(a,b){return"*"==b?(Ha.marked="keyword",p(fa)):"variable"==a?(q(b),p(fa)):"("==a?p(r,t(")"),Q(ga,")"),u,w,s):void 0}function ga(a){return"spread"==a?p(ga):o(X,T,U)}function ha(a,b){return"variable"==a?(q(b),p(ia)):void 0}function ia(a,b){return"extends"==b?p(x,ia):"{"==a?p(t("}"),ja,u):void 0}function ja(a,b){return"variable"==a||"keyword"==Ha.style?"static"==b?(Ha.marked="keyword",p(ja)):(Ha.marked="property","get"==b||"set"==b?p(ka,fa,ja):p(fa,ja)):"*"==b?(Ha.marked="keyword",p(ja)):";"==a?p(ja):"}"==a?p():void 0}function ka(a){return"variable"!=a?o():(Ha.marked="property",p())}function la(a,b){return"*"==b?(Ha.marked="keyword",p(pa,v(";"))):"default"==b?(Ha.marked="keyword",p(x,v(";"))):o(w)}function ma(a){return"string"==a?p():o(na,pa)}function na(a,b){return"{"==a?R(na,"}"):("variable"==a&&q(b),"*"==b&&(Ha.marked="keyword"),p(oa))}function oa(a,b){return"as"==b?(Ha.marked="keyword",p(na)):void 0}function pa(a,b){return"from"==b?(Ha.marked="keyword",p(x)):void 0}function qa(a){return"]"==a?p():o(y,ra)}function ra(a){return"for"==a?o(sa,v("]")):","==a?p(Q(B,"]")):o(Q(y,"]"))}function sa(a){return"for"==a?p(aa,sa):"if"==a?p(x,sa):void 0}function ta(a,b){return"operator"==a.lastType||","==a.lastType||Da.test(b.charAt(0))||/[,.]/.test(b.charAt(0))}var ua,va,wa=c.indentUnit,xa=d.statementIndent,ya=d.jsonld,za=d.json||ya,Aa=d.typescript,Ba=d.wordCharacters||/[\w$\xa1-\uffff]/,Ca=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},g={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":a("new"),"delete":d,"throw":d,"debugger":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,undefined:f,NaN:f,Infinity:f,"this":a("this"),"class":a("class"),"super":a("atom"),"yield":d,"export":a("export"),"import":a("import"),"extends":d};if(Aa){var h={type:"variable",style:"variable-3"},i={"interface":a("class"),"implements":d,namespace:d,module:a("module"),"enum":a("module"),"public":a("modifier"),"private":a("modifier"),"protected":a("modifier"),"abstract":a("modifier"),as:e,string:h,number:h,"boolean":h,any:h};for(var j in i)g[j]=i[j]}return g}(),Da=/[+\-*&%=<>!?|~^]/,Ea=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Fa="([{}])",Ga={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Ha={state:null,column:null,marked:null,cc:null},Ia={name:"this",next:{name:"arguments"}};return u.lex=!0,{startState:function(a){var b={tokenize:g,lastType:"sof",cc:[],lexical:new l((a||0)-wa,0,"block",!1),localVars:d.localVars,context:d.localVars&&{vars:d.localVars},indented:a||0};return d.globalVars&&"object"==typeof d.globalVars&&(b.globalVars=d.globalVars),b},token:function(a,b){if(a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),k(a,b)),b.tokenize!=i&&a.eatSpace())return null;var c=b.tokenize(a,b);return"comment"==ua?c:(b.lastType="operator"!=ua||"++"!=va&&"--"!=va?ua:"incdec",n(b,c,ua,va,a))},indent:function(b,c){if(b.tokenize==i)return a.Pass;if(b.tokenize!=g)return 0;var e=c&&c.charAt(0),f=b.lexical;if(!/^\s*else\b/.test(c))for(var h=b.cc.length-1;h>=0;--h){var j=b.cc[h];if(j==u)f=f.prev;else if(j!=_)break}"stat"==f.type&&"}"==e&&(f=f.prev),xa&&")"==f.type&&"stat"==f.prev.type&&(f=f.prev);var k=f.type,l=e==k;return"vardef"==k?f.indented+("operator"==b.lastType||","==b.lastType?f.info+1:0):"form"==k&&"{"==e?f.indented:"form"==k?f.indented+wa:"stat"==k?f.indented+(ta(b,c)?xa||wa:0):"switch"!=f.info||l||0==d.doubleIndentSwitch?f.align?f.column+(l?0:1):f.indented+(l?0:wa):f.indented+(/^(?:case|default)\b/.test(c)?wa:2*wa)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:za?null:"/*",blockCommentEnd:za?null:"*/",lineComment:za?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:za?"json":"javascript",jsonldMode:ya,jsonMode:za,expressionAllowed:b,skipExpression:function(a){var b=a.cc[a.cc.length-1];(b==x||b==y)&&a.cc.pop()}}}),a.registerHelper("wordChars","javascript",/[\w$]/),a.defineMIME("text/javascript","javascript"),a.defineMIME("text/ecmascript","javascript"),a.defineMIME("application/javascript","javascript"),a.defineMIME("application/x-javascript","javascript"),a.defineMIME("application/ecmascript","javascript"),a.defineMIME("application/json",{name:"javascript",json:!0}),a.defineMIME("application/x-json",{name:"javascript",json:!0}),a.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),a.defineMIME("text/typescript",{name:"javascript",typescript:!0}),a.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../xml/xml"),require("../meta")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../meta"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("markdown",function(b,c){function d(c){if(a.findModeByName){var d=a.findModeByName(c);d&&(c=d.mime||d.mimes[0])}var e=a.getMode(b,c);return"null"==e.name?null:e}function e(a,b,c){return b.f=b.inline=c,c(a,b)}function f(a,b,c){return b.f=b.block=c,c(a,b)}function g(a){return!a||!/\S/.test(a.string)}function h(a){return a.linkTitle=!1,a.em=!1,a.strong=!1,a.strikethrough=!1,a.quote=0,a.indentedCode=!1,x&&a.f==j&&(a.f=o,a.block=i),a.trailingSpace=0,a.trailingSpaceNewLine=!1,a.prevLine=a.thisLine,a.thisLine=null,null}function i(a,b){var f=a.sol(),h=b.list!==!1,i=b.indentedCode;b.indentedCode=!1,h&&(b.indentationDiff>=0?(b.indentationDiff<4&&(b.indentation-=b.indentationDiff),b.list=null):b.indentation>0?b.list=null:b.list=!1);var j=null;if(b.indentationDiff>=4)return a.skipToEnd(),i||g(b.prevLine)?(b.indentation-=4,b.indentedCode=!0,y.code):null;if(a.eatSpace())return null;if((j=a.match(E))&&j[1].length<=6)return b.header=j[1].length,c.highlightFormatting&&(b.formatting="header"),b.f=b.inline,m(b);if(!(g(b.prevLine)||b.quote||h||i)&&(j=a.match(F)))return b.header="="==j[0].charAt(0)?1:2,c.highlightFormatting&&(b.formatting="header"),b.f=b.inline,m(b);if(a.eat(">"))return b.quote=f?1:b.quote+1,c.highlightFormatting&&(b.formatting="quote"),a.eatSpace(),m(b);if("["===a.peek())return e(a,b,s);if(a.match(A,!0))return b.hr=!0,y.hr;if((g(b.prevLine)||h)&&(a.match(B,!1)||a.match(C,!1))){var l=null;for(a.match(B,!0)?l="ul":(a.match(C,!0),l="ol"),b.indentation=a.column()+a.current().length,b.list=!0;b.listStack&&a.column()<b.listStack[b.listStack.length-1];)b.listStack.pop();return b.listStack.push(b.indentation),c.taskLists&&a.match(D,!1)&&(b.taskList=!0),b.f=b.inline,c.highlightFormatting&&(b.formatting=["list","list-"+l]),m(b)}return c.fencedCodeBlocks&&(j=a.match(H,!0))?(b.fencedChars=j[1],b.localMode=d(j[2]),b.localMode&&(b.localState=b.localMode.startState()),b.f=b.block=k,c.highlightFormatting&&(b.formatting="code-block"),b.code=-1,m(b)):e(a,b,b.inline)}function j(b,c){var d=w.token(b,c.htmlState);if(!x){var e=a.innerMode(w,c.htmlState);("xml"==e.mode.name&&null===e.state.tagStart&&!e.state.context&&e.state.tokenize.isInText||c.md_inside&&b.current().indexOf(">")>-1)&&(c.f=o,c.block=i,c.htmlState=null)}return d}function k(a,b){return b.fencedChars&&a.match(b.fencedChars,!1)?(b.localMode=b.localState=null,b.f=b.block=l,null):b.localMode?b.localMode.token(a,b.localState):(a.skipToEnd(),y.code)}function l(a,b){a.match(b.fencedChars),b.block=i,b.f=o,b.fencedChars=null,c.highlightFormatting&&(b.formatting="code-block"),b.code=1;var d=m(b);return b.code=0,d}function m(a){var b=[];if(a.formatting){b.push(y.formatting),"string"==typeof a.formatting&&(a.formatting=[a.formatting]);for(var d=0;d<a.formatting.length;d++)b.push(y.formatting+"-"+a.formatting[d]),"header"===a.formatting[d]&&b.push(y.formatting+"-"+a.formatting[d]+"-"+a.header),"quote"===a.formatting[d]&&(!c.maxBlockquoteDepth||c.maxBlockquoteDepth>=a.quote?b.push(y.formatting+"-"+a.formatting[d]+"-"+a.quote):b.push("error"))}if(a.taskOpen)return b.push("meta"),b.length?b.join(" "):null;if(a.taskClosed)return b.push("property"),b.length?b.join(" "):null;if(a.linkHref?b.push(y.linkHref,"url"):(a.strong&&b.push(y.strong),a.em&&b.push(y.em),a.strikethrough&&b.push(y.strikethrough),a.linkText&&b.push(y.linkText),a.code&&b.push(y.code)),a.header&&b.push(y.header,y.header+"-"+a.header),a.quote&&(b.push(y.quote),!c.maxBlockquoteDepth||c.maxBlockquoteDepth>=a.quote?b.push(y.quote+"-"+a.quote):b.push(y.quote+"-"+c.maxBlockquoteDepth)),a.list!==!1){var e=(a.listStack.length-1)%3;e?1===e?b.push(y.list2):b.push(y.list3):b.push(y.list1)}return a.trailingSpaceNewLine?b.push("trailing-space-new-line"):a.trailingSpace&&b.push("trailing-space-"+(a.trailingSpace%2?"a":"b")),b.length?b.join(" "):null}function n(a,b){return a.match(G,!0)?m(b):void 0}function o(b,d){var e=d.text(b,d);if("undefined"!=typeof e)return e;if(d.list)return d.list=null,m(d);if(d.taskList){var g="x"!==b.match(D,!0)[1];return g?d.taskOpen=!0:d.taskClosed=!0,c.highlightFormatting&&(d.formatting="task"),d.taskList=!1,m(d)}if(d.taskOpen=!1,d.taskClosed=!1,d.header&&b.match(/^#+$/,!0))return c.highlightFormatting&&(d.formatting="header"),m(d);var h=b.sol(),i=b.next();if(d.linkTitle){d.linkTitle=!1;var k=i;"("===i&&(k=")"),k=(k+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var l="^\\s*(?:[^"+k+"\\\\]+|\\\\\\\\|\\\\.)"+k;if(b.match(new RegExp(l),!0))return y.linkHref}if("`"===i){var n=d.formatting;c.highlightFormatting&&(d.formatting="code"),b.eatWhile("`");var o=b.current().length;if(0==d.code)return d.code=o,m(d);if(o==d.code){var r=m(d);return d.code=0,r}return d.formatting=n,m(d)}if(d.code)return m(d);if("\\"===i&&(b.next(),c.highlightFormatting)){var s=m(d),t=y.formatting+"-escape";return s?s+" "+t:t}if("!"===i&&b.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return b.match(/\[[^\]]*\]/),d.inline=d.f=q,y.image;if("["===i&&b.match(/.*\](\(.*\)| ?\[.*\])/,!1))return d.linkText=!0,c.highlightFormatting&&(d.formatting="link"),m(d);if("]"===i&&d.linkText&&b.match(/\(.*\)| ?\[.*\]/,!1)){c.highlightFormatting&&(d.formatting="link");var s=m(d);return d.linkText=!1,d.inline=d.f=q,s}if("<"===i&&b.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){d.f=d.inline=p,c.highlightFormatting&&(d.formatting="link");var s=m(d);return s?s+=" ":s="",s+y.linkInline}if("<"===i&&b.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){d.f=d.inline=p,c.highlightFormatting&&(d.formatting="link");var s=m(d);return s?s+=" ":s="",s+y.linkEmail}if("<"===i&&b.match(/^(!--|\w)/,!1)){var u=b.string.indexOf(">",b.pos);if(-1!=u){var v=b.string.substring(b.start,u);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(v)&&(d.md_inside=!0)}return b.backUp(1),d.htmlState=a.startState(w),f(b,d,j)}if("<"===i&&b.match(/^\/\w*?>/))return d.md_inside=!1,"tag";var x=!1;if(!c.underscoresBreakWords&&"_"===i&&"_"!==b.peek()&&b.match(/(\w)/,!1)){var z=b.pos-2;if(z>=0){var A=b.string.charAt(z);"_"!==A&&A.match(/(\w)/,!1)&&(x=!0)}}if("*"===i||"_"===i&&!x)if(h&&" "===b.peek());else{if(d.strong===i&&b.eat(i)){c.highlightFormatting&&(d.formatting="strong");var r=m(d);return d.strong=!1,r}if(!d.strong&&b.eat(i))return d.strong=i,c.highlightFormatting&&(d.formatting="strong"),m(d);if(d.em===i){c.highlightFormatting&&(d.formatting="em");var r=m(d);return d.em=!1,r}if(!d.em)return d.em=i,c.highlightFormatting&&(d.formatting="em"),m(d)}else if(" "===i&&(b.eat("*")||b.eat("_"))){if(" "===b.peek())return m(d);b.backUp(1)}if(c.strikethrough)if("~"===i&&b.eatWhile(i)){if(d.strikethrough){c.highlightFormatting&&(d.formatting="strikethrough");var r=m(d);return d.strikethrough=!1,r}if(b.match(/^[^\s]/,!1))return d.strikethrough=!0,c.highlightFormatting&&(d.formatting="strikethrough"),m(d)}else if(" "===i&&b.match(/^~~/,!0)){if(" "===b.peek())return m(d);b.backUp(2)}return" "===i&&(b.match(/ +$/,!1)?d.trailingSpace++:d.trailingSpace&&(d.trailingSpaceNewLine=!0)),m(d)}function p(a,b){var d=a.next();if(">"===d){b.f=b.inline=o,c.highlightFormatting&&(b.formatting="link");var e=m(b);return e?e+=" ":e="",e+y.linkInline}return a.match(/^[^>]+/,!0),y.linkInline}function q(a,b){if(a.eatSpace())return null;var d=a.next();return"("===d||"["===d?(b.f=b.inline=r("("===d?")":"]"),c.highlightFormatting&&(b.formatting="link-string"),b.linkHref=!0,m(b)):"error"}function r(a){return function(b,d){var e=b.next();if(e===a){d.f=d.inline=o,c.highlightFormatting&&(d.formatting="link-string");var f=m(d);return d.linkHref=!1,f}return b.match(v(a),!0)&&b.backUp(1),d.linkHref=!0,m(d)}}function s(a,b){return a.match(/^([^\]\\]|\\.)*\]:/,!1)?(b.f=t,a.next(),c.highlightFormatting&&(b.formatting="link"),b.linkText=!0,m(b)):e(a,b,o)}function t(a,b){if(a.match(/^\]:/,!0)){b.f=b.inline=u,c.highlightFormatting&&(b.formatting="link");var d=m(b);return b.linkText=!1,d}return a.match(/^([^\]\\]|\\.)+/,!0),y.linkText}function u(a,b){return a.eatSpace()?null:(a.match(/^[^\s]+/,!0),void 0===a.peek()?b.linkTitle=!0:a.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),b.f=b.inline=o,y.linkHref+" url")}function v(a){return I[a]||(a=(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),I[a]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+a+")")),I[a]}var w=a.getMode(b,"text/html"),x="null"==w.name;void 0===c.highlightFormatting&&(c.highlightFormatting=!1),void 0===c.maxBlockquoteDepth&&(c.maxBlockquoteDepth=0),void 0===c.underscoresBreakWords&&(c.underscoresBreakWords=!0),void 0===c.taskLists&&(c.taskLists=!1),void 0===c.strikethrough&&(c.strikethrough=!1),void 0===c.tokenTypeOverrides&&(c.tokenTypeOverrides={});var y={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"tag",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough"};for(var z in y)y.hasOwnProperty(z)&&c.tokenTypeOverrides[z]&&(y[z]=c.tokenTypeOverrides[z]);var A=/^([*\-_])(?:\s*\1){2,}\s*$/,B=/^[*\-+]\s+/,C=/^[0-9]+([.)])\s+/,D=/^\[(x| )\](?=\s)/,E=c.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,F=/^ *(?:\={1,}|-{1,})\s*$/,G=/^[^#!\[\]*_\\<>` "'(~]+/,H=new RegExp("^("+(c.fencedCodeBlocks===!0?"~~~+|```+":c.fencedCodeBlocks)+")[ \\t]*([\\w+#]*)"),I=[],J={startState:function(){return{f:i,prevLine:null,thisLine:null,block:i,htmlState:null,indentation:0,inline:o,text:n,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(b){return{f:b.f,prevLine:b.prevLine,thisLine:b.thisLine,block:b.block,htmlState:b.htmlState&&a.copyState(w,b.htmlState),indentation:b.indentation,localMode:b.localMode,localState:b.localMode?a.copyState(b.localMode,b.localState):null,inline:b.inline,text:b.text,formatting:!1,linkTitle:b.linkTitle,code:b.code,em:b.em,strong:b.strong,strikethrough:b.strikethrough,header:b.header,hr:b.hr,taskList:b.taskList,list:b.list,listStack:b.listStack.slice(0),quote:b.quote,indentedCode:b.indentedCode,trailingSpace:b.trailingSpace,trailingSpaceNewLine:b.trailingSpaceNewLine,md_inside:b.md_inside,fencedChars:b.fencedChars}},token:function(a,b){if(b.formatting=!1,a!=b.thisLine){var c=b.header||b.hr;if(b.header=0,b.hr=!1,a.match(/^\s*$/,!0)||c){if(h(b),!c)return null;b.prevLine=null}b.prevLine=b.thisLine,b.thisLine=a,b.taskList=!1,b.trailingSpace=0,b.trailingSpaceNewLine=!1,b.f=b.block;var d=a.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(b.indentationDiff=Math.min(d-b.indentation,4),b.indentation=b.indentation+b.indentationDiff,d>0)return null}return b.f(a,b)},innerMode:function(a){return a.block==j?{state:a.htmlState,mode:w}:a.localState?{state:a.localState,mode:a.localMode}:{state:a,mode:J}},blankLine:h,getType:m,fold:"markdown"};return J},"xml"),a.defineMIME("text/x-markdown","markdown")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("nginx",function(a){function b(a){for(var b={},c=a.split(" "),d=0;d<c.length;++d)b[c[d]]=!0;return b}function c(a,b){return h=b,a}function d(a,b){a.eatWhile(/[\w\$_]/);var d=a.current();if(i.propertyIsEnumerable(d))return"keyword";if(j.propertyIsEnumerable(d))return"variable-2";if(k.propertyIsEnumerable(d))return"string-2";var h=a.next();return"@"==h?(a.eatWhile(/[\w\\\-]/),c("meta",a.current())):"/"==h&&a.eat("*")?(b.tokenize=e,e(a,b)):"<"==h&&a.eat("!")?(b.tokenize=f,f(a,b)):"="!=h?"~"!=h&&"|"!=h||!a.eat("=")?'"'==h||"'"==h?(b.tokenize=g(h),b.tokenize(a,b)):"#"==h?(a.skipToEnd(),c("comment","comment")):"!"==h?(a.match(/^\s*\w*/),c("keyword","important")):/\d/.test(h)?(a.eatWhile(/[\w.%]/),c("number","unit")):/[,.+>*\/]/.test(h)?c(null,"select-op"):/[;{}:\[\]]/.test(h)?c(null,h):(a.eatWhile(/[\w\\\-]/),c("variable","variable")):c(null,"compare"):void c(null,"compare")}function e(a,b){for(var e,f=!1;null!=(e=a.next());){if(f&&"/"==e){b.tokenize=d;break}f="*"==e}return c("comment","comment")}function f(a,b){for(var e,f=0;null!=(e=a.next());){if(f>=2&&">"==e){b.tokenize=d;break}f="-"==e?f+1:0}return c("comment","comment")}function g(a){return function(b,e){for(var f,g=!1;null!=(f=b.next())&&(f!=a||g);)g=!g&&"\\"==f;return g||(e.tokenize=d),c("string","string")}}var h,i=b("break return rewrite set accept_mutex accept_mutex_delay access_log add_after_body add_before_body add_header addition_types aio alias allow ancient_browser ancient_browser_value auth_basic auth_basic_user_file auth_http auth_http_header auth_http_timeout autoindex autoindex_exact_size autoindex_localtime charset charset_types client_body_buffer_size client_body_in_file_only client_body_in_single_buffer client_body_temp_path client_body_timeout client_header_buffer_size client_header_timeout client_max_body_size connection_pool_size create_full_put_path daemon dav_access dav_methods debug_connection debug_points default_type degradation degrade deny devpoll_changes devpoll_events directio directio_alignment empty_gif env epoll_events error_log eventport_events expires fastcgi_bind fastcgi_buffer_size fastcgi_buffers fastcgi_busy_buffers_size fastcgi_cache fastcgi_cache_key fastcgi_cache_methods fastcgi_cache_min_uses fastcgi_cache_path fastcgi_cache_use_stale fastcgi_cache_valid fastcgi_catch_stderr fastcgi_connect_timeout fastcgi_hide_header fastcgi_ignore_client_abort fastcgi_ignore_headers fastcgi_index fastcgi_intercept_errors fastcgi_max_temp_file_size fastcgi_next_upstream fastcgi_param fastcgi_pass_header fastcgi_pass_request_body fastcgi_pass_request_headers fastcgi_read_timeout fastcgi_send_lowat fastcgi_send_timeout fastcgi_split_path_info fastcgi_store fastcgi_store_access fastcgi_temp_file_write_size fastcgi_temp_path fastcgi_upstream_fail_timeout fastcgi_upstream_max_fails flv geoip_city geoip_country google_perftools_profiles gzip gzip_buffers gzip_comp_level gzip_disable gzip_hash gzip_http_version gzip_min_length gzip_no_buffer gzip_proxied gzip_static gzip_types gzip_vary gzip_window if_modified_since ignore_invalid_headers image_filter image_filter_buffer image_filter_jpeg_quality image_filter_transparency imap_auth imap_capabilities imap_client_buffer index ip_hash keepalive_requests keepalive_timeout kqueue_changes kqueue_events large_client_header_buffers limit_conn limit_conn_log_level limit_rate limit_rate_after limit_req limit_req_log_level limit_req_zone limit_zone lingering_time lingering_timeout lock_file log_format log_not_found log_subrequest map_hash_bucket_size map_hash_max_size master_process memcached_bind memcached_buffer_size memcached_connect_timeout memcached_next_upstream memcached_read_timeout memcached_send_timeout memcached_upstream_fail_timeout memcached_upstream_max_fails merge_slashes min_delete_depth modern_browser modern_browser_value msie_padding msie_refresh multi_accept open_file_cache open_file_cache_errors open_file_cache_events open_file_cache_min_uses open_file_cache_valid open_log_file_cache output_buffers override_charset perl perl_modules perl_require perl_set pid pop3_auth pop3_capabilities port_in_redirect postpone_gzipping postpone_output protocol proxy proxy_bind proxy_buffer proxy_buffer_size proxy_buffering proxy_buffers proxy_busy_buffers_size proxy_cache proxy_cache_key proxy_cache_methods proxy_cache_min_uses proxy_cache_path proxy_cache_use_stale proxy_cache_valid proxy_connect_timeout proxy_headers_hash_bucket_size proxy_headers_hash_max_size proxy_hide_header proxy_ignore_client_abort proxy_ignore_headers proxy_intercept_errors proxy_max_temp_file_size proxy_method proxy_next_upstream proxy_pass_error_message proxy_pass_header proxy_pass_request_body proxy_pass_request_headers proxy_read_timeout proxy_redirect proxy_send_lowat proxy_send_timeout proxy_set_body proxy_set_header proxy_ssl_session_reuse proxy_store proxy_store_access proxy_temp_file_write_size proxy_temp_path proxy_timeout proxy_upstream_fail_timeout proxy_upstream_max_fails random_index read_ahead real_ip_header recursive_error_pages request_pool_size reset_timedout_connection resolver resolver_timeout rewrite_log rtsig_overflow_events rtsig_overflow_test rtsig_overflow_threshold rtsig_signo satisfy secure_link_secret send_lowat send_timeout sendfile sendfile_max_chunk server_name_in_redirect server_names_hash_bucket_size server_names_hash_max_size server_tokens set_real_ip_from smtp_auth smtp_capabilities smtp_client_buffer smtp_greeting_delay so_keepalive source_charset ssi ssi_ignore_recycled_buffers ssi_min_file_chunk ssi_silent_errors ssi_types ssi_value_length ssl ssl_certificate ssl_certificate_key ssl_ciphers ssl_client_certificate ssl_crl ssl_dhparam ssl_engine ssl_prefer_server_ciphers ssl_protocols ssl_session_cache ssl_session_timeout ssl_verify_client ssl_verify_depth starttls stub_status sub_filter sub_filter_once sub_filter_types tcp_nodelay tcp_nopush thread_stack_size timeout timer_resolution types_hash_bucket_size types_hash_max_size underscores_in_headers uninitialized_variable_warn use user userid userid_domain userid_expires userid_mark userid_name userid_p3p userid_path userid_service valid_referers variables_hash_bucket_size variables_hash_max_size worker_connections worker_cpu_affinity worker_priority worker_processes worker_rlimit_core worker_rlimit_nofile worker_rlimit_sigpending worker_threads working_directory xclient xml_entities xslt_stylesheet xslt_typesdrew@li229-23"),j=b("http mail events server types location upstream charset_map limit_except if geo map"),k=b("include root server server_name listen internal proxy_pass memcached_pass fastcgi_pass try_files"),l=a.indentUnit;
return{startState:function(a){return{tokenize:d,baseIndent:a||0,stack:[]}},token:function(a,b){if(a.eatSpace())return null;h=null;var c=b.tokenize(a,b),d=b.stack[b.stack.length-1];return"hash"==h&&"rule"==d?c="atom":"variable"==c&&("rule"==d?c="number":d&&"@media{"!=d||(c="tag")),"rule"==d&&/^[\{\};]$/.test(h)&&b.stack.pop(),"{"==h?"@media"==d?b.stack[b.stack.length-1]="@media{":b.stack.push("{"):"}"==h?b.stack.pop():"@media"==h?b.stack.push("@media"):"{"==d&&"comment"!=h&&b.stack.push("rule"),c},indent:function(a,b){var c=a.stack.length;return/^\}/.test(b)&&(c-="rule"==a.stack[a.stack.length-1]?2:1),a.baseIndent+c*l},electricChars:"}"}}),a.defineMIME("text/x-nginx-conf","nginx")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../clike/clike")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],a):a(CodeMirror)}(function(a){"use strict";function b(a){for(var b={},c=a.split(" "),d=0;d<c.length;++d)b[c[d]]=!0;return b}function c(a,b,e){return 0==a.length?d(b):function(f,g){for(var h=a[0],i=0;i<h.length;i++)if(f.match(h[i][0]))return g.tokenize=c(a.slice(1),b),h[i][1];return g.tokenize=d(b,e),"string"}}function d(a,b){return function(c,d){return e(c,d,a,b)}}function e(a,b,d,e){if(e!==!1&&a.match("${",!1)||a.match("{$",!1))return b.tokenize=null,"string";if(e!==!1&&a.match(/^\$[a-zA-Z_][a-zA-Z0-9_]*/))return a.match("[",!1)&&(b.tokenize=c([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]],d,e)),a.match(/\-\>\w/,!1)&&(b.tokenize=c([[["->",null]],[[/[\w]+/,"variable"]]],d,e)),"variable-2";for(var f=!1;!a.eol()&&(f||e===!1||!a.match("{$",!1)&&!a.match(/^(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1));){if(!f&&a.match(d)){b.tokenize=null,b.tokStack.pop(),b.tokStack.pop();break}f="\\"==a.next()&&!f}return"string"}var f="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally",g="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",h="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count";a.registerHelper("hintWords","php",[f,g,h].join(" ").split(" ")),a.registerHelper("wordChars","php",/[\w$]/);var i={name:"clike",helperType:"php",keywords:b(f),blockKeywords:b("catch do else elseif for foreach if switch try while finally"),defKeywords:b("class function interface namespace trait"),atoms:b(g),builtin:b(h),multiLineStrings:!0,hooks:{$:function(a){return a.eatWhile(/[\w\$_]/),"variable-2"},"<":function(a,b){var c;if(c=a.match(/<<\s*/)){var e=a.eat(/['"]/);a.eatWhile(/[\w\.]/);var f=a.current().slice(c[0].length+(e?2:1));if(e&&a.eat(e),f)return(b.tokStack||(b.tokStack=[])).push(f,0),b.tokenize=d(f,"'"!=e),"string"}return!1},"#":function(a){for(;!a.eol()&&!a.match("?>",!1);)a.next();return"comment"},"/":function(a){if(a.eat("/")){for(;!a.eol()&&!a.match("?>",!1);)a.next();return"comment"}return!1},'"':function(a,b){return(b.tokStack||(b.tokStack=[])).push('"',0),b.tokenize=d('"'),"string"},"{":function(a,b){return b.tokStack&&b.tokStack.length&&b.tokStack[b.tokStack.length-1]++,!1},"}":function(a,b){return b.tokStack&&b.tokStack.length>0&&!--b.tokStack[b.tokStack.length-1]&&(b.tokenize=d(b.tokStack[b.tokStack.length-2])),!1}}};a.defineMode("php",function(b,c){function d(b,c){var d=c.curMode==f;if(b.sol()&&c.pending&&'"'!=c.pending&&"'"!=c.pending&&(c.pending=null),d)return d&&null==c.php.tokenize&&b.match("?>")?(c.curMode=e,c.curState=c.html,c.php.context.prev||(c.php=null),"meta"):f.token(b,c.curState);if(b.match(/^<\?\w*/))return c.curMode=f,c.php||(c.php=a.startState(f,e.indent(c.html,""))),c.curState=c.php,"meta";if('"'==c.pending||"'"==c.pending){for(;!b.eol()&&b.next()!=c.pending;);var g="string"}else if(c.pending&&b.pos<c.pending.end){b.pos=c.pending.end;var g=c.pending.style}else var g=e.token(b,c.curState);c.pending&&(c.pending=null);var h,i=b.current(),j=i.search(/<\?/);return-1!=j&&("string"==g&&(h=i.match(/[\'\"]$/))&&!/\?>/.test(i)?c.pending=h[0]:c.pending={end:b.pos,style:g},b.backUp(i.length-j)),g}var e=a.getMode(b,"text/html"),f=a.getMode(b,i);return{startState:function(){var b=a.startState(e),d=c.startOpen?a.startState(f):null;return{html:b,php:d,curMode:c.startOpen?f:e,curState:c.startOpen?d:b,pending:null}},copyState:function(b){var c,d=b.html,g=a.copyState(e,d),h=b.php,i=h&&a.copyState(f,h);return c=b.curMode==e?g:i,{html:g,php:i,curMode:b.curMode,curState:c,pending:b.pending}},token:d,indent:function(a,b){return a.curMode!=f&&/^\s*<\//.test(b)||a.curMode==f&&/^\?>/.test(b)?e.indent(a.html,b):a.curMode.indent(a.curState,b)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(a){return{state:a.curState,mode:a.curMode}}}},"htmlmixed","clike"),a.defineMIME("application/x-httpd-php","php"),a.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),a.defineMIME("text/x-php",i)}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("ruby",function(a){function b(a){for(var b={},c=0,d=a.length;d>c;++c)b[a[c]]=!0;return b}function c(a,b,c){return c.tokenize.push(a),a(b,c)}function d(a,b){if(a.sol()&&a.match("=begin")&&a.eol())return b.tokenize.push(i),"comment";if(a.eatSpace())return null;var d,e=a.next();if("`"==e||"'"==e||'"'==e)return c(g(e,"string",'"'==e||"`"==e),a,b);if("/"==e){var f=a.current().length;if(a.skipTo("/")){var k=a.current().length;a.backUp(a.current().length-f);for(var l=0;a.current().length<k;){var m=a.next();if("("==m?l+=1:")"==m&&(l-=1),0>l)break}if(a.backUp(a.current().length-f),0==l)return c(g(e,"string-2",!0),a,b)}return"operator"}if("%"==e){var o="string",p=!0;a.eat("s")?o="atom":a.eat(/[WQ]/)?o="string":a.eat(/[r]/)?o="string-2":a.eat(/[wxq]/)&&(o="string",p=!1);var q=a.eat(/[^\w\s=]/);return q?(n.propertyIsEnumerable(q)&&(q=n[q]),c(g(q,o,p,!0),a,b)):"operator"}if("#"==e)return a.skipToEnd(),"comment";if("<"==e&&(d=a.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return c(h(d[1]),a,b);if("0"==e)return a.eat("x")?a.eatWhile(/[\da-fA-F]/):a.eat("b")?a.eatWhile(/[01]/):a.eatWhile(/[0-7]/),"number";if(/\d/.test(e))return a.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==e){for(;a.match(/^\\[CM]-/););return a.eat("\\")?a.eatWhile(/\w/):a.next(),"string"}if(":"==e)return a.eat("'")?c(g("'","atom",!1),a,b):a.eat('"')?c(g('"',"atom",!0),a,b):a.eat(/[\<\>]/)?(a.eat(/[\<\>]/),"atom"):a.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":a.eat(/[a-zA-Z$@_\xa1-\uffff]/)?(a.eatWhile(/[\w$\xa1-\uffff]/),a.eat(/[\?\!\=]/),"atom"):"operator";if("@"==e&&a.match(/^@?[a-zA-Z_\xa1-\uffff]/))return a.eat("@"),a.eatWhile(/[\w\xa1-\uffff]/),"variable-2";if("$"==e)return a.eat(/[a-zA-Z_]/)?a.eatWhile(/[\w]/):a.eat(/\d/)?a.eat(/\d/):a.next(),"variable-3";if(/[a-zA-Z_\xa1-\uffff]/.test(e))return a.eatWhile(/[\w\xa1-\uffff]/),a.eat(/[\?\!]/),a.eat(":")?"atom":"ident";if("|"!=e||!b.varList&&"{"!=b.lastTok&&"do"!=b.lastTok){if(/[\(\)\[\]{}\\;]/.test(e))return j=e,null;if("-"==e&&a.eat(">"))return"arrow";if(/[=+\-\/*:\.^%<>~|]/.test(e)){var r=a.eatWhile(/[=+\-\/*:\.^%<>~|]/);return"."!=e||r||(j="."),"operator"}return null}return j="|",null}function e(a){return a||(a=1),function(b,c){if("}"==b.peek()){if(1==a)return c.tokenize.pop(),c.tokenize[c.tokenize.length-1](b,c);c.tokenize[c.tokenize.length-1]=e(a-1)}else"{"==b.peek()&&(c.tokenize[c.tokenize.length-1]=e(a+1));return d(b,c)}}function f(){var a=!1;return function(b,c){return a?(c.tokenize.pop(),c.tokenize[c.tokenize.length-1](b,c)):(a=!0,d(b,c))}}function g(a,b,c,d){return function(g,h){var i,j=!1;for("read-quoted-paused"===h.context.type&&(h.context=h.context.prev,g.eat("}"));null!=(i=g.next());){if(i==a&&(d||!j)){h.tokenize.pop();break}if(c&&"#"==i&&!j){if(g.eat("{")){"}"==a&&(h.context={prev:h.context,type:"read-quoted-paused"}),h.tokenize.push(e());break}if(/[@\$]/.test(g.peek())){h.tokenize.push(f());break}}j=!j&&"\\"==i}return b}}function h(a){return function(b,c){return b.match(a)?c.tokenize.pop():b.skipToEnd(),"string"}}function i(a,b){return a.sol()&&a.match("=end")&&a.eol()&&b.tokenize.pop(),a.skipToEnd(),"comment"}var j,k=b(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]),l=b(["def","class","case","for","while","until","module","then","catch","loop","proc","begin"]),m=b(["end","until"]),n={"[":"]","{":"}","(":")"};return{startState:function(){return{tokenize:[d],indented:0,context:{type:"top",indented:-a.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(a,b){j=null,a.sol()&&(b.indented=a.indentation());var c,d=b.tokenize[b.tokenize.length-1](a,b),e=j;if("ident"==d){var f=a.current();d="."==b.lastTok?"property":k.propertyIsEnumerable(a.current())?"keyword":/^[A-Z]/.test(f)?"tag":"def"==b.lastTok||"class"==b.lastTok||b.varList?"def":"variable","keyword"==d&&(e=f,l.propertyIsEnumerable(f)?c="indent":m.propertyIsEnumerable(f)?c="dedent":"if"!=f&&"unless"!=f||a.column()!=a.indentation()?"do"==f&&b.context.indented<b.indented&&(c="indent"):c="indent")}return(j||d&&"comment"!=d)&&(b.lastTok=e),"|"==j&&(b.varList=!b.varList),"indent"==c||/[\(\[\{]/.test(j)?b.context={prev:b.context,type:j||d,indented:b.indented}:("dedent"==c||/[\)\]\}]/.test(j))&&b.context.prev&&(b.context=b.context.prev),a.eol()&&(b.continuedLine="\\"==j||"operator"==d),d},indent:function(b,c){if(b.tokenize[b.tokenize.length-1]!=d)return 0;var e=c&&c.charAt(0),f=b.context,g=f.type==n[e]||"keyword"==f.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(c);return f.indented+(g?0:a.indentUnit)+(b.continuedLine?a.indentUnit:0)},electricInput:/^\s*(?:end|rescue|\})$/,lineComment:"#"}}),a.defineMIME("text/x-ruby","ruby")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("sass",function(a){function b(a){return new RegExp("^"+a.join("|"))}function c(a,b){var c=a.peek();return")"===c?(a.next(),b.tokenizer=i,"operator"):"("===c?(a.next(),a.eatSpace(),"operator"):"'"===c||'"'===c?(b.tokenizer=e(a.next()),"string"):(b.tokenizer=e(")",!1),"string")}function d(a,b){return function(c,d){return c.sol()&&c.indentation()<=a?(d.tokenizer=i,i(c,d)):(b&&c.skipTo("*/")?(c.next(),c.next(),d.tokenizer=i):c.skipToEnd(),"comment")}}function e(a,b){function c(d,e){var g=d.next(),h=d.peek(),j=d.string.charAt(d.pos-2),k="\\"!==g&&h===a||g===a&&"\\"!==j;return k?(g!==a&&b&&d.next(),e.tokenizer=i,"string"):"#"===g&&"{"===h?(e.tokenizer=f(c),d.next(),"operator"):"string"}return null==b&&(b=!0),c}function f(a){return function(b,c){return"}"===b.peek()?(b.next(),c.tokenizer=a,"operator"):i(b,c)}}function g(b){if(0==b.indentCount){b.indentCount++;var c=b.scopes[0].offset,d=c+a.indentUnit;b.scopes.unshift({offset:d})}}function h(a){1!=a.scopes.length&&a.scopes.shift()}function i(a,b){var j=a.peek();if(a.match("/*"))return b.tokenizer=d(a.indentation(),!0),b.tokenizer(a,b);if(a.match("//"))return b.tokenizer=d(a.indentation(),!1),b.tokenizer(a,b);if(a.match("#{"))return b.tokenizer=f(i),"operator";if('"'===j||"'"===j)return a.next(),b.tokenizer=e(j),"string";if(b.cursorHalf){if("#"===j&&(a.next(),a.match(/[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/)))return a.peek()||(b.cursorHalf=0),"number";if(a.match(/^-?[0-9\.]+/))return a.peek()||(b.cursorHalf=0),"number";if(a.match(/^(px|em|in)\b/))return a.peek()||(b.cursorHalf=0),"unit";if(a.match(l))return a.peek()||(b.cursorHalf=0),"keyword";if(a.match(/^url/)&&"("===a.peek())return b.tokenizer=c,a.peek()||(b.cursorHalf=0),"atom";if("$"===j)return a.next(),a.eatWhile(/[\w-]/),a.peek()||(b.cursorHalf=0),"variable-3";if("!"===j)return a.next(),a.peek()||(b.cursorHalf=0),a.match(/^[\w]+/)?"keyword":"operator";if(a.match(n))return a.peek()||(b.cursorHalf=0),"operator";if(a.eatWhile(/[\w-]/))return a.peek()||(b.cursorHalf=0),"attribute";if(!a.peek())return b.cursorHalf=0,null}else{if("."===j){if(a.next(),a.match(/^[\w-]+/))return g(b),"atom";if("#"===a.peek())return g(b),"atom"}if("#"===j){if(a.next(),a.match(/^[\w-]+/))return g(b),"atom";if("#"===a.peek())return g(b),"atom"}if("$"===j)return a.next(),a.eatWhile(/[\w-]/),"variable-2";if(a.match(/^-?[0-9\.]+/))return"number";if(a.match(/^(px|em|in)\b/))return"unit";if(a.match(l))return"keyword";if(a.match(/^url/)&&"("===a.peek())return b.tokenizer=c,"atom";if("="===j&&a.match(/^=[\w-]+/))return g(b),"meta";if("+"===j&&a.match(/^\+[\w-]+/))return"variable-3";if("@"===j&&a.match(/@extend/)&&(a.match(/\s*[\w]/)||h(b)),a.match(/^@(else if|if|media|else|for|each|while|mixin|function)/))return g(b),"meta";if("@"===j)return a.next(),a.eatWhile(/[\w-]/),"meta";if(a.eatWhile(/[\w-]/))return a.match(/ *: *[\w-\+\$#!\("']/,!1)?"property":a.match(/ *:/,!1)?(g(b),b.cursorHalf=1,"atom"):a.match(/ *,/,!1)?"atom":(g(b),"atom");if(":"===j)return a.match(o)?"keyword":(a.next(),b.cursorHalf=1,"operator")}return a.match(n)?"operator":(a.next(),null)}function j(b,c){b.sol()&&(c.indentCount=0);var d=c.tokenizer(b,c),e=b.current();if(("@return"===e||"}"===e)&&h(c),null!==d){for(var f=b.pos-e.length,g=f+a.indentUnit*c.indentCount,i=[],j=0;j<c.scopes.length;j++){var k=c.scopes[j];k.offset<=g&&i.push(k)}c.scopes=i}return d}var k=["true","false","null","auto"],l=new RegExp("^"+k.join("|")),m=["\\(","\\)","=",">","<","==",">=","<=","\\+","-","\\!=","/","\\*","%","and","or","not",";","\\{","\\}",":"],n=b(m),o=/^::?[a-zA-Z_][\w\-]*/;return{startState:function(){return{tokenizer:i,scopes:[{offset:0,type:"sass"}],indentCount:0,cursorHalf:0,definedVars:[],definedMixins:[]}},token:function(a,b){var c=j(a,b);return b.lastToken={style:c,content:a.current()},c},indent:function(a){return a.scopes[0].offset}}}),a.defineMIME("text/x-sass","sass")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("shell",function(){function a(a,b){for(var c=b.split(" "),d=0;d<c.length;d++)e[c[d]]=a}function b(a,b){if(a.eatSpace())return null;var g=a.sol(),h=a.next();if("\\"===h)return a.next(),null;if("'"===h||'"'===h||"`"===h)return b.tokens.unshift(c(h)),d(a,b);if("#"===h)return g&&a.eat("!")?(a.skipToEnd(),"meta"):(a.skipToEnd(),"comment");if("$"===h)return b.tokens.unshift(f),d(a,b);if("+"===h||"="===h)return"operator";if("-"===h)return a.eat("-"),a.eatWhile(/\w/),"attribute";if(/\d/.test(h)&&(a.eatWhile(/\d/),a.eol()||!/\w/.test(a.peek())))return"number";a.eatWhile(/[\w-]/);var i=a.current();return"="===a.peek()&&/\w+/.test(i)?"def":e.hasOwnProperty(i)?e[i]:null}function c(a){return function(b,c){for(var d,e=!1,g=!1;null!=(d=b.next());){if(d===a&&!g){e=!0;break}if("$"===d&&!g&&"'"!==a){g=!0,b.backUp(1),c.tokens.unshift(f);break}g=!g&&"\\"===d}return(e||!g)&&c.tokens.shift(),"`"===a||")"===a?"quote":"string"}}function d(a,c){return(c.tokens[0]||b)(a,c)}var e={};a("atom","true false"),a("keyword","if then do else elif while until for in esac fi fin fil done exit set unset export function"),a("builtin","ab awk bash beep cat cc cd chown chmod chroot clear cp curl cut diff echo find gawk gcc get git grep kill killall ln ls make mkdir openssl mv nc node npm ping ps restart rm rmdir sed service sh shopt shred source sort sleep ssh start stop su sudo tee telnet top touch vi vim wall wc wget who write yes zsh");var f=function(a,b){b.tokens.length>1&&a.eat("$");var e=a.next(),f=/\w/;return"{"===e&&(f=/[^}]/),"("===e?(b.tokens[0]=c(")"),d(a,b)):(/\d/.test(e)||(a.eatWhile(f),a.eat("}")),b.tokens.shift(),"def")};return{startState:function(){return{tokens:[]}},token:function(a,b){return d(a,b)},lineComment:"#",fold:"brace"}}),a.defineMIME("text/x-sh","shell")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../ruby/ruby")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../ruby/ruby"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("slim",function(b){function c(a,b,c){var d=function(d,e){return e.tokenize=b,d.pos<a?(d.pos=a,c):e.tokenize(d,e)};return function(a,c){return c.tokenize=d,b(a,c)}}function d(a,b,d,e,f){var g=a.current(),h=g.search(d);return h>-1&&(b.tokenize=c(a.pos,b.tokenize,f),a.backUp(g.length-h-e)),f}function e(a,b){a.stack={parent:a.stack,style:"continuation",indented:b,tokenize:a.line},a.line=a.tokenize}function f(a){a.line==a.tokenize&&(a.line=a.stack.tokenize,a.stack=a.stack.parent)}function g(a,b){return function(c,d){if(f(d),c.match(/^\\$/))return e(d,a),"lineContinuation";var g=b(c,d);return c.eol()&&c.current().match(/(?:^|[^\\])(?:\\\\)*\\$/)&&c.backUp(1),g}}function h(a,b){return function(c,d){f(d);var g=b(c,d);return c.eol()&&c.current().match(/,$/)&&e(d,a),g}}function i(a,b){return function(c,d){var e=c.peek();return e==a&&1==d.rubyState.tokenize.length?(c.next(),d.tokenize=b,"closeAttributeTag"):k(c,d)}}function j(a){var b,c=function(c,d){if(1==d.rubyState.tokenize.length&&!d.rubyState.context.prev){if(c.backUp(1),c.eatSpace())return d.rubyState=b,d.tokenize=a,a(c,d);c.next()}return k(c,d)};return function(a,d){return b=d.rubyState,d.rubyState=N.startState(),d.tokenize=c,k(a,d)}}function k(a,b){return N.token(a,b.rubyState)}function l(a,b){return a.match(/^\\$/)?"lineContinuation":m(a,b)}function m(a,b){return a.match(/^#\{/)?(b.tokenize=i("}",b.tokenize),null):d(a,b,/[^\\]#\{/,1,M.token(a,b.htmlState))}function n(a){return function(b,c){var d=l(b,c);return b.eol()&&(c.tokenize=a),d}}function o(a,b,c){return b.stack={parent:b.stack,style:"html",indented:a.column()+c,tokenize:b.line},b.line=b.tokenize=m,null}function p(a,b){return a.skipToEnd(),b.stack.style}function q(a,b){return b.stack={parent:b.stack,style:"comment",indented:b.indented+1,tokenize:b.line},b.line=p,p(a,b)}function r(a,b){return a.eat(b.stack.endQuote)?(b.line=b.stack.line,b.tokenize=b.stack.tokenize,b.stack=b.stack.parent,null):a.match(X)?(b.tokenize=s,"slimAttribute"):(a.next(),null)}function s(a,b){return a.match(/^==?/)?(b.tokenize=t,null):r(a,b)}function t(a,b){var c=a.peek();return'"'==c||"'"==c?(b.tokenize=K(c,"string",!0,!1,r),a.next(),b.tokenize(a,b)):"["==c?j(r)(a,b):a.match(/^(true|false|nil)\b/)?(b.tokenize=r,"keyword"):j(r)(a,b)}function u(a,b,c){return a.stack={parent:a.stack,style:"wrapper",indented:a.indented+1,tokenize:c,line:a.line,endQuote:b},a.line=a.tokenize=r,null}function v(b,c){if(b.match(/^#\{/))return c.tokenize=i("}",c.tokenize),null;var d=new a.StringStream(b.string.slice(c.stack.indented),b.tabSize);d.pos=b.pos-c.stack.indented,d.start=b.start-c.stack.indented,d.lastColumnPos=b.lastColumnPos-c.stack.indented,d.lastColumnValue=b.lastColumnValue-c.stack.indented;var e=c.subMode.token(d,c.subState);return b.pos=d.pos+c.stack.indented,e}function w(a,b){return b.stack.indented=a.column(),b.line=b.tokenize=v,b.tokenize(a,b)}function x(c){var d=P[c],e=a.mimeModes[d];if(e)return a.getMode(b,e);var f=a.modes[d];return f?f(b,{name:d}):a.getMode(b,"null")}function y(a){return O.hasOwnProperty(a)?O[a]:O[a]=x(a)}function z(a,b){var c=y(a),d=c.startState&&c.startState();return b.subMode=c,b.subState=d,b.stack={parent:b.stack,style:"sub",indented:b.indented+1,tokenize:b.line},b.line=b.tokenize=w,"slimSubmode"}function A(a,b){return a.skipToEnd(),"slimDoctype"}function B(a,b){var c=a.peek();if("<"==c)return(b.tokenize=n(b.tokenize))(a,b);if(a.match(/^[|']/))return o(a,b,1);if(a.match(/^\/(!|\[\w+])?/))return q(a,b);if(a.match(/^(-|==?[<>]?)/))return b.tokenize=g(a.column(),h(a.column(),k)),"slimSwitch";if(a.match(/^doctype\b/))return b.tokenize=A,"keyword";var d=a.match(Q);return d?z(d[1],b):D(a,b)}function C(a,b){return b.startOfLine?B(a,b):D(a,b)}function D(a,b){return a.eat("*")?(b.tokenize=j(E),null):a.match(V)?(b.tokenize=E,"slimTag"):F(a,b)}function E(a,b){return a.match(/^(<>?|><?)/)?(b.tokenize=F,null):F(a,b)}function F(a,b){return a.match(Z)?(b.tokenize=F,"slimId"):a.match(Y)?(b.tokenize=F,"slimClass"):G(a,b)}function G(a,b){return a.match(/^([\[\{\(])/)?u(b,S[RegExp.$1],G):a.match(W)?(b.tokenize=H,"slimAttribute"):"*"==a.peek()?(a.next(),b.tokenize=j(L),null):L(a,b)}function H(a,b){return a.match(/^==?/)?(b.tokenize=I,null):G(a,b)}function I(a,b){var c=a.peek();return'"'==c||"'"==c?(b.tokenize=K(c,"string",!0,!1,G),a.next(),b.tokenize(a,b)):"["==c?j(G)(a,b):":"==c?j(J)(a,b):a.match(/^(true|false|nil)\b/)?(b.tokenize=G,"keyword"):j(G)(a,b)}function J(a,b){return a.backUp(1),a.match(/^[^\s],(?=:)/)?(b.tokenize=j(J),null):(a.next(),G(a,b))}function K(a,b,c,d,g){return function(h,j){f(j);var k=0==h.current().length;if(h.match(/^\\$/,k))return k?(e(j,j.indented),"lineContinuation"):b;if(h.match(/^#\{/,k))return k?(j.tokenize=i("}",j.tokenize),null):b;for(var l,m=!1;null!=(l=h.next());){if(l==a&&(d||!m)){j.tokenize=g;break}if(c&&"#"==l&&!m&&h.eat("{")){h.backUp(2);break}m=!m&&"\\"==l}return h.eol()&&m&&h.backUp(1),b}}function L(a,b){return a.match(/^==?/)?(b.tokenize=k,"slimSwitch"):a.match(/^\/$/)?(b.tokenize=C,null):a.match(/^:/)?(b.tokenize=D,"slimSwitch"):(o(a,b,0),b.tokenize(a,b))}var M=a.getMode(b,{name:"htmlmixed"}),N=a.getMode(b,"ruby"),O={html:M,ruby:N},P={ruby:"ruby",javascript:"javascript",css:"text/css",sass:"text/x-sass",scss:"text/x-scss",less:"text/x-less",styl:"text/x-styl",coffee:"coffeescript",asciidoc:"text/x-asciidoc",markdown:"text/x-markdown",textile:"text/x-textile",creole:"text/x-creole",wiki:"text/x-wiki",mediawiki:"text/x-mediawiki",rdoc:"text/x-rdoc",builder:"text/x-builder",nokogiri:"text/x-nokogiri",erb:"application/x-erb"},Q=function(a){var b=[];for(var c in a)b.push(c);return new RegExp("^("+b.join("|")+"):")}(P),R={commentLine:"comment",slimSwitch:"operator special",slimTag:"tag",slimId:"attribute def",slimClass:"attribute qualifier",
slimAttribute:"attribute",slimSubmode:"keyword special",closeAttributeTag:null,slimDoctype:null,lineContinuation:null},S={"{":"}","[":"]","(":")"},T="_a-zA-ZÃ€-Ã–Ã˜-Ã¶Ã¸-Ë¿Í°-Í½Í¿-á¿¿â€Œ-â€â°-â†â°€-â¿¯ã€-íŸ¿ï¤€-ï·ï·°-ï¿½",U=T+"\\-0-9Â·Ì€-Í¯â€¿-â€",V=new RegExp("^[:"+T+"](?::["+U+"]|["+U+"]*)"),W=new RegExp("^[:"+T+"][:\\."+U+"]*(?=\\s*=)"),X=new RegExp("^[:"+T+"][:\\."+U+"]*"),Y=/^\.-?[_a-zA-Z]+[\w\-]*/,Z=/^#[_a-zA-Z]+[\w\-]*/,$={startState:function(){var a=M.startState(),b=N.startState();return{htmlState:a,rubyState:b,stack:null,last:null,tokenize:C,line:C,indented:0}},copyState:function(b){return{htmlState:a.copyState(M,b.htmlState),rubyState:a.copyState(N,b.rubyState),subMode:b.subMode,subState:b.subMode&&a.copyState(b.subMode,b.subState),stack:b.stack,last:b.last,tokenize:b.tokenize,line:b.line}},token:function(a,b){if(a.sol())for(b.indented=a.indentation(),b.startOfLine=!0,b.tokenize=b.line;b.stack&&b.stack.indented>b.indented&&"slimSubmode"!=b.last;)b.line=b.tokenize=b.stack.tokenize,b.stack=b.stack.parent,b.subMode=null,b.subState=null;if(a.eatSpace())return null;var c=b.tokenize(a,b);return b.startOfLine=!1,c&&(b.last=c),R.hasOwnProperty(c)?R[c]:c},blankLine:function(a){return a.subMode&&a.subMode.blankLine?a.subMode.blankLine(a.subState):void 0},innerMode:function(a){return a.subMode?{state:a.subState,mode:a.subMode}:{state:a,mode:$}}};return $},"htmlmixed","ruby"),a.defineMIME("text/x-slim","slim"),a.defineMIME("application/x-slim","slim")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("sql",function(b,c){function d(a,b){var c=a.next();if(o[c]){var d=o[c](a,b);if(d!==!1)return d}if(1==n.hexNumber&&("0"==c&&a.match(/^[xX][0-9a-fA-F]+/)||("x"==c||"X"==c)&&a.match(/^'[0-9a-fA-F]+'/)))return"number";if(1==n.binaryNumber&&(("b"==c||"B"==c)&&a.match(/^'[01]+'/)||"0"==c&&a.match(/^b[01]+/)))return"number";if(c.charCodeAt(0)>47&&c.charCodeAt(0)<58)return a.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/),1==n.decimallessFloat&&a.eat("."),"number";if("?"==c&&(a.eatSpace()||a.eol()||a.eat(";")))return"variable-3";if("'"==c||'"'==c&&n.doubleQuote)return b.tokenize=e(c),b.tokenize(a,b);if((1==n.nCharCast&&("n"==c||"N"==c)||1==n.charsetCast&&"_"==c&&a.match(/[a-z][a-z0-9]*/i))&&("'"==a.peek()||'"'==a.peek()))return"keyword";if(/^[\(\),\;\[\]]/.test(c))return null;if(n.commentSlashSlash&&"/"==c&&a.eat("/"))return a.skipToEnd(),"comment";if(n.commentHash&&"#"==c||"-"==c&&a.eat("-")&&(!n.commentSpaceRequired||a.eat(" ")))return a.skipToEnd(),"comment";if("/"==c&&a.eat("*"))return b.tokenize=f,b.tokenize(a,b);if("."!=c){if(m.test(c))return a.eatWhile(m),null;if("{"==c&&(a.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||a.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";a.eatWhile(/^[_\w\d]/);var g=a.current().toLowerCase();return p.hasOwnProperty(g)&&(a.match(/^( )+'[^']*'/)||a.match(/^( )+"[^"]*"/))?"number":j.hasOwnProperty(g)?"atom":k.hasOwnProperty(g)?"builtin":l.hasOwnProperty(g)?"keyword":i.hasOwnProperty(g)?"string-2":null}return 1==n.zerolessFloat&&a.match(/^(?:\d+(?:e[+-]?\d+)?)/i)?"number":1==n.ODBCdotTable&&a.match(/^[a-zA-Z_]+/)?"variable-2":void 0}function e(a){return function(b,c){for(var e,f=!1;null!=(e=b.next());){if(e==a&&!f){c.tokenize=d;break}f=!f&&"\\"==e}return"string"}}function f(a,b){for(;;){if(!a.skipTo("*")){a.skipToEnd();break}if(a.next(),a.eat("/")){b.tokenize=d;break}}return"comment"}function g(a,b,c){b.context={prev:b.context,indent:a.indentation(),col:a.column(),type:c}}function h(a){a.indent=a.context.indent,a.context=a.context.prev}var i=c.client||{},j=c.atoms||{"false":!0,"true":!0,"null":!0},k=c.builtin||{},l=c.keywords||{},m=c.operatorChars||/^[*+\-%<>!=&|~^]/,n=c.support||{},o=c.hooks||{},p=c.dateSQL||{date:!0,time:!0,timestamp:!0};return{startState:function(){return{tokenize:d,context:null}},token:function(a,b){if(a.sol()&&b.context&&null==b.context.align&&(b.context.align=!1),a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==c)return c;b.context&&null==b.context.align&&(b.context.align=!0);var d=a.current();return"("==d?g(a,b,")"):"["==d?g(a,b,"]"):b.context&&b.context.type==d&&h(b),c},indent:function(c,d){var e=c.context;if(!e)return a.Pass;var f=d.charAt(0)==e.type;return e.align?e.col+(f?0:1):e.indent+(f?0:b.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:n.commentSlashSlash?"//":n.commentHash?"#":null}}),function(){function b(a){for(var b;null!=(b=a.next());)if("`"==b&&!a.eat("`"))return"variable-2";return a.backUp(a.current().length-1),a.eatWhile(/\w/)?"variable-2":null}function c(a){return a.eat("@")&&(a.match(/^session\./),a.match(/^local\./),a.match(/^global\./)),a.eat("'")?(a.match(/^.*'/),"variable-2"):a.eat('"')?(a.match(/^.*"/),"variable-2"):a.eat("`")?(a.match(/^.*`/),"variable-2"):a.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function d(a){return a.eat("N")?"atom":a.match(/^[a-zA-Z.#!?]/)?"variable-2":null}function e(a){for(var b={},c=a.split(" "),d=0;d<c.length;++d)b[c[d]]=!0;return b}var f="alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit ";a.defineMIME("text/x-sql",{name:"sql",keywords:e(f+"begin"),builtin:e("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),atoms:e("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:e("date time timestamp"),support:e("ODBCdotTable doubleQuote binaryNumber hexNumber")}),a.defineMIME("text/x-mssql",{name:"sql",client:e("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:e(f+"begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered declare"),builtin:e("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:e("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:e("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":c}}),a.defineMIME("text/x-mysql",{name:"sql",client:e("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:e(f+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group group_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:e("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:e("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:e("date time timestamp"),support:e("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":c,"`":b,"\\":d}}),a.defineMIME("text/x-mariadb",{name:"sql",client:e("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:e(f+"accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:e("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:e("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:e("date time timestamp"),support:e("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":c,"`":b,"\\":d}}),a.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:e("add all allow alter and any apply as asc authorize batch begin by clustering columnfamily compact consistency count create custom delete desc distinct drop each_quorum exists filtering from grant if in index insert into key keyspace keyspaces level limit local_one local_quorum modify nan norecursive nosuperuser not of on one order password permission permissions primary quorum rename revoke schema select set storage superuser table three to token truncate ttl two type unlogged update use user users using values where with writetime"),builtin:e("ascii bigint blob boolean counter decimal double float frozen inet int list map static text timestamp timeuuid tuple uuid varchar varint"),atoms:e("false true infinity NaN"),operatorChars:/^[<>=]/,dateSQL:{},support:e("commentSlashSlash decimallessFloat"),hooks:{}}),a.defineMIME("text/x-plsql",{name:"sql",client:e("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),keywords:e("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),builtin:e("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least length lengthb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),operatorChars:/^[*+\-%<>!=~]/,dateSQL:e("date time timestamp"),support:e("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")}),a.defineMIME("text/x-hive",{name:"sql",keywords:e("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external false fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger true unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with"),builtin:e("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype"),atoms:e("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:e("date timestamp"),support:e("ODBCdotTable doubleQuote binaryNumber hexNumber")}),a.defineMIME("text/x-pgsql",{name:"sql",client:e("source"),keywords:e(f+"a abort abs absent absolute access according action ada add admin after aggregate all allocate also always analyse analyze any are array array_agg array_max_cardinality asensitive assertion assignment asymmetric at atomic attribute attributes authorization avg backward base64 before begin begin_frame begin_partition bernoulli binary bit_length blob blocked bom both breadth c cache call called cardinality cascade cascaded case cast catalog catalog_name ceil ceiling chain characteristics characters character_length character_set_catalog character_set_name character_set_schema char_length check checkpoint class class_origin clob close cluster coalesce cobol collate collation collation_catalog collation_name collation_schema collect column columns column_name command_function command_function_code comment comments commit committed concurrently condition condition_number configuration conflict connect connection connection_name constraint constraints constraint_catalog constraint_name constraint_schema constructor contains content continue control conversion convert copy corr corresponding cost covar_pop covar_samp cross csv cube cume_dist current current_catalog current_date current_default_transform_group current_path current_role current_row current_schema current_time current_timestamp current_transform_group_for_type current_user cursor cursor_name cycle data database datalink datetime_interval_code datetime_interval_precision day db deallocate dec declare default defaults deferrable deferred defined definer degree delimiter delimiters dense_rank depth deref derived describe descriptor deterministic diagnostics dictionary disable discard disconnect dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue do document domain dynamic dynamic_function dynamic_function_code each element else empty enable encoding encrypted end end-exec end_frame end_partition enforced enum equals escape event every except exception exclude excluding exclusive exec execute exists exp explain expression extension external extract false family fetch file filter final first first_value flag float floor following for force foreign fortran forward found frame_row free freeze fs full function functions fusion g general generated get global go goto grant granted greatest grouping groups handler header hex hierarchy hold hour id identity if ignore ilike immediate immediately immutable implementation implicit import including increment indent index indexes indicator inherit inherits initially inline inner inout input insensitive instance instantiable instead integrity intersect intersection invoker isnull isolation k key key_member key_type label lag language large last last_value lateral lead leading leakproof least left length level library like_regex link listen ln load local localtime localtimestamp location locator lock locked logged lower m map mapping match matched materialized max maxvalue max_cardinality member merge message_length message_octet_length message_text method min minute minvalue mod mode modifies module month more move multiset mumps name names namespace national natural nchar nclob nesting new next nfc nfd nfkc nfkd nil no none normalize normalized nothing notify notnull nowait nth_value ntile null nullable nullif nulls number object occurrences_regex octets octet_length of off offset oids old only open operator option options ordering ordinality others out outer output over overlaps overlay overriding owned owner p pad parameter parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partial partition pascal passing passthrough password percent percentile_cont percentile_disc percent_rank period permission placing plans pli policy portion position position_regex power precedes preceding prepare prepared preserve primary prior privileges procedural procedure program public quote range rank read reads reassign recheck recovery recursive ref references referencing refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex relative release rename repeatable replace replica requiring reset respect restart restore restrict result return returned_cardinality returned_length returned_octet_length returned_sqlstate returning returns revoke right role rollback rollup routine routine_catalog routine_name routine_schema row rows row_count row_number rule savepoint scale schema schema_name scope scope_catalog scope_name scope_schema scroll search second section security selective self sensitive sequence sequences serializable server server_name session session_user setof sets share show similar simple size skip snapshot some source space specific specifictype specific_name sql sqlcode sqlerror sqlexception sqlstate sqlwarning sqrt stable standalone start state statement static statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset substring substring_regex succeeds sum symmetric sysid system system_time system_user t tables tablesample tablespace table_name temp template temporary then ties timezone_hour timezone_minute to token top_level_count trailing transaction transactions_committed transactions_rolled_back transaction_active transform transforms translate translate_regex translation treat trigger trigger_catalog trigger_name trigger_schema trim trim_array true truncate trusted type types uescape unbounded uncommitted under unencrypted unique unknown unlink unlisten unlogged unnamed unnest until untyped upper uri usage user user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema using vacuum valid validate validator value value_of varbinary variadic var_pop var_samp verbose version versioning view views volatile when whenever whitespace width_bucket window within work wrapper write xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate year yes loop repeat"),builtin:e("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float8 inet integer int int4 interval json jsonb line lseg macaddr money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),atoms:e("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:e("date time timestamp"),support:e("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast commentHash commentSpaceRequired")}),a.defineMIME("text/x-gql",{name:"sql",keywords:e("ancestor and asc by contains desc descendant distinct from group has in is limit offset on order select superset where"),atoms:e("false true"),builtin:e("blob datetime first key string integer double boolean null"),operatorChars:/^[*+\-%<>!=]/})}()}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";var b={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},c={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};a.defineMode("xml",function(d,e){function f(a,b){function c(c){return b.tokenize=c,c(a,b)}var d=a.next();if("<"==d)return a.eat("!")?a.eat("[")?a.match("CDATA[")?c(i("atom","]]>")):null:a.match("--")?c(i("comment","-->")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(j(1))):null:a.eat("?")?(a.eatWhile(/[\w\._\-]/),b.tokenize=i("meta","?>"),"meta"):(A=a.eat("/")?"closeTag":"openTag",b.tokenize=g,"tag bracket");if("&"==d){var e;return e=a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"),e?"atom":"error"}return a.eatWhile(/[^&<]/),null}function g(a,b){var c=a.next();if(">"==c||"/"==c&&a.eat(">"))return b.tokenize=f,A=">"==c?"endTag":"selfcloseTag","tag bracket";if("="==c)return A="equals",null;if("<"==c){b.tokenize=f,b.state=n,b.tagName=b.tagStart=null;var d=b.tokenize(a,b);return d?d+" tag error":"tag error"}return/[\'\"]/.test(c)?(b.tokenize=h(c),b.stringStartCol=a.column(),b.tokenize(a,b)):(a.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function h(a){var b=function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=g;break}return"string"};return b.isInAttribute=!0,b}function i(a,b){return function(c,d){for(;!c.eol();){if(c.match(b)){d.tokenize=f;break}c.next()}return a}}function j(a){return function(b,c){for(var d;null!=(d=b.next());){if("<"==d)return c.tokenize=j(a+1),c.tokenize(b,c);if(">"==d){if(1==a){c.tokenize=f;break}return c.tokenize=j(a-1),c.tokenize(b,c)}}return"meta"}}function k(a,b,c){this.prev=a.context,this.tagName=b,this.indent=a.indented,this.startOfLine=c,(x.doNotIndent.hasOwnProperty(b)||a.context&&a.context.noIndent)&&(this.noIndent=!0)}function l(a){a.context&&(a.context=a.context.prev)}function m(a,b){for(var c;;){if(!a.context)return;if(c=a.context.tagName,!x.contextGrabbers.hasOwnProperty(c)||!x.contextGrabbers[c].hasOwnProperty(b))return;l(a)}}function n(a,b,c){return"openTag"==a?(c.tagStart=b.column(),o):"closeTag"==a?p:n}function o(a,b,c){return"word"==a?(c.tagName=b.current(),B="tag",s):(B="error",o)}function p(a,b,c){if("word"==a){var d=b.current();return c.context&&c.context.tagName!=d&&x.implicitlyClosed.hasOwnProperty(c.context.tagName)&&l(c),c.context&&c.context.tagName==d||x.matchClosing===!1?(B="tag",q):(B="tag error",r)}return B="error",r}function q(a,b,c){return"endTag"!=a?(B="error",q):(l(c),n)}function r(a,b,c){return B="error",q(a,b,c)}function s(a,b,c){if("word"==a)return B="attribute",t;if("endTag"==a||"selfcloseTag"==a){var d=c.tagName,e=c.tagStart;return c.tagName=c.tagStart=null,"selfcloseTag"==a||x.autoSelfClosers.hasOwnProperty(d)?m(c,d):(m(c,d),c.context=new k(c,d,e==c.indented)),n}return B="error",s}function t(a,b,c){return"equals"==a?u:(x.allowMissing||(B="error"),s(a,b,c))}function u(a,b,c){return"string"==a?v:"word"==a&&x.allowUnquoted?(B="string",s):(B="error",s(a,b,c))}function v(a,b,c){return"string"==a?v:s(a,b,c)}var w=d.indentUnit,x={},y=e.htmlMode?b:c;for(var z in y)x[z]=y[z];for(var z in e)x[z]=e[z];var A,B;return f.isInText=!0,{startState:function(a){var b={tokenize:f,state:n,indented:a||0,
tagName:null,tagStart:null,context:null};return null!=a&&(b.baseIndent=a),b},token:function(a,b){if(!b.tagName&&a.sol()&&(b.indented=a.indentation()),a.eatSpace())return null;A=null;var c=b.tokenize(a,b);return(c||A)&&"comment"!=c&&(B=null,b.state=b.state(A||c,a,b),B&&(c="error"==B?c+" error":B)),c},indent:function(b,c,d){var e=b.context;if(b.tokenize.isInAttribute)return b.tagStart==b.indented?b.stringStartCol+1:b.indented+w;if(e&&e.noIndent)return a.Pass;if(b.tokenize!=g&&b.tokenize!=f)return d?d.match(/^(\s*)/)[0].length:0;if(b.tagName)return x.multilineTagIndentPastTag!==!1?b.tagStart+b.tagName.length+2:b.tagStart+w*(x.multilineTagIndentFactor||1);if(x.alignCDATA&&/<!\[CDATA\[/.test(c))return 0;var h=c&&/^<(\/)?([\w_:\.-]*)/.exec(c);if(h&&h[1])for(;e;){if(e.tagName==h[2]){e=e.prev;break}if(!x.implicitlyClosed.hasOwnProperty(e.tagName))break;e=e.prev}else if(h)for(;e;){var i=x.contextGrabbers[e.tagName];if(!i||!i.hasOwnProperty(h[2]))break;e=e.prev}for(;e&&e.prev&&!e.startOfLine;)e=e.prev;return e?e.indent+w:b.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:x.htmlMode?"html":"xml",helperType:x.htmlMode?"html":"xml",skipAttribute:function(a){a.state==u&&(a.state=s)}}}),a.defineMIME("text/xml","xml"),a.defineMIME("application/xml","xml"),a.mimeModes.hasOwnProperty("text/html")||a.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("yaml",function(){var a=["true","false","on","off","yes","no"],b=new RegExp("\\b(("+a.join(")|(")+"))$","i");return{token:function(a,c){var d=a.peek(),e=c.escaped;if(c.escaped=!1,"#"==d&&(0==a.pos||/\s/.test(a.string.charAt(a.pos-1))))return a.skipToEnd(),"comment";if(a.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(c.literal&&a.indentation()>c.keyCol)return a.skipToEnd(),"string";if(c.literal&&(c.literal=!1),a.sol()){if(c.keyCol=0,c.pair=!1,c.pairStart=!1,a.match(/---/))return"def";if(a.match(/\.\.\./))return"def";if(a.match(/\s*-\s+/))return"meta"}if(a.match(/^(\{|\}|\[|\])/))return"{"==d?c.inlinePairs++:"}"==d?c.inlinePairs--:"["==d?c.inlineList++:c.inlineList--,"meta";if(c.inlineList>0&&!e&&","==d)return a.next(),"meta";if(c.inlinePairs>0&&!e&&","==d)return c.keyCol=0,c.pair=!1,c.pairStart=!1,a.next(),"meta";if(c.pairStart){if(a.match(/^\s*(\||\>)\s*/))return c.literal=!0,"meta";if(a.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(0==c.inlinePairs&&a.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(c.inlinePairs>0&&a.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(a.match(b))return"keyword"}return!c.pair&&a.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(c.pair=!0,c.keyCol=a.indentation(),"atom"):c.pair&&a.match(/^:\s*/)?(c.pairStart=!0,"meta"):(c.pairStart=!1,c.escaped="\\"==d,a.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}}}}),a.defineMIME("text/x-yaml","yaml")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){function b(a,b){return"pairs"==b&&"string"==typeof a?a:"object"==typeof a&&null!=a[b]?a[b]:l[b]}function c(a){return function(b){return h(b,a)}}function d(a){var b=a.state.closeBrackets;if(!b)return null;var c=a.getModeAt(a.getCursor());return c.closeBrackets||b}function e(c){var e=d(c);if(!e||c.getOption("disableInput"))return a.Pass;for(var f=b(e,"pairs"),g=c.listSelections(),h=0;h<g.length;h++){if(!g[h].empty())return a.Pass;var i=j(c,g[h].head);if(!i||f.indexOf(i)%2!=0)return a.Pass}for(var h=g.length-1;h>=0;h--){var k=g[h].head;c.replaceRange("",m(k.line,k.ch-1),m(k.line,k.ch+1),"+delete")}}function f(c){var e=d(c),f=e&&b(e,"explode");if(!f||c.getOption("disableInput"))return a.Pass;for(var g=c.listSelections(),h=0;h<g.length;h++){if(!g[h].empty())return a.Pass;var i=j(c,g[h].head);if(!i||f.indexOf(i)%2!=0)return a.Pass}c.operation(function(){c.replaceSelection("\n\n",null),c.execCommand("goCharLeft"),g=c.listSelections();for(var a=0;a<g.length;a++){var b=g[a].head.line;c.indentLine(b,null,!0),c.indentLine(b+1,null,!0)}})}function g(b){var c=a.cmpPos(b.anchor,b.head)>0;return{anchor:new m(b.anchor.line,b.anchor.ch+(c?-1:1)),head:new m(b.head.line,b.head.ch+(c?1:-1))}}function h(c,e){var f=d(c);if(!f||c.getOption("disableInput"))return a.Pass;var h=b(f,"pairs"),j=h.indexOf(e);if(-1==j)return a.Pass;for(var l,n,o=b(f,"triples"),p=h.charAt(j+1)==e,q=c.listSelections(),r=j%2==0,s=0;s<q.length;s++){var t,u=q[s],v=u.head,n=c.getRange(v,m(v.line,v.ch+1));if(r&&!u.empty())t="surround";else if(!p&&r||n!=e)if(p&&v.ch>1&&o.indexOf(e)>=0&&c.getRange(m(v.line,v.ch-2),v)==e+e&&(v.ch<=2||c.getRange(m(v.line,v.ch-3),m(v.line,v.ch-2))!=e))t="addFour";else if(p){if(a.isWordChar(n)||!k(c,v,e))return a.Pass;t="both"}else{if(!r||c.getLine(v.line).length!=v.ch&&!i(n,h)&&!/\s/.test(n))return a.Pass;t="both"}else t=o.indexOf(e)>=0&&c.getRange(v,m(v.line,v.ch+3))==e+e+e?"skipThree":"skip";if(l){if(l!=t)return a.Pass}else l=t}var w=j%2?h.charAt(j-1):e,x=j%2?e:h.charAt(j+1);c.operation(function(){if("skip"==l)c.execCommand("goCharRight");else if("skipThree"==l)for(var a=0;3>a;a++)c.execCommand("goCharRight");else if("surround"==l){for(var b=c.getSelections(),a=0;a<b.length;a++)b[a]=w+b[a]+x;c.replaceSelections(b,"around"),b=c.listSelections().slice();for(var a=0;a<b.length;a++)b[a]=g(b[a]);c.setSelections(b)}else"both"==l?(c.replaceSelection(w+x,null),c.triggerElectric(w+x),c.execCommand("goCharLeft")):"addFour"==l&&(c.replaceSelection(w+w+w+w,"before"),c.execCommand("goCharRight"))})}function i(a,b){var c=b.lastIndexOf(a);return c>-1&&c%2==1}function j(a,b){var c=a.getRange(m(b.line,b.ch-1),m(b.line,b.ch+1));return 2==c.length?c:null}function k(b,c,d){var e=b.getLine(c.line),f=b.getTokenAt(c);if(/\bstring2?\b/.test(f.type))return!1;var g=new a.StringStream(e.slice(0,c.ch)+d+e.slice(c.ch),4);for(g.pos=g.start=f.start;;){var h=b.getMode().token(g,f.state);if(g.pos>=c.ch+1)return/\bstring2?\b/.test(h);g.start=g.pos}}var l={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},m=a.Pos;a.defineOption("autoCloseBrackets",!1,function(b,c,d){d&&d!=a.Init&&(b.removeKeyMap(o),b.state.closeBrackets=null),c&&(b.state.closeBrackets=c,b.addKeyMap(o))});for(var n=l.pairs+"`",o={Backspace:e,Enter:f},p=0;p<n.length;p++)o["'"+n.charAt(p)+"'"]=c(n.charAt(p))}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../../mode/css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../../mode/css/css"],a):a(CodeMirror)}(function(a){"use strict";var b={link:1,visited:1,active:1,hover:1,focus:1,"first-letter":1,"first-line":1,"first-child":1,before:1,after:1,lang:1};a.registerHelper("hint","css",function(c){function d(a){for(var b in a)j&&0!=b.lastIndexOf(j,0)||l.push(b)}var e=c.getCursor(),f=c.getTokenAt(e),g=a.innerMode(c.getMode(),f.state);if("css"==g.mode.name){if("keyword"==f.type&&0=="!important".indexOf(f.string))return{list:["!important"],from:a.Pos(e.line,f.start),to:a.Pos(e.line,f.end)};var h=f.start,i=e.ch,j=f.string.slice(0,i-h);/[^\w$_-]/.test(j)&&(j="",h=i=e.ch);var k=a.resolveMode("text/css"),l=[],m=g.state.state;return"pseudo"==m||"variable-3"==f.type?d(b):"block"==m||"maybeprop"==m?d(k.propertyKeywords):"prop"==m||"parens"==m||"at"==m||"params"==m?(d(k.valueKeywords),d(k.colorKeywords)):("media"==m||"media_parens"==m)&&(d(k.mediaTypes),d(k.mediaFeatures)),l.length?{list:l,from:a.Pos(e.line,h),to:a.Pos(e.line,i)}:void 0}})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("./xml-hint")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./xml-hint"],a):a(CodeMirror)}(function(a){"use strict";function b(a){for(var b in l)l.hasOwnProperty(b)&&(a.attrs[b]=l[b])}function c(b,c){var d={schemaInfo:k};if(c)for(var e in c)d[e]=c[e];return a.hint.xml(b,d)}var d="ab aa af ak sq am ar an hy as av ae ay az bm ba eu be bn bh bi bs br bg my ca ch ce ny zh cv kw co cr hr cs da dv nl dz en eo et ee fo fj fi fr ff gl ka de el gn gu ht ha he hz hi ho hu ia id ie ga ig ik io is it iu ja jv kl kn kr ks kk km ki rw ky kv kg ko ku kj la lb lg li ln lo lt lu lv gv mk mg ms ml mt mi mr mh mn na nv nb nd ne ng nn no ii nr oc oj cu om or os pa pi fa pl ps pt qu rm rn ro ru sa sc sd se sm sg sr gd sn si sk sl so st es su sw ss sv ta te tg th ti bo tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa cy wo fy xh yi yo za zu".split(" "),e=["_blank","_self","_top","_parent"],f=["ascii","utf-8","utf-16","latin1","latin1"],g=["get","post","put","delete"],h=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],i=["all","screen","print","embossed","braille","handheld","print","projection","screen","tty","tv","speech","3d-glasses","resolution [>][<][=] [X]","device-aspect-ratio: X/Y","orientation:portrait","orientation:landscape","device-height: [X]","device-width: [X]"],j={attrs:{}},k={a:{attrs:{href:null,ping:null,type:null,media:i,target:e,hreflang:d}},abbr:j,acronym:j,address:j,applet:j,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:i,hreflang:d,type:null,shape:["default","rect","circle","poly"]}},article:j,aside:j,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["","autoplay"],loop:["","loop"],controls:["","controls"]}},b:j,base:{attrs:{href:null,target:e}},basefont:j,bdi:j,bdo:j,big:j,blockquote:{attrs:{cite:null}},body:j,br:j,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["","autofocus"],disabled:["","autofocus"],formenctype:h,formmethod:g,formnovalidate:["","novalidate"],formtarget:e,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:j,center:j,cite:j,code:j,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["","disabled"],checked:["","checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["","disabled"],multiple:["","multiple"]}},datalist:{attrs:{data:null}},dd:j,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["","open"]}},dfn:j,dir:j,div:j,dl:j,dt:j,em:j,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["","disabled"],form:null,name:null}},figcaption:j,figure:j,font:j,footer:j,form:{attrs:{action:null,name:null,"accept-charset":f,autocomplete:["on","off"],enctype:h,method:g,novalidate:["","novalidate"],target:e}},frame:j,frameset:j,h1:j,h2:j,h3:j,h4:j,h5:j,h6:j,head:{attrs:{},children:["title","base","link","style","meta","script","noscript","command"]},header:j,hgroup:j,hr:j,html:{attrs:{manifest:null},children:["head","body"]},i:j,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["","seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["","autofocus"],checked:["","checked"],disabled:["","disabled"],formenctype:h,formmethod:g,formnovalidate:["","novalidate"],formtarget:e,multiple:["","multiple"],readonly:["","readonly"],required:["","required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:j,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["","autofocus"],disabled:["","disabled"],keytype:["RSA"]}},label:{attrs:{"for":null,form:null}},legend:j,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:d,media:i,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:j,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:f,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:j,noframes:j,noscript:j,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["","typemustmatch"]}},ol:{attrs:{reversed:["","reversed"],start:null,type:["1","a","A","i","I"]}},optgroup:{attrs:{disabled:["","disabled"],label:null}},option:{attrs:{disabled:["","disabled"],label:null,selected:["","selected"],value:null}},output:{attrs:{"for":null,form:null,name:null}},p:j,param:{attrs:{name:null,value:null}},pre:j,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:j,rt:j,ruby:j,s:j,samp:j,script:{attrs:{type:["text/javascript"],src:null,async:["","async"],defer:["","defer"],charset:f}},section:j,select:{attrs:{form:null,name:null,size:null,autofocus:["","autofocus"],disabled:["","disabled"],multiple:["","multiple"]}},small:j,source:{attrs:{src:null,type:null,media:null}},span:j,strike:j,strong:j,style:{attrs:{type:["text/css"],media:i,scoped:null}},sub:j,summary:j,sup:j,table:j,tbody:j,td:{attrs:{colspan:null,rowspan:null,headers:null}},textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["","autofocus"],disabled:["","disabled"],readonly:["","readonly"],required:["","required"],wrap:["soft","hard"]}},tfoot:j,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:j,time:{attrs:{datetime:null}},title:j,tr:j,track:{attrs:{src:null,label:null,"default":null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:d}},tt:j,u:j,ul:j,"var":j,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["","autoplay"],mediagroup:["movie"],muted:["","muted"],controls:["","controls"]}},wbr:j},l={accesskey:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],"class":null,contenteditable:["true","false"],contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["en","es"],spellcheck:["true","false"],style:null,tabindex:["1","2","3","4","5","6","7","8","9"],title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"]};b(j);for(var m in k)k.hasOwnProperty(m)&&k[m]!=j&&b(k[m]);a.htmlSchema=k,a.registerHelper("hint","html",c)}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){function b(a,b){for(var c=0,d=a.length;d>c;++c)b(a[c])}function c(a,b){if(!Array.prototype.indexOf){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1}return-1!=a.indexOf(b)}function d(b,c,d,e){var f=b.getCursor(),g=d(b,f);if(!/\b(?:string|comment)\b/.test(g.type)){g.state=a.innerMode(b.getMode(),g.state).state,/^[\w$_]*$/.test(g.string)?g.end>f.ch&&(g.end=f.ch,g.string=g.string.slice(0,f.ch-g.start)):g={start:f.ch,end:f.ch,string:"",state:g.state,type:"."==g.string?"property":null};for(var j=g;"property"==j.type;){if(j=d(b,i(f.line,j.start)),"."!=j.string)return;if(j=d(b,i(f.line,j.start)),!k)var k=[];k.push(j)}return{list:h(g,k,c,e),from:i(f.line,g.start),to:i(f.line,g.end)}}}function e(a,b){return d(a,m,function(a,b){return a.getTokenAt(b)},b)}function f(a,b){var c=a.getTokenAt(b);return b.ch==c.start+1&&"."==c.string.charAt(0)?(c.end=c.start,c.string=".",c.type="property"):/^\.[\w$_]*$/.test(c.string)&&(c.type="property",c.start++,c.string=c.string.replace(/\./,"")),c}function g(a,b){return d(a,n,f,b)}function h(a,d,e,f){function g(a){0!=a.lastIndexOf(m,0)||c(i,a)||i.push(a)}function h(a){"string"==typeof a?b(j,g):a instanceof Array?b(k,g):a instanceof Function&&b(l,g);for(var c in a)g(c)}var i=[],m=a.string,n=f&&f.globalScope||window;if(d&&d.length){var o,p=d.pop();for(p.type&&0===p.type.indexOf("variable")?(f&&f.additionalContext&&(o=f.additionalContext[p.string]),f&&f.useGlobalScope===!1||(o=o||n[p.string])):"string"==p.type?o="":"atom"==p.type?o=1:"function"==p.type&&(null==n.jQuery||"$"!=p.string&&"jQuery"!=p.string||"function"!=typeof n.jQuery?null!=n._&&"_"==p.string&&"function"==typeof n._&&(o=n._()):o=n.jQuery());null!=o&&d.length;)o=o[d.pop().string];null!=o&&h(o)}else{for(var q=a.state.localVars;q;q=q.next)g(q.name);for(var q=a.state.globalVars;q;q=q.next)g(q.name);f&&f.useGlobalScope===!1||h(n),b(e,g)}return i}var i=a.Pos;a.registerHelper("hint","javascript",e),a.registerHelper("hint","coffeescript",g);var j="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),k="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),l="prototype apply call bind".split(" "),m="break case catch continue debugger default delete do else false finally for function if in instanceof new null return switch throw true try typeof var void while with".split(" "),n="and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(a,b){if(!window.JSHINT)return[];JSHINT(a,b,b.globals);var c=JSHINT.data().errors,d=[];return c&&f(c,d),d}function c(a){return d(a,h,"warning",!0),d(a,i,"error"),e(a)?null:a}function d(a,b,c,d){var e,f,g,h,i;e=a.description;for(var j=0;j<b.length;j++)f=b[j],g="string"==typeof f?f:f[0],h="string"==typeof f?null:f[1],i=-1!==e.indexOf(g),(d||i)&&(a.severity=c),i&&h&&(a.description=h)}function e(a){for(var b=a.description,c=0;c<g.length;c++)if(-1!==b.indexOf(g[c]))return!0;return!1}function f(b,d){for(var e=0;e<b.length;e++){var f=b[e];if(f){var g,h;if(g=[],f.evidence){var i=g[f.line];if(!i){var j=f.evidence;i=[],Array.prototype.forEach.call(j,function(a,b){"	"===a&&i.push(b+1)}),g[f.line]=i}if(i.length>0){var k=f.character;i.forEach(function(a){k>a&&(k-=1)}),f.character=k}}var l=f.character-1,m=l+1;f.evidence&&(h=f.evidence.substring(l).search(/.\b/),h>-1&&(m+=h)),f.description=f.reason,f.start=f.character,f.end=m,f=c(f),f&&d.push({message:f.description,severity:f.severity,from:a.Pos(f.line-1,l),to:a.Pos(f.line-1,m)})}}}var g=["Dangerous comment"],h=[["Expected '{'","Statement body should be inside '{ }' braces."]],i=["Missing semicolon","Extra comma","Missing property name","Unmatched "," and instead saw"," is not defined","Unclosed string","Stopping, unable to continue"];a.registerHelper("lint","javascript",b)}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(b,c){function d(b){return e.parentNode?(e.style.top=Math.max(0,b.clientY-e.offsetHeight-5)+"px",void(e.style.left=b.clientX+5+"px")):a.off(document,"mousemove",d)}var e=document.createElement("div");return e.className="CodeMirror-lint-tooltip",e.appendChild(c.cloneNode(!0)),document.body.appendChild(e),a.on(document,"mousemove",d),d(b),null!=e.style.opacity&&(e.style.opacity=1),e}function c(a){a.parentNode&&a.parentNode.removeChild(a)}function d(a){a.parentNode&&(null==a.style.opacity&&c(a),a.style.opacity=0,setTimeout(function(){c(a)},600))}function e(c,e,f){function g(){a.off(f,"mouseout",g),h&&(d(h),h=null)}var h=b(c,e),i=setInterval(function(){if(h)for(var a=f;;a=a.parentNode){if(a&&11==a.nodeType&&(a=a.host),a==document.body)return;if(!a){g();break}}return h?void 0:clearInterval(i)},400);a.on(f,"mouseout",g)}function f(a,b,c){this.marked=[],this.options=b,this.timeout=null,this.hasGutter=c,this.onMouseOver=function(b){r(a,b)},this.waitingFor=0}function g(a,b){return b instanceof Function?{getAnnotations:b}:(b&&b!==!0||(b={}),b)}function h(a){var b=a.state.lint;b.hasGutter&&a.clearGutter(s);for(var c=0;c<b.marked.length;++c)b.marked[c].clear();b.marked.length=0}function i(b,c,d,f){var g=document.createElement("div"),h=g;return g.className="CodeMirror-lint-marker-"+c,d&&(h=g.appendChild(document.createElement("div")),h.className="CodeMirror-lint-marker-multiple"),0!=f&&a.on(h,"mouseover",function(a){e(a,b,h)}),g}function j(a,b){return"error"==a?a:b}function k(a){for(var b=[],c=0;c<a.length;++c){var d=a[c],e=d.from.line;(b[e]||(b[e]=[])).push(d)}return b}function l(a){var b=a.severity;b||(b="error");var c=document.createElement("div");return c.className="CodeMirror-lint-message-"+b,c.appendChild(document.createTextNode(a.message)),c}function m(b,c,d){function e(){g=-1,b.off("change",e)}var f=b.state.lint,g=++f.waitingFor;b.on("change",e),c(b.getValue(),function(c,d){b.off("change",e),f.waitingFor==g&&(d&&c instanceof a&&(c=d),o(b,c))},d,b)}function n(b){var c=b.state.lint,d=c.options,e=d.options||d,f=d.getAnnotations||b.getHelper(a.Pos(0,0),"lint");f&&(d.async||f.async?m(b,f,e):o(b,f(b.getValue(),e,b)))}function o(a,b){h(a);for(var c=a.state.lint,d=c.options,e=k(b),f=0;f<e.length;++f){var g=e[f];if(g){for(var m=null,n=c.hasGutter&&document.createDocumentFragment(),o=0;o<g.length;++o){var p=g[o],q=p.severity;q||(q="error"),m=j(m,q),d.formatAnnotation&&(p=d.formatAnnotation(p)),c.hasGutter&&n.appendChild(l(p)),p.to&&c.marked.push(a.markText(p.from,p.to,{className:"CodeMirror-lint-mark-"+q,__annotation:p}))}c.hasGutter&&a.setGutterMarker(f,s,i(n,m,g.length>1,c.options.tooltips))}}d.onUpdateLinting&&d.onUpdateLinting(b,e,a)}function p(a){var b=a.state.lint;b&&(clearTimeout(b.timeout),b.timeout=setTimeout(function(){n(a)},b.options.delay||500))}function q(a,b){for(var c=b.target||b.srcElement,d=document.createDocumentFragment(),f=0;f<a.length;f++){var g=a[f];d.appendChild(l(g))}e(b,d,c)}function r(a,b){var c=b.target||b.srcElement;if(/\bCodeMirror-lint-mark-/.test(c.className)){for(var d=c.getBoundingClientRect(),e=(d.left+d.right)/2,f=(d.top+d.bottom)/2,g=a.findMarksAt(a.coordsChar({left:e,top:f},"client")),h=[],i=0;i<g.length;++i)h.push(g[i].__annotation);h.length&&q(h,b)}}var s="CodeMirror-lint-markers";a.defineOption("lint",!1,function(b,c,d){if(d&&d!=a.Init&&(h(b),b.state.lint.options.lintOnChange!==!1&&b.off("change",p),a.off(b.getWrapperElement(),"mouseover",b.state.lint.onMouseOver),clearTimeout(b.state.lint.timeout),delete b.state.lint),c){for(var e=b.getOption("gutters"),i=!1,j=0;j<e.length;++j)e[j]==s&&(i=!0);var k=b.state.lint=new f(b,g(b,c),i);k.options.lintOnChange!==!1&&b.on("change",p),0!=k.options.tooltips&&a.on(b.getWrapperElement(),"mouseover",k.onMouseOver),n(b)}}),a.defineExtension("performLint",function(){this.state.lint&&n(this)})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(a,b){this.cm=a,this.options=b,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var c=this;a.on("cursorActivity",this.activityFunc=function(){c.cursorActivity()})}function c(b,c){var d=a.cmpPos(c.from,b.from);return d>0&&b.to.ch-b.from.ch!=c.to.ch-c.from.ch}function d(a,b,c){var d=a.options.hintOptions,e={};for(var f in o)e[f]=o[f];if(d)for(var f in d)void 0!==d[f]&&(e[f]=d[f]);if(c)for(var f in c)void 0!==c[f]&&(e[f]=c[f]);return e.hint.resolve&&(e.hint=e.hint.resolve(a,b)),e}function e(a){return"string"==typeof a?a:a.text}function f(a,b){function c(a,c){var e;e="string"!=typeof c?function(a){return c(a,b)}:d.hasOwnProperty(c)?d[c]:c,f[a]=e}var d={Up:function(){b.moveFocus(-1)},Down:function(){b.moveFocus(1)},PageUp:function(){b.moveFocus(-b.menuSize()+1,!0)},PageDown:function(){b.moveFocus(b.menuSize()-1,!0)},Home:function(){b.setFocus(0)},End:function(){b.setFocus(b.length-1)},Enter:b.pick,Tab:b.pick,Esc:b.close},e=a.options.customKeys,f=e?{}:d;if(e)for(var g in e)e.hasOwnProperty(g)&&c(g,e[g]);var h=a.options.extraKeys;if(h)for(var g in h)h.hasOwnProperty(g)&&c(g,h[g]);return f}function g(a,b){for(;b&&b!=a;){if("LI"===b.nodeName.toUpperCase()&&b.parentNode==a)return b;b=b.parentNode}}function h(b,c){this.completion=b,this.data=c,this.picked=!1;var d=this,h=b.cm,i=this.hints=document.createElement("ul");i.className="CodeMirror-hints",this.selectedHint=c.selectedHint||0;for(var j=c.list,m=0;m<j.length;++m){var n=i.appendChild(document.createElement("li")),o=j[m],p=k+(m!=this.selectedHint?"":" "+l);null!=o.className&&(p=o.className+" "+p),n.className=p,o.render?o.render(n,c,o):n.appendChild(document.createTextNode(o.displayText||e(o))),n.hintId=m}var q=h.cursorCoords(b.options.alignWithWord?c.from:null),r=q.left,s=q.bottom,t=!0;i.style.left=r+"px",i.style.top=s+"px";var u=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),v=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(b.options.container||document.body).appendChild(i);var w=i.getBoundingClientRect(),x=w.bottom-v;if(x>0){var y=w.bottom-w.top,z=q.top-(q.bottom-w.top);if(z-y>0)i.style.top=(s=q.top-y)+"px",t=!1;else if(y>v){i.style.height=v-5+"px",i.style.top=(s=q.bottom-w.top)+"px";var A=h.getCursor();c.from.ch!=A.ch&&(q=h.cursorCoords(A),i.style.left=(r=q.left)+"px",w=i.getBoundingClientRect())}}var B=w.right-u;if(B>0&&(w.right-w.left>u&&(i.style.width=u-5+"px",B-=w.right-w.left-u),i.style.left=(r=q.left-B)+"px"),h.addKeyMap(this.keyMap=f(b,{moveFocus:function(a,b){d.changeActive(d.selectedHint+a,b)},setFocus:function(a){d.changeActive(a)},menuSize:function(){return d.screenAmount()},length:j.length,close:function(){b.close()},pick:function(){d.pick()},data:c})),b.options.closeOnUnfocus){var C;h.on("blur",this.onBlur=function(){C=setTimeout(function(){b.close()},100)}),h.on("focus",this.onFocus=function(){clearTimeout(C)})}var D=h.getScrollInfo();return h.on("scroll",this.onScroll=function(){var a=h.getScrollInfo(),c=h.getWrapperElement().getBoundingClientRect(),d=s+D.top-a.top,e=d-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return t||(e+=i.offsetHeight),e<=c.top||e>=c.bottom?b.close():(i.style.top=d+"px",void(i.style.left=r+D.left-a.left+"px"))}),a.on(i,"dblclick",function(a){var b=g(i,a.target||a.srcElement);b&&null!=b.hintId&&(d.changeActive(b.hintId),d.pick())}),a.on(i,"click",function(a){var c=g(i,a.target||a.srcElement);c&&null!=c.hintId&&(d.changeActive(c.hintId),b.options.completeOnSingleClick&&d.pick())}),a.on(i,"mousedown",function(){setTimeout(function(){h.focus()},20)}),a.signal(c,"select",j[0],i.firstChild),!0}function i(a,b){if(!a.somethingSelected())return b;for(var c=[],d=0;d<b.length;d++)b[d].supportsSelection&&c.push(b[d]);return c}function j(b,c){var d,e=b.getHelpers(c,"hint");if(e.length){for(var f,g=!1,h=0;h<e.length;h++)e[h].async&&(g=!0);return g?(f=function(a,b,c){function d(e,g){if(e==f.length)return b(null);var h=f[e];if(h.async)h(a,function(a){a?b(a):d(e+1)},c);else{var g=h(a,c);g?b(g):d(e+1)}}var f=i(a,e);d(0)},f.async=!0):f=function(a,b){for(var c=i(a,e),d=0;d<c.length;d++){var f=c[d](a,b);if(f&&f.list.length)return f}},f.supportsSelection=!0,f}return(d=b.getHelper(b.getCursor(),"hintWords"))?function(b){return a.hint.fromList(b,{words:d})}:a.hint.anyword?function(b,c){return a.hint.anyword(b,c)}:function(){}}var k="CodeMirror-hint",l="CodeMirror-hint-active";a.showHint=function(a,b,c){if(!b)return a.showHint(c);c&&c.async&&(b.async=!0);var d={hint:b};if(c)for(var e in c)d[e]=c[e];return a.showHint(d)},a.defineExtension("showHint",function(c){c=d(this,this.getCursor("start"),c);var e=this.listSelections();if(!(e.length>1)){if(this.somethingSelected()){if(!c.hint.supportsSelection)return;for(var f=0;f<e.length;f++)if(e[f].head.line!=e[f].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var g=this.state.completionActive=new b(this,c);g.options.hint&&(a.signal(this,"startCompletion",this),g.update(!0))}});var m=window.requestAnimationFrame||function(a){return setTimeout(a,1e3/60)},n=window.cancelAnimationFrame||clearTimeout;b.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&a.signal(this.data,"close"),this.widget&&this.widget.close(),a.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(b,c){var d=b.list[c];d.hint?d.hint(this.cm,b,d):this.cm.replaceRange(e(d),d.from||b.from,d.to||b.to,"complete"),a.signal(b,"pick",d),this.close()},cursorActivity:function(){this.debounce&&(n(this.debounce),this.debounce=0);var a=this.cm.getCursor(),b=this.cm.getLine(a.line);if(a.line!=this.startPos.line||b.length-a.ch!=this.startLen-this.startPos.ch||a.ch<this.startPos.ch||this.cm.somethingSelected()||a.ch&&this.options.closeCharacters.test(b.charAt(a.ch-1)))this.close();else{var c=this;this.debounce=m(function(){c.update()}),this.widget&&this.widget.disable()}},update:function(a){if(null!=this.tick)if(this.options.hint.async){var b=++this.tick,c=this;this.options.hint(this.cm,function(d){c.tick==b&&c.finishUpdate(d,a)},this.options)}else this.finishUpdate(this.options.hint(this.cm,this.options),a)},finishUpdate:function(b,d){this.data&&a.signal(this.data,"update");var e=this.widget&&this.widget.picked||d&&this.options.completeSingle;this.widget&&this.widget.close(),b&&this.data&&c(this.data,b)||(this.data=b,b&&b.list.length&&(e&&1==b.list.length?this.pick(b,0):(this.widget=new h(this,b),a.signal(b,"shown"))))}},h.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var a=this.completion.cm;this.completion.options.closeOnUnfocus&&(a.off("blur",this.onBlur),a.off("focus",this.onFocus)),a.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var a=this;this.keyMap={Enter:function(){a.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(b,c){if(b>=this.data.list.length?b=c?this.data.list.length-1:0:0>b&&(b=c?0:this.data.list.length-1),this.selectedHint!=b){var d=this.hints.childNodes[this.selectedHint];d.className=d.className.replace(" "+l,""),d=this.hints.childNodes[this.selectedHint=b],d.className+=" "+l,d.offsetTop<this.hints.scrollTop?this.hints.scrollTop=d.offsetTop-3:d.offsetTop+d.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=d.offsetTop+d.offsetHeight-this.hints.clientHeight+3),
a.signal(this.data,"select",this.data.list[this.selectedHint],d)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},a.registerHelper("hint","auto",{resolve:j}),a.registerHelper("hint","fromList",function(b,c){var d=b.getCursor(),e=b.getTokenAt(d),f=a.Pos(d.line,e.end);if(e.string&&/\w/.test(e.string[e.string.length-1]))var g=e.string,h=a.Pos(d.line,e.start);else var g="",h=f;for(var i=[],j=0;j<c.words.length;j++){var k=c.words[j];k.slice(0,g.length)==g&&i.push(k)}return i.length?{list:i,from:h,to:f}:void 0}),a.commands.autocomplete=a.showHint;var o={hint:a.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};a.defineOption("hintOptions",null)}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/edit/matchbrackets")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],a):a(CodeMirror)}(function(a){"use strict";function b(b,c,d){if(0>d&&0==c.ch)return b.clipPos(m(c.line-1));var e=b.getLine(c.line);if(d>0&&c.ch>=e.length)return b.clipPos(m(c.line+1,0));for(var f,g="start",h=c.ch,i=0>d?0:e.length,j=0;h!=i;h+=d,j++){var k=e.charAt(0>d?h-1:h),l="_"!=k&&a.isWordChar(k)?"w":"o";if("w"==l&&k.toUpperCase()==k&&(l="W"),"start"==g)"o"!=l&&(g="in",f=l);else if("in"==g&&f!=l){if("w"==f&&"W"==l&&0>d&&h--,"W"==f&&"w"==l&&d>0){f="w";continue}break}}return m(c.line,h)}function c(a,c){a.extendSelectionsBy(function(d){return a.display.shift||a.doc.extend||d.empty()?b(a.doc,d.head,c):0>c?d.from():d.to()})}function d(b,c){return b.isReadOnly()?a.Pass:void b.operation(function(){for(var a=b.listSelections().length,d=[],e=-1,f=0;a>f;f++){var g=b.listSelections()[f].head;if(!(g.line<=e)){var h=m(g.line+(c?0:1),0);b.replaceRange("\n",h,null,"+insertLine"),b.indentLine(h.line,null,!0),d.push({head:h,anchor:h}),e=g.line+1}}b.setSelections(d)})}function e(b,c){for(var d=c.ch,e=d,f=b.getLine(c.line);d&&a.isWordChar(f.charAt(d-1));)--d;for(;e<f.length&&a.isWordChar(f.charAt(e));)++e;return{from:m(c.line,d),to:m(c.line,e),word:f.slice(d,e)}}function f(a){var b=a.getCursor(),c=a.scanForBracket(b,-1);if(c)for(;;){var d=a.scanForBracket(b,1);if(!d)return;if(d.ch==q.charAt(q.indexOf(c.ch)+1))return a.setSelection(m(c.pos.line,c.pos.ch+1),d.pos,!1),!0;b=m(d.pos.line,d.pos.ch+1)}}function g(b,c){if(b.isReadOnly())return a.Pass;for(var d,e=b.listSelections(),f=[],g=0;g<e.length;g++){var h=e[g];if(!h.empty()){for(var i=h.from().line,j=h.to().line;g<e.length-1&&e[g+1].from().line==j;)j=h[++g].to().line;f.push(i,j)}}f.length?d=!0:f.push(b.firstLine(),b.lastLine()),b.operation(function(){for(var a=[],e=0;e<f.length;e+=2){var g=f[e],h=f[e+1],i=m(g,0),j=m(h),k=b.getRange(i,j,!1);c?k.sort():k.sort(function(a,b){var c=a.toUpperCase(),d=b.toUpperCase();return c!=d&&(a=c,b=d),b>a?-1:a==b?0:1}),b.replaceRange(k,i,j),d&&a.push({anchor:i,head:j})}d&&b.setSelections(a,0)})}function h(b,c){b.operation(function(){for(var d=b.listSelections(),f=[],g=[],h=0;h<d.length;h++){var i=d[h];i.empty()?(f.push(h),g.push("")):g.push(c(b.getRange(i.from(),i.to())))}b.replaceSelections(g,"around","case");for(var j,h=f.length-1;h>=0;h--){var i=d[f[h]];if(!(j&&a.cmpPos(i.head,j)>0)){var k=e(b,i.head);j=k.from,b.replaceRange(c(k.word),k.from,k.to)}}})}function i(b){var c=b.getCursor("from"),d=b.getCursor("to");if(0==a.cmpPos(c,d)){var f=e(b,c);if(!f.word)return;c=f.from,d=f.to}return{from:c,to:d,query:b.getRange(c,d),word:f}}function j(a,b){var c=i(a);if(c){var d=c.query,e=a.getSearchCursor(d,b?c.to:c.from);(b?e.findNext():e.findPrevious())?a.setSelection(e.from(),e.to()):(e=a.getSearchCursor(d,b?m(a.firstLine(),0):a.clipPos(m(a.lastLine()))),(b?e.findNext():e.findPrevious())?a.setSelection(e.from(),e.to()):c.word&&a.setSelection(c.from,c.to))}}var k=a.keyMap.sublime={fallthrough:"default"},l=a.commands,m=a.Pos,n=a.keyMap["default"]==a.keyMap.macDefault,o=n?"Cmd-":"Ctrl-";l[k["Alt-Left"]="goSubwordLeft"]=function(a){c(a,-1)},l[k["Alt-Right"]="goSubwordRight"]=function(a){c(a,1)};var p=n?"Ctrl-Alt-":"Ctrl-";l[k[p+"Up"]="scrollLineUp"]=function(a){var b=a.getScrollInfo();if(!a.somethingSelected()){var c=a.lineAtHeight(b.top+b.clientHeight,"local");a.getCursor().line>=c&&a.execCommand("goLineUp")}a.scrollTo(null,b.top-a.defaultTextHeight())},l[k[p+"Down"]="scrollLineDown"]=function(a){var b=a.getScrollInfo();if(!a.somethingSelected()){var c=a.lineAtHeight(b.top,"local")+1;a.getCursor().line<=c&&a.execCommand("goLineDown")}a.scrollTo(null,b.top+a.defaultTextHeight())},l[k["Shift-"+o+"L"]="splitSelectionByLine"]=function(a){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++)for(var e=b[d].from(),f=b[d].to(),g=e.line;g<=f.line;++g)f.line>e.line&&g==f.line&&0==f.ch||c.push({anchor:g==e.line?e:m(g,0),head:g==f.line?f:m(g)});a.setSelections(c,0)},k["Shift-Tab"]="indentLess",l[k.Esc="singleSelectionTop"]=function(a){var b=a.listSelections()[0];a.setSelection(b.anchor,b.head,{scroll:!1})},l[k[o+"L"]="selectLine"]=function(a){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d];c.push({anchor:m(e.from().line,0),head:m(e.to().line+1,0)})}a.setSelections(c)},k["Shift-Ctrl-K"]="deleteLine",l[k[o+"Enter"]="insertLineAfter"]=function(a){return d(a,!1)},l[k["Shift-"+o+"Enter"]="insertLineBefore"]=function(a){return d(a,!0)},l[k[o+"D"]="selectNextOccurrence"]=function(b){var c=b.getCursor("from"),d=b.getCursor("to"),f=b.state.sublimeFindFullWord==b.doc.sel;if(0==a.cmpPos(c,d)){var g=e(b,c);if(!g.word)return;b.setSelection(g.from,g.to),f=!0}else{var h=b.getRange(c,d),i=f?new RegExp("\\b"+h+"\\b"):h,j=b.getSearchCursor(i,d);j.findNext()?b.addSelection(j.from(),j.to()):(j=b.getSearchCursor(i,m(b.firstLine(),0)),j.findNext()&&b.addSelection(j.from(),j.to()))}f&&(b.state.sublimeFindFullWord=b.doc.sel)};var q="(){}[]";l[k["Shift-"+o+"Space"]="selectScope"]=function(a){f(a)||a.execCommand("selectAll")},l[k["Shift-"+o+"M"]="selectBetweenBrackets"]=function(b){return f(b)?void 0:a.Pass},l[k[o+"M"]="goToBracket"]=function(b){b.extendSelectionsBy(function(c){var d=b.scanForBracket(c.head,1);if(d&&0!=a.cmpPos(d.pos,c.head))return d.pos;var e=b.scanForBracket(c.head,-1);return e&&m(e.pos.line,e.pos.ch+1)||c.head})};var r=n?"Cmd-Ctrl-":"Shift-Ctrl-";l[k[r+"Up"]="swapLineUp"]=function(b){if(b.isReadOnly())return a.Pass;for(var c=b.listSelections(),d=[],e=b.firstLine()-1,f=[],g=0;g<c.length;g++){var h=c[g],i=h.from().line-1,j=h.to().line;f.push({anchor:m(h.anchor.line-1,h.anchor.ch),head:m(h.head.line-1,h.head.ch)}),0!=h.to().ch||h.empty()||--j,i>e?d.push(i,j):d.length&&(d[d.length-1]=j),e=j}b.operation(function(){for(var a=0;a<d.length;a+=2){var c=d[a],e=d[a+1],g=b.getLine(c);b.replaceRange("",m(c,0),m(c+1,0),"+swapLine"),e>b.lastLine()?b.replaceRange("\n"+g,m(b.lastLine()),null,"+swapLine"):b.replaceRange(g+"\n",m(e,0),null,"+swapLine")}b.setSelections(f),b.scrollIntoView()})},l[k[r+"Down"]="swapLineDown"]=function(b){if(b.isReadOnly())return a.Pass;for(var c=b.listSelections(),d=[],e=b.lastLine()+1,f=c.length-1;f>=0;f--){var g=c[f],h=g.to().line+1,i=g.from().line;0!=g.to().ch||g.empty()||h--,e>h?d.push(h,i):d.length&&(d[d.length-1]=i),e=i}b.operation(function(){for(var a=d.length-2;a>=0;a-=2){var c=d[a],e=d[a+1],f=b.getLine(c);c==b.lastLine()?b.replaceRange("",m(c-1),m(c),"+swapLine"):b.replaceRange("",m(c,0),m(c+1,0),"+swapLine"),b.replaceRange(f+"\n",m(e,0),null,"+swapLine")}b.scrollIntoView()})},l[k[o+"/"]="toggleCommentIndented"]=function(a){a.toggleComment({indent:!0})},l[k[o+"J"]="joinLines"]=function(a){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){for(var e=b[d],f=e.from(),g=f.line,h=e.to().line;d<b.length-1&&b[d+1].from().line==h;)h=b[++d].to().line;c.push({start:g,end:h,anchor:!e.empty()&&f})}a.operation(function(){for(var b=0,d=[],e=0;e<c.length;e++){for(var f,g=c[e],h=g.anchor&&m(g.anchor.line-b,g.anchor.ch),i=g.start;i<=g.end;i++){var j=i-b;i==g.end&&(f=m(j,a.getLine(j).length+1)),j<a.lastLine()&&(a.replaceRange(" ",m(j),m(j+1,/^\s*/.exec(a.getLine(j+1))[0].length)),++b)}d.push({anchor:h||f,head:f})}a.setSelections(d,0)})},l[k["Shift-"+o+"D"]="duplicateLine"]=function(a){a.operation(function(){for(var b=a.listSelections().length,c=0;b>c;c++){var d=a.listSelections()[c];d.empty()?a.replaceRange(a.getLine(d.head.line)+"\n",m(d.head.line,0)):a.replaceRange(a.getRange(d.from(),d.to()),d.from())}a.scrollIntoView()})},k[o+"T"]="transposeChars",l[k.F9="sortLines"]=function(a){g(a,!0)},l[k[o+"F9"]="sortLinesInsensitive"]=function(a){g(a,!1)},l[k.F2="nextBookmark"]=function(a){var b=a.state.sublimeBookmarks;if(b)for(;b.length;){var c=b.shift(),d=c.find();if(d)return b.push(c),a.setSelection(d.from,d.to)}},l[k["Shift-F2"]="prevBookmark"]=function(a){var b=a.state.sublimeBookmarks;if(b)for(;b.length;){b.unshift(b.pop());var c=b[b.length-1].find();if(c)return a.setSelection(c.from,c.to);b.pop()}},l[k[o+"F2"]="toggleBookmark"]=function(a){for(var b=a.listSelections(),c=a.state.sublimeBookmarks||(a.state.sublimeBookmarks=[]),d=0;d<b.length;d++){for(var e=b[d].from(),f=b[d].to(),g=a.findMarks(e,f),h=0;h<g.length;h++)if(g[h].sublimeBookmark){g[h].clear();for(var i=0;i<c.length;i++)c[i]==g[h]&&c.splice(i--,1);break}h==g.length&&c.push(a.markText(e,f,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},l[k["Shift-"+o+"F2"]="clearBookmarks"]=function(a){var b=a.state.sublimeBookmarks;if(b)for(var c=0;c<b.length;c++)b[c].clear();b.length=0},l[k["Alt-F2"]="selectBookmarks"]=function(a){var b=a.state.sublimeBookmarks,c=[];if(b)for(var d=0;d<b.length;d++){var e=b[d].find();e?c.push({anchor:e.from,head:e.to}):b.splice(d--,0)}c.length&&a.setSelections(c,0)},k["Alt-Q"]="wrapLines";var s=o+"K ";k[s+o+"Backspace"]="delLineLeft",l[k.Backspace="smartBackspace"]=function(b){if(b.somethingSelected())return a.Pass;var c=b.getCursor(),d=b.getRange({line:c.line,ch:0},c),e=a.countColumn(d,null,b.getOption("tabSize")),f=b.getOption("indentUnit");if(d&&!/\S/.test(d)&&e%f==0){var g=new m(c.line,a.findColumn(d,e-f,f));return g.ch==c.ch?a.Pass:b.replaceRange("",g,c,"+delete")}return a.Pass},l[k[s+o+"K"]="delLineRight"]=function(a){a.operation(function(){for(var b=a.listSelections(),c=b.length-1;c>=0;c--)a.replaceRange("",b[c].anchor,m(b[c].to().line),"+delete");a.scrollIntoView()})},l[k[s+o+"U"]="upcaseAtCursor"]=function(a){h(a,function(a){return a.toUpperCase()})},l[k[s+o+"L"]="downcaseAtCursor"]=function(a){h(a,function(a){return a.toLowerCase()})},l[k[s+o+"Space"]="setSublimeMark"]=function(a){a.state.sublimeMark&&a.state.sublimeMark.clear(),a.state.sublimeMark=a.setBookmark(a.getCursor())},l[k[s+o+"A"]="selectToSublimeMark"]=function(a){var b=a.state.sublimeMark&&a.state.sublimeMark.find();b&&a.setSelection(a.getCursor(),b)},l[k[s+o+"W"]="deleteToSublimeMark"]=function(b){var c=b.state.sublimeMark&&b.state.sublimeMark.find();if(c){var d=b.getCursor(),e=c;if(a.cmpPos(d,e)>0){var f=e;e=d,d=f}b.state.sublimeKilled=b.getRange(d,e),b.replaceRange("",d,e)}},l[k[s+o+"X"]="swapWithSublimeMark"]=function(a){var b=a.state.sublimeMark&&a.state.sublimeMark.find();b&&(a.state.sublimeMark.clear(),a.state.sublimeMark=a.setBookmark(a.getCursor()),a.setCursor(b))},l[k[s+o+"Y"]="sublimeYank"]=function(a){null!=a.state.sublimeKilled&&a.replaceSelection(a.state.sublimeKilled,null,"paste")},k[s+o+"G"]="clearBookmarks",l[k[s+o+"C"]="showInCenter"]=function(a){var b=a.cursorCoords(null,"local");a.scrollTo(null,(b.top+b.bottom)/2-a.getScrollInfo().clientHeight/2)},l[k["Shift-Alt-Up"]="selectLinesUpward"]=function(a){a.operation(function(){for(var b=a.listSelections(),c=0;c<b.length;c++){var d=b[c];d.head.line>a.firstLine()&&a.addSelection(m(d.head.line-1,d.head.ch))}})},l[k["Shift-Alt-Down"]="selectLinesDownward"]=function(a){a.operation(function(){for(var b=a.listSelections(),c=0;c<b.length;c++){var d=b[c];d.head.line<a.lastLine()&&a.addSelection(m(d.head.line+1,d.head.ch))}})},l[k[o+"F3"]="findUnder"]=function(a){j(a,!0)},l[k["Shift-"+o+"F3"]="findUnderPrevious"]=function(a){j(a,!1)},l[k["Alt-F3"]="findAllUnder"]=function(a){var b=i(a);if(b){for(var c=a.getSearchCursor(b.query),d=[],e=-1;c.findNext();)d.push({anchor:c.from(),head:c.to()}),c.from().line<=b.from.line&&c.from().ch<=b.from.ch&&e++;a.setSelections(d,e)}},k["Shift-"+o+"["]="fold",k["Shift-"+o+"]"]="unfold",k[s+o+"0"]=k[s+o+"j"]="unfoldAll",k[o+"I"]="findIncremental",k["Shift-"+o+"I"]="findIncrementalReverse",k[o+"H"]="replace",k.F3="findNext",k["Shift-F3"]="findPrev",a.normalizeKeyMap(k)}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports&&"object"==typeof module?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";function b(b,i){function j(){f&&J.find("*:not(input)").attr("unselectable","on"),I.after(J).hide(),J.click(function(a){a.stopPropagation()}),c(P,function(a,b,c){E=a/y,c.shiftKey&&(E=Math.round(10*E)/10),p()},l,m),c(M,function(a){B=parseFloat(a/x),p()},l,m),c(K,function(a,b,c){if(c.shiftKey){if(!G){var d=C*u,e=v-D*v,f=Math.abs(a-d)>Math.abs(b-e);G=f?"x":"y"}}else G=null;var g=!G||"x"===G,h=!G||"y"===G;g&&(C=parseFloat(a/u)),h&&(D=parseFloat((v-b)/v)),p()},l,m),S&&n(S),a(H).on("keydown.spectrum",onkeydown),k(),q()}function k(){u=K.width(),v=K.height(),w=L.height(),x=M.width(),A=N.width(),y=P.width(),z=Q.width(),r()}function l(){t=!0,J.addClass(F),G=null}function m(){t=!1,J.removeClass(F)}function n(a,b){if(tinycolor.equals(a,o()))return void q();var c,d;c=tinycolor(a),d=c.toHsv(),B=d.h%360/360,C=d.s,D=d.v,E=d.a,q()}function o(){return tinycolor.fromRatio({h:B,s:C,v:D,a:Math.round(1e3*E)/1e3},{format:"hex"})}function p(){q()}function q(){r();var b=tinycolor.fromRatio({h:B,s:1,v:1});K.css("background-color",b.toHexString());var c="hex",d=o({format:c});R.css("background-color","transparent");var e=d.toHexString(),h=d.toRgbString();g||1===d.alpha?R.css("background-color",h):(R.css("background-color","transparent"),R.css("filter",d.toFilter()));var i=d.toRgb();i.a=0;var j=tinycolor(i).toRgbString(),k="linear-gradient(left, "+j+", "+e+")";f?O.css("filter",tinycolor(j).toFilter({gradientType:1},e)):(O.css("background","-webkit-"+k),O.css("background","-moz-"+k),O.css("background","-ms-"+k),O.css("background","linear-gradient(to right, "+j+", "+e+")")),a.isFunction(s.change)&&s.change(d)}function r(){var a=C,b=D;Q.show(),N.show(),L.show();var c=a*u,d=v-b*v;c=Math.max(-w,Math.min(u-w,c-w)),d=Math.max(-w,Math.min(v-w,d-w)),L.css({top:d+"px",left:c+"px"});var e=E*y;Q.css({left:e-z/2+"px"});var f=B*x;N.css({left:f-A/2+"px"})}var s=a.extend({},d,i),t=!1,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=1,F="sp-dragging",G=null,H=b.ownerDocument,I=a(b),J=a(h,H),K=J.find(".sp-color"),L=J.find(".sp-color-handle"),M=J.find(".sp-hue"),N=J.find(".sp-hue-handle"),O=J.find(".sp-alpha-inner"),P=J.find(".sp-alpha"),Q=J.find(".sp-alpha-handle"),R=J.find(".sp-preview-inner"),S=I.val();j();var T={set:function(a){n(a)},reflow:function(){k()},get:o,container:J};return T.id=e.push(T)-1,T}function c(b,c,d,e){function g(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.returnValue=!1}function h(a){if(l){if(f&&k.documentMode<9&&!a.button)return j();var d=a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches[0],e=d&&d.pageX||a.pageX,h=d&&d.pageY||a.pageY,i=Math.max(0,Math.min(e-m.left,o)),q=Math.max(0,Math.min(h-m.top,n));p&&g(a),c.apply(b,[i,q,a])}}function i(c){var e=c.which?3==c.which:2==c.button;e||l||d.apply(b,arguments)!==!1&&(l=!0,n=a(b).height(),o=a(b).width(),m=a(b).offset(),a(k).on(q),a(k.body).addClass("sp-dragging"),h(c),g(c))}function j(){l&&(a(k).off(q),a(k.body).removeClass("sp-dragging"),setTimeout(function(){e.apply(b,arguments)},0)),l=!1}c=c||function(){},d=d||function(){},e=e||function(){};var k=document,l=!1,m={},n=0,o=0,p="ontouchstart"in window,q={};q.selectstart=g,q.dragstart=g,q["touchmove mousemove"]=h,q["touchend mouseup"]=j,a(b).on("touchstart mousedown",i)}var d={change:function(){}},e=[],f=!!/msie/i.exec(window.navigator.userAgent),g=function(){function a(a,b){return!!~(""+a).indexOf(b)}var b=document.createElement("div"),c=b.style;return c.cssText="background-color:rgba(0,0,0,.5)",a(c.backgroundColor,"rgba")||a(c.backgroundColor,"hsla")}(),h=function(){var a="";if(f)for(var b=1;6>=b;b++)a+="<div class='sp-"+b+"'></div>";return["<div class='sp-container'>","<div class='sp-color-container'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-color-handle'></div>","</div>","</div>","</div>","</div>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-slider-container'>","<div class='sp-hue'>","<div class='sp-hue-handle'></div>",a,"</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","</div>"].join("")}(),i="spectrum.id";a.fn.spectrum=function(c){if("string"==typeof c){var d=Array.prototype.slice.call(arguments,1);return this.each(function(){var b=e[a(this).data(i)];if(b){var f=b[c];if(!f)throw new Error("Spectrum: no such method: '"+c+"'");f.apply(b,d)}}),this}return this.each(function(){var d=a.extend({},a(this).data(),c),e=b(this,d);a(this).data(i,e.id)})},a.fn.spectrum.draggable=c}),function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){c(1),a.exports=c(2)},function(a,b){function c(a){var b=function(b){function c(){x=a(b),w=a("<"+b.nodeName+" data-autocomplete/>"),y=a('<div class="suggestions">').appendTo(w),y.append("<div>Suggestion 1</div><div>Suggestion 2</div><div>Suggestion 3</div>"),y.hide(),C=x.is("[data-autocomplete-multiple]"),x.on("focus",d),x.on("input",e),x.on("keydown",f),x.on("blur",g),y.on("mousedown touchstart","> div",h),setTimeout(function(){var a=s(x[0]);x.after(w).appendTo(w),x.focus(),p(a)})}function d(){z=x.text(),C&&t()}function e(){var a,b=x.text();return b.trim()?void(z!==b&&(z=b,a=C?q():b,x.trigger("autocomplete:request",[a,i]))):(y.hide(),void(z=b))}function f(a){if(y.is(":visible")&&0!==y.find("div").length)switch(a.keyCode){case D.UP:return a.preventDefault(),void m();case D.DOWN:return a.preventDefault(),void l();case C&&D.COMMA:case D.RETURN:case D.TAB:if(n(),y.hide(),a.keyCode===D.TAB)return;return void a.preventDefault();case D.ESC:return void y.hide()}}function g(){y.hide(),C&&u()}function h(b){b.preventDefault(),b.stopPropagation(),o(a(b.currentTarget)),y.hide()}function i(a){var b="",c=z.replace(E,"\\$&"),d=new RegExp("("+c+")","i");return A=z.trim().split(G),B=a.map(k).filter(j),0===B.length?void y.hide():(B.forEach(function(a,c){var e=a.label,f=0===c?' class="highlight"':"";e&&(e=v(e),b+="<div"+f+">",b+=e.replace(d,"<strong>$1</strong>"),b+="</div>")}),void y.html(b).show())}function j(a){return a?-1===A.indexOf(a.value):void 0}function k(a){return a?"string"==typeof a?{label:a,value:a}:a:void 0}function l(){var a=y.find(".highlight"),b=a.next();b.length&&(a.removeClass("highlight"),b.addClass("highlight"))}function m(){var a=y.find(".highlight"),b=a.prev();b.length&&(a.removeClass("highlight"),b.addClass("highlight"))}function n(){var a=y.find(".highlight");o(a)}function o(a){var b=B[a.index()],c=b.value;C?r(c):(x.text(c).focus(),p(c.length)),x.trigger("autocomplete:select",[b])}function p(a){var b=document.createRange(),c=window.getSelection(),d=x[0].childNodes.length?x[0].childNodes[0]:x[0];a=Math.min(d.length,a),b.setStart(d,a),b.collapse(!0),c.removeAllRanges(),c.addRange(b)}function q(){for(var a,b=s(x[0]),c=0,d=z.split(H),e=0;e<d.length;e++){if(a=d[e],c+a.length>=b)return z.substring(c,b).trim();c+=a.length+1}console.log("getCurrentQuery: Could not find query!")}function r(a){for(var b,c,d,e=s(x[0]),f=0,g=z.split(H),h=0;h<g.length;h++){if(b=g[h],f+b.length>=e)return c=z.substring(0,f).trim(),d=z.substring(e),x.html(v(c+" "+a)+",&nbsp"+v(d)),void p((c+" "+a+", ").length);f+=b.length+1}console.log("replaceCurrentWordWith: Could not find word, returning last")}function s(a){var b,c,d=0,e=a.ownerDocument||a.document,f=e.defaultView||e.parentWindow;return"undefined"!=typeof f.getSelection&&f.getSelection().rangeCount>0&&(b=f.getSelection().getRangeAt(0),c=b.cloneRange(),c.selectNodeContents(a),c.setEnd(b.endContainer,b.endOffset),d=c.toString().length),d}function t(){var a=x.text();a&&x.val(a.replace(F,", "))}function u(){var a=x.text();x.val(a.replace(F,""))}function v(a){return a.replace(I,"&amp").replace(J,"&#39").replace(K,"&quot").replace(L,"&lt").replace(M,"&gt")}var w,x,y,z,A,B,C,D={UP:38,DOWN:40,TAB:9,RETURN:13,ESC:27,COMMA:188},E=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,F=/[,\s]*$/,G=/\s*,\s*/,H=/,/,I=/&/g,J=/'/g,K=/"/g,L=/</g,M=/>/g;c()};a.fn.contenteditableAutocomplete=function(){return this.each(function(){var c=a(this),d=c.data("bs.contenteditableAutocomplete");d||c.data("bs.contenteditableAutocomplete",d=new b(this))})},a.fn.contenteditableAutocomplete.Constructor=b,a(document).on("focus.bs.contenteditableautocomplete.data-api","[data-autocomplete-spy]",function(b){var c=a(b.currentTarget);b.preventDefault(),b.stopImmediatePropagation(),c.removeAttr("data-autocomplete-spy").contenteditableAutocomplete(),c.trigger(a.Event(b))})}a.exports=c,"undefined"!=typeof window&&window.jQuery&&c(window.jQuery)},function(a,b){}]),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(a){return"number"==typeof a&&!isNaN(a)}function c(a){return"undefined"==typeof a}function d(a,c){var d=[];return b(c)&&d.push(c),d.slice.apply(a,d)}function e(a,b){var c=d(arguments,2);return function(){return a.apply(b,c.concat(d(arguments)))}}function f(a){var b=a.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return b&&(b[1]!==u.protocol||b[2]!==u.hostname||b[3]!==u.port)}function g(a){var b="timestamp="+(new Date).getTime();return a+(-1===a.indexOf("?")?"?":"&")+b}function h(a){return a?' crossOrigin="'+a+'"':""}function i(a,b){var c;return a.naturalWidth&&!qa?b(a.naturalWidth,a.naturalHeight):(c=document.createElement("img"),c.onload=function(){b(this.width,this.height)},void(c.src=a.src))}function j(a){var c=[],d=a.rotate,e=a.scaleX,f=a.scaleY;return b(e)&&b(f)&&c.push("scale("+e+","+f+")"),b(d)&&c.push("rotate("+d+"deg)"),c.length?c.join(" "):"none"}function k(a,b){var c,d,e=ua(a.degree)%180,f=(e>90?180-e:e)*Math.PI/180,g=va(f),h=wa(f),i=a.width,j=a.height,k=a.aspectRatio;return b?(c=i/(h+g/k),d=c/k):(c=i*h+j*g,d=i*g+j*h),{width:c,height:d}}function l(c,d){var e,f,g,h=a("<canvas>")[0],i=h.getContext("2d"),j=0,l=0,m=d.naturalWidth,n=d.naturalHeight,o=d.rotate,p=d.scaleX,q=d.scaleY,r=b(p)&&b(q)&&(1!==p||1!==q),s=b(o)&&0!==o,t=s||r,u=m*ua(p||1),v=n*ua(q||1);return r&&(e=u/2,f=v/2),s&&(g=k({width:u,height:v,degree:o}),u=g.width,v=g.height,e=u/2,f=v/2),h.width=u,h.height=v,t&&(j=-m/2,l=-n/2,i.save(),i.translate(e,f)),r&&i.scale(p,q),s&&i.rotate(o*Math.PI/180),i.drawImage(c,za(j),za(l),za(m),za(n)),t&&i.restore(),h}function m(b){var c=b.length,d=0,e=0;return c&&(a.each(b,function(a,b){d+=b.pageX,e+=b.pageY}),d/=c,e/=c),{pageX:d,pageY:e}}function n(a,b,c){var d,e="";for(d=b,c+=b;c>d;d++)e+=Aa(a.getUint8(d));return e}function o(a){var b,c,d,e,f,g,h,i,j,k,l=new y(a),m=l.byteLength;if(255===l.getUint8(0)&&216===l.getUint8(1))for(j=2;m>j;){if(255===l.getUint8(j)&&225===l.getUint8(j+1)){h=j;break}j++}if(h&&(c=h+4,d=h+10,"Exif"===n(l,c,4)&&(g=l.getUint16(d),f=18761===g,(f||19789===g)&&42===l.getUint16(d+2,f)&&(e=l.getUint32(d+4,f),e>=8&&(i=d+e)))),i)for(m=l.getUint16(i,f),k=0;m>k;k++)if(j=i+12*k+2,274===l.getUint16(j,f)){j+=8,b=l.getUint16(j,f),qa&&l.setUint16(j,1,f);break}return b}function p(a){var b,c=a.replace($,""),d=atob(c),e=d.length,f=new w(e),g=new x(f);for(b=0;e>b;b++)g[b]=d.charCodeAt(b);return f}function q(a){var b,c=new x(a),d=c.length,e="";for(b=0;d>b;b++)e+=Aa(c[b]);return"data:image/jpeg;base64,"+z(e)}function r(b,c){this.$element=a(b),this.options=a.extend({},r.DEFAULTS,a.isPlainObject(c)&&c),this.isLoaded=!1,this.isBuilt=!1,this.isCompleted=!1,this.isRotated=!1,this.isCropped=!1,this.isDisabled=!1,this.isReplaced=!1,this.isLimited=!1,this.wheeling=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}var s=a(window),t=a(document),u=window.location,v=window.navigator,w=window.ArrayBuffer,x=window.Uint8Array,y=window.DataView,z=window.btoa,A="cropper",B="cropper-modal",C="cropper-hide",D="cropper-hidden",E="cropper-invisible",F="cropper-move",G="cropper-crop",H="cropper-disabled",I="cropper-bg",J="mousedown touchstart pointerdown MSPointerDown",K="mousemove touchmove pointermove MSPointerMove",L="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",M="wheel mousewheel DOMMouseScroll",N="dblclick",O="load."+A,P="error."+A,Q="resize."+A,R="build."+A,S="built."+A,T="cropstart."+A,U="cropmove."+A,V="cropend."+A,W="crop."+A,X="zoom."+A,Y=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/,Z=/^data\:/,$=/^data\:([^\;]+)\;base64,/,_=/^data\:image\/jpeg.*;base64,/,aa="preview",ba="action",ca="e",da="w",ea="s",fa="n",ga="se",ha="sw",ia="ne",ja="nw",ka="all",la="crop",ma="move",na="zoom",oa="none",pa=a.isFunction(a("<canvas>")[0].getContext),qa=v&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(v.userAgent),ra=Number,sa=Math.min,ta=Math.max,ua=Math.abs,va=Math.sin,wa=Math.cos,xa=Math.sqrt,ya=Math.round,za=Math.floor,Aa=String.fromCharCode;r.prototype={constructor:r,init:function(){var a,b=this.$element;if(b.is("img")){if(this.isImg=!0,this.originalUrl=a=b.attr("src"),!a)return;a=b.prop("src")}else b.is("canvas")&&pa&&(a=b[0].toDataURL());this.load(a)},trigger:function(b,c){var d=a.Event(b,c);return this.$element.trigger(d),d},load:function(b){var c,d,e=this.options,h=this.$element;if(b&&(h.one(R,e.build),!this.trigger(R).isDefaultPrevented())){if(this.url=b,this.image={},!e.checkOrientation||!w)return this.clone();if(c=a.proxy(this.read,this),Z.test(b))return _.test(b)?c(p(b)):this.clone();d=new XMLHttpRequest,d.onerror=d.onabort=a.proxy(function(){this.clone()},this),d.onload=function(){c(this.response)},e.checkCrossOrigin&&f(b)&&h.prop("crossOrigin")&&(b=g(b)),d.open("get",b),d.responseType="arraybuffer",d.send()}},read:function(a){var b,c,d,e=this.options,f=o(a),g=this.image;if(f>1)switch(this.url=q(a),f){case 2:c=-1;break;case 3:b=-180;break;case 4:d=-1;break;case 5:b=90,d=-1;break;case 6:b=90;break;case 7:b=90,c=-1;break;case 8:b=-90}e.rotatable&&(g.rotate=b),e.scalable&&(g.scaleX=c,g.scaleY=d),this.clone()},clone:function(){var b,c,d=this.options,e=this.$element,i=this.url,j="";d.checkCrossOrigin&&f(i)&&(j=e.prop("crossOrigin"),j?b=i:(j="anonymous",b=g(i))),this.crossOrigin=j,this.crossOriginUrl=b,this.$clone=c=a("<img"+h(j)+' src="'+(b||i)+'">'),this.isImg?e[0].complete?this.start():e.one(O,a.proxy(this.start,this)):c.one(O,a.proxy(this.start,this)).one(P,a.proxy(this.stop,this)).addClass(C).insertAfter(e)},start:function(){var b=this.$element,c=this.$clone;this.isImg||(c.off(P,this.stop),b=c),i(b[0],a.proxy(function(b,c){a.extend(this.image,{naturalWidth:b,naturalHeight:c,aspectRatio:b/c}),this.isLoaded=!0,this.build()},this))},stop:function(){this.$clone.remove(),this.$clone=null},build:function(){var b,c,d,e=this.options,f=this.$element,g=this.$clone;this.isLoaded&&(this.isBuilt&&this.unbuild(),this.$container=f.parent(),this.$cropper=b=a(r.TEMPLATE),this.$canvas=b.find(".cropper-canvas").append(g),this.$dragBox=b.find(".cropper-drag-box"),this.$cropBox=c=b.find(".cropper-crop-box"),this.$viewBox=b.find(".cropper-view-box"),this.$face=d=c.find(".cropper-face"),f.addClass(D).after(b),this.isImg||g.removeClass(C),this.initPreview(),this.bind(),e.aspectRatio=ta(0,e.aspectRatio)||NaN,e.viewMode=ta(0,sa(3,ya(e.viewMode)))||0,e.autoCrop?(this.isCropped=!0,e.modal&&this.$dragBox.addClass(B)):c.addClass(D),e.guides||c.find(".cropper-dashed").addClass(D),e.center||c.find(".cropper-center").addClass(D),e.cropBoxMovable&&d.addClass(F).data(ba,ka),e.highlight||d.addClass(E),e.background&&b.addClass(I),e.cropBoxResizable||c.find(".cropper-line, .cropper-point").addClass(D),this.setDragMode(e.dragMode),this.render(),this.isBuilt=!0,this.setData(e.data),f.one(S,e.built),setTimeout(a.proxy(function(){this.trigger(S),this.trigger(W,this.getData()),this.isCompleted=!0},this),0))},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.isCompleted=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.isCropped&&this.renderCropBox()},initContainer:function(){var a=this.options,b=this.$element,c=this.$container,d=this.$cropper;d.addClass(D),b.removeClass(D),d.css(this.container={width:ta(c.width(),ra(a.minContainerWidth)||200),height:ta(c.height(),ra(a.minContainerHeight)||100)}),b.addClass(D),d.removeClass(D)},initCanvas:function(){var b,c=this.options.viewMode,d=this.container,e=d.width,f=d.height,g=this.image,h=g.naturalWidth,i=g.naturalHeight,j=90===ua(g.rotate),k=j?i:h,l=j?h:i,m=k/l,n=e,o=f;f*m>e?3===c?n=f*m:o=e/m:3===c?o=e/m:n=f*m,b={naturalWidth:k,naturalHeight:l,aspectRatio:m,width:n,height:o},b.oldLeft=b.left=(e-n)/2,b.oldTop=b.top=(f-o)/2,this.canvas=b,this.isLimited=1===c||2===c,this.limitCanvas(!0,!0),this.initialImage=a.extend({},g),this.initialCanvas=a.extend({},b)},limitCanvas:function(a,b){var c,d,e,f,g=this.options,h=g.viewMode,i=this.container,j=i.width,k=i.height,l=this.canvas,m=l.aspectRatio,n=this.cropBox,o=this.isCropped&&n;a&&(c=ra(g.minCanvasWidth)||0,d=ra(g.minCanvasHeight)||0,h&&(h>1?(c=ta(c,j),d=ta(d,k),3===h&&(d*m>c?c=d*m:d=c/m)):c?c=ta(c,o?n.width:0):d?d=ta(d,o?n.height:0):o&&(c=n.width,d=n.height,d*m>c?c=d*m:d=c/m)),c&&d?d*m>c?d=c/m:c=d*m:c?d=c/m:d&&(c=d*m),l.minWidth=c,l.minHeight=d,l.maxWidth=1/0,l.maxHeight=1/0),b&&(h?(e=j-l.width,f=k-l.height,l.minLeft=sa(0,e),l.minTop=sa(0,f),l.maxLeft=ta(0,e),l.maxTop=ta(0,f),o&&this.isLimited&&(l.minLeft=sa(n.left,n.left+n.width-l.width),l.minTop=sa(n.top,n.top+n.height-l.height),l.maxLeft=n.left,l.maxTop=n.top,2===h&&(l.width>=j&&(l.minLeft=sa(0,e),l.maxLeft=ta(0,e)),l.height>=k&&(l.minTop=sa(0,f),l.maxTop=ta(0,f))))):(l.minLeft=-l.width,l.minTop=-l.height,l.maxLeft=j,l.maxTop=k))},renderCanvas:function(a){var b,c,d=this.canvas,e=this.image,f=e.rotate,g=e.naturalWidth,h=e.naturalHeight;this.isRotated&&(this.isRotated=!1,c=k({width:e.width,height:e.height,degree:f}),b=c.width/c.height,b!==d.aspectRatio&&(d.left-=(c.width-d.width)/2,d.top-=(c.height-d.height)/2,d.width=c.width,d.height=c.height,d.aspectRatio=b,d.naturalWidth=g,d.naturalHeight=h,f%180&&(c=k({width:g,height:h,degree:f}),d.naturalWidth=c.width,d.naturalHeight=c.height),this.limitCanvas(!0,!1))),(d.width>d.maxWidth||d.width<d.minWidth)&&(d.left=d.oldLeft),(d.height>d.maxHeight||d.height<d.minHeight)&&(d.top=d.oldTop),d.width=sa(ta(d.width,d.minWidth),d.maxWidth),d.height=sa(ta(d.height,d.minHeight),d.maxHeight),this.limitCanvas(!1,!0),d.oldLeft=d.left=sa(ta(d.left,d.minLeft),d.maxLeft),d.oldTop=d.top=sa(ta(d.top,d.minTop),d.maxTop),this.$canvas.css({width:d.width,height:d.height,left:d.left,top:d.top}),this.renderImage(),this.isCropped&&this.isLimited&&this.limitCropBox(!0,!0),a&&this.output()},renderImage:function(b){var c,d=this.canvas,e=this.image;e.rotate&&(c=k({width:d.width,height:d.height,degree:e.rotate,aspectRatio:e.aspectRatio},!0)),a.extend(e,c?{width:c.width,height:c.height,left:(d.width-c.width)/2,top:(d.height-c.height)/2}:{width:d.width,height:d.height,left:0,top:0}),this.$clone.css({width:e.width,height:e.height,marginLeft:e.left,marginTop:e.top,
transform:j(e)}),b&&this.output()},initCropBox:function(){var b=this.options,c=this.canvas,d=b.aspectRatio,e=ra(b.autoCropArea)||.8,f={width:c.width,height:c.height};d&&(c.height*d>c.width?f.height=f.width/d:f.width=f.height*d),this.cropBox=f,this.limitCropBox(!0,!0),f.width=sa(ta(f.width,f.minWidth),f.maxWidth),f.height=sa(ta(f.height,f.minHeight),f.maxHeight),f.width=ta(f.minWidth,f.width*e),f.height=ta(f.minHeight,f.height*e),f.oldLeft=f.left=c.left+(c.width-f.width)/2,f.oldTop=f.top=c.top+(c.height-f.height)/2,this.initialCropBox=a.extend({},f)},limitCropBox:function(a,b){var c,d,e,f,g=this.options,h=g.aspectRatio,i=this.container,j=i.width,k=i.height,l=this.canvas,m=this.cropBox,n=this.isLimited;a&&(c=ra(g.minCropBoxWidth)||0,d=ra(g.minCropBoxHeight)||0,c=sa(c,j),d=sa(d,k),e=sa(j,n?l.width:j),f=sa(k,n?l.height:k),h&&(c&&d?d*h>c?d=c/h:c=d*h:c?d=c/h:d&&(c=d*h),f*h>e?f=e/h:e=f*h),m.minWidth=sa(c,e),m.minHeight=sa(d,f),m.maxWidth=e,m.maxHeight=f),b&&(n?(m.minLeft=ta(0,l.left),m.minTop=ta(0,l.top),m.maxLeft=sa(j,l.left+l.width)-m.width,m.maxTop=sa(k,l.top+l.height)-m.height):(m.minLeft=0,m.minTop=0,m.maxLeft=j-m.width,m.maxTop=k-m.height))},renderCropBox:function(){var a=this.options,b=this.container,c=b.width,d=b.height,e=this.cropBox;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=sa(ta(e.width,e.minWidth),e.maxWidth),e.height=sa(ta(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.oldLeft=e.left=sa(ta(e.left,e.minLeft),e.maxLeft),e.oldTop=e.top=sa(ta(e.top,e.minTop),e.maxTop),a.movable&&a.cropBoxMovable&&this.$face.data(ba,e.width===c&&e.height===d?ma:ka),this.$cropBox.css({width:e.width,height:e.height,left:e.left,top:e.top}),this.isCropped&&this.isLimited&&this.limitCanvas(!0,!0),this.isDisabled||this.output()},output:function(){this.preview(),this.isCompleted&&this.trigger(W,this.getData())},initPreview:function(){var b,c=h(this.crossOrigin),d=c?this.crossOriginUrl:this.url;this.$preview=a(this.options.preview),this.$clone2=b=a("<img"+c+' src="'+d+'">'),this.$viewBox.html(b),this.$preview.each(function(){var b=a(this);b.data(aa,{width:b.width(),height:b.height(),html:b.html()}),b.html("<img"+c+' src="'+d+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')})},resetPreview:function(){this.$preview.each(function(){var b=a(this),c=b.data(aa);b.css({width:c.width,height:c.height}).html(c.html).removeData(aa)})},preview:function(){var b=this.image,c=this.canvas,d=this.cropBox,e=d.width,f=d.height,g=b.width,h=b.height,i=d.left-c.left-b.left,k=d.top-c.top-b.top;this.isCropped&&!this.isDisabled&&(this.$clone2.css({width:g,height:h,marginLeft:-i,marginTop:-k,transform:j(b)}),this.$preview.each(function(){var c=a(this),d=c.data(aa),l=d.width,m=d.height,n=l,o=m,p=1;e&&(p=l/e,o=f*p),f&&o>m&&(p=m/f,n=e*p,o=m),c.css({width:n,height:o}).find("img").css({width:g*p,height:h*p,marginLeft:-i*p,marginTop:-k*p,transform:j(b)})}))},bind:function(){var b=this.options,c=this.$element,d=this.$cropper;a.isFunction(b.cropstart)&&c.on(T,b.cropstart),a.isFunction(b.cropmove)&&c.on(U,b.cropmove),a.isFunction(b.cropend)&&c.on(V,b.cropend),a.isFunction(b.crop)&&c.on(W,b.crop),a.isFunction(b.zoom)&&c.on(X,b.zoom),d.on(J,a.proxy(this.cropStart,this)),b.zoomable&&b.zoomOnWheel&&d.on(M,a.proxy(this.wheel,this)),b.toggleDragModeOnDblclick&&d.on(N,a.proxy(this.dblclick,this)),t.on(K,this._cropMove=e(this.cropMove,this)).on(L,this._cropEnd=e(this.cropEnd,this)),b.responsive&&s.on(Q,this._resize=e(this.resize,this))},unbind:function(){var b=this.options,c=this.$element,d=this.$cropper;a.isFunction(b.cropstart)&&c.off(T,b.cropstart),a.isFunction(b.cropmove)&&c.off(U,b.cropmove),a.isFunction(b.cropend)&&c.off(V,b.cropend),a.isFunction(b.crop)&&c.off(W,b.crop),a.isFunction(b.zoom)&&c.off(X,b.zoom),d.off(J,this.cropStart),b.zoomable&&b.zoomOnWheel&&d.off(M,this.wheel),b.toggleDragModeOnDblclick&&d.off(N,this.dblclick),t.off(K,this._cropMove).off(L,this._cropEnd),b.responsive&&s.off(Q,this._resize)},resize:function(){var b,c,d,e=this.options.restore,f=this.$container,g=this.container;!this.isDisabled&&g&&(d=f.width()/g.width,1===d&&f.height()===g.height||(e&&(b=this.getCanvasData(),c=this.getCropBoxData()),this.render(),e&&(this.setCanvasData(a.each(b,function(a,c){b[a]=c*d})),this.setCropBoxData(a.each(c,function(a,b){c[a]=b*d})))))},dblclick:function(){this.isDisabled||(this.$dragBox.hasClass(G)?this.setDragMode(ma):this.setDragMode(la))},wheel:function(b){var c=b.originalEvent||b,d=ra(this.options.wheelZoomRatio)||.1,e=1;this.isDisabled||(b.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(a.proxy(function(){this.wheeling=!1},this),50),c.deltaY?e=c.deltaY>0?1:-1:c.wheelDelta?e=-c.wheelDelta/120:c.detail&&(e=c.detail>0?1:-1),this.zoom(-e*d,b)))},cropStart:function(b){var c,d,e=this.options,f=b.originalEvent,g=f&&f.touches,h=b;if(!this.isDisabled){if(g){if(c=g.length,c>1){if(!e.zoomable||!e.zoomOnTouch||2!==c)return;h=g[1],this.startX2=h.pageX,this.startY2=h.pageY,d=na}h=g[0]}if(d=d||a(h.target).data(ba),Y.test(d)){if(this.trigger(T,{originalEvent:f,action:d}).isDefaultPrevented())return;b.preventDefault(),this.action=d,this.cropping=!1,this.startX=h.pageX||f&&f.pageX,this.startY=h.pageY||f&&f.pageY,d===la&&(this.cropping=!0,this.$dragBox.addClass(B))}}},cropMove:function(a){var b,c=this.options,d=a.originalEvent,e=d&&d.touches,f=a,g=this.action;if(!this.isDisabled){if(e){if(b=e.length,b>1){if(!c.zoomable||!c.zoomOnTouch||2!==b)return;f=e[1],this.endX2=f.pageX,this.endY2=f.pageY}f=e[0]}if(g){if(this.trigger(U,{originalEvent:d,action:g}).isDefaultPrevented())return;a.preventDefault(),this.endX=f.pageX||d&&d.pageX,this.endY=f.pageY||d&&d.pageY,this.change(f.shiftKey,g===na?a:null)}}},cropEnd:function(a){var b=a.originalEvent,c=this.action;this.isDisabled||c&&(a.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(B,this.isCropped&&this.options.modal)),this.action="",this.trigger(V,{originalEvent:b,action:c}))},change:function(a,b){var c,d,e=this.options,f=e.aspectRatio,g=this.action,h=this.container,i=this.canvas,j=this.cropBox,k=j.width,l=j.height,m=j.left,n=j.top,o=m+k,p=n+l,q=0,r=0,s=h.width,t=h.height,u=!0;switch(!f&&a&&(f=k&&l?k/l:1),this.isLimited&&(q=j.minLeft,r=j.minTop,s=q+sa(h.width,i.left+i.width),t=r+sa(h.height,i.top+i.height)),d={x:this.endX-this.startX,y:this.endY-this.startY},f&&(d.X=d.y*f,d.Y=d.x/f),g){case ka:m+=d.x,n+=d.y;break;case ca:if(d.x>=0&&(o>=s||f&&(r>=n||p>=t))){u=!1;break}k+=d.x,f&&(l=k/f,n-=d.Y/2),0>k&&(g=da,k=0);break;case fa:if(d.y<=0&&(r>=n||f&&(q>=m||o>=s))){u=!1;break}l-=d.y,n+=d.y,f&&(k=l*f,m+=d.X/2),0>l&&(g=ea,l=0);break;case da:if(d.x<=0&&(q>=m||f&&(r>=n||p>=t))){u=!1;break}k-=d.x,m+=d.x,f&&(l=k/f,n+=d.Y/2),0>k&&(g=ca,k=0);break;case ea:if(d.y>=0&&(p>=t||f&&(q>=m||o>=s))){u=!1;break}l+=d.y,f&&(k=l*f,m-=d.X/2),0>l&&(g=fa,l=0);break;case ia:if(f){if(d.y<=0&&(r>=n||o>=s)){u=!1;break}l-=d.y,n+=d.y,k=l*f}else d.x>=0?s>o?k+=d.x:d.y<=0&&r>=n&&(u=!1):k+=d.x,d.y<=0?n>r&&(l-=d.y,n+=d.y):(l-=d.y,n+=d.y);0>k&&0>l?(g=ha,l=0,k=0):0>k?(g=ja,k=0):0>l&&(g=ga,l=0);break;case ja:if(f){if(d.y<=0&&(r>=n||q>=m)){u=!1;break}l-=d.y,n+=d.y,k=l*f,m+=d.X}else d.x<=0?m>q?(k-=d.x,m+=d.x):d.y<=0&&r>=n&&(u=!1):(k-=d.x,m+=d.x),d.y<=0?n>r&&(l-=d.y,n+=d.y):(l-=d.y,n+=d.y);0>k&&0>l?(g=ga,l=0,k=0):0>k?(g=ia,k=0):0>l&&(g=ha,l=0);break;case ha:if(f){if(d.x<=0&&(q>=m||p>=t)){u=!1;break}k-=d.x,m+=d.x,l=k/f}else d.x<=0?m>q?(k-=d.x,m+=d.x):d.y>=0&&p>=t&&(u=!1):(k-=d.x,m+=d.x),d.y>=0?t>p&&(l+=d.y):l+=d.y;0>k&&0>l?(g=ia,l=0,k=0):0>k?(g=ga,k=0):0>l&&(g=ja,l=0);break;case ga:if(f){if(d.x>=0&&(o>=s||p>=t)){u=!1;break}k+=d.x,l=k/f}else d.x>=0?s>o?k+=d.x:d.y>=0&&p>=t&&(u=!1):k+=d.x,d.y>=0?t>p&&(l+=d.y):l+=d.y;0>k&&0>l?(g=ja,l=0,k=0):0>k?(g=ha,k=0):0>l&&(g=ia,l=0);break;case ma:this.move(d.x,d.y),u=!1;break;case na:this.zoom(function(a,b,c,d){var e=xa(a*a+b*b),f=xa(c*c+d*d);return(f-e)/e}(ua(this.startX-this.startX2),ua(this.startY-this.startY2),ua(this.endX-this.endX2),ua(this.endY-this.endY2)),b),this.startX2=this.endX2,this.startY2=this.endY2,u=!1;break;case la:if(!d.x||!d.y){u=!1;break}c=this.$cropper.offset(),m=this.startX-c.left,n=this.startY-c.top,k=j.minWidth,l=j.minHeight,d.x>0?g=d.y>0?ga:ia:d.x<0&&(m-=k,g=d.y>0?ha:ja),d.y<0&&(n-=l),this.isCropped||(this.$cropBox.removeClass(D),this.isCropped=!0,this.isLimited&&this.limitCropBox(!0,!0))}u&&(j.width=k,j.height=l,j.left=m,j.top=n,this.action=g,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},crop:function(){this.isBuilt&&!this.isDisabled&&(this.isCropped||(this.isCropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(B),this.$cropBox.removeClass(D)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.isBuilt&&!this.isDisabled&&(this.image=a.extend({},this.initialImage),this.canvas=a.extend({},this.initialCanvas),this.cropBox=a.extend({},this.initialCropBox),this.renderCanvas(),this.isCropped&&this.renderCropBox())},clear:function(){this.isCropped&&!this.isDisabled&&(a.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.isCropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass(B),this.$cropBox.addClass(D))},replace:function(a,b){!this.isDisabled&&a&&(this.isImg&&this.$element.attr("src",a),b?(this.url=a,this.$clone.attr("src",a),this.isBuilt&&this.$preview.find("img").add(this.$clone2).attr("src",a)):(this.isImg&&(this.isReplaced=!0),this.options.data=null,this.load(a)))},enable:function(){this.isBuilt&&(this.isDisabled=!1,this.$cropper.removeClass(H))},disable:function(){this.isBuilt&&(this.isDisabled=!0,this.$cropper.addClass(H))},destroy:function(){var a=this.$element;this.isLoaded?(this.isImg&&this.isReplaced&&a.attr("src",this.originalUrl),this.unbuild(),a.removeClass(D)):this.isImg?a.off(O,this.start):this.$clone&&this.$clone.remove(),a.removeData(A)},move:function(a,b){var d=this.canvas;this.moveTo(c(a)?a:d.left+ra(a),c(b)?b:d.top+ra(b))},moveTo:function(a,d){var e=this.canvas,f=!1;c(d)&&(d=a),a=ra(a),d=ra(d),this.isBuilt&&!this.isDisabled&&this.options.movable&&(b(a)&&(e.left=a,f=!0),b(d)&&(e.top=d,f=!0),f&&this.renderCanvas(!0))},zoom:function(a,b){var c=this.canvas;a=ra(a),a=0>a?1/(1-a):1+a,this.zoomTo(c.width*a/c.naturalWidth,b)},zoomTo:function(a,b){var c,d,e,f,g,h=this.options,i=this.canvas,j=i.width,k=i.height,l=i.naturalWidth,n=i.naturalHeight;if(a=ra(a),a>=0&&this.isBuilt&&!this.isDisabled&&h.zoomable){if(d=l*a,e=n*a,b&&(c=b.originalEvent),this.trigger(X,{originalEvent:c,oldRatio:j/l,ratio:d/l}).isDefaultPrevented())return;c?(f=this.$cropper.offset(),g=c.touches?m(c.touches):{pageX:b.pageX||c.pageX||0,pageY:b.pageY||c.pageY||0},i.left-=(d-j)*((g.pageX-f.left-i.left)/j),i.top-=(e-k)*((g.pageY-f.top-i.top)/k)):(i.left-=(d-j)/2,i.top-=(e-k)/2),i.width=d,i.height=e,this.renderCanvas(!0)}},rotate:function(a){this.rotateTo((this.image.rotate||0)+ra(a))},rotateTo:function(a){a=ra(a),b(a)&&this.isBuilt&&!this.isDisabled&&this.options.rotatable&&(this.image.rotate=a%360,this.isRotated=!0,this.renderCanvas(!0))},scale:function(a,d){var e=this.image,f=!1;c(d)&&(d=a),a=ra(a),d=ra(d),this.isBuilt&&!this.isDisabled&&this.options.scalable&&(b(a)&&(e.scaleX=a,f=!0),b(d)&&(e.scaleY=d,f=!0),f&&this.renderImage(!0))},scaleX:function(a){var c=this.image.scaleY;this.scale(a,b(c)?c:1)},scaleY:function(a){var c=this.image.scaleX;this.scale(b(c)?c:1,a)},getData:function(b){var c,d,e=this.options,f=this.image,g=this.canvas,h=this.cropBox;return this.isBuilt&&this.isCropped?(d={x:h.left-g.left,y:h.top-g.top,width:h.width,height:h.height},c=f.width/f.naturalWidth,a.each(d,function(a,e){e/=c,d[a]=b?ya(e):e})):d={x:0,y:0,width:0,height:0},e.rotatable&&(d.rotate=f.rotate||0),e.scalable&&(d.scaleX=f.scaleX||1,d.scaleY=f.scaleY||1),d},setData:function(c){var d,e,f,g=this.options,h=this.image,i=this.canvas,j={};a.isFunction(c)&&(c=c.call(this.element)),this.isBuilt&&!this.isDisabled&&a.isPlainObject(c)&&(g.rotatable&&b(c.rotate)&&c.rotate!==h.rotate&&(h.rotate=c.rotate,this.isRotated=d=!0),g.scalable&&(b(c.scaleX)&&c.scaleX!==h.scaleX&&(h.scaleX=c.scaleX,e=!0),b(c.scaleY)&&c.scaleY!==h.scaleY&&(h.scaleY=c.scaleY,e=!0)),d?this.renderCanvas():e&&this.renderImage(),f=h.width/h.naturalWidth,b(c.x)&&(j.left=c.x*f+i.left),b(c.y)&&(j.top=c.y*f+i.top),b(c.width)&&(j.width=c.width*f),b(c.height)&&(j.height=c.height*f),this.setCropBoxData(j))},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var b=this.canvas,c={};return this.isBuilt&&a.each(["left","top","width","height","naturalWidth","naturalHeight"],function(a,d){c[d]=b[d]}),c},setCanvasData:function(c){var d=this.canvas,e=d.aspectRatio;a.isFunction(c)&&(c=c.call(this.$element)),this.isBuilt&&!this.isDisabled&&a.isPlainObject(c)&&(b(c.left)&&(d.left=c.left),b(c.top)&&(d.top=c.top),b(c.width)?(d.width=c.width,d.height=c.width/e):b(c.height)&&(d.height=c.height,d.width=c.height*e),this.renderCanvas(!0))},getCropBoxData:function(){var a,b=this.cropBox;return this.isBuilt&&this.isCropped&&(a={left:b.left,top:b.top,width:b.width,height:b.height}),a||{}},setCropBoxData:function(c){var d,e,f=this.cropBox,g=this.options.aspectRatio;a.isFunction(c)&&(c=c.call(this.$element)),this.isBuilt&&this.isCropped&&!this.isDisabled&&a.isPlainObject(c)&&(b(c.left)&&(f.left=c.left),b(c.top)&&(f.top=c.top),b(c.width)&&(d=!0,f.width=c.width),b(c.height)&&(e=!0,f.height=c.height),g&&(d?f.height=f.width/g:e&&(f.width=f.height*g)),this.renderCropBox())},getCroppedCanvas:function(b){var c,d,e,f,g,h,i,j,k,m,n;return this.isBuilt&&pa?this.isCropped?(a.isPlainObject(b)||(b={}),n=this.getData(),c=n.width,d=n.height,j=c/d,a.isPlainObject(b)&&(g=b.width,h=b.height,g?(h=g/j,i=g/c):h&&(g=h*j,i=h/d)),e=za(g||c),f=za(h||d),k=a("<canvas>")[0],k.width=e,k.height=f,m=k.getContext("2d"),b.fillColor&&(m.fillStyle=b.fillColor,m.fillRect(0,0,e,f)),m.drawImage.apply(m,function(){var a,b,e,f,g,h,j=l(this.$clone[0],this.image),k=j.width,m=j.height,o=this.canvas,p=[j],q=n.x+o.naturalWidth*(ua(n.scaleX||1)-1)/2,r=n.y+o.naturalHeight*(ua(n.scaleY||1)-1)/2;return-c>=q||q>k?q=a=e=g=0:0>=q?(e=-q,q=0,a=g=sa(k,c+q)):k>=q&&(e=0,a=g=sa(c,k-q)),0>=a||-d>=r||r>m?r=b=f=h=0:0>=r?(f=-r,r=0,b=h=sa(m,d+r)):m>=r&&(f=0,b=h=sa(d,m-r)),p.push(za(q),za(r),za(a),za(b)),i&&(e*=i,f*=i,g*=i,h*=i),g>0&&h>0&&p.push(za(e),za(f),za(g),za(h)),p}.call(this)),k):l(this.$clone[0],this.image):void 0},setAspectRatio:function(a){var b=this.options;this.isDisabled||c(a)||(b.aspectRatio=ta(0,a)||NaN,this.isBuilt&&(this.initCropBox(),this.isCropped&&this.renderCropBox()))},setDragMode:function(a){var b,c,d=this.options;this.isLoaded&&!this.isDisabled&&(b=a===la,c=d.movable&&a===ma,a=b||c?a:oa,this.$dragBox.data(ba,a).toggleClass(G,b).toggleClass(F,c),d.cropBoxMovable||this.$face.data(ba,a).toggleClass(G,b).toggleClass(F,c))}},r.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},r.setDefaults=function(b){a.extend(r.DEFAULTS,b)},r.TEMPLATE='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',r.other=a.fn.cropper,a.fn.cropper=function(b){var e,f=d(arguments,1);return this.each(function(){var c,d,g=a(this),h=g.data(A);if(!h){if(/destroy/.test(b))return;c=a.extend({},g.data(),a.isPlainObject(b)&&b),g.data(A,h=new r(this,c))}"string"==typeof b&&a.isFunction(d=h[b])&&(e=d.apply(h,f))}),c(e)?this:e},a.fn.cropper.Constructor=r,a.fn.cropper.setDefaults=r.setDefaults,a.fn.cropper.noConflict=function(){return a.fn.cropper=r.other,this}}),function(a,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(b):a.Jets=b()}(this,function(){function a(b){if(!(this instanceof a))return new a(b);var c=this,d={searchSelector:"*AND",hideBy:"display:none",diacriticsMap:{}};if(c.options={},"columns addImportant searchSelector hideBy manualContentHandling callSearchManually diacriticsMap didSearch invert".split(" ").forEach(function(a){c.options[a]=b[a]||d[a]}),1<this.options.searchSelector.length){var e=c.options.searchSelector.trim();c.options.searchSelector=e.substr(0,1),c.options.searchSelectorMode=e.substr(1).toUpperCase()}if(c.content_tag=document.querySelectorAll(b.contentTag),!c.content_tag)throw Error("Error! Could not find contentTag element");if(c.content_param=b.contentTag,c.search_tag=document.querySelector(b.searchTag),!c.search_tag&&!c.options.callSearchManually)throw Error('Error! Provide one of search methods: searchTag or callSearchManually and call .search("phrase") manually');var f=c.search_tag&&c.search_tag.value||"";c.search=function(a){f!=(f=c.options.callSearchManually&&"undefined"!=typeof a?a:c.search_tag?c.search_tag.value:"")&&(c._applyCSS(f),c.options.didSearch&&c.options.didSearch(f))},c._onSearch=function(a){return"keydown"==a.type?setTimeout(c.search,0):void c.search()},c.destroy=function(){c.options.callSearchManually||c._processEventListeners("remove"),c._destroy()},c.options.callSearchManually||c._processEventListeners("add"),c._addStyleTag(),c._setJets(),c._applyCSS(f)}return a.prototype={constructor:a,_processEventListeners:function(a){["input","keydown","change"].forEach(function(b){this.search_tag[a+"EventListener"](b,this._onSearch)}.bind(this))},_applyCSS:function(a){var b=this.options;a=this.replaceDiacritics(a.trim().toLowerCase().replace(/\s\s+/g," ")).replace(/\\/g,"\\\\");for(var c=b.searchSelectorMode?a.split(" ").filter(function(a,b,c){return c.indexOf(a)==b}):[a],d="AND"==b.searchSelectorMode,e=Array(c.length),f=0,g=c.length;g>f;f++)e[f]=(d?this.content_param+">":"")+(b.invert?"":":not(")+"[data-jets"+b.searchSelector+'="'+c[f]+'"]'+(b.invert?"":")");c=b.hideBy.split(";").filter(Boolean).map(function(a){return a+(b.addImportant?"!important":"")}),d=(d?"":this.content_param+">")+e.join(d?",":"")+"{"+c.join(";")+"}",this.styleTag.innerHTML=a.length?d:""},_addStyleTag:function(){this.styleTag=document.createElement("style"),document.head.appendChild(this.styleTag)},_getText:function(a){return a&&(a.textContent||a.innerText)||""},_getContentTags:function(a){return Array.prototype.slice.call(this.content_tag).reduce(function(b,c){return b.concat(Array.prototype.slice.call(c.querySelectorAll(a||":scope > *")))},[])},_setJets:function(a,b){for(var c,d,e=this,f=e._getContentTags(b?"":a),g=0;d=f[g];g++)(!d.hasAttribute("data-jets")||b)&&(c=this.options.manualContentHandling?this.options.manualContentHandling(d):e.options.columns&&e.options.columns.length?e.options.columns.map(function(a){return e._getText(d.children[a])}).join(" "):e._getText(d),d.setAttribute("data-jets",e.replaceDiacritics(c.trim().replace(/\s+/g," ").toLowerCase())))},replaceDiacritics:function(a){var b,c=this.options.diacriticsMap;for(b in c)if(c.hasOwnProperty(b))for(var d=0,e=c[b].length;e>d;d++)a=a.replace(new RegExp(c[b][d],"g"),b);return a},update:function(a){this._setJets(":scope > :not([data-jets])",a)},_destroy:function(){this.styleTag.parentNode&&document.head.removeChild(this.styleTag);for(var a,b=this._getContentTags(),c=0;a=b[c];c++)a.removeAttribute("data-jets")}},function(a,b){try{a.querySelector(":scope body")}catch(c){["querySelector","querySelectorAll"].forEach(function(c){var d=b[c];b[c]=function(b){if(/(^|,)\s*:scope/.test(b)){var e=this.id;return this.id="ID_"+Date.now(),b=b.replace(/((^|,)\s*):scope/g,"$1#"+this.id),b=a[c](b),this.id=e,b}return d.call(this,b)}})}}(window.document,Element.prototype),a}),function(deparam){if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){try{var jquery=require("jquery")}catch(e){}module.exports=deparam(jquery)}else if("function"==typeof define&&define.amd)define(["jquery"],function(a){return deparam(a)});else{var global;try{global=eval("this")}catch(e){global=window}global.deparam=deparam(global.jQuery)}}(function(a){var b=function(a,b){var c={},d={"true":!0,"false":!1,"null":null};return a.replace(/\+/g," ").split("&").forEach(function(a){var e,f=a.split("="),g=decodeURIComponent(f[0]),h=c,i=0,j=g.split("]["),k=j.length-1;if(/\[/.test(j[0])&&/\]$/.test(j[k])?(j[k]=j[k].replace(/\]$/,""),j=j.shift().split("[").concat(j),k=j.length-1):k=0,2===f.length)if(e=decodeURIComponent(f[1]),b&&(e=e&&!isNaN(e)&&+e+""===e?+e:"undefined"===e?void 0:void 0!==d[e]?d[e]:e),k)for(;k>=i;i++)g=""===j[i]?h.length:j[i],h=h[g]=k>i?h[g]||(j[i+1]&&isNaN(j[i+1])?{}:[]):e;else"[object Array]"===Object.prototype.toString.call(c[g])?c[g].push(e):{}.hasOwnProperty.call(c,g)?c[g]=[c[g],e]:c[g]=e;else g&&(c[g]=b?void 0:"")}),c};return a&&(a.prototype.deparam=a.deparam=b),b}),function(a,b){var c,d=a.jQuery||a.Cowboy||(a.Cowboy={});d.throttle=c=function(a,c,e,f){function g(){function d(){i=+new Date,e.apply(j,l)}function g(){h=b}var j=this,k=+new Date-i,l=arguments;f&&!h&&d(),h&&clearTimeout(h),f===b&&k>a?d():c!==!0&&(h=setTimeout(f?g:d,f===b?a-k:a))}var h,i=0;return"boolean"!=typeof c&&(f=e,e=c,c=b),d.guid&&(g.guid=e.guid=e.guid||d.guid++),g},d.debounce=function(a,d,e){return e===b?c(a,d,!1):c(a,e,d!==!1)}}(this),!function(a,b){function c(a,b,c){var d=a.children(),e=!1;a.empty();for(var g=0,h=d.length;h>g;g++){var i=d.eq(g);if(a.append(i),c&&a.append(c),f(a,b)){i.remove(),e=!0;break}c&&c.detach()}return e}function d(b,c,g,h,i){var j=!1,k="a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",l="script, .dotdotdot-keep";return b.contents().detach().each(function(){var m=this,n=a(m);if("undefined"==typeof m)return!0;if(n.is(l))b.append(n);else{if(j)return!0;b.append(n),!i||n.is(h.after)||n.find(h.after).length||b[b.is(k)?"after":"append"](i),f(g,h)&&(j=3==m.nodeType?e(n,c,g,h,i):d(n,c,g,h,i)),j||i&&i.detach()}}),c.addClass("is-truncated"),j}function e(b,c,d,e,h){var k=b[0];if(!k)return!1;var m=j(k),n=-1!==m.indexOf(" ")?" ":"ã€€",o="letter"==e.wrap?"":n,p=m.split(o),q=-1,r=-1,s=0,t=p.length-1;for(e.fallbackToLetter&&0==s&&0==t&&(o="",p=m.split(o),t=p.length-1);t>=s&&(0!=s||0!=t);){var u=Math.floor((s+t)/2);if(u==r)break;r=u,i(k,p.slice(0,r+1).join(o)+e.ellipsis),d.children().each(function(){a(this).toggle().toggle()}),f(d,e)?(t=r,e.fallbackToLetter&&0==s&&0==t&&(o="",p=p[0].split(o),q=-1,r=-1,s=0,t=p.length-1)):(q=r,s=r)}if(-1==q||1==p.length&&0==p[0].length){var v=b.parent();b.detach();var w=h&&h.closest(v).length?h.length:0;if(v.contents().length>w?k=l(v.contents().eq(-1-w),c):(k=l(v,c,!0),w||v.detach()),k&&(m=g(j(k),e),i(k,m),w&&h)){var x=h.parent();a(k).parent().append(h),a.trim(x.html())||x.remove()}}else m=g(p.slice(0,q+1).join(o),e),i(k,m);return!0}function f(a,b){return a.innerHeight()>b.maxHeight}function g(b,c){for(;a.inArray(b.slice(-1),c.lastCharacter.remove)>-1;)b=b.slice(0,-1);return a.inArray(b.slice(-1),c.lastCharacter.noEllipsis)<0&&(b+=c.ellipsis),b}function h(a){return{width:a.innerWidth(),height:a.innerHeight()}}function i(a,b){a.innerText?a.innerText=b:a.nodeValue?a.nodeValue=b:a.textContent&&(a.textContent=b)}function j(a){return a.innerText?a.innerText:a.nodeValue?a.nodeValue:a.textContent?a.textContent:""}function k(a){do a=a.previousSibling;while(a&&1!==a.nodeType&&3!==a.nodeType);return a}function l(b,c,d){var e,f=b&&b[0];if(f){if(!d){if(3===f.nodeType)return f;if(a.trim(b.text()))return l(b.contents().last(),c)}for(e=k(f);!e;){if(b=b.parent(),b.is(c)||!b.length)return!1;e=k(b[0])}if(e)return l(a(e),c)}return!1}function m(b,c){return b?"string"==typeof b?(b=a(b,c),b.length?b:!1):b.jquery?b:!1:!1}function n(a){for(var b=a.innerHeight(),c=["paddingTop","paddingBottom"],d=0,e=c.length;e>d;d++){var f=parseInt(a.css(c[d]),10);isNaN(f)&&(f=0),b-=f}return b}if(!a.fn.dotdotdot){a.fn.dotdotdot=function(b){if(0==this.length)return a.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){a(this).dotdotdot(b)});var e=this,g=e.contents();e.data("dotdotdot")&&e.trigger("destroy.dot"),e.data("dotdotdot-style",e.attr("style")||""),e.css("word-wrap","break-word"),"nowrap"===e.css("white-space")&&e.css("white-space","normal"),e.bind_events=function(){return e.bind("update.dot",function(b,h){switch(e.removeClass("is-truncated"),b.preventDefault(),b.stopPropagation(),typeof i.height){case"number":i.maxHeight=i.height;break;case"function":i.maxHeight=i.height.call(e[0]);break;default:i.maxHeight=n(e)}i.maxHeight+=i.tolerance,"undefined"!=typeof h&&(("string"==typeof h||"nodeType"in h&&1===h.nodeType)&&(h=a("<div />").append(h).contents()),h instanceof a&&(g=h)),p=e.wrapInner('<div class="dotdotdot" />').children(),p.contents().detach().end().append(g.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var k=!1,l=!1;return j.afterElement&&(k=j.afterElement.clone(!0),k.show(),j.afterElement.detach()),f(p,i)&&(l="children"==i.wrap?c(p,i,k):d(p,e,p,i,k)),p.replaceWith(p.contents()),p=null,a.isFunction(i.callback)&&i.callback.call(e[0],l,g),j.isTruncated=l,l}).bind("isTruncated.dot",function(a,b){return a.preventDefault(),a.stopPropagation(),"function"==typeof b&&b.call(e[0],j.isTruncated),j.isTruncated}).bind("originalContent.dot",function(a,b){return a.preventDefault(),a.stopPropagation(),"function"==typeof b&&b.call(e[0],g),g}).bind("destroy.dot",function(a){a.preventDefault(),a.stopPropagation(),e.unwatch().unbind_events().contents().detach().end().append(g).attr("style",e.data("dotdotdot-style")||"").removeClass("is-truncated").data("dotdotdot",!1)}),e},e.unbind_events=function(){return e.unbind(".dot"),e},e.watch=function(){if(e.unwatch(),"window"==i.watch){var b=a(window),c=b.width(),d=b.height();b.bind("resize.dot"+j.dotId,function(){c==b.width()&&d==b.height()&&i.windowResizeFix||(c=b.width(),d=b.height(),l&&clearInterval(l),l=setTimeout(function(){e.trigger("update.dot")},100))})}else k=h(e),l=setInterval(function(){if(e.is(":visible")){var a=h(e);k.width==a.width&&k.height==a.height||(e.trigger("update.dot"),k=a)}},500);return e},e.unwatch=function(){return a(window).unbind("resize.dot"+j.dotId),l&&clearInterval(l),e};var i=a.extend(!0,{},a.fn.dotdotdot.defaults,b),j={},k={},l=null,p=null;return i.lastCharacter.remove instanceof Array||(i.lastCharacter.remove=a.fn.dotdotdot.defaultArrays.lastCharacter.remove),i.lastCharacter.noEllipsis instanceof Array||(i.lastCharacter.noEllipsis=a.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),j.afterElement=m(i.after,e),j.isTruncated=!1,j.dotId=o++,e.data("dotdotdot",!0).bind_events().trigger("update.dot"),i.watch&&e.watch(),e},a.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},a.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","ã€€",",",";",".","!","?"],noEllipsis:[]}},a.fn.dotdotdot.debug=function(a){};var o=1,p=a.fn.html;a.fn.html=function(c){return c!=b&&!a.isFunction(c)&&this.data("dotdotdot")?this.trigger("update",[c]):p.apply(this,arguments)};var q=a.fn.text;a.fn.text=function(c){return c!=b&&!a.isFunction(c)&&this.data("dotdotdot")?(c=a("<div />").text(c).html(),this.trigger("update",[c])):q.apply(this,arguments)}}}(jQuery),jQuery(document).ready(function(a){a(".dot-ellipsis").each(function(){var b=a(this).hasClass("dot-resize-update"),c=a(this).hasClass("dot-timer-update"),d=0,e=a(this).attr("class").split(/\s+/);a.each(e,function(a,b){var c=b.match(/^dot-height-(\d+)$/);null!==c&&(d=Number(c[1]))});var f=new Object;c&&(f.watch=!0),b&&(f.watch="window"),d>0&&(f.height=d),a(this).dotdotdot(f)})}),jQuery(window).on("load",function(){jQuery(".dot-ellipsis.dot-load-update").trigger("update.dot")}),function(a){a.fn.dropdown=function(b){var c=a.extend({selected:".selected",items:"ul",item:"li",openClass:"open",changed:function(a){}},b);return this.each(function(){function b(b,d){var e=a(b);n.find(c.item).removeClass("hover"),e.addClass("hover"),d&&e.parent().scrollTop(e.position().top-e.height())}function d(b){var d=a(b).data("index"),e=k.items[d];m.find("> "+c.selected).html(j(e)),n.find("[data-index="+l+"]").removeClass("selected"),l=d,a(b).addClass("selected"),g.val(e.value),e.srcElement=m,c.changed(e),f()}function e(){n.show(),m.addClass(c.openClass),a.isFunction(c.open)&&c.open()}function f(){n.hide(),m.removeClass(c.openClass),a.isFunction(c.close)&&c.close()}var g=a(this);g.hide();var h=application.sandbox.getConfigParam("tpl"),i=h.compile(g.data("template")),j=h.compile(g.data("template")+"-selected"),k={selected:null,items:[],classes:g.data("classes")},l=0;a.each(g.find("option"),function(b,c){var d=a(c),e={value:d.attr("value"),label:d.text(),selected:d.is(":selected")},f=d.data();a.each(f,function(a,b){e[a]=b}),d.is(":selected")&&(k.selected=e,l=b),k.items.push(e)});var m=a(i(k)),n=m.find(c.items),o=m.find("> "+c.selected);return o.on("mouseup",function(){return m.focus(),n.is(":visible")?f():e(),!1}),k.classes&&m.addClass(k.classes),m.on("focus",function(){g.addClass("focus")}),m.on("blur",function(){g.removeClass("focus"),f()}),m.on("keydown",function(a){var f=null;switch(a.keyCode){case 40:m.hasClass(c.openClass)?(f=n.find(".hover").next(c.item).first(),f.length||(f=n.find(c.item).first())):(e(),f=n.find(".selected")),b(f,!0),a.preventDefault();break;case 38:m.hasClass(c.openClass)?(f=n.find(".hover").prev(c.item).first(),f.length||(f=n.find(c.item).last())):(e(),f=n.find(".selected")),b(f,!0),a.preventDefault();break;case 13:if(m.hasClass(c.openClass)){var g=n.find(".hover").first();g&&d(g)}else e();a.preventDefault()}}),n.find("[data-index="+l+"]").addClass("selected"),n.on("mouseup",c.item,function(){return d(this),!1}),n.on("mouseover",c.item,function(){b(this,!1)}),g.before(m)})}}(jQuery),!function(a){function b(a,c,d,e){function f(a){d.maxRows&&l>d.maxRows||d.truncate&&a&&l>1?n[g][0].style.display="none":(n[g][4]&&(n[g][3].attr("src",n[g][4]),n[g][4]=""),n[g][0].style.width=j+"px",n[g][0].style.height=p+"px",n[g][0].style.display="block")}var g,j,k=1,l=1,m=a.width()-2,n=[],o=0,p=d.rowHeight;for(m||(m=a.width()-2),i=0;i<c.length;i++)if(n.push(c[i]),o+=c[i][2]+d.margin,o>=m){var q=n.length*d.margin;for(k=(m-q)/(o-q),p=Math.ceil(d.rowHeight*k),exact_w=0,g=0;g<n.length;g++)j=Math.ceil(n[g][2]*k),exact_w+=j+d.margin,exact_w>m&&(j-=exact_w-m),f();n=[],o=0,l++}for(g=0;g<n.length;g++)j=Math.floor(n[g][2]*k),h=Math.floor(d.rowHeight*k),f(!0);e||m==a.width()||b(a,c,d,!0);
}a.fn.flexImages=function(c){var d=a.extend({container:".item",object:"img",rowHeight:180,maxRows:0,truncate:0},c);return this.each(function(){var c=a(this),e=a(c).find(d.container),f=[],g=(new Date).getTime(),h=window.getComputedStyle?getComputedStyle(e[0],null):e[0].currentStyle;for(d.margin=(parseInt(h.marginLeft)||0)+(parseInt(h.marginRight)||0)+(Math.round(parseFloat(h.borderLeftWidth))||0)+(Math.round(parseFloat(h.borderRightWidth))||0),j=0;j<e.length;j++){var i=e[j],k=parseInt(i.getAttribute("data-w")),l=k*(d.rowHeight/parseInt(i.getAttribute("data-h"))),m=a(i).find(d.object);f.push([i,k,l,m,null])}b(c,f,d),a(window).off("resize.flexImages"+c.data("flex-t")),a(window).on("resize.flexImages"+g,function(){b(c,f,d)}),c.data("flex-t",g)})}}(jQuery);var $jscomp={scope:{},findInternal:function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;d>e;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(a,b,c,d){if(b){for(c=$jscomp.global,a=a.split("."),d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={}),c=c[e]}a=a[a.length-1],d=c[a],b=b(d),b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}},$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3"),function(a,b,c){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(b||c)}(function(a){var b=function(b,c,d){var e={invalid:[],getCaret:function(){try{var a,c=0,d=b.get(0),f=document.selection,g=d.selectionStart;return f&&-1===navigator.appVersion.indexOf("MSIE 10")?(a=f.createRange(),a.moveStart("character",-e.val().length),c=a.text.length):(g||"0"===g)&&(c=g),c}catch(h){}},setCaret:function(a){try{if(b.is(":focus")){var c,d=b.get(0);d.setSelectionRange?d.setSelectionRange(a,a):(c=d.createTextRange(),c.collapse(!0),c.moveEnd("character",a),c.moveStart("character",a),c.select())}}catch(e){}},events:function(){b.on("keydown.mask",function(a){b.data("mask-keycode",a.keyCode||a.which),b.data("mask-previus-value",b.val())}).on(a.jMaskGlobals.useInput?"input.mask":"keyup.mask",e.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){b.keydown().keyup()},100)}).on("change.mask",function(){b.data("changed",!0)}).on("blur.mask",function(){h===e.val()||b.data("changed")||b.trigger("change"),b.data("changed",!1)}).on("blur.mask",function(){h=e.val()}).on("focus.mask",function(b){!0===d.selectOnFocus&&a(b.target).select()}).on("focusout.mask",function(){d.clearIfNotMatch&&!f.test(e.val())&&e.val("")})},getRegexMask:function(){for(var a,b,d,e,f=[],h=0;h<c.length;h++)(a=g.translation[c.charAt(h)])?(b=a.pattern.toString().replace(/.{1}$|^.{1}/g,""),d=a.optional,(a=a.recursive)?(f.push(c.charAt(h)),e={digit:c.charAt(h),pattern:b}):f.push(d||a?b+"?":b)):f.push(c.charAt(h).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return f=f.join(""),e&&(f=f.replace(new RegExp("("+e.digit+"(.*"+e.digit+")?)"),"($1)?").replace(new RegExp(e.digit,"g"),e.pattern)),new RegExp(f)},destroyEvents:function(){b.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(a){var c=b.is("input")?"val":"text";return 0<arguments.length?(b[c]()!==a&&b[c](a),c=b):c=b[c](),c},calculateCaretPosition:function(a,c){var d=c.length,e=b.data("mask-previus-value"),f=e.length;return 8===b.data("mask-keycode")&&e!==c?a-=c.slice(0,a).length-e.slice(0,a).length:e!==c&&(a=a>=f?d:a+(c.slice(0,a).length-e.slice(0,a).length)),a},behaviour:function(c){c=c||window.event,e.invalid=[];var d=b.data("mask-keycode");if(-1===a.inArray(d,g.byPassKeys)){var d=e.getMasked(),f=e.getCaret();return setTimeout(function(a,b){e.setCaret(e.calculateCaretPosition(a,b))},10,f,d),e.val(d),e.setCaret(f),e.callbacks(c)}},getMasked:function(a,b){var f,h,i=[],j=void 0===b?e.val():b+"",k=0,l=c.length,m=0,n=j.length,o=1,p="push",q=-1;d.reverse?(p="unshift",o=-1,f=0,k=l-1,m=n-1,h=function(){return k>-1&&m>-1}):(f=l-1,h=function(){return l>k&&n>m});for(var r;h();){var s=c.charAt(k),t=j.charAt(m),u=g.translation[s];u?(t.match(u.pattern)?(i[p](t),u.recursive&&(-1===q?q=k:k===f&&(k=q-o),f===q&&(k-=o)),k+=o):t===r?r=void 0:u.optional?(k+=o,m-=o):u.fallback?(i[p](u.fallback),k+=o,m-=o):e.invalid.push({p:m,v:t,e:u.pattern}),m+=o):(a||i[p](s),t===s?m+=o:r=s,k+=o)}return j=c.charAt(f),l!==n+1||g.translation[j]||i.push(j),i.join("")},callbacks:function(a){var f=e.val(),g=f!==h,i=[f,a,b,d],j=function(a,b,c){"function"==typeof d[a]&&b&&d[a].apply(this,c)};j("onChange",!0===g,i),j("onKeyPress",!0===g,i),j("onComplete",f.length===c.length,i),j("onInvalid",0<e.invalid.length,[f,a,b,e.invalid,d])}};b=a(b);var f,g=this,h=e.val();c="function"==typeof c?c(e.val(),void 0,b,d):c,g.mask=c,g.options=d,g.remove=function(){var a=e.getCaret();return e.destroyEvents(),e.val(g.getCleanVal()),e.setCaret(a),b},g.getCleanVal=function(){return e.getMasked(!0)},g.getMaskedVal=function(a){return e.getMasked(!1,a)},g.init=function(h){if(h=h||!1,d=d||{},g.clearIfNotMatch=a.jMaskGlobals.clearIfNotMatch,g.byPassKeys=a.jMaskGlobals.byPassKeys,g.translation=a.extend({},a.jMaskGlobals.translation,d.translation),g=a.extend(!0,{},g,d),f=e.getRegexMask(),h)e.events(),e.val(e.getMasked());else{d.placeholder&&b.attr("placeholder",d.placeholder),b.data("mask")&&b.attr("autocomplete","off"),h=0;for(var i=!0;h<c.length;h++){var j=g.translation[c.charAt(h)];if(j&&j.recursive){i=!1;break}}i&&b.attr("maxlength",c.length),e.destroyEvents(),e.events(),h=e.getCaret(),e.val(e.getMasked()),e.setCaret(h)}},g.init(!b.is("input"))};a.maskWatchers={};var c=function(){var c=a(this),e={},f=c.attr("data-mask");return c.attr("data-mask-reverse")&&(e.reverse=!0),c.attr("data-mask-clearifnotmatch")&&(e.clearIfNotMatch=!0),"true"===c.attr("data-mask-selectonfocus")&&(e.selectOnFocus=!0),d(c,f,e)?c.data("mask",new b(this,f,e)):void 0},d=function(b,c,d){d=d||{};var e=a(b).data("mask"),f=JSON.stringify;b=a(b).val()||a(b).text();try{return"function"==typeof c&&(c=c(b)),"object"!=typeof e||f(e.options)!==f(d)||e.mask!==c}catch(g){}},e=function(a){var b,c=document.createElement("div");return a="on"+a,b=a in c,b||(c.setAttribute(a,"return;"),b="function"==typeof c[a]),b};a.fn.mask=function(c,e){e=e||{};var f=this.selector,g=a.jMaskGlobals,h=g.watchInterval,g=e.watchInputs||g.watchInputs,i=function(){return d(this,c,e)?a(this).data("mask",new b(this,c,e)):void 0};return a(this).each(i),f&&""!==f&&g&&(clearInterval(a.maskWatchers[f]),a.maskWatchers[f]=setInterval(function(){a(document).find(f).each(i)},h)),this},a.fn.masked=function(a){return this.data("mask").getMaskedVal(a)},a.fn.unmask=function(){return clearInterval(a.maskWatchers[this.selector]),delete a.maskWatchers[this.selector],this.each(function(){var b=a(this).data("mask");b&&b.remove().removeData("mask")})},a.fn.cleanVal=function(){return this.data("mask").getCleanVal()},a.applyDataMask=function(b){b=b||a.jMaskGlobals.maskElements,(b instanceof a?b:a(b)).filter(a.jMaskGlobals.dataMaskAttr).each(c)},e={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:!/Chrome\/28/.test(window.navigator.userAgent)&&e("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}},a.jMaskGlobals=a.jMaskGlobals||{},e=a.jMaskGlobals=a.extend(!0,{},e,a.jMaskGlobals),e.dataMask&&a.applyDataMask(),setInterval(function(){a.jMaskGlobals.watchDataMask&&a.applyDataMask()},e.watchInterval)},window.jQuery,window.Zepto),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){a.extend(a.fn,{validate:function(b){if(!this.length)return void(b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var c=a.data(this[0],"validator");return c?c:(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.on("click.validate",":submit",function(b){c.settings.submitHandler&&(c.submitButton=b.target),a(this).hasClass("cancel")&&(c.cancelSubmit=!0),void 0!==a(this).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.on("submit.validate",function(b){function d(){var d,e;return c.settings.submitHandler?(c.submitButton&&(d=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),e=c.settings.submitHandler.call(c,c.currentForm,b),c.submitButton&&d.remove(),void 0!==e?e:!1):!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)},valid:function(){var b,c,d;return a(this[0]).is("form")?b=this.validate().form():(d=[],b=!0,c=a(this[0].form).validate(),this.each(function(){b=c.element(this)&&b,b||(d=d.concat(c.errorList))}),c.errorList=d),b},rules:function(b,c){if(this.length){var d,e,f,g,h,i,j=this[0];if(b)switch(d=a.data(j.form,"validator").settings,e=d.rules,f=a.validator.staticRules(j),b){case"add":a.extend(f,a.validator.normalizeRule(c)),delete f.messages,e[j.name]=f,c.messages&&(d.messages[j.name]=a.extend(d.messages[j.name],c.messages));break;case"remove":return c?(i={},a.each(c.split(/\s/),function(b,c){i[c]=f[c],delete f[c],"required"===c&&a(j).removeAttr("aria-required")}),i):(delete e[j.name],f)}return g=a.validator.normalizeRules(a.extend({},a.validator.classRules(j),a.validator.attributeRules(j),a.validator.dataRules(j),a.validator.staticRules(j)),j),g.required&&(h=g.required,delete g.required,g=a.extend({required:h},g),a(j).attr("aria-required","true")),g.remote&&(h=g.remote,delete g.remote,g=a.extend(g,{remote:h})),g}}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+a(b).val())},filled:function(b){var c=a(b).val();return null!==c&&!!a.trim(""+c)},unchecked:function(b){return!a(b).prop("checked")}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:void 0===c?b:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(a)))},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(b,c){var d=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===c.which&&""===this.elementValue(b)||-1!==a.inArray(c.keyCode,d)||(b.name in this.submitted||b.name in this.invalid)&&this.element(b)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}."),step:a.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this.form,"validator"),d="on"+b.type.replace(/^validate/,""),e=c.settings;e[d]&&!a(this).is(e.ignore)&&e[d].call(c,this,b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c,d=this.groups={};a.each(this.settings.groups,function(b,c){"string"==typeof c&&(c=c.split(/\s/)),a.each(c,function(a,c){d[c]=b})}),c=this.settings.rules,a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",b).on("click.validate","select, option, [type='radio'], [type='checkbox']",b),this.settings.invalidHandler&&a(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),a(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){var c,d,e=this.clean(b),f=this.validationTargetFor(e),g=this,h=!0;return void 0===f?delete this.invalid[e.name]:(this.prepareElement(f),this.currentElements=a(f),d=this.groups[f.name],d&&a.each(this.groups,function(a,b){b===d&&a!==f.name&&(e=g.validationTargetFor(g.clean(g.findByName(a))),e&&e.name in g.invalid&&(g.currentElements.push(e),h=h&&g.check(e)))}),c=this.check(f)!==!1,h=h&&c,c?this.invalid[f.name]=!1:this.invalid[f.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),a(b).attr("aria-invalid",!c)),h},showErrors:function(b){if(b){var c=this;a.extend(this.errorMap,b),this.errorList=a.map(this.errorMap,function(a,b){return{message:a,element:c.findByName(b)[0]}}),this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var b=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(b)},resetElements:function(a){var b;if(this.settings.unhighlight)for(b=0;a[b];b++)this.settings.unhighlight.call(this,a[b],this.settings.errorClass,""),this.findByName(a[b].name).removeClass(this.settings.validClass);else a.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b,c=0;for(b in a)a[b]&&c++;return c},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text(""),this.addWrapper(a).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var d=this.name||a(this).attr("name");return!d&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=a(this).closest("form")[0]),d in c||!b.objectLength(a(this).rules())?!1:(c[d]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.split(" ").join(".");return a(this.settings.errorElement+"."+b,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([])},reset:function(){this.resetInternals(),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},elementValue:function(b){var c,d,e=a(b),f=b.type;return"radio"===f||"checkbox"===f?this.findByName(b.name).filter(":checked").val():"number"===f&&"undefined"!=typeof b.validity?b.validity.badInput?"NaN":e.val():(c=b.hasAttribute("contenteditable")?e.text():e.val(),"file"===f?"C:\\fakepath\\"===c.substr(0,12)?c.substr(12):(d=c.lastIndexOf("/"),d>=0?c.substr(d+1):(d=c.lastIndexOf("\\"),d>=0?c.substr(d+1):c)):"string"==typeof c?c.replace(/\r/g,""):c)},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d,e,f=a(b).rules(),g=a.map(f,function(a,b){return b}).length,h=!1,i=this.elementValue(b);if("function"==typeof f.normalizer){if(i=f.normalizer.call(b,i),"string"!=typeof i)throw new TypeError("The normalizer should return a string value.");delete f.normalizer}for(d in f){e={method:d,parameters:f[d]};try{if(c=a.validator.methods[d].call(this,i,b,e.parameters),"dependency-mismatch"===c&&1===g){h=!0;continue}if(h=!1,"pending"===c)return void(this.toHide=this.toHide.not(this.errorsFor(b)));if(!c)return this.formatAndAdd(b,e),!1}catch(j){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+e.method+"' method.",j),j instanceof TypeError&&(j.message+=".  Exception occurred when checking element "+b.id+", check the '"+e.method+"' method."),j}}return h?void 0:(this.objectLength(f)&&this.successList.push(b),!0)},customDataMessage:function(b,c){return a(b).data("msg"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase())||a(b).data("msg")},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,c){var d=this.findDefined(this.customMessage(b.name,c.method),this.customDataMessage(b,c.method),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c.method],"<strong>Warning: No message defined for "+b.name+"</strong>"),e=/\$?\{(\d+)\}/g;return"function"==typeof d?d=d.call(this,c.parameters,b):e.test(d)&&(d=a.validator.format(d.replace(e,"{$1}"),c.parameters)),d},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b);this.errorList.push({message:c,element:a,method:b.method}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){var a,b,c;for(a=0;this.errorList[a];a++)c=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d,e,f,g,h=this.errorsFor(b),i=this.idOrName(b),j=a(b).attr("aria-describedby");h.length?(h.removeClass(this.settings.validClass).addClass(this.settings.errorClass),h.html(c)):(h=a("<"+this.settings.errorElement+">").attr("id",i+"-error").addClass(this.settings.errorClass).html(c||""),d=h,this.settings.wrapper&&(d=h.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(d):this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b),h.is("label")?h.attr("for",i):0===h.parents("label[for='"+this.escapeCssMeta(i)+"']").length&&(f=h.attr("id"),j?j.match(new RegExp("\\b"+this.escapeCssMeta(f)+"\\b"))||(j+=" "+f):j=f,a(b).attr("aria-describedby",j),e=this.groups[b.name],e&&(g=this,a.each(g.groups,function(b,c){c===e&&a("[name='"+g.escapeCssMeta(b)+"']",g.currentForm).attr("aria-describedby",h.attr("id"))})))),!c&&this.settings.success&&(h.text(""),"string"==typeof this.settings.success?h.addClass(this.settings.success):this.settings.success(h,b)),this.toShow=this.toShow.add(h)},errorsFor:function(b){var c=this.escapeCssMeta(this.idOrName(b)),d=a(b).attr("aria-describedby"),e="label[for='"+c+"'], label[for='"+c+"'] *";return d&&(e=e+", #"+this.escapeCssMeta(d).replace(/\s+/g,", #")),this.errors().filter(e)},escapeCssMeta:function(a){return a.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(b){return this.checkable(b)&&(b=this.findByName(b.name)),a(b).not(this.settings.ignore)[0]},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+this.escapeCssMeta(b)+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){this.pending[b.name]||(this.pendingRequest++,a(b).addClass(this.settings.pendingClass),this.pending[b.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],a(b).removeClass(this.settings.pendingClass),c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b,c){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,{method:c})})},destroy:function(){this.resetForm(),a(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},normalizeAttributeRule:function(a,b,c,d){/min|max|step/.test(c)&&(null===b||/number|range|text/.test(b))&&(d=Number(d),isNaN(d)&&(d=void 0)),d||0===d?a[c]=d:b===c&&"range"!==b&&(a[c]=!0)},attributeRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)"required"===c?(d=b.getAttribute(c),""===d&&(d=!0),d=!!d):d=f.attr(c),this.normalizeAttributeRule(e,g,c,d);return e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)&&delete e.maxlength,e},dataRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)d=f.data("rule"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase()),this.normalizeAttributeRule(e,g,c,d);return e},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)return void delete b[d];if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0!==e.param?e.param:!0:(a.data(c.form,"validator").resetElements(a(c)),delete b[d])}}),a.each(b,function(d,e){b[d]=a.isFunction(e)&&"normalizer"!==d?e(c):e}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){var c;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(c=b[this].replace(/[\[\]]/g,"").split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))}),a.validator.autoCreateRanges&&(null!=b.min&&null!=b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),null!=b.minlength&&null!=b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!==d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";if("select"===c.nodeName.toLowerCase()){var e=a(c).val();return e&&e.length>0}return this.checkable(c)?this.getLength(b,c)>0:b.length>0},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},url:function(a,b){return this.optional(b)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a).toString())},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,b){return this.optional(b)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},minlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d},maxlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||d>=e},rangelength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||c>=a},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},step:function(b,c,d){var e=a(c).attr("type"),f="Step attribute on input type "+e+" is not supported.",g=["text","number","range"],h=new RegExp("\\b"+e+"\\b"),i=e&&!h.test(g.join());if(i)throw new Error(f);return this.optional(c)||b%d===0},equalTo:function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.not(".validate-equalTo-blur").length&&e.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){a(c).valid()}),b===e.val()},remote:function(b,c,d,e){if(this.optional(c))return"dependency-mismatch";e="string"==typeof e&&e||"remote";var f,g,h,i=this.previousValue(c,e);return this.settings.messages[c.name]||(this.settings.messages[c.name]={}),i.originalMessage=i.originalMessage||this.settings.messages[c.name][e],this.settings.messages[c.name][e]=i.message,d="string"==typeof d&&{url:d}||d,h=a.param(a.extend({data:b},d.data)),i.old===h?i.valid:(i.old=h,f=this,this.startRequest(c),g={},g[c.name]=b,a.ajax(a.extend(!0,{mode:"abort",port:"validate"+c.name,dataType:"json",data:g,context:f.currentForm,success:function(a){var d,g,h,j=a===!0||"true"===a;f.settings.messages[c.name][e]=i.originalMessage,j?(h=f.formSubmitted,f.resetInternals(),f.toHide=f.errorsFor(c),f.formSubmitted=h,f.successList.push(c),f.invalid[c.name]=!1,f.showErrors()):(d={},g=a||f.defaultMessage(c,{method:e,parameters:b}),d[c.name]=i.message=g,f.invalid[c.name]=!0,f.showErrors(d)),i.valid=j,f.stopRequest(c,j)}},d)),"pending")}}});var b,c={};a.ajaxPrefilter?a.ajaxPrefilter(function(a,b,d){var e=a.port;"abort"===a.mode&&(c[e]&&c[e].abort(),c[e]=d)}):(b=a.ajax,a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;return"abort"===e?(c[f]&&c[f].abort(),c[f]=b.apply(this,arguments),c[f]):b.apply(this,arguments)})}),jQuery.validator.setDefaults({errorClass:"state-error"}),function(a){function b(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(a[c],c,a)}function c(a,b,c){var d=0,e="&socket_id="+encodeURIComponent(b);for(var f in a)e+="&channel_name["+d+"]="+encodeURIComponent(f),d++;for(var g in c.params)e+="&"+encodeURIComponent(g)+"="+encodeURIComponent(c.params[g]);return e}function d(b,d,e,f,g){var h=a.Runtime.createXHR();h.open("POST",f,!0),h.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var i in e.headers)h.setRequestHeader(i,e.headers[i]);h.onreadystatechange=function(){if(4===h.readyState)if(200===h.status){var a,b=!1;try{a=JSON.parse(h.responseText),b=!0}catch(c){g(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+h.responseText)}b&&g(!1,a)}else g(!0,h.status)},h.send(c(b,d,e))}var e=function(a){this.options=a,this.authOptions=a.authOptions||{},this.requests={},this.setRequestTimeout()};e.prototype.add=function(a,b){this.requests[a]=b,this.requestTimeout||this.setRequestTimeout()},e.prototype.setRequestTimeout=function(){clearTimeout(this.requestTimeout),this.requestTimeout=setTimeout(function(){Object.keys(this.requests).length?(this.executeRequests(),this.setRequestTimeout()):this.requestTimeout=null}.bind(this),this.options.authDelay||0)},e.prototype.executeRequests=function(){var a=this.requests;
this.requests={},d(a,this.options.socketId,this.authOptions,this.options.authEndpoint,function(c,d){c?b(a,function(a){a(!0,d)}):b(a,function(a,b){d[b]?d[b].status&&200!==d[b].status?a(!0,d[b].status):a(null,d[b].data):a(!0,404)})})};var f={},g=function(a,b,c){var d=this.options.authEndpoint,g=b+":"+d,h=f[g];h||(h=f[g]=new e({socketId:b,authEndpoint:d,authDelay:this.options.authDelay,authOptions:this.options.auth})),h.add(this.channel.name,c)},h=a.Runtime.getAuthorizers();a.Runtime.getAuthorizers=function(){return h.buffered=g,h}}(window.Pusher),function(a){window.swal=function(b,c){b=a.extend(!0,{},b,{callback:c}),application.connectors.events.notify(null,"onSwal",b)}}(jQuery),function(){function a(b,c){if(!(this instanceof a))return new a(b,c);if(!b||"TABLE"!==b.tagName)throw new Error("Element must be a table");this.init(b,c||{})}var b=[],c=function(a){var b;return window.CustomEvent&&"function"==typeof window.CustomEvent?b=new CustomEvent(a):(b=document.createEvent("CustomEvent"),b.initCustomEvent(a,!1,!1,void 0)),b},d=function(a){return a.getAttribute("data-sort")||a.textContent||a.innerText||""},e=function(a,b){return a=a.toLowerCase(),b=b.toLowerCase(),a===b?0:b>a?1:-1},f=function(a,b){return function(c,d){var e=a(c.td,d.td);return 0===e?b?d.index-c.index:c.index-d.index:e}};a.extend=function(a,c,d){if("function"!=typeof c||"function"!=typeof d)throw new Error("Pattern and sort must be a function");b.push({name:a,pattern:c,sort:d})},a.prototype={init:function(a,b){var c,d,e,f,g=this;if(g.table=a,g.thead=!1,g.options=b,a.rows&&a.rows.length>0)if(a.tHead&&a.tHead.rows.length>0){for(e=0;e<a.tHead.rows.length;e++)if(a.tHead.rows[e].classList.contains("sort-row")){c=a.tHead.rows[e];break}c||(c=a.tHead.rows[a.tHead.rows.length-1]),g.thead=!0}else c=a.rows[0];if(c){var h=function(){g.current&&g.current!==this&&(g.current.classList.remove("sort-up"),g.current.classList.remove("sort-down")),g.current=this,g.sortTable(this)};for(e=0;e<c.cells.length;e++)f=c.cells[e],f.classList.contains("no-sort")||(f.classList.add("sort-header"),f.tabindex=0,f.addEventListener("click",h,!1),f.classList.contains("sort-default")&&(d=f));d&&(g.current=d,g.sortTable(d))}},sortTable:function(a,g){var h,i=this,j=a.cellIndex,k=e,l="",m=[],n=i.thead?0:1,o=a.getAttribute("data-sort-method"),p=a.getAttribute("data-sort-order");if(i.table.dispatchEvent(c("beforeSort")),g?h=a.classList.contains("sort-up")?"sort-up":"sort-down":(h=a.classList.contains("sort-up")?"sort-down":a.classList.contains("sort-down")?"sort-up":"asc"===p?"sort-down":"desc"===p?"sort-up":i.options.descending?"sort-up":"sort-down",a.classList.remove("sort-down"===h?"sort-up":"sort-down"),a.classList.add(h)),!(i.table.rows.length<2)){if(!o){for(;m.length<3&&n<i.table.tBodies[0].rows.length;)l=d(i.table.tBodies[0].rows[n].cells[j]),l=l.trim(),l.length>0&&m.push(l),n++;if(!m)return}for(n=0;n<b.length;n++)if(l=b[n],o){if(l.name===o){k=l.sort;break}}else if(m.every(l.pattern)){k=l.sort;break}for(i.col=j,n=0;n<i.table.tBodies.length;n++){var q,r=[],s={},t=0,u=0;if(!(i.table.tBodies[n].rows.length<2)){for(q=0;q<i.table.tBodies[n].rows.length;q++)l=i.table.tBodies[n].rows[q],l.classList.contains("no-sort")?s[t]=l:r.push({tr:l,td:d(l.cells[i.col]),index:t}),t++;for("sort-down"===h?(r.sort(f(k,!0)),r.reverse()):r.sort(f(k,!1)),q=0;t>q;q++)s[q]?(l=s[q],u++):l=r[q-u].tr,i.table.tBodies[n].appendChild(l)}}i.table.dispatchEvent(c("afterSort"))}},refresh:function(){void 0!==this.current&&this.sortTable(this.current,!0)}},"undefined"!=typeof module&&module.exports?module.exports=a:window.Tablesort=a}(),function(){var a=function(a){return a.replace(/[^\-?0-9.]/g,"")},b=function(a,b){return a=parseFloat(a),b=parseFloat(b),a=isNaN(a)?0:a,b=isNaN(b)?0:b,a-b};Tablesort.extend("number",function(a){return a.match(/^-?[Â£\x24Ã›Â¢Â´â‚¬]?\d+\s*([,\.]\d{0,2})/)||a.match(/^-?\d+\s*([,\.]\d{0,2})?[Â£\x24Ã›Â¢Â´â‚¬]/)||a.match(/^-?(\d)*-?([,\.]){0,1}-?(\d)+([E,e][\-+][\d]+)?%?$/)},function(c,d){return c=a(c),d=a(d),b(d,c)})}(),!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b(require,exports,module):a.Tether=b()}(this,function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){var b=a.getBoundingClientRect(),c={};for(var d in b)c[d]=b[d];if(a.ownerDocument!==document){var f=a.ownerDocument.defaultView.frameElement;if(f){var g=e(f);c.top+=g.top,c.bottom+=g.top,c.left+=g.left,c.right+=g.left}}return c}function f(a){var b=getComputedStyle(a)||{},c=b.position,d=[];if("fixed"===c)return[a];for(var e=a;(e=e.parentNode)&&e&&1===e.nodeType;){var f=void 0;try{f=getComputedStyle(e)}catch(g){}if("undefined"==typeof f||null===f)return d.push(e),d;var h=f,i=h.overflow,j=h.overflowX,k=h.overflowY;/(auto|scroll|overlay)/.test(i+k+j)&&("absolute"!==c||["relative","absolute","fixed"].indexOf(f.position)>=0)&&d.push(e)}return d.push(a.ownerDocument.body),a.ownerDocument!==document&&d.push(a.ownerDocument.defaultView),d}function g(){z&&document.body.removeChild(z),z=null}function h(a){var b=void 0;a===document?(b=document,a=document.documentElement):b=a.ownerDocument;var c=b.documentElement,d=e(a),f=C();return d.top-=f.top,d.left-=f.left,"undefined"==typeof d.width&&(d.width=document.body.scrollWidth-d.left-d.right),"undefined"==typeof d.height&&(d.height=document.body.scrollHeight-d.top-d.bottom),d.top=d.top-c.clientTop,d.left=d.left-c.clientLeft,d.right=b.body.clientWidth-d.width-d.left,d.bottom=b.body.clientHeight-d.height-d.top,d}function i(a){return a.offsetParent||document.documentElement}function j(){if(D)return D;var a=document.createElement("div");a.style.width="100%",a.style.height="200px";var b=document.createElement("div");k(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),b.appendChild(a),document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";var d=a.offsetWidth;c===d&&(d=b.clientWidth),document.body.removeChild(b);var e=c-d;return D={width:e,height:e}}function k(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=[];return Array.prototype.push.apply(b,arguments),b.slice(1).forEach(function(b){if(b)for(var c in b)({}).hasOwnProperty.call(b,c)&&(a[c]=b[c])}),a}function l(a,b){if("undefined"!=typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.remove(b)});else{var c=new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi"),d=o(a).replace(c," ");p(a,d)}}function m(a,b){if("undefined"!=typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.add(b)});else{l(a,b);var c=o(a)+(" "+b);p(a,c)}}function n(a,b){if("undefined"!=typeof a.classList)return a.classList.contains(b);var c=o(a);return new RegExp("(^| )"+b+"( |$)","gi").test(c)}function o(a){return a.className instanceof a.ownerDocument.defaultView.SVGAnimatedString?a.className.baseVal:a.className}function p(a,b){a.setAttribute("class",b)}function q(a,b,c){c.forEach(function(c){-1===b.indexOf(c)&&n(a,c)&&l(a,c)}),b.forEach(function(b){n(a,b)||m(a,b)})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function r(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function s(a,b){var c=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return a+c>=b&&b>=a-c}function t(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function u(){for(var a={top:0,left:0},b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];return c.forEach(function(b){var c=b.top,d=b.left;"string"==typeof c&&(c=parseFloat(c,10)),"string"==typeof d&&(d=parseFloat(d,10)),a.top+=c,a.left+=d}),a}function v(a,b){return"string"==typeof a.left&&-1!==a.left.indexOf("%")&&(a.left=parseFloat(a.left,10)/100*b.width),"string"==typeof a.top&&-1!==a.top.indexOf("%")&&(a.top=parseFloat(a.top,10)/100*b.height),a}function w(a,b){return"scrollParent"===b?b=a.scrollParents[0]:"window"===b&&(b=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),b===document&&(b=b.documentElement),"undefined"!=typeof b.nodeType&&!function(){var a=b,c=h(b),d=c,e=getComputedStyle(b);if(b=[d.left,d.top,c.width+d.left,c.height+d.top],a.ownerDocument!==document){var f=a.ownerDocument.defaultView;b[0]+=f.pageXOffset,b[1]+=f.pageYOffset,b[2]+=f.pageXOffset,b[3]+=f.pageYOffset}X.forEach(function(a,c){a=a[0].toUpperCase()+a.substr(1),"Top"===a||"Left"===a?b[c]+=parseFloat(e["border"+a+"Width"]):b[c]-=parseFloat(e["border"+a+"Width"])})}(),b}var x=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),y=void 0;"undefined"==typeof y&&(y={modules:[]});var z=null,A=function(){var a=0;return function(){return++a}}(),B={},C=function(){var a=z;a&&document.body.contains(a)||(a=document.createElement("div"),a.setAttribute("data-tether-id",A()),k(a.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(a),z=a);var b=a.getAttribute("data-tether-id");return"undefined"==typeof B[b]&&(B[b]=e(a),F(function(){delete B[b]})),B[b]},D=null,E=[],F=function(a){E.push(a)},G=function(){for(var a=void 0;a=E.pop();)a()},H=function(){function a(){d(this,a)}return x(a,[{key:"on",value:function(a,b,c){var d=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[a]&&(this.bindings[a]=[]),this.bindings[a].push({handler:b,ctx:c,once:d})}},{key:"once",value:function(a,b,c){this.on(a,b,c,!0)}},{key:"off",value:function(a,b){if("undefined"!=typeof this.bindings&&"undefined"!=typeof this.bindings[a])if("undefined"==typeof b)delete this.bindings[a];else for(var c=0;c<this.bindings[a].length;)this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):++c}},{key:"trigger",value:function(a){if("undefined"!=typeof this.bindings&&this.bindings[a]){for(var b=0,c=arguments.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=arguments[e];for(;b<this.bindings[a].length;){var f=this.bindings[a][b],g=f.handler,h=f.ctx,i=f.once,j=h;"undefined"==typeof j&&(j=this),g.apply(j,d),i?this.bindings[a].splice(b,1):++b}}}}]),a}();y.Utils={getActualBoundingClientRect:e,getScrollParents:f,getBounds:h,getOffsetParent:i,extend:k,addClass:m,removeClass:l,hasClass:n,updateClasses:q,defer:F,flush:G,uniqueId:A,Evented:H,getScrollBarSize:j,removeUtilElements:g};var I=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),J=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}};if("undefined"==typeof y)throw new Error("You must include the utils.js file before tether.js");var K=y.Utils,f=K.getScrollParents,h=K.getBounds,i=K.getOffsetParent,k=K.extend,m=K.addClass,l=K.removeClass,q=K.updateClasses,F=K.defer,G=K.flush,j=K.getScrollBarSize,g=K.removeUtilElements,L=function(){if("undefined"==typeof document)return"";for(var a=document.createElement("div"),b=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],c=0;c<b.length;++c){var d=b[c];if(void 0!==a.style[d])return d}}(),M=[],N=function(){M.forEach(function(a){a.position(!1)}),G()};!function(){var a=null,b=null,c=null,d=function e(){return"undefined"!=typeof b&&b>16?(b=Math.min(b-16,250),void(c=setTimeout(e,250))):void("undefined"!=typeof a&&t()-a<10||(null!=c&&(clearTimeout(c),c=null),a=t(),N(),b=t()-a))};"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(a){window.addEventListener(a,d)})}();var O={center:"center",left:"right",right:"left"},P={middle:"middle",top:"bottom",bottom:"top"},Q={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},R=function(a,b){var c=a.left,d=a.top;return"auto"===c&&(c=O[b.left]),"auto"===d&&(d=P[b.top]),{left:c,top:d}},S=function(a){var b=a.left,c=a.top;return"undefined"!=typeof Q[a.left]&&(b=Q[a.left]),"undefined"!=typeof Q[a.top]&&(c=Q[a.top]),{left:b,top:c}},T=function(a){var b=a.split(" "),c=I(b,2),d=c[0],e=c[1];return{top:d,left:e}},U=T,V=function(a){function b(a){var c=this;d(this,b),J(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.position=this.position.bind(this),M.push(this),this.history=[],this.setOptions(a,!1),y.modules.forEach(function(a){"undefined"!=typeof a.initialize&&a.initialize.call(c)}),this.position()}return r(b,a),x(b,[{key:"getClass",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0],b=this.options.classes;return"undefined"!=typeof b&&b[a]?this.options.classes[a]:this.options.classPrefix?this.options.classPrefix+"-"+a:a}},{key:"setOptions",value:function(a){var b=this,c=arguments.length<=1||void 0===arguments[1]||arguments[1],d={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=k(d,a);var e=this.options,g=e.element,h=e.target,i=e.targetModifier;if(this.element=g,this.target=h,this.targetModifier=i,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(a){if("undefined"==typeof b[a])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof b[a].jquery?b[a]=b[a][0]:"string"==typeof b[a]&&(b[a]=document.querySelector(b[a]))}),m(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&m(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=U(this.options.targetAttachment),this.attachment=U(this.options.attachment),this.offset=T(this.options.offset),this.targetOffset=T(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=f(this.target),this.options.enabled!==!1&&this.enable(c)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return h(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var a=h(this.target),b={height:a.height,width:a.width,top:a.top,left:a.left};return b.height=Math.min(b.height,a.height-(pageYOffset-a.top)),b.height=Math.min(b.height,a.height-(a.top+a.height-(pageYOffset+innerHeight))),b.height=Math.min(innerHeight,b.height),b.height-=2,b.width=Math.min(b.width,a.width-(pageXOffset-a.left)),b.width=Math.min(b.width,a.width-(a.left+a.width-(pageXOffset+innerWidth))),b.width=Math.min(innerWidth,b.width),b.width-=2,b.top<pageYOffset&&(b.top=pageYOffset),b.left<pageXOffset&&(b.left=pageXOffset),b}if("scroll-handle"===this.targetModifier){var a=void 0,c=this.target;c===document.body?(c=document.documentElement,a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):a=h(c);var d=getComputedStyle(c),e=c.scrollWidth>c.clientWidth||[d.overflow,d.overflowX].indexOf("scroll")>=0||this.target!==document.body,f=0;e&&(f=15);var g=a.height-parseFloat(d.borderTopWidth)-parseFloat(d.borderBottomWidth)-f,b={width:15,height:.975*g*(g/c.scrollHeight),left:a.left+a.width-parseFloat(d.borderLeftWidth)-15},i=0;408>g&&this.target===document.body&&(i=-11e-5*Math.pow(g,2)-.00727*g+22.58),this.target!==document.body&&(b.height=Math.max(b.height,24));var j=this.target.scrollTop/(c.scrollHeight-g);return b.top=j*(g-b.height-i)+a.top+parseFloat(d.borderTopWidth),this.target===document.body&&(b.height=Math.max(b.height,24)),b}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(a,b){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[a]&&(this._cache[a]=b.call(this)),this._cache[a]}},{key:"enable",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]||arguments[0];this.options.addTargetClasses!==!1&&m(this.target,this.getClass("enabled")),m(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(b){b!==a.target.ownerDocument&&b.addEventListener("scroll",a.position)}),b&&this.position()}},{key:"disable",value:function(){var a=this;l(this.target,this.getClass("enabled")),l(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(b){b.removeEventListener("scroll",a.position)})}},{key:"destroy",value:function(){var a=this;this.disable(),M.forEach(function(b,c){b===a&&M.splice(c,1)}),0===M.length&&g()}},{key:"updateAttachClasses",value:function(a,b){var c=this;a=a||this.attachment,b=b||this.targetAttachment;var d=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var e=this._addAttachClasses;a.top&&e.push(this.getClass("element-attached")+"-"+a.top),a.left&&e.push(this.getClass("element-attached")+"-"+a.left),b.top&&e.push(this.getClass("target-attached")+"-"+b.top),b.left&&e.push(this.getClass("target-attached")+"-"+b.left);var f=[];d.forEach(function(a){f.push(c.getClass("element-attached")+"-"+a),f.push(c.getClass("target-attached")+"-"+a)}),F(function(){"undefined"!=typeof c._addAttachClasses&&(q(c.element,c._addAttachClasses,f),c.options.addTargetClasses!==!1&&q(c.target,c._addAttachClasses,f),delete c._addAttachClasses)})}},{key:"position",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var c=R(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,c);var d=this.cache("element-bounds",function(){return h(a.element)}),e=d.width,f=d.height;if(0===e&&0===f&&"undefined"!=typeof this.lastSize){var g=this.lastSize;e=g.width,f=g.height}else this.lastSize={width:e,height:f};var k=this.cache("target-bounds",function(){return a.getTargetBounds()}),l=k,m=v(S(this.attachment),{width:e,height:f}),n=v(S(c),l),o=v(this.offset,{width:e,height:f}),p=v(this.targetOffset,l);m=u(m,o),n=u(n,p);for(var q=k.left+n.left-m.left,r=k.top+n.top-m.top,s=0;s<y.modules.length;++s){var t=y.modules[s],w=t.position.call(this,{left:q,top:r,targetAttachment:c,targetPos:k,elementPos:d,offset:m,targetOffset:n,manualOffset:o,manualTargetOffset:p,scrollbarSize:B,attachment:this.attachment});if(w===!1)return!1;"undefined"!=typeof w&&"object"==typeof w&&(r=w.top,q=w.left)}var x={page:{top:r,left:q},viewport:{top:r-pageYOffset,bottom:pageYOffset-r-f+innerHeight,left:q-pageXOffset,right:pageXOffset-q-e+innerWidth}},z=this.target.ownerDocument,A=z.defaultView,B=void 0;return A.innerHeight>z.documentElement.clientHeight&&(B=this.cache("scrollbar-size",j),x.viewport.bottom-=B.height),A.innerWidth>z.documentElement.clientWidth&&(B=this.cache("scrollbar-size",j),x.viewport.right-=B.width),-1!==["","static"].indexOf(z.body.style.position)&&-1!==["","static"].indexOf(z.body.parentElement.style.position)||(x.page.bottom=z.body.scrollHeight-r-f,x.page.right=z.body.scrollWidth-q-e),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var b=a.cache("target-offsetparent",function(){return i(a.target)}),c=a.cache("target-offsetparent-bounds",function(){return h(b)}),d=getComputedStyle(b),e=c,f={};if(["Top","Left","Bottom","Right"].forEach(function(a){f[a.toLowerCase()]=parseFloat(d["border"+a+"Width"])}),c.right=z.body.scrollWidth-c.left-e.width+f.right,c.bottom=z.body.scrollHeight-c.top-e.height+f.bottom,x.page.top>=c.top+f.top&&x.page.bottom>=c.bottom&&x.page.left>=c.left+f.left&&x.page.right>=c.right){var g=b.scrollTop,j=b.scrollLeft;x.offset={top:x.page.top-c.top+g-f.top,left:x.page.left-c.left+j-f.left}}}(),this.move(x),this.history.unshift(x),this.history.length>3&&this.history.pop(),b&&G(),!0}}},{key:"move",value:function(a){var b=this;if("undefined"!=typeof this.element.parentNode){var c={};for(var d in a){c[d]={};for(var e in a[d]){for(var f=!1,g=0;g<this.history.length;++g){var h=this.history[g];if("undefined"!=typeof h[d]&&!s(h[d][e],a[d][e])){f=!0;break}}f||(c[d][e]=!0)}}var j={top:"",left:"",right:"",bottom:""},l=function(a,c){var d="undefined"!=typeof b.options.optimizations,e=d?b.options.optimizations.gpu:null;if(e!==!1){var f=void 0,g=void 0;if(a.top?(j.top=0,f=c.top):(j.bottom=0,f=-c.bottom),a.left?(j.left=0,g=c.left):(j.right=0,g=-c.right),window.matchMedia){var h=window.matchMedia("only screen and (min-resolution: 1.3dppx)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3)").matches;h||(g=Math.round(g),f=Math.round(f))}j[L]="translateX("+g+"px) translateY("+f+"px)","msTransform"!==L&&(j[L]+=" translateZ(0)")}else a.top?j.top=c.top+"px":j.bottom=c.bottom+"px",a.left?j.left=c.left+"px":j.right=c.right+"px"},m=!1;if((c.page.top||c.page.bottom)&&(c.page.left||c.page.right)?(j.position="absolute",l(c.page,a.page)):(c.viewport.top||c.viewport.bottom)&&(c.viewport.left||c.viewport.right)?(j.position="fixed",l(c.viewport,a.viewport)):"undefined"!=typeof c.offset&&c.offset.top&&c.offset.left?!function(){j.position="absolute";var d=b.cache("target-offsetparent",function(){return i(b.target)});i(b.element)!==d&&F(function(){b.element.parentNode.removeChild(b.element),d.appendChild(b.element)}),l(c.offset,a.offset),m=!0}():(j.position="absolute",l({top:!0,left:!0},a.page)),!m)if(this.options.bodyElement)this.options.bodyElement.appendChild(this.element);else{for(var n=!0,o=this.element.parentNode;o&&1===o.nodeType&&"BODY"!==o.tagName;){if("static"!==getComputedStyle(o).position){n=!1;break}o=o.parentNode}n||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var p={},q=!1;for(var e in j){var r=j[e],t=this.element.style[e];t!==r&&(q=!0,p[e]=r)}q&&F(function(){k(b.element.style,p),b.trigger("repositioned")})}}}]),b}(H);V.modules=[],y.position=N;var W=k(V,y),I=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),K=y.Utils,h=K.getBounds,k=K.extend,q=K.updateClasses,F=K.defer,X=["left","top","right","bottom"];y.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=a.targetAttachment;if(!this.options.constraints)return!0;var f=this.cache("element-bounds",function(){return h(b.element)}),g=f.height,i=f.width;if(0===i&&0===g&&"undefined"!=typeof this.lastSize){var j=this.lastSize;i=j.width,g=j.height}var l=this.cache("target-bounds",function(){return b.getTargetBounds()}),m=l.height,n=l.width,o=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(a){var b=a.outOfBoundsClass,c=a.pinnedClass;b&&o.push(b),c&&o.push(c)}),o.forEach(function(a){["left","top","right","bottom"].forEach(function(b){o.push(a+"-"+b)})});var p=[],r=k({},e),s=k({},this.attachment);return this.options.constraints.forEach(function(a){var f=a.to,h=a.attachment,j=a.pin;"undefined"==typeof h&&(h="");var k=void 0,l=void 0;if(h.indexOf(" ")>=0){var o=h.split(" "),q=I(o,2);l=q[0],k=q[1]}else k=l=h;var t=w(b,f);"target"!==l&&"both"!==l||(c<t[1]&&"top"===r.top&&(c+=m,r.top="bottom"),c+g>t[3]&&"bottom"===r.top&&(c-=m,r.top="top")),"together"===l&&("top"===r.top&&("bottom"===s.top&&c<t[1]?(c+=m,r.top="bottom",c+=g,s.top="top"):"top"===s.top&&c+g>t[3]&&c-(g-m)>=t[1]&&(c-=g-m,r.top="bottom",s.top="bottom")),"bottom"===r.top&&("top"===s.top&&c+g>t[3]?(c-=m,r.top="top",c-=g,s.top="bottom"):"bottom"===s.top&&c<t[1]&&c+(2*g-m)<=t[3]&&(c+=g-m,r.top="top",s.top="top")),"middle"===r.top&&(c+g>t[3]&&"top"===s.top?(c-=g,s.top="bottom"):c<t[1]&&"bottom"===s.top&&(c+=g,s.top="top"))),"target"!==k&&"both"!==k||(d<t[0]&&"left"===r.left&&(d+=n,r.left="right"),d+i>t[2]&&"right"===r.left&&(d-=n,r.left="left")),"together"===k&&(d<t[0]&&"left"===r.left?"right"===s.left?(d+=n,r.left="right",d+=i,s.left="left"):"left"===s.left&&(d+=n,r.left="right",d-=i,s.left="right"):d+i>t[2]&&"right"===r.left?"left"===s.left?(d-=n,r.left="left",d-=i,s.left="right"):"right"===s.left&&(d-=n,r.left="left",d+=i,s.left="left"):"center"===r.left&&(d+i>t[2]&&"left"===s.left?(d-=i,s.left="right"):d<t[0]&&"right"===s.left&&(d+=i,s.left="left"))),"element"!==l&&"both"!==l||(c<t[1]&&"bottom"===s.top&&(c+=g,s.top="top"),c+g>t[3]&&"top"===s.top&&(c-=g,s.top="bottom")),"element"!==k&&"both"!==k||(d<t[0]&&("right"===s.left?(d+=i,s.left="left"):"center"===s.left&&(d+=i/2,s.left="left")),d+i>t[2]&&("left"===s.left?(d-=i,s.left="right"):"center"===s.left&&(d-=i/2,s.left="right"))),"string"==typeof j?j=j.split(",").map(function(a){return a.trim()}):j===!0&&(j=["top","left","right","bottom"]),j=j||[];var u=[],v=[];c<t[1]&&(j.indexOf("top")>=0?(c=t[1],u.push("top")):v.push("top")),c+g>t[3]&&(j.indexOf("bottom")>=0?(c=t[3]-g,u.push("bottom")):v.push("bottom")),d<t[0]&&(j.indexOf("left")>=0?(d=t[0],u.push("left")):v.push("left")),d+i>t[2]&&(j.indexOf("right")>=0?(d=t[2]-i,u.push("right")):v.push("right")),u.length&&!function(){var a=void 0;a="undefined"!=typeof b.options.pinnedClass?b.options.pinnedClass:b.getClass("pinned"),p.push(a),u.forEach(function(b){p.push(a+"-"+b)})}(),v.length&&!function(){var a=void 0;a="undefined"!=typeof b.options.outOfBoundsClass?b.options.outOfBoundsClass:b.getClass("out-of-bounds"),p.push(a),v.forEach(function(b){p.push(a+"-"+b)})}(),(u.indexOf("left")>=0||u.indexOf("right")>=0)&&(s.left=r.left=!1),(u.indexOf("top")>=0||u.indexOf("bottom")>=0)&&(s.top=r.top=!1),r.top===e.top&&r.left===e.left&&s.top===b.attachment.top&&s.left===b.attachment.left||(b.updateAttachClasses(s,r),b.trigger("update",{attachment:s,targetAttachment:r}))}),F(function(){b.options.addTargetClasses!==!1&&q(b.target,p,o),q(b.element,p,o)}),{top:c,left:d}}});var K=y.Utils,h=K.getBounds,q=K.updateClasses,F=K.defer;y.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=this.cache("element-bounds",function(){return h(b.element)}),f=e.height,g=e.width,i=this.getTargetBounds(),j=c+f,k=d+g,l=[];c<=i.bottom&&j>=i.top&&["left","right"].forEach(function(a){var b=i[a];b!==d&&b!==k||l.push(a)}),d<=i.right&&k>=i.left&&["top","bottom"].forEach(function(a){var b=i[a];b!==c&&b!==j||l.push(a)});var m=[],n=[],o=["left","top","right","bottom"];return m.push(this.getClass("abutted")),o.forEach(function(a){m.push(b.getClass("abutted")+"-"+a)}),l.length&&n.push(this.getClass("abutted")),l.forEach(function(a){n.push(b.getClass("abutted")+"-"+a)}),F(function(){b.options.addTargetClasses!==!1&&q(b.target,n,m),q(b.element,n,m)}),!0}});var I=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return y.modules.push({position:function(a){var b=a.top,c=a.left;if(this.options.shift){var d=this.options.shift;"function"==typeof this.options.shift&&(d=this.options.shift.call(this,{top:b,left:c}));var e=void 0,f=void 0;if("string"==typeof d){d=d.split(" "),d[1]=d[1]||d[0];var g=d,h=I(g,2);e=h[0],f=h[1],e=parseFloat(e,10),f=parseFloat(f,10)}else e=d.top,f=d.left;return b+=e,c+=f,{top:b,left:c}}}}),W}),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Tribute=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();a("./utils");var g=a("./TributeEvents"),h=d(g),i=a("./TributeMenuEvents"),j=d(i),k=a("./TributeRange"),l=d(k),m=a("./TributeSearch"),n=d(m),o=function(){function a(b){var c=this,d=b.values,f=void 0===d?null:d,g=b.iframe,i=void 0===g?null:g,k=b.selectClass,m=void 0===k?"highlight":k,o=b.trigger,p=void 0===o?"@":o,q=b.selectTemplate,r=void 0===q?null:q,s=b.menuItemTemplate,t=void 0===s?null:s,u=b.lookup,v=void 0===u?"key":u,w=b.fillAttr,x=void 0===w?"value":w,y=b.collection,z=void 0===y?null:y,A=b.menuContainer,B=void 0===A?null:A,C=b.noMatchTemplate,D=void 0===C?null:C,E=b.requireLeadingSpace,F=void 0===E||E,G=b.allowSpaces,H=void 0!==G&&G;if(e(this,a),this.menuSelected=0,this.current={},this.inputEvent=!1,this.isActive=!1,this.menuContainer=B,this.allowSpaces=H,f)this.collection=[{trigger:p,iframe:i,selectClass:m,selectTemplate:(r||a.defaultSelectTemplate).bind(this),menuItemTemplate:(t||a.defaultMenuItemTemplate).bind(this),noMatchTemplate:function(a){return"function"==typeof a?a.bind(c):null}(D),lookup:v,fillAttr:x,values:f,requireLeadingSpace:F}];else{if(!z)throw new Error("[Tribute] No collection specified.");this.collection=z.map(function(b){return{trigger:b.trigger||p,iframe:b.iframe||i,selectClass:b.selectClass||m,selectTemplate:(b.selectTemplate||a.defaultSelectTemplate).bind(c),menuItemTemplate:(b.menuItemTemplate||a.defaultMenuItemTemplate).bind(c),noMatchTemplate:function(a){return"function"==typeof a?a.bind(c):null}(D),lookup:b.lookup||v,fillAttr:b.fillAttr||x,values:b.values,requireLeadingSpace:b.requireLeadingSpace}})}new l["default"](this),new h["default"](this),new j["default"](this),new n["default"](this)}return f(a,[{key:"triggers",value:function(){return this.collection.map(function(a){return a.trigger})}},{key:"attach",value:function(a){if(!a)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");
if("undefined"!=typeof jQuery&&a instanceof jQuery&&(a=a.get()),a.constructor===NodeList||a.constructor===HTMLCollection||a.constructor===Array)for(var b=a.length,c=0;b>c;++c)this._attach(a[c]);else this._attach(a)}},{key:"_attach",value:function(a){a.hasAttribute("data-tribute")&&console.warn("Tribute was already bound to "+a.nodeName),this.ensureEditable(a),this.events.bind(a),a.setAttribute("data-tribute",!0)}},{key:"ensureEditable",value:function(b){if(-1===a.inputTypes().indexOf(b.nodeName)){if(!b.contentEditable)throw new Error("[Tribute] Cannot bind to "+b.nodeName);b.contentEditable=!0}}},{key:"createMenu",value:function(){var a=this.range.getDocument().createElement("div"),b=this.range.getDocument().createElement("ul");return a.className="tribute-container",a.appendChild(b),this.menuContainer?this.menuContainer.appendChild(a):this.range.getDocument().body.appendChild(a)}},{key:"showMenuFor",value:function(a,b){var c=this;if(!this.isActive||this.current.element!==a||this.current.mentionText!==this.currentMentionTextSnapshot){this.currentMentionTextSnapshot=this.current.mentionText,this.menu||(this.menu=this.createMenu(),this.menuEvents.bind(this.menu)),this.isActive=!0,this.menuSelected=0,this.current.mentionText||(this.current.mentionText="");var d=function(a){if(c.isActive){var d=c.search.filter(c.current.mentionText,a,{pre:"<span>",post:"</span>",extract:function(a){if("string"==typeof c.current.collection.lookup)return a[c.current.collection.lookup];if("function"==typeof c.current.collection.lookup)return c.current.collection.lookup(a);throw new Error("Invalid lookup attribute, lookup must be string or function.")}});c.current.filteredItems=d;var e=c.menu.querySelector("ul");if(!d.length){var f=new CustomEvent("tribute-no-match",{detail:c.menu});return c.current.element.dispatchEvent(f),void(c.current.collection.noMatchTemplate?e.innerHTML=c.current.collection.noMatchTemplate():c.hideMenu())}e.innerHTML="",d.forEach(function(a,b){var d=c.range.getDocument().createElement("li");d.setAttribute("data-index",b),d.addEventListener("mouseenter",function(a){var b=a.target,d=b.getAttribute("data-index");c.events.setActiveLi(d)}),c.menuSelected===b&&(d.className=c.current.collection.selectClass),d.innerHTML=c.current.collection.menuItemTemplate(a),e.appendChild(d)}),c.range.positionMenuAtCaret(b)}};"function"==typeof this.current.collection.values?this.current.collection.values(this.current.mentionText,d):d(this.current.collection.values)}}},{key:"hideMenu",value:function(){this.menu&&(this.menu.style.cssText="display: none;",this.isActive=!1,this.menuSelected=0,this.current={})}},{key:"selectItemAtIndex",value:function(a){if(a=parseInt(a),"number"==typeof a){var b=this.current.filteredItems[a],c=this.current.collection.selectTemplate(b);this.replaceText(c)}}},{key:"replaceText",value:function(a){this.range.replaceTriggerText(a,!0,!0)}},{key:"_append",value:function(a,b,c){if("function"==typeof a.values)throw new Error("Unable to append to values, as it is a function.");c?a.values=b:a.values=a.values.concat(b)}},{key:"append",value:function(a,b,c){var d=parseInt(a);if("number"!=typeof d)throw new Error("please provide an index for the collection to update.");var e=this.collection[d];this._append(e,b,c)}},{key:"appendCurrent",value:function(a,b){if(!this.isActive)throw new Error("No active state. Please use append instead and pass an index.");this._append(this.current.collection,a,b)}}],[{key:"defaultSelectTemplate",value:function(a){return this.current.collection.trigger+a.original[this.current.collection.fillAttr]}},{key:"defaultMenuItemTemplate",value:function(a){return a.string}},{key:"inputTypes",value:function(){return["TEXTAREA","INPUT"]}}]),a}();c["default"]=o,b.exports=c["default"]},{"./TributeEvents":2,"./TributeMenuEvents":3,"./TributeRange":4,"./TributeSearch":5,"./utils":7}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(b){d(this,a),this.tribute=b,this.tribute.events=this}return f(a,[{key:"bind",value:function(a){a.addEventListener("keydown",this.keydown.bind(a,this),!1),a.addEventListener("keyup",this.keyup.bind(a,this),!1),a.addEventListener("input",this.input.bind(a,this),!1)}},{key:"keydown",value:function(b,c){b.shouldDeactivate(c)&&(b.tribute.isActive=!1);var d=this;b.commandEvent=!1,a.keys().forEach(function(a){a.key===c.keyCode&&(b.commandEvent=!0,b.callbacks()[a.value.toLowerCase()](c,d))})}},{key:"input",value:function(a,b){a.inputEvent=!0,a.keyup.call(this,a,b)}},{key:"click",value:function(a,b){var c=a.tribute;if(c.menu&&c.menu.contains(b.target)){for(var d=b.target;"li"!==d.nodeName.toLowerCase();)if(d=d.parentNode,!d||d===c.menu)throw new Error("cannot find the <li> container for the click");c.selectItemAtIndex(d.getAttribute("data-index")),c.hideMenu()}else c.current.element&&c.hideMenu()}},{key:"keyup",value:function(a,b){var c=this;if(a.inputEvent&&(a.inputEvent=!1),a.updateSelection(this),27!==b.keyCode){if(!a.tribute.isActive){var d=function(){var d=a.getKeyCode(a,c,b);if(isNaN(d))return{v:void 0};var e=a.tribute.triggers().find(function(a){return a.charCodeAt(0)===d});"undefined"!=typeof e&&a.callbacks().triggerChar(b,c,e)}();if("object"===("undefined"==typeof d?"undefined":e(d)))return d.v}(a.tribute.current.trigger&&a.commandEvent===!1||a.tribute.isActive&&8===b.keyCode)&&a.tribute.showMenuFor(this,!0)}}},{key:"shouldDeactivate",value:function(b){if(!this.tribute.isActive)return!1;if(0===this.tribute.current.mentionText.length){var c=!1;return a.keys().forEach(function(a){b.keyCode===a.key&&(c=!0)}),!c}return!1}},{key:"getKeyCode",value:function(a,b,c){var d=a.tribute,e=d.range.getTriggerInfo(!1,!1,!0,d.allowSpaces);return!!e&&e.mentionTriggerChar.charCodeAt(0)}},{key:"updateSelection",value:function(a){this.tribute.current.element=a;var b=this.tribute.range.getTriggerInfo(!1,!1,!0,this.tribute.allowSpaces);b&&(this.tribute.current.selectedPath=b.mentionSelectedPath,this.tribute.current.mentionText=b.mentionText,this.tribute.current.selectedOffset=b.mentionSelectedOffset)}},{key:"callbacks",value:function(){var a=this;return{triggerChar:function(b,c,d){var e=a.tribute;e.current.trigger=d;var f=e.collection.find(function(a){return a.trigger===d});e.current.collection=f,e.inputEvent&&e.showMenuFor(c,!0)},enter:function(b,c){a.tribute.isActive&&(b.preventDefault(),setTimeout(function(){a.tribute.selectItemAtIndex(a.tribute.menuSelected),a.tribute.hideMenu()},0))},escape:function(b,c){a.tribute.isActive&&(b.preventDefault(),a.tribute.hideMenu())},tab:function(b,c){a.callbacks().enter(b,c)},up:function(b,c){if(a.tribute.isActive){b.preventDefault();var d=a.tribute.current.filteredItems.length,e=a.tribute.menuSelected;d>e&&e>0&&(a.tribute.menuSelected--,a.setActiveLi())}},down:function(b,c){if(a.tribute.isActive){b.preventDefault();var d=a.tribute.current.filteredItems.length-1,e=a.tribute.menuSelected;d>e&&(a.tribute.menuSelected++,a.setActiveLi())}},"delete":function(b,c){a.tribute.isActive&&a.tribute.current.mentionText.length<1?a.tribute.hideMenu():a.tribute.isActive&&a.tribute.showMenuFor(c)}}}},{key:"setActiveLi",value:function(a){var b=this.tribute.menu.querySelectorAll("li"),c=b.length>>>0,d=this.getFullHeight(this.tribute.menu),e=this.getFullHeight(b[0]);a&&(this.tribute.menuSelected=a);for(var f=0;c>f;f++){var g=b[f];if(f===this.tribute.menuSelected){var h=e*(f+1),i=this.tribute.menu.scrollTop,j=i+d;h>j?this.tribute.menu.scrollTop+=e:j>h&&(this.tribute.menu.scrollTop-=e),g.className=this.tribute.current.collection.selectClass}else g.className=""}}},{key:"getFullHeight",value:function(a,b){var c=a.getBoundingClientRect().height;if(b){var d=a.currentStyle||window.getComputedStyle(a);return c+parseFloat(d.marginTop)+parseFloat(d.marginBottom)}return c}}],[{key:"keys",value:function(){return[{key:9,value:"TAB"},{key:8,value:"DELETE"},{key:13,value:"ENTER"},{key:27,value:"ESCAPE"},{key:38,value:"UP"},{key:40,value:"DOWN"}]}}]),a}();c["default"]=g,b.exports=c["default"]},{}],3:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this.tribute=b,this.tribute.menuEvents=this,this.menu=this.tribute.menu}return e(a,[{key:"bind",value:function(a){var b=this;a.addEventListener("keydown",this.tribute.events.keydown.bind(this.menu,this),!1),this.tribute.range.getDocument().addEventListener("click",this.tribute.events.click.bind(null,this),!1),window.addEventListener("resize",this.debounce(function(){b.tribute.isActive&&b.tribute.showMenuFor(b.tribute.current.element,!0)},300,!1)),this.menuContainer?this.menuContainer.addEventListener("scroll",this.debounce(function(){b.tribute.isActive&&b.tribute.showMenuFor(b.tribute.current.element,!1)},300,!1),!1):window.onscroll=this.debounce(function(){b.tribute.isActive&&b.tribute.showMenuFor(b.tribute.current.element,!1)},300,!1)}},{key:"debounce",value:function(a,b,c){var d,e=this,f=arguments;return function(){var g=e,h=f,i=function(){d=null,c||a.apply(g,h)},j=c&&!d;clearTimeout(d),d=setTimeout(i,b),j&&a.apply(g,h)}}}]),a}();c["default"]=f,b.exports=c["default"]},{}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(b){d(this,a),this.tribute=b,this.tribute.range=this}return f(a,[{key:"getDocument",value:function(){var a=void 0;return this.tribute.current.collection&&(a=this.tribute.current.collection.iframe),a?a.contentWindow.document:document}},{key:"positionMenuAtCaret",value:function(a){var b=this,c=this.tribute.current,d=void 0,e=this.getTriggerInfo(!1,!1,!0,this.tribute.allowSpaces);void 0!==e?(d=this.isContentEditable(c.element)?this.getContentEditableCaretPosition(e.mentionPosition):this.getTextAreaOrInputUnderlinePosition(this.getDocument().activeElement,e.mentionPosition),this.tribute.menu.style.cssText="top: "+d.top+"px;\n                                       left: "+d.left+"px;\n                                       position: absolute;\n                                       zIndex: 10000;\n                                       display: block;",setTimeout(function(){a&&b.scrollIntoView(b.getDocument().activeElement)},0)):this.tribute.menu.style.cssText="display: none"}},{key:"selectElement",value:function(a,b,c){var d=void 0,e=a;if(b)for(var f=0;f<b.length;f++){if(e=e.childNodes[b[f]],void 0===e)return;for(;e.length<c;)c-=e.length,e=e.nextSibling;0!==e.childNodes.length||e.length||(e=e.previousSibling)}var g=this.getWindowSelection();d=this.getDocument().createRange(),d.setStart(e,c),d.setEnd(e,c),d.collapse(!0);try{g.removeAllRanges()}catch(a){}g.addRange(d),a.focus()}},{key:"resetSelection",value:function(a,b,c){this.isContentEditable(a)?this.selectElement(a,b,c):a!==this.getDocument().activeElement&&a.focus()}},{key:"replaceTriggerText",value:function(a,b,c){var d=this.tribute.current;this.resetSelection(d.element,d.selectedPath,d.selectedOffset);var e=this.getTriggerInfo(!0,c,b,this.tribute.allowSpaces),f=new CustomEvent("tribute-replaced",{detail:a});if(void 0!==e){if(this.isContentEditable(d.element))a+=" ",this.pasteHtml(a,e.mentionPosition,e.mentionPosition+e.mentionText.length+1);else{var g=this.getDocument().activeElement;a+=" ";var h=e.mentionPosition,i=e.mentionPosition+e.mentionText.length+1;g.value=g.value.substring(0,h)+a+g.value.substring(i,g.value.length),g.selectionStart=h+a.length,g.selectionEnd=h+a.length}d.element.dispatchEvent(f)}}},{key:"pasteHtml",value:function(a,b,c){var d=void 0,e=void 0;e=this.getWindowSelection(),d=this.getDocument().createRange(),d.setStart(e.anchorNode,b),d.setEnd(e.anchorNode,c),d.deleteContents();var f=this.getDocument().createElement("div");f.innerHTML=a;for(var g=this.getDocument().createDocumentFragment(),h=void 0,i=void 0;h=f.firstChild;)i=g.appendChild(h);d.insertNode(g),i&&(d=d.cloneRange(),d.setStartAfter(i),d.collapse(!0),e.removeAllRanges(),e.addRange(d))}},{key:"getWindowSelection",value:function(){return this.tribute.collection.iframe?this.tribute.collection.iframe.contentWindow.getSelection():window.getSelection()}},{key:"getNodePositionInParent",value:function(a){if(null===a.parentNode)return 0;for(var b=0;b<a.parentNode.childNodes.length;b++){var c=a.parentNode.childNodes[b];if(c===a)return b}}},{key:"getContentEditableSelectedPath",value:function(){var a=this.getWindowSelection(),b=a.anchorNode,c=[],d=void 0;if(null!=b){for(var e=void 0,f=b.contentEditable;null!==b&&"true"!==f;)e=this.getNodePositionInParent(b),c.push(e),b=b.parentNode,null!==b&&(f=b.contentEditable);return c.reverse(),d=a.getRangeAt(0).startOffset,{selected:b,path:c,offset:d}}}},{key:"getTextPrecedingCurrentSelection",value:function(){var a=this.tribute.current,b=void 0;if(this.isContentEditable(a.element)){var c=this.getWindowSelection().anchorNode;if(null!=c){var d=c.textContent,e=this.getWindowSelection().getRangeAt(0).startOffset;e>=0&&(b=d.substring(0,e))}}else{var f=this.getDocument().activeElement,g=f.selectionStart;b=f.value.substring(0,g)}return b}},{key:"getTriggerInfo",value:function(a,b,c,d){var f=this,g=this.tribute.current,h=void 0,i=void 0,j=void 0;if(this.isContentEditable(g.element)){var k=this.getContentEditableSelectedPath();k&&(h=k.selected,i=k.path,j=k.offset)}else h=this.getDocument().activeElement;var l=this.getTextPrecedingCurrentSelection();if(void 0!==l&&null!==l){var m=function(){var e=-1,g=void 0;if(f.tribute.collection.forEach(function(a){var b=a.trigger,d=l.lastIndexOf(b);d>e&&(e=d,g=b,c=a.requireLeadingSpace)}),e>=0&&(0===e||!c||/[\xA0\s]/g.test(l.substring(e-1,e)))){var k=l.substring(e+1,l.length);g=l.substring(e,e+1);var m=k.substring(0,1),n=k.length>0&&(" "===m||" "===m);b&&(k=k.trim());var o=d?/[^\S ]/g:/[\xA0\s]/g;if(!n&&(a||!o.test(k)))return{v:{mentionPosition:e,mentionText:k,mentionSelectedElement:h,mentionSelectedPath:i,mentionSelectedOffset:j,mentionTriggerChar:g}}}}();if("object"===("undefined"==typeof m?"undefined":e(m)))return m.v}}},{key:"isContentEditable",value:function(a){return"INPUT"!==a.nodeName&&"TEXTAREA"!==a.nodeName}},{key:"getTextAreaOrInputUnderlinePosition",value:function(a,b){var c=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],d=null!==window.mozInnerScreenX,e=this.getDocument().createElement("div");e.id="input-textarea-caret-position-mirror-div",this.getDocument().body.appendChild(e);var f=e.style,g=window.getComputedStyle?getComputedStyle(a):a.currentStyle;f.whiteSpace="pre-wrap","INPUT"!==a.nodeName&&(f.wordWrap="break-word"),f.position="absolute",f.visibility="hidden",c.forEach(function(a){f[a]=g[a]}),d?(f.width=parseInt(g.width)-2+"px",a.scrollHeight>parseInt(g.height)&&(f.overflowY="scroll")):f.overflow="hidden",e.textContent=a.value.substring(0,b),"INPUT"===a.nodeName&&(e.textContent=e.textContent.replace(/\s/g," "));var h=this.getDocument().createElement("span");h.textContent=a.value.substring(b)||".",e.appendChild(h);var i=a.getBoundingClientRect(),j=document.documentElement,k=(window.pageXOffset||j.scrollLeft)-(j.clientLeft||0),l=(window.pageYOffset||j.scrollTop)-(j.clientTop||0),m={top:i.top+l+h.offsetTop+parseInt(g.borderTopWidth)+parseInt(g.fontSize)-a.scrollTop,left:i.left+k+h.offsetLeft+parseInt(g.borderLeftWidth)};return this.getDocument().body.removeChild(e),m}},{key:"getContentEditableCaretPosition",value:function(a){var b="\ufeff",c=void 0,d="sel_"+(new Date).getTime()+"_"+Math.random().toString().substr(2),e=void 0,f=this.getWindowSelection(),g=f.getRangeAt(0);e=this.getDocument().createRange(),e.setStart(f.anchorNode,a),e.setEnd(f.anchorNode,a),e.collapse(!1),c=this.getDocument().createElement("span"),c.id=d,c.appendChild(this.getDocument().createTextNode(b)),e.insertNode(c),f.removeAllRanges(),f.addRange(g);var h=c.getBoundingClientRect(),i=document.documentElement,j=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),k=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),l={left:h.left+j,top:h.top+c.offsetHeight+k};return c.parentNode.removeChild(c),l}},{key:"scrollIntoView",value:function(a){for(var b=20,c=void 0,d=100,e=a;void 0===c||0===c.height;)if(c=e.getBoundingClientRect(),0===c.height&&(e=e.childNodes[0],void 0===e||!e.getBoundingClientRect))return;var f=c.top,g=f+c.height;if(0>f)window.scrollTo(0,window.pageYOffset+c.top-b);else if(g>window.innerHeight){var h=window.pageYOffset+c.top-b;h-window.pageYOffset>d&&(h=window.pageYOffset+d);var i=window.pageYOffset-(window.innerHeight-g);i>h&&(i=h),window.scrollTo(0,i)}}}]),a}();c["default"]=g,b.exports=c["default"]},{}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this.tribute=b,this.tribute.search=this}return e(a,[{key:"simpleFilter",value:function(a,b){var c=this;return b.filter(function(b){return c.test(a,b)})}},{key:"test",value:function(a,b){return null!==this.match(a,b)}},{key:"match",value:function(a,b,c){c=c||{};var d=(b.length,c.pre||""),e=c.post||"",f=c.caseSensitive&&b||b.toLowerCase();a=c.caseSensitive&&a||a.toLowerCase();var g=this.traverse(f,a,0,0,[]);return g?{rendered:this.render(b,g.cache,d,e),score:g.score}:null}},{key:"traverse",value:function(a,b,c,d,e){if(b.length===d)return{score:this.calculateScore(e),cache:e.slice()};if(!(a.length===c||b.length-d>a.length-c)){for(var f=b[d],g=a.indexOf(f,c),h=void 0,i=void 0;g>-1;){if(e.push(g),i=this.traverse(a,b,g+1,d+1,e),e.pop(),!i)return h;(!h||h.score<i.score)&&(h=i),g=a.indexOf(f,g+1)}return h}}},{key:"calculateScore",value:function(a){var b=0,c=1;return a.forEach(function(d,e){e>0&&(a[e-1]+1===d?c+=c+1:c=1),b+=c}),b}},{key:"render",value:function(a,b,c,d){var e=a.substring(0,b[0]);return b.forEach(function(f,g){e+=c+a[f]+d+a.substring(f+1,b[g+1]?b[g+1]:a.length)}),e}},{key:"filter",value:function(a,b,c){var d=this;return c=c||{},b.reduce(function(b,e,f,g){var h=e;c.extract&&(h=c.extract(e),h||(h=""));var i=d.match(a,h,c);return null!=i&&(b[b.length]={string:i.rendered,score:i.score,index:f,original:e}),b},[]).sort(function(a,b){var c=b.score-a.score;return c?c:a.index-b.index})}}]),a}();c["default"]=f,b.exports=c["default"]},{}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./Tribute"),f=d(e);c["default"]=f["default"],b.exports=c["default"]},{"./Tribute":1}],7:[function(a,b,c){"use strict";Array.prototype.find||(Array.prototype.find=function(a){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;d>f;f++)if(b=c[f],a.call(e,b,f,c))return b}),function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}return"function"!=typeof window.CustomEvent&&(a.prototype=window.Event.prototype,void(window.CustomEvent=a))}()},{}]},{},[6])(6)}),!function(a,b){"use strict";var c,d,e,f=a,g=f.document,h=f.navigator,i=f.setTimeout,j=f.clearTimeout,k=f.setInterval,l=f.clearInterval,m=f.getComputedStyle,n=f.encodeURIComponent,o=f.ActiveXObject,p=f.Error,q=f.Number.parseInt||f.parseInt,r=f.Number.parseFloat||f.parseFloat,s=f.Number.isNaN||f.isNaN,t=f.Date.now,u=f.Object.keys,v=f.Object.defineProperty,w=f.Object.prototype.hasOwnProperty,x=f.Array.prototype.slice,y=function(){var a=function(a){return a};if("function"==typeof f.wrap&&"function"==typeof f.unwrap)try{var b=g.createElement("div"),c=f.unwrap(b);1===b.nodeType&&c&&1===c.nodeType&&(a=f.unwrap)}catch(d){}return a}(),z=function(a){return x.call(a,0)},A=function(){var a,c,d,e,f,g,h=z(arguments),i=h[0]||{};for(a=1,c=h.length;c>a;a++)if(null!=(d=h[a]))for(e in d)w.call(d,e)&&(f=i[e],g=d[e],i!==g&&g!==b&&(i[e]=g));return i},B=function(a){var b,c,d,e;if("object"!=typeof a||null==a||"number"==typeof a.nodeType)b=a;else if("number"==typeof a.length)for(b=[],c=0,d=a.length;d>c;c++)w.call(a,c)&&(b[c]=B(a[c]));else{b={};for(e in a)w.call(a,e)&&(b[e]=B(a[e]))}return b},C=function(a,b){for(var c={},d=0,e=b.length;e>d;d++)b[d]in a&&(c[b[d]]=a[b[d]]);return c},D=function(a,b){var c={};for(var d in a)-1===b.indexOf(d)&&(c[d]=a[d]);return c},E=function(a){if(a)for(var b in a)w.call(a,b)&&delete a[b];return a},F=function(a,b){if(a&&1===a.nodeType&&a.ownerDocument&&b&&(1===b.nodeType&&b.ownerDocument&&b.ownerDocument===a.ownerDocument||9===b.nodeType&&!b.ownerDocument&&b===a.ownerDocument))do{if(a===b)return!0;a=a.parentNode}while(a);return!1},G=function(a){var b;return"string"==typeof a&&a&&(b=a.split("#")[0].split("?")[0],b=a.slice(0,a.lastIndexOf("/")+1)),b},H=function(a){var b,c;return"string"==typeof a&&a&&(c=a.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),c&&c[1]?b=c[1]:(c=a.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),c&&c[1]&&(b=c[1]))),b},I=function(){var a,b;try{throw new p}catch(c){b=c}return b&&(a=b.sourceURL||b.fileName||H(b.stack)),a},J=function(){var a,c,d;if(g.currentScript&&(a=g.currentScript.src))return a;if(c=g.getElementsByTagName("script"),1===c.length)return c[0].src||b;if("readyState"in c[0])for(d=c.length;d--;)if("interactive"===c[d].readyState&&(a=c[d].src))return a;return"loading"===g.readyState&&(a=c[c.length-1].src)?a:(a=I())?a:b},K=function(){var a,c,d,e=g.getElementsByTagName("script");for(a=e.length;a--;){if(!(d=e[a].src)){c=null;break}if(d=G(d),null==c)c=d;else if(c!==d){c=null;break}}return c||b},L=function(){var a=G(J())||K()||"";return a+"ZeroClipboard.swf"},M=function(){return null==a.opener&&(!!a.top&&a!=a.top||!!a.parent&&a!=a.parent)}(),N={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},O="11.0.0",P={},Q={},R=null,S=0,T=0,U={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},V=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],W=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],X=new RegExp("^flash-("+W.map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),Y=new RegExp("^flash-("+W.slice(1).map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),Z={swfPath:L(),trustedDomains:a.location.host?[a.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},$=function(a){if("object"==typeof a&&null!==a)for(var b in a)if(w.call(a,b))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(b))Z[b]=a[b];else if(null==N.bridge)if("containerId"===b||"swfObjectId"===b){if(!na(a[b]))throw new Error("The specified `"+b+"` value is not valid as an HTML4 Element ID");Z[b]=a[b]}else Z[b]=a[b];return"string"==typeof a&&a?w.call(Z,a)?Z[a]:void 0:B(Z)},_=function(){return Ta(),{browser:C(h,["userAgent","platform","appName"]),flash:D(N,["bridge"]),zeroclipboard:{version:Va.version,config:Va.config()}}},aa=function(){return!!(N.disabled||N.outdated||N.sandboxed||N.unavailable||N.degraded||N.deactivated)},ba=function(a,d){var e,f,g,h={};if("string"==typeof a&&a)g=a.toLowerCase().split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof d)for(e in a)w.call(a,e)&&"string"==typeof e&&e&&"function"==typeof a[e]&&Va.on(e,a[e]);if(g&&g.length){for(e=0,f=g.length;f>e;e++)a=g[e].replace(/^on/,""),h[a]=!0,P[a]||(P[a]=[]),P[a].push(d);if(h.ready&&N.ready&&Va.emit({type:"ready"}),h.error){for(e=0,f=W.length;f>e;e++)if(N[W[e].replace(/^flash-/,"")]===!0){Va.emit({type:"error",name:W[e]});break}c!==b&&Va.version!==c&&Va.emit({type:"error",name:"version-mismatch",jsVersion:Va.version,swfVersion:c})}}return Va},ca=function(a,b){var c,d,e,f,g;if(0===arguments.length)f=u(P);else if("string"==typeof a&&a)f=a.split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)w.call(a,c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&Va.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;d>c;c++)if(a=f[c].toLowerCase().replace(/^on/,""),g=P[a],g&&g.length)if(b)for(e=g.indexOf(b);-1!==e;)g.splice(e,1),e=g.indexOf(b,e);else g.length=0;return Va},da=function(a){var b;return b="string"==typeof a&&a?B(P[a])||null:B(P)},ea=function(a){var b,c,d;return a=oa(a),a&&!va(a)?"ready"===a.type&&N.overdue===!0?Va.emit({type:"error",name:"flash-overdue"}):(b=A({},a),ta.call(this,b),"copy"===a.type&&(d=Da(Q),c=d.data,R=d.formatMap),c):void 0},fa=function(){var a=N.sandboxed;if(Ta(),"boolean"!=typeof N.ready&&(N.ready=!1),N.sandboxed!==a&&N.sandboxed===!0)N.ready=!1,Va.emit({type:"error",name:"flash-sandboxed"});else if(!Va.isFlashUnusable()&&null===N.bridge){var b=Z.flashLoadTimeout;"number"==typeof b&&b>=0&&(S=i(function(){"boolean"!=typeof N.deactivated&&(N.deactivated=!0),N.deactivated===!0&&Va.emit({type:"error",name:"flash-deactivated"})},b)),N.overdue=!1,Ba()}},ga=function(){Va.clearData(),Va.blur(),Va.emit("destroy"),Ca(),Va.off()},ha=function(a,b){var c;if("object"==typeof a&&a&&"undefined"==typeof b)c=a,Va.clearData();else{if("string"!=typeof a||!a)return;c={},c[a]=b}for(var d in c)"string"==typeof d&&d&&w.call(c,d)&&"string"==typeof c[d]&&c[d]&&(Q[d]=c[d])},ia=function(a){"undefined"==typeof a?(E(Q),R=null):"string"==typeof a&&w.call(Q,a)&&delete Q[a]},ja=function(a){return"undefined"==typeof a?B(Q):"string"==typeof a&&w.call(Q,a)?Q[a]:void 0},ka=function(a){if(a&&1===a.nodeType){d&&(La(d,Z.activeClass),d!==a&&La(d,Z.hoverClass)),d=a,Ka(a,Z.hoverClass);var b=a.getAttribute("title")||Z.title;if("string"==typeof b&&b){var c=Aa(N.bridge);c&&c.setAttribute("title",b)}var e=Z.forceHandCursor===!0||"pointer"===Ma(a,"cursor");Ra(e),Qa()}},la=function(){var a=Aa(N.bridge);a&&(a.removeAttribute("title"),a.style.left="0px",a.style.top="-9999px",a.style.width="1px",a.style.height="1px"),d&&(La(d,Z.hoverClass),La(d,Z.activeClass),d=null)},ma=function(){return d||null},na=function(a){return"string"==typeof a&&a&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(a)},oa=function(a){var b;if("string"==typeof a&&a?(b=a,a={}):"object"==typeof a&&a&&"string"==typeof a.type&&a.type&&(b=a.type),b){b=b.toLowerCase(),!a.target&&(/^(copy|aftercopy|_click)$/.test(b)||"error"===b&&"clipboard-error"===a.name)&&(a.target=e),A(a,{type:b,target:a.target||d||null,relatedTarget:a.relatedTarget||null,currentTarget:N&&N.bridge||null,timeStamp:a.timeStamp||t()||null});var c=U[a.type];return"error"===a.type&&a.name&&c&&(c=c[a.name]),c&&(a.message=c),"ready"===a.type&&A(a,{target:null,version:N.version}),"error"===a.type&&(X.test(a.name)&&A(a,{target:null,minimumVersion:O}),Y.test(a.name)&&A(a,{version:N.version})),"copy"===a.type&&(a.clipboardData={setData:Va.setData,clearData:Va.clearData}),"aftercopy"===a.type&&(a=Ea(a,R)),a.target&&!a.relatedTarget&&(a.relatedTarget=pa(a.target)),qa(a)}},pa=function(a){var b=a&&a.getAttribute&&a.getAttribute("data-clipboard-target");return b?g.getElementById(b):null},qa=function(a){if(a&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(a.type)){var c=a.target,d="_mouseover"===a.type&&a.relatedTarget?a.relatedTarget:b,e="_mouseout"===a.type&&a.relatedTarget?a.relatedTarget:b,h=Na(c),i=f.screenLeft||f.screenX||0,j=f.screenTop||f.screenY||0,k=g.body.scrollLeft+g.documentElement.scrollLeft,l=g.body.scrollTop+g.documentElement.scrollTop,m=h.left+("number"==typeof a._stageX?a._stageX:0),n=h.top+("number"==typeof a._stageY?a._stageY:0),o=m-k,p=n-l,q=i+o,r=j+p,s="number"==typeof a.movementX?a.movementX:0,t="number"==typeof a.movementY?a.movementY:0;delete a._stageX,delete a._stageY,A(a,{srcElement:c,fromElement:d,toElement:e,screenX:q,screenY:r,pageX:m,pageY:n,clientX:o,clientY:p,x:o,y:p,movementX:s,movementY:t,offsetX:0,offsetY:0,layerX:0,layerY:0})}return a},ra=function(a){var b=a&&"string"==typeof a.type&&a.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(b)},sa=function(a,b,c,d){d?i(function(){a.apply(b,c)},0):a.apply(b,c)},ta=function(a){if("object"==typeof a&&a&&a.type){var b=ra(a),c=P["*"]||[],d=P[a.type]||[],e=c.concat(d);if(e&&e.length){var g,h,i,j,k,l=this;for(g=0,h=e.length;h>g;g++)i=e[g],j=l,"string"==typeof i&&"function"==typeof f[i]&&(i=f[i]),"object"==typeof i&&i&&"function"==typeof i.handleEvent&&(j=i,i=i.handleEvent),"function"==typeof i&&(k=A({},a),
sa(i,j,[k],b))}return this}},ua=function(a){var b=null;return(M===!1||a&&"error"===a.type&&a.name&&-1!==V.indexOf(a.name))&&(b=!1),b},va=function(a){var b=a.target||d||null,f="swf"===a._source;switch(delete a._source,a.type){case"error":var g="flash-sandboxed"===a.name||ua(a);"boolean"==typeof g&&(N.sandboxed=g),-1!==W.indexOf(a.name)?A(N,{disabled:"flash-disabled"===a.name,outdated:"flash-outdated"===a.name,unavailable:"flash-unavailable"===a.name,degraded:"flash-degraded"===a.name,deactivated:"flash-deactivated"===a.name,overdue:"flash-overdue"===a.name,ready:!1}):"version-mismatch"===a.name&&(c=a.swfVersion,A(N,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),Pa();break;case"ready":c=a.swfVersion;var h=N.deactivated===!0;A(N,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:h,ready:!h}),Pa();break;case"beforecopy":e=b;break;case"copy":var i,j,k=a.relatedTarget;!Q["text/html"]&&!Q["text/plain"]&&k&&(j=k.value||k.outerHTML||k.innerHTML)&&(i=k.value||k.textContent||k.innerText)?(a.clipboardData.clearData(),a.clipboardData.setData("text/plain",i),j!==i&&a.clipboardData.setData("text/html",j)):!Q["text/plain"]&&a.target&&(i=a.target.getAttribute("data-clipboard-text"))&&(a.clipboardData.clearData(),a.clipboardData.setData("text/plain",i));break;case"aftercopy":wa(a),Va.clearData(),b&&b!==Ja()&&b.focus&&b.focus();break;case"_mouseover":Va.focus(b),Z.bubbleEvents===!0&&f&&(b&&b!==a.relatedTarget&&!F(a.relatedTarget,b)&&xa(A({},a,{type:"mouseenter",bubbles:!1,cancelable:!1})),xa(A({},a,{type:"mouseover"})));break;case"_mouseout":Va.blur(),Z.bubbleEvents===!0&&f&&(b&&b!==a.relatedTarget&&!F(a.relatedTarget,b)&&xa(A({},a,{type:"mouseleave",bubbles:!1,cancelable:!1})),xa(A({},a,{type:"mouseout"})));break;case"_mousedown":Ka(b,Z.activeClass),Z.bubbleEvents===!0&&f&&xa(A({},a,{type:a.type.slice(1)}));break;case"_mouseup":La(b,Z.activeClass),Z.bubbleEvents===!0&&f&&xa(A({},a,{type:a.type.slice(1)}));break;case"_click":e=null,Z.bubbleEvents===!0&&f&&xa(A({},a,{type:a.type.slice(1)}));break;case"_mousemove":Z.bubbleEvents===!0&&f&&xa(A({},a,{type:a.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(a.type)?!0:void 0},wa=function(a){if(a.errors&&a.errors.length>0){var b=B(a);A(b,{type:"error",name:"clipboard-error"}),delete b.success,i(function(){Va.emit(b)},0)}},xa=function(a){if(a&&"string"==typeof a.type&&a){var b,c=a.target||null,d=c&&c.ownerDocument||g,e={view:d.defaultView||f,canBubble:!0,cancelable:!0,detail:"click"===a.type?1:0,button:"number"==typeof a.which?a.which-1:"number"==typeof a.button?a.button:d.createEvent?0:1},h=A(e,a);c&&d.createEvent&&c.dispatchEvent&&(h=[h.type,h.canBubble,h.cancelable,h.view,h.detail,h.screenX,h.screenY,h.clientX,h.clientY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,h.relatedTarget],b=d.createEvent("MouseEvents"),b.initMouseEvent&&(b.initMouseEvent.apply(b,h),b._source="js",c.dispatchEvent(b)))}},ya=function(){var a=Z.flashLoadTimeout;if("number"==typeof a&&a>=0){var b=Math.min(1e3,a/10),c=Z.swfObjectId+"_fallbackContent";T=k(function(){var a=g.getElementById(c);Oa(a)&&(Pa(),N.deactivated=null,Va.emit({type:"error",name:"swf-not-found"}))},b)}},za=function(){var a=g.createElement("div");return a.id=Z.containerId,a.className=Z.containerClass,a.style.position="absolute",a.style.left="0px",a.style.top="-9999px",a.style.width="1px",a.style.height="1px",a.style.zIndex=""+Sa(Z.zIndex),a},Aa=function(a){for(var b=a&&a.parentNode;b&&"OBJECT"===b.nodeName&&b.parentNode;)b=b.parentNode;return b||null},Ba=function(){var a,b=N.bridge,c=Aa(b);if(!b){var d=Ia(f.location.host,Z),e="never"===d?"none":"all",h=Ga(A({jsVersion:Va.version},Z)),i=Z.swfPath+Fa(Z.swfPath,Z);c=za();var j=g.createElement("div");c.appendChild(j),g.body.appendChild(c);var k=g.createElement("div"),l="activex"===N.pluginType;k.innerHTML='<object id="'+Z.swfObjectId+'" name="'+Z.swfObjectId+'" width="100%" height="100%" '+(l?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+i+'"')+">"+(l?'<param name="movie" value="'+i+'"/>':"")+'<param name="allowScriptAccess" value="'+d+'"/><param name="allowNetworking" value="'+e+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+h+'"/><div id="'+Z.swfObjectId+'_fallbackContent">&nbsp;</div></object>',b=k.firstChild,k=null,y(b).ZeroClipboard=Va,c.replaceChild(b,j),ya()}return b||(b=g[Z.swfObjectId],b&&(a=b.length)&&(b=b[a-1]),!b&&c&&(b=c.firstChild)),N.bridge=b||null,b},Ca=function(){var a=N.bridge;if(a){var d=Aa(a);d&&("activex"===N.pluginType&&"readyState"in a?(a.style.display="none",function e(){if(4===a.readyState){for(var b in a)"function"==typeof a[b]&&(a[b]=null);a.parentNode&&a.parentNode.removeChild(a),d.parentNode&&d.parentNode.removeChild(d)}else i(e,10)}()):(a.parentNode&&a.parentNode.removeChild(a),d.parentNode&&d.parentNode.removeChild(d))),Pa(),N.ready=null,N.bridge=null,N.deactivated=null,c=b}},Da=function(a){var b={},c={};if("object"==typeof a&&a){for(var d in a)if(d&&w.call(a,d)&&"string"==typeof a[d]&&a[d])switch(d.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":b.text=a[d],c.text=d;break;case"text/html":case"html":case"air:html":case"flash:html":b.html=a[d],c.html=d;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":b.rtf=a[d],c.rtf=d}return{data:b,formatMap:c}}},Ea=function(a,b){if("object"!=typeof a||!a||"object"!=typeof b||!b)return a;var c={};for(var d in a)if(w.call(a,d))if("errors"===d){c[d]=a[d]?a[d].slice():[];for(var e=0,f=c[d].length;f>e;e++)c[d][e].format=b[c[d][e].format]}else if("success"!==d&&"data"!==d)c[d]=a[d];else{c[d]={};var g=a[d];for(var h in g)h&&w.call(g,h)&&w.call(b,h)&&(c[d][b[h]]=g[h])}return c},Fa=function(a,b){var c=null==b||b&&b.cacheBust===!0;return c?(-1===a.indexOf("?")?"?":"&")+"noCache="+t():""},Ga=function(a){var b,c,d,e,g="",h=[];if(a.trustedDomains&&("string"==typeof a.trustedDomains?e=[a.trustedDomains]:"object"==typeof a.trustedDomains&&"length"in a.trustedDomains&&(e=a.trustedDomains)),e&&e.length)for(b=0,c=e.length;c>b;b++)if(w.call(e,b)&&e[b]&&"string"==typeof e[b]){if(d=Ha(e[b]),!d)continue;if("*"===d){h.length=0,h.push(d);break}h.push.apply(h,[d,"//"+d,f.location.protocol+"//"+d])}return h.length&&(g+="trustedOrigins="+n(h.join(","))),a.forceEnhancedClipboard===!0&&(g+=(g?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof a.swfObjectId&&a.swfObjectId&&(g+=(g?"&":"")+"swfObjectId="+n(a.swfObjectId)),"string"==typeof a.jsVersion&&a.jsVersion&&(g+=(g?"&":"")+"jsVersion="+n(a.jsVersion)),g},Ha=function(a){if(null==a||""===a)return null;if(a=a.replace(/^\s+|\s+$/g,""),""===a)return null;var b=a.indexOf("//");a=-1===b?a:a.slice(b+2);var c=a.indexOf("/");return a=-1===c?a:-1===b||0===c?null:a.slice(0,c),a&&".swf"===a.slice(-4).toLowerCase()?null:a||null},Ia=function(){var a=function(a){var b,c,d,e=[];if("string"==typeof a&&(a=[a]),"object"!=typeof a||!a||"number"!=typeof a.length)return e;for(b=0,c=a.length;c>b;b++)if(w.call(a,b)&&(d=Ha(a[b]))){if("*"===d){e.length=0,e.push("*");break}-1===e.indexOf(d)&&e.push(d)}return e};return function(b,c){var d=Ha(c.swfPath);null===d&&(d=b);var e=a(c.trustedDomains),f=e.length;if(f>0){if(1===f&&"*"===e[0])return"always";if(-1!==e.indexOf(b))return 1===f&&b===d?"sameDomain":"always"}return"never"}}(),Ja=function(){try{return g.activeElement}catch(a){return null}},Ka=function(a,b){var c,d,e,f=[];if("string"==typeof b&&b&&(f=b.split(/\s+/)),a&&1===a.nodeType&&f.length>0)if(a.classList)for(c=0,d=f.length;d>c;c++)a.classList.add(f[c]);else if(a.hasOwnProperty("className")){for(e=" "+a.className+" ",c=0,d=f.length;d>c;c++)-1===e.indexOf(" "+f[c]+" ")&&(e+=f[c]+" ");a.className=e.replace(/^\s+|\s+$/g,"")}return a},La=function(a,b){var c,d,e,f=[];if("string"==typeof b&&b&&(f=b.split(/\s+/)),a&&1===a.nodeType&&f.length>0)if(a.classList&&a.classList.length>0)for(c=0,d=f.length;d>c;c++)a.classList.remove(f[c]);else if(a.className){for(e=(" "+a.className+" ").replace(/[\r\n\t]/g," "),c=0,d=f.length;d>c;c++)e=e.replace(" "+f[c]+" "," ");a.className=e.replace(/^\s+|\s+$/g,"")}return a},Ma=function(a,b){var c=m(a,null).getPropertyValue(b);return"cursor"!==b||c&&"auto"!==c||"A"!==a.nodeName?c:"pointer"},Na=function(a){var b={left:0,top:0,width:0,height:0};if(a.getBoundingClientRect){var c=a.getBoundingClientRect(),d=f.pageXOffset,e=f.pageYOffset,h=g.documentElement.clientLeft||0,i=g.documentElement.clientTop||0,j=0,k=0;if("relative"===Ma(g.body,"position")){var l=g.body.getBoundingClientRect(),m=g.documentElement.getBoundingClientRect();j=l.left-m.left||0,k=l.top-m.top||0}b.left=c.left+d-h-j,b.top=c.top+e-i-k,b.width="width"in c?c.width:c.right-c.left,b.height="height"in c?c.height:c.bottom-c.top}return b},Oa=function(a){if(!a)return!1;var b=m(a,null),c=r(b.height)>0,d=r(b.width)>0,e=r(b.top)>=0,f=r(b.left)>=0,g=c&&d&&e&&f,h=g?null:Na(a),i="none"!==b.display&&"collapse"!==b.visibility&&(g||!!h&&(c||h.height>0)&&(d||h.width>0)&&(e||h.top>=0)&&(f||h.left>=0));return i},Pa=function(){j(S),S=0,l(T),T=0},Qa=function(){var a;if(d&&(a=Aa(N.bridge))){var b=Na(d);A(a.style,{width:b.width+"px",height:b.height+"px",top:b.top+"px",left:b.left+"px",zIndex:""+Sa(Z.zIndex)})}},Ra=function(a){N.ready===!0&&(N.bridge&&"function"==typeof N.bridge.setHandCursor?N.bridge.setHandCursor(a):N.ready=!1)},Sa=function(a){if(/^(?:auto|inherit)$/.test(a))return a;var b;return"number"!=typeof a||s(a)?"string"==typeof a&&(b=Sa(q(a,10))):b=a,"number"==typeof b?b:"auto"},Ta=function(b){var c,d,e,f=N.sandboxed,g=null;if(b=b===!0,M===!1)g=!1;else{try{d=a.frameElement||null}catch(h){e={name:h.name,message:h.message}}if(d&&1===d.nodeType&&"IFRAME"===d.nodeName)try{g=d.hasAttribute("sandbox")}catch(h){g=null}else{try{c=document.domain||null}catch(h){c=null}(null===c||e&&"SecurityError"===e.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(e.message.toLowerCase()))&&(g=!0)}}return N.sandboxed=g,f===g||b||Ua(o),g},Ua=function(a){function b(a){var b=a.match(/[\d]+/g);return b.length=3,b.join(".")}function c(a){return!!a&&(a=a.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(a)||"chrome.plugin"===a.slice(-13))}function d(a){a&&(i=!0,a.version&&(l=b(a.version)),!l&&a.description&&(l=b(a.description)),a.filename&&(k=c(a.filename)))}var e,f,g,i=!1,j=!1,k=!1,l="";if(h.plugins&&h.plugins.length)e=h.plugins["Shockwave Flash"],d(e),h.plugins["Shockwave Flash 2.0"]&&(i=!0,l="2.0.0.11");else if(h.mimeTypes&&h.mimeTypes.length)g=h.mimeTypes["application/x-shockwave-flash"],e=g&&g.enabledPlugin,d(e);else if("undefined"!=typeof a){j=!0;try{f=new a("ShockwaveFlash.ShockwaveFlash.7"),i=!0,l=b(f.GetVariable("$version"))}catch(m){try{f=new a("ShockwaveFlash.ShockwaveFlash.6"),i=!0,l="6.0.21"}catch(n){try{f=new a("ShockwaveFlash.ShockwaveFlash"),i=!0,l=b(f.GetVariable("$version"))}catch(o){j=!1}}}}N.disabled=i!==!0,N.outdated=l&&r(l)<r(O),N.version=l||"0.0.0",N.pluginType=k?"pepper":j?"activex":i?"netscape":"unknown"};Ua(o),Ta(!0);var Va=function(){return this instanceof Va?void("function"==typeof Va._createClient&&Va._createClient.apply(this,z(arguments))):new Va};v(Va,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),Va.config=function(){return $.apply(this,z(arguments))},Va.state=function(){return _.apply(this,z(arguments))},Va.isFlashUnusable=function(){return aa.apply(this,z(arguments))},Va.on=function(){return ba.apply(this,z(arguments))},Va.off=function(){return ca.apply(this,z(arguments))},Va.handlers=function(){return da.apply(this,z(arguments))},Va.emit=function(){return ea.apply(this,z(arguments))},Va.create=function(){return fa.apply(this,z(arguments))},Va.destroy=function(){return ga.apply(this,z(arguments))},Va.setData=function(){return ha.apply(this,z(arguments))},Va.clearData=function(){return ia.apply(this,z(arguments))},Va.getData=function(){return ja.apply(this,z(arguments))},Va.focus=Va.activate=function(){return ka.apply(this,z(arguments))},Va.blur=Va.deactivate=function(){return la.apply(this,z(arguments))},Va.activeElement=function(){return ma.apply(this,z(arguments))};var Wa=0,Xa={},Ya=0,Za={},$a={};A(Z,{autoActivate:!0});var _a=function(a){var b=this;b.id=""+Wa++,Xa[b.id]={instance:b,elements:[],handlers:{}},a&&b.clip(a),Va.on("*",function(a){return b.emit(a)}),Va.on("destroy",function(){b.destroy()}),Va.create()},ab=function(a,d){var e,f,g,h={},i=Xa[this.id],j=i&&i.handlers;if(!i)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof a&&a)g=a.toLowerCase().split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof d)for(e in a)w.call(a,e)&&"string"==typeof e&&e&&"function"==typeof a[e]&&this.on(e,a[e]);if(g&&g.length){for(e=0,f=g.length;f>e;e++)a=g[e].replace(/^on/,""),h[a]=!0,j[a]||(j[a]=[]),j[a].push(d);if(h.ready&&N.ready&&this.emit({type:"ready",client:this}),h.error){for(e=0,f=W.length;f>e;e++)if(N[W[e].replace(/^flash-/,"")]){this.emit({type:"error",name:W[e],client:this});break}c!==b&&Va.version!==c&&this.emit({type:"error",name:"version-mismatch",jsVersion:Va.version,swfVersion:c})}}return this},bb=function(a,b){var c,d,e,f,g,h=Xa[this.id],i=h&&h.handlers;if(!i)return this;if(0===arguments.length)f=u(i);else if("string"==typeof a&&a)f=a.split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)w.call(a,c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&this.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;d>c;c++)if(a=f[c].toLowerCase().replace(/^on/,""),g=i[a],g&&g.length)if(b)for(e=g.indexOf(b);-1!==e;)g.splice(e,1),e=g.indexOf(b,e);else g.length=0;return this},cb=function(a){var b=null,c=Xa[this.id]&&Xa[this.id].handlers;return c&&(b="string"==typeof a&&a?c[a]?c[a].slice(0):[]:B(c)),b},db=function(a){if(ib.call(this,a)){"object"==typeof a&&a&&"string"==typeof a.type&&a.type&&(a=A({},a));var b=A({},oa(a),{client:this});jb.call(this,b)}return this},eb=function(a){if(!Xa[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");a=kb(a);for(var b=0;b<a.length;b++)if(w.call(a,b)&&a[b]&&1===a[b].nodeType){a[b].zcClippingId?-1===Za[a[b].zcClippingId].indexOf(this.id)&&Za[a[b].zcClippingId].push(this.id):(a[b].zcClippingId="zcClippingId_"+Ya++,Za[a[b].zcClippingId]=[this.id],Z.autoActivate===!0&&lb(a[b]));var c=Xa[this.id]&&Xa[this.id].elements;-1===c.indexOf(a[b])&&c.push(a[b])}return this},fb=function(a){var b=Xa[this.id];if(!b)return this;var c,d=b.elements;a="undefined"==typeof a?d.slice(0):kb(a);for(var e=a.length;e--;)if(w.call(a,e)&&a[e]&&1===a[e].nodeType){for(c=0;-1!==(c=d.indexOf(a[e],c));)d.splice(c,1);var f=Za[a[e].zcClippingId];if(f){for(c=0;-1!==(c=f.indexOf(this.id,c));)f.splice(c,1);0===f.length&&(Z.autoActivate===!0&&mb(a[e]),delete a[e].zcClippingId)}}return this},gb=function(){var a=Xa[this.id];return a&&a.elements?a.elements.slice(0):[]},hb=function(){Xa[this.id]&&(this.unclip(),this.off(),delete Xa[this.id])},ib=function(a){if(!a||!a.type)return!1;if(a.client&&a.client!==this)return!1;var b=Xa[this.id],c=b&&b.elements,d=!!c&&c.length>0,e=!a.target||d&&-1!==c.indexOf(a.target),f=a.relatedTarget&&d&&-1!==c.indexOf(a.relatedTarget),g=a.client&&a.client===this;return b&&(e||f||g)?!0:!1},jb=function(a){var b=Xa[this.id];if("object"==typeof a&&a&&a.type&&b){var c=ra(a),d=b&&b.handlers["*"]||[],e=b&&b.handlers[a.type]||[],g=d.concat(e);if(g&&g.length){var h,i,j,k,l,m=this;for(h=0,i=g.length;i>h;h++)j=g[h],k=m,"string"==typeof j&&"function"==typeof f[j]&&(j=f[j]),"object"==typeof j&&j&&"function"==typeof j.handleEvent&&(k=j,j=j.handleEvent),"function"==typeof j&&(l=A({},a),sa(j,k,[l],c))}}},kb=function(a){return"string"==typeof a&&(a=[]),"number"!=typeof a.length?[a]:a},lb=function(a){if(a&&1===a.nodeType){var b=function(a){(a||(a=f.event))&&("js"!==a._source&&(a.stopImmediatePropagation(),a.preventDefault()),delete a._source)},c=function(c){(c||(c=f.event))&&(b(c),Va.focus(a))};a.addEventListener("mouseover",c,!1),a.addEventListener("mouseout",b,!1),a.addEventListener("mouseenter",b,!1),a.addEventListener("mouseleave",b,!1),a.addEventListener("mousemove",b,!1),$a[a.zcClippingId]={mouseover:c,mouseout:b,mouseenter:b,mouseleave:b,mousemove:b}}},mb=function(a){if(a&&1===a.nodeType){var b=$a[a.zcClippingId];if("object"==typeof b&&b){for(var c,d,e=["move","leave","enter","out","over"],f=0,g=e.length;g>f;f++)c="mouse"+e[f],d=b[c],"function"==typeof d&&a.removeEventListener(c,d,!1);delete $a[a.zcClippingId]}}};Va._createClient=function(){_a.apply(this,z(arguments))},Va.prototype.on=function(){return ab.apply(this,z(arguments))},Va.prototype.off=function(){return bb.apply(this,z(arguments))},Va.prototype.handlers=function(){return cb.apply(this,z(arguments))},Va.prototype.emit=function(){return db.apply(this,z(arguments))},Va.prototype.clip=function(){return eb.apply(this,z(arguments))},Va.prototype.unclip=function(){return fb.apply(this,z(arguments))},Va.prototype.elements=function(){return gb.apply(this,z(arguments))},Va.prototype.destroy=function(){return hb.apply(this,z(arguments))},Va.prototype.setText=function(a){if(!Xa[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Va.setData("text/plain",a),this},Va.prototype.setHtml=function(a){if(!Xa[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Va.setData("text/html",a),this},Va.prototype.setRichText=function(a){if(!Xa[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Va.setData("application/rtf",a),this},Va.prototype.setData=function(){if(!Xa[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Va.setData.apply(this,z(arguments)),this},Va.prototype.clearData=function(){if(!Xa[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Va.clearData.apply(this,z(arguments)),this},Va.prototype.getData=function(){if(!Xa[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Va.getData.apply(this,z(arguments))},"function"==typeof define&&define.amd?define(function(){return Va}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Va:a.ZeroClipboard=Va}(function(){return this||window}()),function(a){"use strict";Tc.Router=Tc.Module.extend({init:function(b){this._super(a(),b.sandbox),this.application=b,this.currLayout=null,this.$layout=a("body").find(".js-co-powerbar__content"),this.tpl=this.sandbox.getConfigParam("tpl"),this.data=this.sandbox.getConfigParam("data"),this.ctx={params:{}},this.$content=null,this.context=null,this.sandbox.subscribe("router",this),this.sandbox.subscribe("events",this);var c=function(c,d){this.setCtx(c);var e=c.pathname.split("/"),f=e[1]||"dashboard";this.setUrlParam("view",f);var g=a.extend(!0,{},{view:f});c.data=a.extend(!0,{},g,c.params,{route_initial:c.init,route:e});var h=Promise.resolve(b.sandbox.getConfigParam("context"));c.init||(h=this.data.post("/api/context",c.data)),h.then(function(b){b.success?(this.context=this.sandbox.config.context=b,d(),b.fullscreen&&this.fire("initialFullscreen",{leave_url:b.fullscreen_leave_url||null},["events"]),b.title&&a("title").text(b.title),this.fire("context",b,["router"])):(this.notfound(),this.fire("context",b,["router"]))}.bind(this))}.bind(this);page("/",c,this.dashboard.bind(this)),page("/dashboard",c,this.dashboard.bind(this)),page("/brands/:other_brand_slug",c,this.brand.bind(this)),page("/brands/:brand/:slug",c,this.brand.bind(this)),page("/projects/:project/:slug/:set?",c,this.project.bind(this)),page("/screens/:screen/:layer?/:id?",c,this.screen.bind(this)),page("/p/:prototype_uuid/:screen_code",c,this.shareprototype.bind(this)),page("/p/:creator/:prototype_uuid/:screen_code",c,this.shareprototype.bind(this)),page("/activity/:project/:slug",c,this.activity.bind(this)),page("/enterprise",c,this.enterprise.bind(this)),page("/usage",c,this.usage.bind(this)),page("/go",c,this.go.bind(this)),a("body").on("click","a",function(b){var c=a(b.currentTarget);c.is("[data-route]")?(b.preventDefault(),page(c.attr("href"))):b.stopPropagation()}.bind(this))},start:function(){page({click:!1})},layout:function(b,c){b||(b="default"),a("html").removeClass("skinLayoutScreen"),this.currLayout!==b?(this.sandbox.removeModules(this.$layout),this.$layout.html(this.tpl.render("l-"+b,c)),this.sandbox.addModules(this.$layout),this.currLayout=b):this.sandbox.removeModules(this.$content),this.$content=a(".js-router__content")},setCtx:function(a){this.ctx=a},getUrlParams:function(){return this.ctx.params},getUrlParam:function(a){return this.ctx.params[a]},setUrlParam:function(a,b){return this.ctx.params[a]=b},enterprise:function(a){this.layout(),this.$content.html(this.tpl.render("v-enterprise",a.data)),this.sandbox.addModules(this.$content)},usage:function(a){this.layout(),this.$content.html(this.tpl.render("v-usage",a.data)),this.sandbox.addModules(this.$content)},dashboard:function(a){this.layout("dashboard",a.data),this.$content.html(this.tpl.render("v-dashboard",a.data)),this.sandbox.addModules(this.$content)},go:function(b){if(this.context.account.initialized)page.redirect("/dashboard");else{this.layout(),this.$content.html(this.tpl.render("v-dashboard",b.data)),this.sandbox.addModules(this.$content);var c=a(this.tpl.render("c-createbrand",{context:this.context,show_cname:!0}));this.fire("openModal",{closeable:!1,modifier:"default",$content:c},["events"])}},brand:function(a){this.layout("brand",a.data),this.$content.html(this.tpl.render("v-brand",a.data)),this.sandbox.addModules(this.$content)},project:function(a){this.layout("browser",a.data)},screen:function(b){this.layout("screen",b.data),a("html").addClass("skinLayoutScreen")},shareprototype:function(b){this.layout("screen",b.data),a("html").addClass("skinLayoutScreen")},activity:function(a){this.layout(),this.$content.html(this.tpl.render("v-activity",a.data)),this.sandbox.addModules(this.$content)},notfound:function(a){a=a||{},this.layout("404",a.data)}})}(Tc.$),Tc.Setting=Tc.Setting||{},function(a){Tc.Setting.Base=Class.extend({init:function(b,c,d){this.mod=b,this.tpl=b.sandbox.getConfigParam("tpl"),this.data=b.sandbox.getConfigParam("data"),this.$ctx=c,this.$details=a(c.find(".js-cm-setting__details").eq(0)),this.$message=a(),this.id=c.data("id"),this.animating=!1,this.validator=null,this.isSetting=d,this.$block=a(),this.instant=c.data("instant"),this.method=c.data("method")||"post",0===c.find(".js-cm-setting__actions").length&&this.$details.append(a(this.tpl.render("c-setting-actions-details"))),d&&(this.active=!1,this.instant||(0===this.$details.length&&(this.$meta=a(this.tpl.render("c-setting-meta")),this.$meta.append(a(this.tpl.render("c-setting-actions-inline"))),c.append(this.$meta)),this.$block=a(this.tpl.render("c-setting-block")),c.append(this.$block)))},enter:function(){this.$block.hide(),this.active=!0,this.$message.remove()},leave:function(){this.$block.show(),this.active=!1},unfocus:function(){},focus:function(){},clear:function(){},save:function(){var b=this.$ctx,c=b.data("api"),d=this.serialize();if(c){var e={};return b.data("group")?e[b.data("group")]=d:e=d,this.data[this.method](c,e)}return Promise.resolve(a.extend(!0,{},{success:!0},d))},showDetails:function(){return new Promise(function(a){if(this.$details&&!this.$details.hasClass("state-open")){var b=this.$ctx,c=b.find(".js-cm-setting__label").clone().removeClass("state-hidden");this.$details.prepend(c);var d=this.$details.offset(),e=d.top+parseInt(this.$details.outerHeight());this.mod.resize(e),this.$details.addClass("state-open"),this.$details.velocity("fadeIn",{visibility:"visible",display:"block",complete:function(){a()}.bind(this)})}else a()}.bind(this))},hideDetails:function(){return new Promise(function(a){if(this.$details&&this.$details.hasClass("state-open")){this.$ctx;this.$details.velocity("fadeOut",{duration:1,display:"block",visibility:"hidden",complete:function(){this.$details.removeClass("state-open"),this.$details.find(".js-cm-setting__label").remove(),this.mod.resize(),a()}.bind(this)})}else a()}.bind(this))},showActions:function(a){return new Promise(function(b){var c=this.$ctx;a=a||c.find(".js-cm-setting__actions"),a.velocity("stop"),this.$details&&0===this.$details.length?a.velocity("transition.slideRightIn",{visibility:"visible",duration:300,complete:function(){b()}}):a.hasClass("state-open")?b():(a.addClass("state-open"),a.velocity("transition.slideUpIn",{visibility:"visible",duration:300,complete:function(){b()}}))}.bind(this))},hideActions:function(a){return new Promise(function(b){var c=this.$ctx;a=a||c.find(".js-cm-setting__actions"),a.velocity("stop"),this.$details&&0===this.$details.length?a.velocity("reverse",{visibility:"hidden",duration:300,complete:function(){a.removeAttr("style"),b()}}):a.hasClass("state-open")?(a.removeClass("state-open"),a.velocity("reverse",{visibility:"hidden",duration:300,complete:function(){b()}})):b()}.bind(this))},showSuccess:function(b){return new Promise(function(c){var d=this.$ctx;if(b=b||d.find(".js-cm-setting__actions"),this.$details&&0===this.$details.length){this.$message.remove(),this.$message=a(this.tpl.render("c-setting-messages",{success:!0})),b.velocity("transition.slideRightOut",{duration:100}),d.append(this.$meta),this.$meta.append(this.$message);var e=[{e:this.$message,p:"transition.slideRightIn",o:{duration:300}},{e:this.$message,p:"reverse",o:{duration:300,delay:700,complete:function(){c()}}}];a.Velocity.RunSequence(e)}else{var f=b.find('button[type="reset"]'),g=b.find('button[type="submit"]'),h=g.find(".js-cm-setting__btn-label"),i=g.find(".js-cm-setting__btn-icon--success"),j=g.find(".js-cm-setting__btn-icon--loading"),k=g.data("width");f.velocity("stop"),g.velocity("stop"),h.velocity("stop"),i.velocity("stop"),j.velocity("stop");var l=[];f.length>0&&l.push({e:f,p:"transition.slideUpIn",o:{duration:1,display:"block"}}),l=l.concat([{e:i,p:"fadeOut",o:{duration:1,display:"none"}},{e:h,p:{opacity:1},o:{duration:1,visibility:"visible"}},{e:g,p:{width:k},o:{duration:1,sequenceQueue:!1}}]);var e=[];e.push({e:j,p:"fadeOut",o:{duration:1,display:"none"}}),f.length>0&&e.push({e:f,p:"transition.slideDownOut",o:{duration:100}}),e=e.concat([{e:h,p:{opacity:0},o:{duration:100,visibility:"hidden"}},{e:g,p:{width:47},o:{duration:150,sequenceQueue:!1}},{e:i,p:"fadeIn",o:{duration:100,complete:function(){setTimeout(function(){a.Velocity.RunSequence(l),c()},300)}.bind(this)}}]),a.Velocity.RunSequence(e)}}.bind(this))},showError:function(b){var c=this.$ctx;if(b=b||c.find(".js-cm-setting__actions"),!this.animating)if(this.animating=!0,this.$details&&0===this.$details.length){b.velocity("transition.slideRightOut",{duration:100}),this.$message.remove(),this.$message=a(this.tpl.render("c-setting-messages",{success:!1})),c.append(this.$meta),this.$meta.append(this.$message);var d=[{e:this.$message,p:"transition.slideRightIn",o:{duration:100}},{e:this.$message,p:"reverse",o:{duration:300,delay:700}},{e:b,p:"reverse",o:{duration:100,display:"block",complete:function(){this.animating=!1}.bind(this)}}];a.Velocity.RunSequence(d)}else{var e=b.find('button[type="reset"]'),f=b.find('button[type="submit"]'),g=f.find(".js-cm-setting__btn-label"),h=f.find(".js-cm-setting__btn-icon--error"),i=f.find(".js-cm-setting__btn-icon--loading");f.css({width:f.outerWidth()}),e.velocity("stop"),f.velocity("stop"),g.velocity("stop"),h.velocity("stop"),i.velocity("stop");var j=[{e:h,p:"reverse",o:{duration:100,display:"none",complete:function(){f.removeClass("cm-btn--danger")}.bind(this)}},{e:f,p:"reverse",o:{duration:150,sequenceQueue:!1}},{e:g,p:"reverse",o:{duration:100}},{e:e,p:"reverse",o:{duration:1,display:"block",complete:function(){this.animating=!1}.bind(this)}}],d=[{e:e,p:"transition.slideDownOut",o:{duration:100}},{e:g,p:{opacity:0},o:{duration:100,visibility:"hidden"}},{e:f,p:{width:[47,f.outerWidth()]},o:{duration:150,sequenceQueue:!1,complete:function(){f.addClass("cm-btn--danger")}.bind(this)}},{e:h,p:"fadeIn",o:{duration:100,complete:function(){setTimeout(function(){a.Velocity.RunSequence(j)},300)}.bind(this)}}];a.Velocity.RunSequence(d)}},showErrors:function(a){this.validator?this.hideLoader().then(function(){this.validator.showErrors(a),this.validator.focusInvalid()}.bind(this)):console.log("Validation not enabled for this setting")},validation:function(b,c,d){d=d||this.$ctx;var e=this;d.on("reset",function(b){d.validate().resetForm(),a.isFunction(c)&&c()}.bind(this)),this.validator=d.validate({onfocusout:!1,submitHandler:function(){e.$details.length>0&&e.showLoader(),a.isFunction(b)&&b()},errorPlacement:this.errorPlacement.bind(this),showErrors:function(){this.numberOfInvalids()>0&&e.showError(),this.defaultShowErrors()}})},showLoader:function(b){var c=this.$ctx;b=b||c.find(".js-cm-setting__actions");var d=b.find('button[type="reset"]'),e=b.find('button[type="submit"]'),f=e.find(".js-cm-setting__btn-label"),g=e.find(".js-cm-setting__btn-icon--loading");d.velocity("stop"),e.velocity("stop"),f.velocity("stop"),g.velocity("stop"),e.data("width",e.outerWidth());var h=[];d.length>0&&h.push({e:d,p:"transition.slideDownOut",o:{duration:100}}),h=h.concat([{e:f,p:{opacity:0},o:{duration:100,visibility:"hidden"}},{e:e,p:{width:47},o:{duration:150,sequenceQueue:!1}},{e:g,p:"fadeIn",o:{duration:100,display:"inline-block"}}]),a.Velocity.RunSequence(h)},hideLoader:function(b){return new Promise(function(c){var d=this.$ctx;this.$details&&0===this.$details.length&&c(),b=b||d.find(".js-cm-setting__actions");var e=b.find('button[type="reset"]'),f=b.find('button[type="submit"]'),g=f.find(".js-cm-setting__btn-label"),h=f.find(".js-cm-setting__btn-icon--loading");e.velocity("stop"),f.velocity("stop"),g.velocity("stop"),h.velocity("stop");var i=[{e:h,p:"fadeOut",o:{duration:100,display:"none"}},{e:f,p:"reverse",o:{duration:150}},{e:g,p:{opacity:1},o:{duration:150,visibility:"visible",sequenceQueue:!1}}];e.length>0?i.push({e:e,p:"reverse",o:{duration:100,display:"block",complete:function(){c()}}}):c(),a.Velocity.RunSequence(i)}.bind(this))},errorPlacement:function(a,b){a.addClass("cm-setting__error"),b.parent().append(a),a.velocity("transition.slideDownIn",{duration:100})}})}(Tc.$),function(a){"use strict";Tc.Utils.Account=Class.extend({init:function(){this.authenticated=this.getContext().authenticated},isAuthenticated:function(){return this.authenticated},isEnterprise:function(){return this.authenticated?this.getContext().account.is_enterprise:!1},hasFeature:function(a){if(!this.authenticated||!this.getContext().features)return!1;var b=this.getContext().features.find(function(b){return b.toLowerCase()===a.toLowerCase()});return!!b},hasProduct:function(a){if(!this.authenticated||!this.getContext().products)return!1;var b=this.getContext().products.find(function(b){return b.toLowerCase()===a.toLowerCase()});return!!b},removeProduct:function(a){if(!this.authenticated||!this.getContext().products)return!1;var b=this.getContext().products.indexOf(a);b>=0&&this.getContext().products.splice(b,1)},hasPermission:function(a){if(!this.authenticated)return!1;var b=this.getContext().project,c=!1;return b&&b.permissions&&(c=b.permissions[a]),c},getPlan:function(){return this.authenticated?this.getContext().plan:null},getTrial:function(a){var b=this.getContext().trials.find(function(b){return b.constant.toLowerCase()===a.toLowerCase()});return b},isTrial:function(a){if(!this.authenticated||!this.getContext().trials)return!1;var b=this.getContext().trials.find(function(b){return b.constant.toLowerCase()===a.toLowerCase()});return!!b},addTrial:function(a){this.getContext().trials.push(a)},isExpiredTrial:function(a){if(!this.authenticated||!this.getContext().trials)return!1;
var b=this.getContext().trials.find(function(b){return b.constant.toLowerCase()===a.toLowerCase()});return b&&b.expired?!0:!1},getContext:function(){return application.sandbox.config.context}})}(Tc.$),function(a){"use strict";Tc.Utils.Data=Class.extend({init:function(){this.usage=null},get:function(a){return this.handle({url:a})},post:function(a,b){return this.handle({url:a,data:JSON.stringify(b),method:"post"})},"delete":function(a,b){return this.handle({url:a,data:JSON.stringify(b),method:"delete"})},put:function(a,b){return this.handle({url:a,data:JSON.stringify(b),method:"put"})},patch:function(a,b){return this.handle({url:a,data:JSON.stringify(b),method:"patch"})},handle:function(b){var c={method:"GET",dataType:"json",contentType:"application/json; charset=utf-8",url:""},b=a.extend({},c,b);return Promise.resolve(a.ajax(b))},serializeForm:function(a){var b={},c=a.serializeArray();return c.forEach(function(a){b[a.name]?b[a.name]+=","+a.value:b[a.name]=a.value}),b},updateBlock:function(b,c){var d=this._getBlockInfo(b);return a("body").data("translation-language")&&(c.language=a("body").data("translation-language")),this.post("/api/document/block/"+d.pageId+"/"+d.sectionId+"/"+d.blockId,c)},checkStorageLimit:function(a){var b=application.sandbox.getConfigParam("context");a=Math.round(a/1024,0),this.usage=this.usage||b.usage;var c=this.usage.storage;return new Promise(function(b,d){a+c.current>=c.max&&c.max>0?(application.connectors.events.notify(null,"onSwal",{template:"c-swal-storage-limit",closeOnConfirm:!0,callback:function(){application.connectors.events.notify(null,"onOpenPayment",{feature:"CORE_STORAGE_LIMIT"})}.bind(this)}),d()):b()}.bind(this))},updateUserLimit:function(a){var b=application.sandbox.getConfigParam("context");this.get("/api/account/usage/"+b.account.id).then(function(a){application.connectors.events.notify(null,"onUpdateUsage",a.data),this.usage=a.data}.bind(this))},updateStorageUsage:function(a){var b=application.sandbox.getConfigParam("context");a===!0?this.get("/api/account/usage/"+b.account.id).then(function(a){application.connectors.events.notify(null,"onUpdateUsage",a.data),this.usage=a.data}.bind(this)):(a=Math.round(a/1024,0),this.usage.storage.max>0&&(this.usage.storage.current+=a),application.connectors.events.notify(null,"onUpdateUsage",this.usage))},_getBlockInfo:function(b){var c={};c.pageId=a(".page").data("id");var d=b.closest("section").data("id");return 1>d&&(d=0),c.sectionId=d,c.blockId=b.data("block"),c}})}(Tc.$),function(a){"use strict";Tc.Utils.Template=Class.extend({init:function(){this.templates=a.extend({},window.tpl_common,window.tpl_workspace,window.tpl_styleguide)},compile:function(b){var c=this.templates;if(b=b.toLowerCase(),!c[b]){var d=a("#"+b);if(d.length>0)try{var e=doT.template(d.html());c[b]=e}catch(f){console.log(f)}else console.log("the template with the id "+b+" could not be found")}return c[b]},render:function(b,c){b=b||"default",c=c||{},c.tpl=this,c.utils={account:application.sandbox.config.account};var d=this.compile(b);return a.isFunction(d)?d(c):(delete c.tpl,void delete c.utils)},truncate:function(a,b,c,d){if(b=b||8,c=c||40,d=d||0,a&&a.length>d&&a.length>c){var e=a.substring(a.length-b),f=a.substring(0,a.length-b);return f=f.substring(0,c),f+"&hellip;"+e}return a},translate:function(b,c){if(b=b||"",c=a.isArray(c)?c:[],c.length>0)for(var d=0,e=c.length;e>d;d++)b=b.replace("$"+(d+1)+"$",c[d]);return b},escape:function(a){return null==a?"":String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}})}(Tc.$),function(a){Tc.Module.CBtnDropdown=Tc.Module.extend({on:function(b){var c=this.$ctx;this.sandbox.subscribe("events",this),a("html").on("click.btndropdown",function(b){var d=a(b.target),e=d.closest(".js-cm-btn-dropdown__menu");0===e.length&&this.onCloseDropdown(c.find(".js-cm-btn-dropdown__menu.state-open"))}.bind(this)),c.on("click.btndropdown",".js-cm-btn-dropdown__close",function(b){var c=a(b.target),d=c.closest(".js-cm-btn-dropdown__menu");this.onCloseDropdown(d)}.bind(this)),c.on("click.btndropdown",".js-cm-btn-dropdown__toggle",function(b){b.stopPropagation();var d=a(b.currentTarget),e=c.find(".js-cm-btn-dropdown__toggle.state-open").filter(function(b,c){var e=a(c);if(e.is(d))return!1;var f=!1;return d.closest(".cm-btn-dropdown").parents(".cm-btn-dropdown").each(function(b,c){var d=a(c).find(".js-cm-btn-dropdown__toggle.state-open");d.length>0&&(f=!0)}),f?!1:!0}.bind(this));e.each(function(b,c){var d=a(c),e=d.next(".js-cm-btn-dropdown__menu");this.close(d,e)}.bind(this));var f=d.next(".js-cm-btn-dropdown__menu");this.toggle(d,f)}.bind(this)),b()},toggle:function(a,b){a.hasClass("state-open")?this.close(a,b):this.open(a,b)},open:function(b,c){b.addClass("state-open");var d=parseInt(c.outerWidth()),e=c.offset().left,f=parseInt(a(window).width());c.hasClass("cm-btn-dropdown__menu--center")&&(c.css({left:-d/2+c.data("offset")}),e=c.offset().left),e+d>f&&c.addClass("cm-btn-dropdown__menu--right"),c.show().addClass("state-open")},close:function(a,b){a.removeClass("state-open"),b.hide().removeClass("state-open")},onCloseDropdown:function(a){if(a&&a.length>0){var b,c;a.hasClass("js-cm-btn-dropdown__toggle")?(b=a,c=b.next(".js-cm-btn-dropdown__menu"),this.close(b,c)):a.hasClass("js-cm-btn-dropdown__menu")&&(c=a,b=c.prev(".js-cm-btn-dropdown__toggle"),this.close(b,c))}}})}(Tc.$),function(a){Tc.Module.CBtnSwitch=Tc.Module.extend({on:function(b){var c=this.$ctx;this.$radios=c.find(".js-cm-btn-switch__radio"),this.$switch=c.find(".js-cm-btn-switch__switch"),this.event=c.data("event"),this.sandbox.subscribe("events",this),this.$radios.on("change",function(b){var c=a(b.target),d=c.next(".js-cm-btn-switch__label");this.setDimension(d),this.fire(this.event,{filter:c.val()})}.bind(this)),b()},after:function(){var a=this.$ctx,b=this.$radios.filter(":checked").next(".js-cm-btn-switch__label"),c=a.closest(".mod-c-modal").length>0?200:1;setTimeout(function(){this.setDimension(b),setTimeout(function(){this.$switch.addClass("state-initialized")}.bind(this),1)}.bind(this),c)},setDimension:function(a){var b=a.position().left,c=a.outerWidth();a.is(":first-of-type")?b+=2:a.is(":last-of-type")&&(b-=2),this.$switch.css({width:c,left:b})}})}(Tc.$),function(a){Tc.Module.CCopycode=Tc.Module.extend({on:function(b){var c=this.$ctx;ZeroClipboard.config({swfPath:"/swf/ZeroClipboard2.swf"});var d=new ZeroClipboard(c.find(".js-cm-copycode__btn").get(0));this.codemirror=CodeMirror.fromTextArea(c.find(".js-cm-copycode__textarea").get(0),{mode:"htmlmixed",theme:"solarized",lineNumbers:!0,lineWrapping:!1,readOnly:!0,viewportMargin:1/0}),document.addEventListener("lazybeforeunveil",function(b){a(b.target).is(c)&&this.codemirror.refresh()}.bind(this)),d.on("aftercopy",function(b){var c=a(b.target),d=c.find(".js-cm-copycode__btn-label--initial"),e=c.find(".js-cm-copycode__btn-label--copied");d.velocity("stop"),e.velocity("stop"),d.velocity("transition.slideDownOut",{duration:100,complete:function(){e.velocity("transition.slideUpIn",{duration:100,complete:function(){e.velocity("transition.slideDownOut",{duration:100,delay:1e3,complete:function(){d.velocity("transition.slideUpIn",{duration:100})}.bind(this)})}.bind(this)})}.bind(this)})}.bind(this)),b()},setValue:function(a){var b=this.$ctx;this.codemirror.setValue(a),this.codemirror.refresh(),b.find(".js-cm-copycode__btn").attr("data-clipboard-text",a)}})}(Tc.$),function(a){Tc.Module.CCopylink=Tc.Module.extend({on:function(b){var c=this.$ctx;ZeroClipboard.config({swfPath:"/swf/ZeroClipboard2.swf"});var d=new ZeroClipboard(c.find(".js-cm-copylink__btn").get(0));d.on("aftercopy",function(b){var c=a(b.target),d=c.find(".js-cm-copylink__btn-label--initial"),e=c.find(".js-cm-copylink__btn-label--copied");d.velocity("stop"),e.velocity("stop"),d.velocity("transition.slideDownOut",{duration:100,complete:function(){e.velocity("transition.slideUpIn",{duration:100,complete:function(){e.velocity("transition.slideDownOut",{duration:100,delay:1e3,complete:function(){d.velocity("transition.slideUpIn",{duration:100})}.bind(this)})}.bind(this)})}.bind(this)})}.bind(this)),b()},setValue:function(a){var b=this.$ctx;b.find(".js-cm-copylink__input").val(a),b.find(".js-cm-copylink__btn").attr("data-clipboard-text",a)}})}(Tc.$),function(a){Tc.Module.CMention=Tc.Module.extend({init:function(a,b,c){this._super(a,b,c),this.on()},on:function(b){var c=this.$ctx;this.sandbox.subscribe("editor",this),this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.project=this.sandbox.getConfigParam("context").project.id,this.reload=!0,this.sandbox.subscribe("editor",this),this.project===Tc.Module.CMention.project&&Tc.Module.CMention.validCache||(Tc.Module.CMention.validCache=!0,Tc.Module.CMention.project=this.project,Tc.Module.CMention.users=this.data.get("/api/collaborator/list/"+this.project).then(function(b){var d=b.collaborators.filter(function(a){return a.name});return d=b.collaborators.map(function(a){return a.username=a.name||a.email.replace("@","(at)"),a}),new Tribute({values:d,lookup:function(a){return a.name||a.email},menuItemTemplate:function(b){return this.tpl.render("c-userlist-item",a.extend(!0,b,{classes:"ca-avatar--small"}))}.bind(this),selectTemplate:function(a){return c.is(":input")?"@"+a.original.username:'<a href="javascript:;" class="js-cm-personcard__avatar" data-id="'+a.original.id+'">@'+a.original.username+"</a>"}.bind(this),allowSpaces:!0})}.bind(this))),Tc.Module.CMention.users.then(function(a){var b=c.get(0);a.attach(b),b.addEventListener("tribute-replaced",function(b){var d=b.detail,e=a.current.filteredItems[a.menuSelected].original.user_id;this.fire("mentionCreate",{$ctx:c,id:e,name:d},["editor"])}.bind(this))}.bind(this)),a.isFunction(b)&&b()},onCollaboratorChanged:function(){Tc.Module.CMention.validCache=!1}}),Tc.Module.CMention.project=null,Tc.Module.CMention.users=null,Tc.Module.CMention.validCache=!1,Tc.Module.CMention.applyMentions=function(a,b,c){if(a.raw=a.content,a.mentions.length>0)for(var d=0;d<a.mentions.length;d++)a.content=a.content.replace(a.mentions[d].string,c.render(b,a.mentions[d])),a.raw=a.raw.replace(a.mentions[d].string,"@"+a.mentions[d].replace);return a}}(Tc.$),function(a){Tc.Module.CModal=Tc.Module.extend({on:function(b){var c=this.$ctx;this.$overlay=a(".js-cm-modal__overlay"),this.mId=c.data("modal-id"),this.isOpen=!1,this.closeable=!0,this.sandbox.subscribe("events",this),a("body").on("click.cm-modal",".js-cm-modal__open",function(b){var c=a(b.currentTarget),d=c.data("modal-id")||"modal";this.mId===d&&this.open({modifier:c.data("modal-modifier")})}.bind(this)),c.on("click",".js-cm-modal__close",function(){this.close()}.bind(this)),a(document).keyup(function(a){27===a.which&&this.close()}.bind(this)),b()},close:function(b){if(this.isOpen&&(this.closeable||b)){this.isOpen=!1,Tc.Module.CModal.count--;var c=this.$ctx;c.removeClass("state-visible"),0===Tc.Module.CModal.count?(a("body").removeClass("state-cm-modal-visible",!1),this.$overlay.removeClass("state-visible")):this.$overlay.css({zIndex:2e3+Tc.Module.CModal.count}),c.off("click.modal")}},open:function(b){var c=this.$ctx,d=b.modifier||null,e=c.find(".js-cm-modal__content");if(!this.isOpen){this.isOpen=!0,Tc.Module.CModal.count++;var c=this.$ctx,f=c.find(".js-cm-modal__close");this.closeable?f.removeClass("state-hidden"):f.addClass("state-hidden"),d&&e.addClass("cm-modal__content--"+d),c.on("click.modal"+this.id,function(b){0===a(b.target).closest(".js-cm-modal__content").length&&this.close()}.bind(this)),a("body").addClass("state-cm-modal-visible",!1),this.$overlay.css({zIndex:2e3+Tc.Module.CModal.count}).addClass("state-visible"),c.css({zIndex:2e3+Tc.Module.CModal.count}).addClass("state-visible"),setTimeout(function(){this.fire("modalOpened",{id:this.mId},["events"])}.bind(this),200)}},onOpenModal:function(a){var b=a.id||"modal",c=this.$ctx;if(this.closeable=!0,b===this.mId){if(this.close(),this.closeable=a.closeable!==!1,a.$content){var d=c.find(".js-cm-modal__content");d.html(a.$content),a.terrific!==!1&&this.sandbox.addModules(d)}this.open({modifier:a.modifier})}},onCloseModal:function(a){var b=a.id||"modal";b===this.mId&&this.close(!0)}}),Tc.Module.CModal.count=0}(Tc.$),function(a){Tc.Module.CNotifications=Tc.Module.extend({on:function(b){var c=this.$ctx;this.time=null,this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.timeout=null,this.pusher=this.sandbox.getConfigParam("pusher"),this.pusherEvents=!1,this.open=!1,this.sandbox.subscribe("events",this),c.on("click",".js-cm-notifications__item",function(b){var c=a(b.currentTarget);c.data("link")&&(this.fire("closePowerbar"),page(c.data("link")))}.bind(this)),c.on("click",".js-cm-notifications__content a",function(a){a.stopPropagation()}.bind(this)),a(".js-cm-notifications__btn").on("click",function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.open?this.open=!1:(this.open=!0,this.update(!0),Intercom("trackEvent","checked-notifications",{}))}.bind(this)),b()},after:function(){this.timeout=setTimeout(function(){this.update(!1)}.bind(this),1500)},update:function(b){var c=this.$ctx,d=c.find(".js-cm-notifications__list"),e=c.find(".js-cm-notifications__loading"),f=c.find(".js-cm-notifications__blank");this.time=(new Date).getTime(),e.show(),f.hide(),this.data.get("/api/activity/stream/?read="+b).then(function(c){if(!this.pusherEvents&&this.pusher&&c.success){this.pusherEvents=!0;for(var g=c.pusher.projects,h=0,i=g.length;i>h;h++){var j=this.pusher.channel("presence-project-"+g[h]);j&&j.bind("notification",function(a){a.actor!=this.sandbox.getConfigParam("user")&&(this.open?this.update(!0):this.incrementCount())}.bind(this))}}e.hide(),b?this.setCount(0):this.setCount(c.unseen),c.items&&(d.html(""),c.items.length<=0&&f.show(),a.each(c.items,function(b,e){e.message=e.message.replace("{actor}","<strong>"+e.actor_name+"</strong>");var f=e.message.match(/\{project:(.*)\}/);f&&f.length>0&&c.objects.project&&c.objects.project[f[1]]&&(e.project=c.objects.project[f[1]],e.message=e.message.replace("{project:"+f[1]+"}",'<a href="'+e.project.link+'">'+e.project.title+"</a>"));var f=e.message.match(/\{screen:(.*)\}/);f&&f.length>0&&c.objects.screen&&c.objects.screen[f[1]]&&(e.screen=c.objects.screen[f[1]],e.message=e.message.replace("{screen:"+f[1]+"}",'<a href="'+e.screen.link+'">'+e.screen.title+"</a>"));var f=e.message.match(/\{object:(.*)\}/);if(f&&f.length>0){var g=e.object_type.toLowerCase();c.objects[g]&&c.objects[g][f[1]]&&(e.object=c.objects[g][f[1]],e.message=e.message.replace("{object:"+f[1]+"}",'<a href="'+e.object.link+'">'+e.object.title+"</a>"))}var h=a(this.tpl.render("c-notifications-item",e));d.append(h)}.bind(this)))}.bind(this))},setCount:function(b){b>0?(a(".js-cm-notifications__btn").addClass("state-unseen"),a(".js-cm-notifications__count").text(b)):(a(".js-cm-notifications__btn").removeClass("state-unseen"),a(".js-cm-notifications__count").text(""))},incrementCount:function(){var b=a(".js-cm-notifications__count"),c=parseInt(b.text().trim());isNaN(c)&&(c=0),c+=1,this.setCount(c)}})}(Tc.$),function(a){Tc.Module.CPersoncard=Tc.Module.extend({on:function(a){this.$ctx;this.timeouts=[],this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),a()},after:function(){this.$ctx;a(document).on("mouseenter.personcard",".avatar, .ca-avatar, .js-cm-personcard__avatar",function(b){b.stopPropagation();var c=a(b.currentTarget),d=c.data("user-id")||0;if(!(0>=d)){var e=c.offset();this.timeouts[d]=setTimeout(function(){this.data.get("/api/user/info/"+d).then(function(b){if("object"==typeof b){var c=a(this.tpl.render("c-personcard",b));a("body").append(c);var d=e.left,f=c.width(),g=a(window).width();d+f>g&&(d=g-f),c.css({top:e.top+20+"px",left:d+"px"})}}.bind(this))}.bind(this),200)}}.bind(this)).on("mouseleave.personcard",".avatar, .ca-avatar, .js-cm-personcard__avatar",function(b){var c=a(b.currentTarget),d=c.data("user-id");0>=d||(clearTimeout(this.timeouts[d]),a("body").find(".cm-personcard[data-card-id]").remove())}.bind(this)),a(window).on("mouseenter.personcard",function(b){a("body").find(".cm-personcard[data-card-id]").remove()})}})}(Tc.$),function(a){Tc.Setting.Color=Tc.Setting.Base.extend({elem:function(b){var c=this.$ctx;this.data=this.mod.sandbox.getConfigParam("data"),this.tpl=this.mod.sandbox.getConfigParam("tpl"),this.$hex=c.find(".js-cm-setting-color__hex"),this.$r=c.find(".js-cm-setting-color__r"),this.$g=c.find(".js-cm-setting-color__g"),this.$b=c.find(".js-cm-setting-color__b"),this.$a=c.find(".js-cm-setting-color__a"),this.tiny=null,this.$palette=c.find(".js-cm-setting-color__palette"),this.$picker=c.find(".js-cm-setting-color__picker"),this.$bubble=c.find(".js-cm-setting-color__bubble"),this.hasPalette=!!this.$palette.length,this.hasPicker=!!this.$picker.length,this.hasBubble=!!this.$bubble.length,this.readonly=c.data("readonly"),(this.hasBubble||this.hasPicker)&&(this.$hex.on("paste",a.debounce(10,function(){this.setColor(this.$hex.val())}.bind(this))),this.$hex.change(function(){this.setColor(this.$hex.val())}.bind(this))),this.hasBubble&&this.$hex.on("keydown",a.debounce(100,function(){this.setColor(this.$hex.val())}.bind(this))),this.hasPicker&&(this.picker=this.$picker.spectrum({change:function(a){this.updateColor(a)}.bind(this)}),c.on("keydown",function(b){this.active&&9===b.which&&(b.shiftKey&&a(b.target).is('input[name="color"]')?(b.preventDefault(),this.mod.prev(c)):a(b.target).is('button[type="reset"]')&&(b.preventDefault(),this.mod.next(c)))}.bind(this)),c.on(".js-cm-setting-color__r, .js-cm-setting-color__g, .js-cm-setting-color__b, .js-cm-setting-color__a","paste",a.debounce(10,function(){this.setColor(this.$hex.val())}.bind(this))),c.on("change",".js-cm-setting-color__r, .js-cm-setting-color__g, .js-cm-setting-color__b, .js-cm-setting-color__a",function(){this.setColor(this.getRgbaColor())}.bind(this))),this.hasPalette&&c.on("click",".js-cm-setting-color__palette-color",function(b){var d=a(b.currentTarget),e=c.find(".js-cm-setting-color__palette-color");e.removeClass("state-selected"),d.addClass("state-selected"),this.setColor(d.data("value"))}.bind(this)),b||(this.setColor(c.data("css")),this.hasPalette&&this.loadPalette(),this.hasPicker&&this.picker.spectrum("reflow"))},setting:function(){var b=this.$ctx;this.elem(!0);var c=b.find(".js-cm-setting-color__value");this.tiny=tinycolor(c.text()),b.on("submit",function(c){c.preventDefault(),this.showLoader(),this.save().then(function(c){c.success&&(a.isFunction(this.saved)&&this.saved(c),this.updatePreview(),this.showSuccess().then(function(){this.hideDetails().then(function(){this.hideActions()}.bind(this))}.bind(this)),this.mod.leave(b))}.bind(this))}.bind(this)).on("reset",function(){this.hideDetails().then(function(){this.hideActions()}.bind(this)),this.mod.leave(b)}.bind(this))},enter:function(){this._super();var a=this.$ctx;if(this.readonly)this.mod.leave(a);else{var b=a.find(".js-cm-setting-color__preview").css("backgroundColor"),c=Promise.resolve();this.hasPalette&&(c=this.loadPalette(b)),c.then(function(){this.setColor(b),this.showDetails().then(function(){this.hasPicker&&(this.picker.spectrum("reflow"),this.$hex.trigger("focus").trigger("select")),this.showActions()}.bind(this))}.bind(this))}},unfocus:function(){this._super(),this.readonly||(this.$details.velocity("callout.pulse",{duration:300}),this.focus())},focus:function(){this.hasPicker&&!this.readonly&&this.$hex.trigger("focus")},serialize:function(){var a=this.$ctx,b={},c=a.data("set");if(c){var d=c.split(",");d.forEach(function(a){"id"===a?b[this.id]=this.tiny.toRgbString():"hex"===a?b.hex=this.tiny.toHex():("alpha"===a||"a"===a||"opacity"===a)&&(b[a]=100*this.tiny.getAlpha())}.bind(this))}else a.data("format")?"hex"===a.data("format")&&(b[this.id]="#"+this.tiny.toHex()):b[this.id]=this.tiny.toRgbString();return b},loadPalette:function(b){return this.data.get("/api/color/library/"+this.$palette.data("palette")).then(function(c){return a.each(c.palettes,function(d,e){e.colors&&a.each(e.colors,function(a,d){tinycolor.equals(b,d.css_value)&&(d.active=!0,c.selected=!0)})}),c.hasPicker=this.hasPicker,this.$palette.html(this.tpl.render("c-setting-setting-color-palette",c)),!0}.bind(this))},setColor:function(a){var b=tinycolor(a);b.isValid()||(b=tinycolor("rgba(255,255,255,0)")),this.tiny=b,this.hasPicker&&this.picker.spectrum("set",b),this.hasBubble&&this.$bubble.css({backgroundColor:this.tiny.toRgbString()})},updateColor:function(a){if(this.tiny=a,this.hasPicker){this.$hex.val(a.toHexString());var b=a.toRgb();this.$r.val(b.r),this.$g.val(b.g),this.$b.val(b.b),this.$a.val(b.a)}},updatePreview:function(a){var b=this.$ctx;b.find(".js-cm-setting-color__value").text(this.tiny.toHexString()),b.find(".js-cm-setting-color__preview").css({backgroundColor:this.tiny.toRgbString()})},getRgbaColor:function(){return"rgba("+this.$r.val()+","+this.$g.val()+","+this.$b.val()+","+this.$a.val()+")"}})}(Tc.$),function(a){Tc.Setting.Colorlabel=Tc.Setting.Base.extend({elem:function(b){var c=this.$ctx;c.on("click",".js-cm-setting-colorlabel__link",function(b){c.find(".js-cm-setting-colorlabel__link").removeClass("state-active"),a(b.currentTarget).addClass("state-active")}.bind(this))},setting:function(){var b=this.$ctx;this.elem(),b.on("click",".js-cm-setting-colorlabel__link",function(b){this.save().then(function(b){b.success&&a.isFunction(this.saved)&&this.saved(b)}.bind(this))}.bind(this))},enter:function(){var a=this.$ctx;this.mod.leave(a)},leave:function(){this._super()},serialize:function(){var a=this.$ctx,b={};return b[this.id]=a.find(".js-cm-setting-colorlabel__link.state-active").data("color"),b}})}(Tc.$),function(a){a.validator.addMethod("creditcardnumber",function(a,b){return recurly.validate.cardNumber(a)},"Please enter a valid creditcard number."),a.validator.addClassRules("validate-creditcardnumber",{creditcardnumber:!0}),a.validator.addMethod("creditcardcvv",function(a,b){return recurly.validate.cvv(a)},"Please enter a valid cvv."),a.validator.addClassRules("validate-creditcardcvv",{creditcardcvv:!0}),a.validator.addMethod("creditcarddate",function(a,b){var c=a.split("/");return recurly.validate.expiry(c[0],c[1])},"Please enter a valid expiry date."),a.validator.addClassRules("validate-creditcarddate",{creditcarddate:!0}),a.validator.addMethod("creditcardname",function(a,b){var c=a.split(" ");return c.length>=2},"Please enter a valid name."),a.validator.addClassRules("validate-creditcardname",{creditcardname:!0}),Tc.Setting.Creditcard=Tc.Setting.Base.extend({elem:function(b){var c=this.$ctx;this.$number=c.find("#"+this.id+"_number"),this.$date=c.find("#"+this.id+"_date"),this.$cvv=c.find("#"+this.id+"_cvv"),this.$name=c.find("#"+this.id+"_name"),this.$companyName=c.find("#"+this.id+"_company_name");var d=function(){a.isFunction(this.changed)&&this.changed(this.serialize(!0)[this.id])}.bind(this);this.$number.on("change",a.debounce(100,function(a){d()}.bind(this))),this.$date.on("change",a.debounce(100,function(a){d()}.bind(this))),this.$cvv.on("change",a.debounce(100,function(a){d()}.bind(this))),this.$name.on("change",a.debounce(100,function(a){d()}.bind(this))),this.$companyName.on("change",a.debounce(100,function(a){d()}.bind(this))),this.$number.on("keyup",function(b){a(b.currentTarget);this.changeCard()}.bind(this))},changeCard:function(){var b=this.$ctx,c=this.$number.val(),d=b.find(".js-cm-setting-creditcard__type"),e={visa:/^4/,mastercard:/^5[1-5]/,amex:/^3(4|7)/},f="card-empty",g=!1;a.each(e,function(a,b){b.test(c)&&(f=a,g=!0)}),d.css({backgroundImage:'url("/../../../img/creditcard/'+f+'.svg")'})},setting:function(){this.elem();var b=this.$ctx;this.validation(function(){this.saveCreditCard()}.bind(this),function(){this.hideDetails().then(function(){this.hideActions()}.bind(this)),this.mod.leave(b)}.bind(this)),b.on("keydown",function(c){this.active&&9===c.which&&(c.shiftKey&&a(c.target).is(this.$number)?(c.preventDefault(),this.mod.prev(b)):a(c.target).is('button[type="reset"]')&&(c.preventDefault(),this.mod.next(b)))}.bind(this))},saveCreditCard:function(){var b=this.$ctx;this.save().then(function(c){c.success&&(a.isFunction(this.saved)&&this.saved(c),this.showSuccess().then(function(){this.hideDetails()}.bind(this)),this.mod.leave(b))}.bind(this))},serialize:function(a){var b=this.$ctx,c={};c.number=this.$number.val();var d=this.$name.val().split(" ");c.first_name=d[0],c.last_name=d[1];var e=this.$date.val().split("/");c.month=e[0],c.year=e[1],c.cvv=this.$cvv.val(),c.company_name=this.$companyName.val();var f=null;return b.data("group")&&!a?(f={},f[b.data("group")]=c):f=c,f},enter:function(){this._super();this.$ctx;this.showDetails().then(function(){this.$number.focus(),this.showActions()}.bind(this))},leave:function(){this._super()},unfocus:function(){this._super();this.$ctx;this.$details.velocity("callout.pulse",{duration:300}),this.$number.trigger("focus")}})}(Tc.$),function(a){Tc.Setting.Delete=Tc.Setting.Base.extend({elem:function(a){this.$ctx},setting:function(){var b=this.$ctx;this.$btn=b.find(".js-cm-setting-delete__btn"),this.$confirmation=b.find(".js-cm-setting-delete__confirmation"),this.$error=b.find(".js-cm-setting-delete__error"),b.on("click",".js-cm-setting-delete__btn",function(a){a.preventDefault(),this.$btn.velocity("transition.slideDownOut",{duration:200,complete:function(){this.$confirmation.velocity("transition.slideUpIn",{duration:200})}.bind(this)})}.bind(this)),b.on("click",".js-cm-setting-delete__cancel",function(b){b.preventDefault(),this.$confirmation.velocity("transition.slideDownOut",{duration:200,complete:function(){a.isFunction(this.cancelled)&&this.cancelled(),this.$btn.velocity("transition.slideUpIn",{duration:200})}.bind(this)})}.bind(this)),b.on("click",".js-cm-setting-delete__delete",function(b){b.preventDefault(),this["delete"]().then(function(b){b.success?a.isFunction(this.deleted)&&(this.deleted(b),this.data.updateStorageUsage(!0)):(b.error&&this.$error.find(".js-cm-setting-delete__error").text(b.error),this.$confirmation.velocity("transition.slideDownOut",{duration:200,complete:function(){this.$error.velocity("transition.slideUpIn",{duration:200})}.bind(this)}))}.bind(this))}.bind(this))},focus:function(){var a=this.$ctx;a.find(".js-cm-setting-delete__btn").trigger("click")},"delete":function(){var b=this.$ctx,c=b.data("api");return c?this.data["delete"](c):Promise.resolve(a.extend(!0,{},{success:!0}))},enter:function(){var a=this.$ctx;this.mod.leave(a)},leave:function(){this._super()}})}(Tc.$),function(a){Tc.Setting.Dropdown=Tc.Setting.Base.extend({elem:function(b){var c=this.$ctx,d=c.find("select");this.readonly=d.is("[readonly]"),this.expand=c.data("expand")||!1,d.dropdown({changed:function(b){a.isFunction(this.changed)&&this.changed(this.serialize())}.bind(this),open:function(){if(this.expand){var a=c.find(".js-ca-dropdown__list"),b=a.offset(),d=b.top+parseInt(a.outerHeight())+30;this.mod.resize(d)}}.bind(this),close:function(){this.expand&&this.mod.resize()}.bind(this)}),c.on("focusin",".js-cm-setting__bar",function(b){a(b.currentTarget).addClass("state-active")}.bind(this)).on("focusout",".js-cm-setting__bar",function(b){a(b.currentTarget).removeClass("state-active")}.bind(this))},setting:function(){var b=this.$ctx;this.elem(),b.find(".ca-dropdown").attr("tabindex","-1"),b.on("keydown",function(a){this.active&&9===a.which&&(a.preventDefault(),a.shiftKey?this.mod.prev(b):this.mod.next(b))}.bind(this)),b.on("submit",function(c,d){c.preventDefault(),this.save().then(function(c){c.success&&(a.isFunction(this.saved)&&this.saved(c),this.mod.leave(b),this.showSuccess())}.bind(this))}.bind(this)).on("reset",function(){this.mod.leave(b)}.bind(this))},enter:function(){this._super();var a=this.$ctx;this.readonly?this.mod.leave(a):(this.showActions(),a.find(".ca-dropdown > .selected").trigger("mouseup"))},leave:function(){this._super(),this.hideActions()},focus:function(){var a=this.$ctx;this.readonly||(this.isSetting?this.enter():a.find(".ca-dropdown > .selected").trigger("mouseup"))},unfocus:function(b){this._super();var c=this.$ctx;this.readonly||this.save().then(function(d){d.success&&(a.isFunction(this.saved)&&this.saved(d),this.mod.leave(c),this.showSuccess(),this.mod.enter(b))}.bind(this))},serialize:function(){var a=this.$ctx,b={};return b[this.id]=a.find("select").val(),b},destroy:function(){}})}(Tc.$),function(a){Tc.Setting.Hidden=Tc.Setting.Base.extend({elem:function(a){this.$ctx},serialize:function(){var a=this.$ctx,b={};b[this.id]=a.attr("value");var c=null;return a.data("group")?(c={},c[a.data("group")]=b):c=b,c},setValue:function(a){var b=this.$ctx;b.attr("value",a)}})}(Tc.$),function(a){Tc.Setting.Hotspot=Tc.Setting.Base.extend({elem:function(b){var c=this.$ctx;this.$x=c.find("#"+this.id+"_x"),this.$y=c.find("#"+this.id+"_y"),this.$width=c.find("#"+this.id+"_width"),this.$height=c.find("#"+this.id+"_height"),this.readonly=c.data("readonly"),this.fields=["x","y","width","height"];var d=function(){a.isFunction(this.changed)&&this.changed(this.serialize(!0)[this.id])}.bind(this);this.$x.on("change",a.debounce(100,function(a){d()}.bind(this))),this.$y.on("change",a.debounce(100,function(a){d()}.bind(this))),this.$width.on("change",a.debounce(100,function(a){d()}.bind(this))),this.$height.on("change",a.debounce(100,function(a){d()}.bind(this)))},setting:function(){this.elem();var b=this.$ctx;this.validation(function(){this.saveHotspot()}.bind(this),function(){this.hideDetails().then(function(){this.hideActions()}.bind(this)),this.mod.leave(b)}.bind(this)),b.on("keydown",function(c){this.active&&9===c.which&&(c.shiftKey&&a(c.target).is(this.$width)?(c.preventDefault(),this.mod.prev(b)):a(c.target).is('button[type="reset"]')&&(c.preventDefault(),this.mod.next(b)))}.bind(this))},saveHotspot:function(){var b=this.$ctx;this.save().then(function(c){c.success&&(b.find(".js-cm-setting-hotspot__value").html(this.tpl.render("c-setting-setting-hotspot-value",{value:this.serialize(!0)[this.id]})),a.isFunction(this.saved)&&this.saved(c),this.showSuccess().then(function(){this.hideDetails()}.bind(this)),this.mod.leave(b))}.bind(this))},serialize:function(a){var b=this.$ctx,c={};c[this.id]={x:Math.round(parseFloat(this.$x.val())),y:Math.round(parseFloat(this.$y.val())),width:Math.round(parseFloat(this.$width.val())),height:Math.round(parseFloat(this.$height.val()))};var d=null;return b.data("group")&&!a?(d={},d[b.data("group")]=c):d=c,d},enter:function(){this._super();var a=this.$ctx;this.readonly?this.mod.leave(a):this.showDetails().then(function(){this.$width.focus(),this.showActions()}.bind(this))},leave:function(){this._super()},setValue:function(a){var b=this.$ctx;a.x>-1?(a.x=Math.round(parseFloat(a.x)),this.$x.val(a.x)):a.x=Math.round(parseFloat(this.$x.val())),a.y>-1?(a.y=Math.round(parseFloat(a.y)),this.$y.val(a.y)):a.y=Math.round(parseFloat(this.$y.val())),a.width>-1?(a.width=Math.round(parseFloat(a.width)),this.$width.val(a.width)):a.width=Math.round(parseFloat(this.$width.val())),a.height>-1?(a.height=Math.round(parseFloat(a.height)),this.$height.val(a.height)):a.height=Math.round(parseFloat(this.$height.val())),b.find(".js-cm-setting-hotspot__value").html(this.tpl.render("c-setting-setting-hotspot-value",{value:a}))},disableFields:function(a){for(var b=0,c=this.fields.length;c>b;b++){var d=this.fields[b];a.indexOf(d)>-1?(this["$"+d].attr("readonly","readonly"),this.mod.get(this.id+"_"+d).readonly=!0):(this["$"+d].removeAttr("readonly"),this.mod.get(this.id+"_"+d).readonly=!1)}},unfocus:function(){if(this._super(),!this.readonly){this.$ctx;this.$details.velocity("callout.pulse",{duration:300}),this.$width.trigger("focus")}}})}(Tc.$),function(a){Tc.Setting.Image=Tc.Setting.Base.extend({setting:function(){var b=this.$ctx;this.$cropper=b.find(".js-cm-setting-image__cropper"),b.data("circle")&&b.addClass("state-circle"),b.find(".js-cm-setting-image__input").fileupload({dataType:"json",dropZone:a(".js-cm-setting-image__image-wrap",b),
add:function(a,b){b.submit()}.bind(this),done:function(a,c){if(c.result&&c.result[0]){var d=b.find(".js-cm-setting-image__image");d.attr("data-original",c.result[0].url),this.renderDetails({id:c.result[0].id,original:c.result[0].url}),this.showDetails().then(function(){this.mod.enter(b),this.showCropper(),this.showActions().then(function(){b.find(".js-cm-setting__actions button[type=submit]").trigger("focus")})}.bind(this))}}.bind(this)}),b.on("submit",function(a){a.preventDefault(),this.showLoader(),this.save().then(function(a){a.success&&this.done(a)}.bind(this))["catch"](function(a){b.trigger("reset")}.bind(this))}.bind(this)).on("reset",function(){this.hideCropper(),this.hideDetails().then(function(){this.hideActions()}.bind(this)),this.mod.leave(b)}.bind(this)),b.on("click",".js-cm-setting-image__replace",function(a){this.mod.fire("closeDropdown",b.find(".js-cm-btn-dropdown__toggle"));var c=b.find(".js-cm-setting-image__image");c.removeAttr("data-original"),c.removeClass("state-available");var d=b.find(".js-cm-setting-image__crop-image");d.removeAttr("data-id"),b.find(".js-cm-setting-image__input").trigger("click.image"),this.mod.leave(b)}.bind(this)),b.on("click",".js-cm-setting-image__delete",function(a){this.mod.fire("closeDropdown",b.find(".js-cm-btn-dropdown__toggle")),b.find(".js-cm-setting-image__image").attr("src",b.data("placeholder"));var c=this.serialize(),d=null;b.data("group")?(d={},d[b.data("group")]=c):d=c,this.showLoader(),this.data.post(b.data("api"),d).then(function(a){a.success&&this.done(a)}.bind(this))}.bind(this)),b.on("keydown",function(c){this.active&&9===c.which&&(c.shiftKey&&a(c.target).is('button[type="submit"]')?(c.preventDefault(),this.mod.prev(b)):a(c.target).is('button[type="reset"]')&&(c.preventDefault(),this.mod.next(b)))}.bind(this))},renderDetails:function(a){this.$cropper.html(this.tpl.render("c-setting-setting-image-cropper",{id:a.id,original:a.original}))},enter:function(){if(this._super(),!this.$details.hasClass("state-open")){var a=this.$ctx,b=a.find(".js-cm-setting-image__image");b.hasClass("state-available")?(this.renderDetails({original:b.attr("data-original")}),this.showDetails().then(function(){this.showCropper(),this.showActions().then(function(){a.find(".js-cm-setting__actions button[type=submit]").trigger("focus")})}.bind(this))):(a.find(".js-cm-setting-image__input").trigger("click.image"),this.mod.leave(a))}},unfocus:function(a){this._super();var b=this.$ctx;this.$details.velocity("callout.pulse",{duration:300}),b.find(".js-cm-setting__actions button[type=submit]").trigger("focus")},serialize:function(){var a=this.$ctx,b={},c=a.find(".js-cm-setting-image__image").attr("src");return b[this.id]=c!==a.data("placeholder")?c:"",b},save:function(){var a=this.$ctx,b={},c=a.find(".js-cm-setting-image__crop-image"),d=c.cropper("getData");b[this.id]=c.attr("src"),b[this.id+"_crop"]={x:d.x,y:d.y,width:d.width,height:d.height},c.data("id")&&(b[this.id+"_id"]=c.data("id"));var e=null;return a.data("group")?(e={},e[a.data("group")]=b):e=b,this.data.post(a.data("api"),e)},showCropper:function(){var b=this.$ctx,c=b.find(".js-cm-setting-image__crop-image"),d=parseInt(b.data("width")),e=parseInt(b.data("height"));this.$loader=a(this.tpl.render("c-loader")),c.before(this.$loader),c.cropper({viewMode:1,aspectRatio:d/e,guides:!1,built:function(){this.$loader.remove(),c.velocity("fadeIn",{duration:400,delay:100})}.bind(this)})},hideCropper:function(){var a=this.$ctx,b=a.find(".js-cm-setting-image__crop-image");this.$loader&&this.$loader.remove(),b.cropper("destroy"),b.velocity("fadeOut",{duration:1})},setValue:function(a){var b=this.$ctx;a=a||b.data("placeholder");var c=b.find(".js-cm-setting-image__image");c.attr("src",a).removeClass("state-available")},done:function(b){var c=this.$ctx,d=c.find(".js-cm-setting-image__image");b[this.id]&&b[this.id]!==c.data("placeholder")?(b.placeholder=!1,d.attr("src",b[this.id]).addClass("state-available")):(b[this.id]=c.data("placeholder"),b.placeholder=!0,d.removeClass("state-available")),a.isFunction(this.saved)&&this.saved(b),this.showSuccess().then(function(){this.hideDetails().then(function(){this.hideCropper(),this.hideActions()}.bind(this))}.bind(this)),this.mod.leave(c)}})}(Tc.$),function(a){Tc.Setting.Measure=Tc.Setting.Base.extend({elem:function(b){var c=this.$ctx;this.readonly=c.data("readonly"),c.on("click",".js-cm-setting-measure__type",function(b){if(!this.readonly){var d=a(b.currentTarget);c.find(".js-cm-setting-measure__type").removeClass("state-selected"),d.addClass("state-selected");var e=d.data("type");a.isFunction(this.changed)&&this.changed({type:e})}return!1}.bind(this))},setting:function(){var b=this.$ctx;this.elem(),this.readonly||b.on("click",".js-cm-setting-measure__type",function(b){this.save().then(function(b){b.success&&a.isFunction(this.saved)&&this.saved(b)}.bind(this))}.bind(this))},enter:function(){var a=this.$ctx;this.mod.leave(a)},leave:function(){this._super()},serialize:function(){var a=this.$ctx,b={};return b[this.id]=a.find(".js-cm-setting-measure__type.state-selected").data("type"),b}})}(Tc.$),function(a){Tc.Setting.Password=Tc.Setting.Base.extend({setting:function(){var b=this.$ctx;this.validation(function(){this.savePassword()}.bind(this),function(){this.hideDetails().then(function(){this.hideActions()}.bind(this)),this.mod.leave(b)}.bind(this)),b.on("keydown",function(c){this.active&&9===c.which&&(c.shiftKey&&a(c.target).is('input[name="password"]')?(c.preventDefault(),this.mod.prev(b)):a(c.target).is('button[type="reset"]')&&(c.preventDefault(),this.mod.next(b)))}.bind(this))},savePassword:function(){var a=this.$ctx;this.save().then(function(b){b.success?(this.showSuccess().then(function(){this.hideDetails().then(function(){this.hideActions()}.bind(this))}.bind(this)),a.trigger("reset"),this.mod.leave(a)):this.showErrors({password:b.error})}.bind(this))},serialize:function(){var a=this.$ctx,b={password:a.find("#password").val(),password_new:a.find("#password_new").val()};return b},enter:function(){this._super();var a=this.$ctx;this.showDetails().then(function(){a.find("#password").focus(),this.showActions()}.bind(this))},unfocus:function(){this._super();var a=this.$ctx;this.$details.velocity("callout.pulse",{duration:300}),a.find("#password").trigger("focus")}})}(Tc.$),function(a){Tc.Setting.Permission=Tc.Setting.Base.extend({elem:function(){var b=this.$ctx;this.$role=b.find("#"+this.id);var c=function(){a.isFunction(this.changed)&&this.changed(this.serialize())}.bind(this);this.$role.on("change",a.debounce(100,function(a){c()}.bind(this)))},serialize:function(){var a=(this.$ctx,{});return a[this.id]=this.$role.val(),a}})}(Tc.$),function(a){Tc.Setting.Search=Tc.Setting.Base.extend({elem:function(b){var c=this.$ctx;this.$text=c.find(".js-cm-setting-search__input"),this.$preview=c.find(".js-cm-setting-search__preview"),this.$chooser=c.find(".js-cm-setting-search__chooser"),this.$create=null,this.settings=null,this.readonly=c.data("readonly"),this.jets=new Jets({searchTag:"#search-"+this.id+"-search",contentTag:"#search-"+this.id+"-content"}),c.on("focusin",".js-cm-setting__bar",function(b){a(b.currentTarget).addClass("state-active")}.bind(this)).on("focusout",".js-cm-setting__bar",function(b){a(b.currentTarget).removeClass("state-active")}.bind(this)),this.$chooser.on("click",".js-cm-setting-search__item",function(d){d.stopPropagation();var e=a(d.currentTarget);c.data("value",e.data("value")),this.save().then(function(d){d.success&&(a.isFunction(this.saved)&&this.saved(d),this.hideDetails(),b&&this.mod.leave(c))}.bind(this)),this.$preview.find(".js-cm-setting-search__preview-content").html(e.clone())}.bind(this)),c.on("click",".js-cm-setting-search__cancel",function(a){this.hideDetails()}.bind(this)),c.on("click",".js-cm-setting-search__preview",function(a){this.showDetails().then(function(){this.$text.focus(),this.showActions()}.bind(this))}.bind(this)),c.on("click",".js-cm-setting-search__add",function(b){var d=a(b.currentTarget);this.hideDetails().then(function(){this.hideActions(),this.$chooser.hide();var b=d.data("template");this.$create=a(this.tpl.render("c-setting-elem-search-create",{template:b})),this.$details.append(this.$create),this.settings=new Tc.Module.CSettings(this.$create,this.mod.sandbox),this.showDetails().then(function(){var b=this.settings.getFirstElem();a.isFunction(b.focus)&&b.focus(),this.showActions()}.bind(this)),this.validation(function(){var b=this.settings.serialize();this.add(b).then(function(b){var d=a(this.tpl.render(c.data("template-preview"),b));this.$preview.find(".js-cm-setting-search__preview-content").html(d),c.data("value",d.data("value")),c.find(".js-cm-setting-search__items").append(d.clone()),this.showSuccess().then(function(){this.hideDetails().then(function(){this.hideActions(),this.$chooser.show(),this.$create.hide()}.bind(this))}.bind(this))}.bind(this))}.bind(this),function(){this.hideDetails().then(function(){this.hideActions(),this.$chooser.show(),this.$create.hide(),this.showDetails().then(function(){this.showActions()}.bind(this))}.bind(this))}.bind(this),this.$create)}.bind(this))}.bind(this))},setting:function(){var b=this.$ctx;this.elem(!0),b.on("submit",function(a){a.preventDefault()}.bind(this)),b.on("reset",function(a){this.hideDetails(),this.mod.leave(b)}.bind(this)),b.on("keydown",function(c){this.active&&9===c.which&&c.shiftKey&&a(c.target).is(this.$text)&&(c.preventDefault(),this.mod.prev(b))}.bind(this))},serialize:function(){var a=this.$ctx,b={};b[this.id]=a.data("value")||"";var c=null;return a.data("group")?(c={},c[a.data("group")]=b):c=b,c},enter:function(){this._super(),this.readonly?this.mod.leave(this.$ctx):this.showDetails().then(function(){this.$text.focus(),this.showActions()}.bind(this))},leave:function(){this._super()},setValue:function(b){var c=this.$ctx,d=a(this.tpl.render(c.data("template-preview"),b));this.$preview.find(".js-cm-setting-search__preview-content").html(d),c.data("value",d.data("value"))},focus:function(){this.readonly||this.$text.focus()},unfocus:function(){if(this._super(),!this.readonly){this.$ctx;this.$details.velocity("callout.pulse",{duration:300}),this.$text.focus()}},destroy:function(){this.jets&&this.jets.destroy()}})}(Tc.$),function(a){Tc.Setting.Styleguidetemplate=Tc.Setting.Base.extend({elem:function(b){var c=this.$ctx,d=c.find(".js-cm-setting-styleguidetemplate__item");c.on("click",".js-cm-setting-styleguidetemplate__item",function(b){b.preventDefault(),d.removeClass("state-active");var c=a(b.currentTarget);c.addClass("state-active")}.bind(this))},serialize:function(){var a=this.$ctx,b={},c=a.find(".js-cm-setting-styleguidetemplate__item.state-active");c.length>0&&(b=c.data());var d=null;return a.data("group")?(d={},d[a.data("group")]=b):d=b,d},destroy:function(){}})}(Tc.$),function(a){a.validator.addMethod("date",function(a,b){return this.optional(b)||a.match(/^\d\d\/\d\d\/\d\d\d\d$/)},"Please enter a valid date."),a.validator.addClassRules("validate-date",{date:!0}),Tc.Setting.Text=Tc.Setting.Base.extend({elem:function(){var b=this.$ctx;this.$text=b.find(".js-cm-setting__input"),this.initialValue=this.$text.val(),this.readonly=this.$text.is("[readonly]"),this.$text.is("textarea")&&autosize(this.$text),this.$text.is("[data-mask]")&&(this.$text.addClass("js-cm-setting__input-"+this.id),b.find(".js-cm-setting__input-"+this.id).mask(""+this.$text.data("mask"))),this.$text.on("change",a.debounce(100,function(b){!this.readonly&&a.isFunction(this.changed)&&this.changed(a(b.currentTarget).val())}.bind(this))),b.on("focusin",".js-cm-setting__bar",function(b){this.readonly||a(b.currentTarget).addClass("state-active")}.bind(this)).on("focusout",".js-cm-setting__bar",function(b){this.readonly||a(b.currentTarget).removeClass("state-active")}.bind(this))},setting:function(){this.elem();var b=this.$ctx;this.hasChanged=!1,this.$text.on("keyup change",function(){this.initialValue!==this.$text.val()?this.hasChanged=!0:this.hasChanged=!1}.bind(this)),b.on("keydown",function(a){this.active&&9===a.which&&(a.preventDefault(),b.trigger("submit"),a.shiftKey?this.mod.prev(b):this.mod.next(b))}.bind(this)),b.on("reset",function(a){a.preventDefault(),this.$text.val(this.initialValue)}.bind(this)),this.validation(function(){this.hasChanged?this.save().then(function(c){a.isFunction(this.saved)&&this.saved(c),c.success?(this.initialValue=this.$text.val(),this.mod.leave(b),this.showSuccess()):c.errors&&this.showErrors(c.errors)}.bind(this)):this.mod.leave(b)}.bind(this),function(){this.mod.leave(b)}.bind(this))},enter:function(){this._super(),this.readonly?this.mod.leave(this.$ctx):(this.hasChanged=!1,this.showActions(),this.$text.trigger("select"))},leave:function(){this._super(),this.readonly||(this.$text.trigger("blur"),this.hideActions())},focus:function(){return this.readonly||(this.isSetting?this.enter():this.$text.trigger("select")),this},unfocus:function(b){if(this._super(),!this.readonly){var c=this.$ctx;this.validator.form()?this.hasChanged?this.save().then(function(d){a.isFunction(this.saved)&&this.saved(d),d.success?(this.initialValue=this.$text.val(),this.mod.leave(c),this.showSuccess(),this.mod.enter(b)):d.errors&&this.showErrors(d.errors)}.bind(this)):(this.mod.leave(c),this.mod.enter(b)):(this.validator.focusInvalid(),c.velocity("callout.pulse",{duration:300}))}},setValue:function(a){return this.$text.val(a),this},getValue:function(){return this.$text.val()},clear:function(){this.$text.val("")},serialize:function(){var a=this.$ctx,b={};b[this.id]=this.$text.val();var c=null;return a.data("group")?(c={},c[a.data("group")]=b):c=b,c}})}(Tc.$),function(a){Tc.Setting.Toggle=Tc.Setting.Base.extend({elem:function(b){var c=this.$ctx;this.readonly=c.find(".js-cm-setting-toggle").is("[readonly]"),c.on("click",".js-cm-setting-toggle",function(b){a.isFunction(this.changed)&&this.changed(this.serialize())}.bind(this))},setting:function(){var a=this.$ctx;this.readonly=a.find(".js-cm-setting-toggle").is("[readonly]")},enter:function(){this._super();var b=this.$ctx;if(!this.readonly){var c=this.$ctx.find(".js-cm-setting-toggle");c.trigger("click"),this.save().then(function(b){b.success&&a.isFunction(this.saved)&&(b.enabled=this.saved(b))}.bind(this))}this.mod.leave(b)},save:function(){var b=this.$ctx,c=b.data("api");return c?this.data.post(c,this.serialize()).then(function(b){return a.extend(!0,{},b,this.serialize())}.bind(this)):Promise.resolve(a.extend(!0,{},{success:!0},this.serialize()))},leave:function(){this._super()},serialize:function(){var b=this.$ctx,c={},d=b.find(".js-cm-setting-toggle"),e=d.is(":checked"),f=b.data("mapping-false"),g=b.data("mapping-true");return void 0!==g&&void 0!==f&&(e=e?g:f),b.data("key")&&(c[b.data("key")]=e),c[this.id]=e,c=a.extend(!0,{},c,d.data())},setValue:function(a){var b=this.$ctx,c=b.find(".js-cm-setting-toggle");a?c.attr("checked","checked"):c.removeAttr("checked")}})}(Tc.$),function(a){Tc.Setting.Typostyle=Tc.Setting.Base.extend({elem:function(b){var c=this.$ctx;this.$font=c.find("#"+this.id+"_search"),this.$weight=c.find("#"+this.id+"_weight"),this.$size=c.find("#"+this.id+"_size");var d=function(){a.isFunction(this.changed)&&this.changed(this.serialize(!0)[this.id])}.bind(this);this.$font.on("change",a.debounce(100,function(a){d()}.bind(this))),this.$weight.on("change",a.debounce(100,function(a){d()}.bind(this))),this.$size.on("change",a.debounce(100,function(a){d()}.bind(this)))},setting:function(){this.elem();var b=this.$ctx;this.validation(function(){this.saveTypostyle()}.bind(this),function(){this.hideDetails().then(function(){this.hideActions()}.bind(this)),this.mod.leave(b)}.bind(this)),b.on("keydown",function(c){this.active&&9===c.which&&(c.shiftKey&&a(c.target).is(this.$width)?(c.preventDefault(),this.mod.prev(b)):a(c.target).is('button[type="reset"]')&&(c.preventDefault(),this.mod.next(b)))}.bind(this))},saveTypostyle:function(){var b=this.$ctx;this.save().then(function(c){c.success&&(b.find(".js-cm-setting-typostyle__value").html(this.tpl.render("c-setting-setting-typostyle-value",{value:this.serialize(!0)[this.id]})),a.isFunction(this.saved)&&this.saved(c),this.showSuccess().then(function(){this.hideDetails()}.bind(this)),this.mod.leave(b))}.bind(this))},serialize:function(b){var c=this.$ctx,d=a(".js-cm-setting-search__item",c).data("css"),e=a(".js-cm-setting-search__item",c).data("family"),f=a(".js-cm-setting-search__item",c).data("provider"),g={};g[this.id]={family_css:d,family:e,provider:f.toLowerCase(),weight:this.$weight.val(),size:this.$size.val()};var h=null;return c.data("group")&&!b?(h={},h[c.data("group")]=g):h=g,h},enter:function(){this._super();this.$ctx;this.showDetails().then(function(){this.$size.focus(),this.showActions()}.bind(this))},leave:function(){this._super()},setValue:function(a){var b=this.$ctx;a.font?(a.font=a.font,this.$font.val(a.font)):a.font=this.$font.val(),a.weight?(a.weight=a.weight,this.$weight.val(a.weight)):a.weight=this.$weight.val(),a.size?(a.size=a.size,this.$size.val(a.size)):a.size=this.$size.val(),b.find(".js-cm-setting-typostyle__value").html(this.tpl.render("c-setting-setting-typostyle-value",{value:{family:a.font.family,weight:a.weight,size:a.size}}))},unfocus:function(){this._super();this.$ctx;this.$details.velocity("callout.pulse",{duration:300}),this.$size.trigger("focus")}})}(Tc.$),function(a){Tc.Setting.Users=Tc.Setting.Base.extend({elem:function(b){var c=this.$ctx;c.on("change",".js-cm-setting-users__checkbox input",function(){a(this).is(":checked")?a(this).closest(".js-cm-setting-users__checkbox").addClass("selected"):a(this).closest(".js-cm-setting-users__checkbox").removeClass("selected")}),c.on("click",".js-cm-setting-users__select",function(){checked_items=[];var b=c.find(".js-cm-setting-users__checkbox");a.each(b,function(b,c){a(c).addClass("selected"),a(c).find("input").attr("checked",!0)})})},serialize:function(){var b=this.$ctx,c=[],d=b.find('input[type="checkbox"]:checked');a.each(d,function(b,d){c.push(a(d).val())});var e={};e[this.id]=c;var f=null;return b.data("group")?(f={},f[b.data("group")]=e):f=e,f},setValue:function(a){var b=this.$ctx;b.attr("value",a)}})}(Tc.$),function(a){Tc.Module.CTabs=Tc.Module.extend({on:function(b){var c=this.$ctx;this.id=c.data("m-tabs-id"),this.$links=c.find(".js-cm-tabs__link"),this.$panes=c.find(".js-cm-tabs__pane"),c.on("click",".js-cm-tabs__link",function(b){b.preventDefault();var c=a(b.currentTarget);this.showContent(c)}.bind(this)),b()},showContent:function(a){if(!a.hasClass("state-active")){var b=a.attr("href").substring(1);this.$links.removeClass("state-active"),a.addClass("state-active");var c=this.$panes.filter("#"+b);this.$panes.removeClass("state-active"),c.addClass("state-active")}}})}(jQuery),function(a){Tc.Module.CAccessrequest=Tc.Module.extend({on:function(b){var c=this.$ctx;this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.sandbox.subscribe("events",this);var d=a(this.tpl.render("c-accessrequest",c.data("config")));c.append(d),this.settings=new Tc.Module.CSettings(c.find(".js-co-accessrequest__settings"),this.sandbox),this.settings.validation(function(){this.request()}.bind(this)),b()},request:function(){var a=(this.$ctx,this.settings.serialize());this.data.post("/api/auth/request-access",a).then(function(a){a.success&&(Tc.Setting.Base.prototype.showSuccess.apply(this),this.fire("swal",{template:"c-swal-accessrequest-sent",type:"success"}),setTimeout(function(){location.href="/"},2e3))}.bind(this))}})}(Tc.$),function(a){Tc.Module.CActivation=Tc.Module.extend({on:function(b){var c=this.$ctx;this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.sandbox.subscribe("events",this),c.on("click",".js-co-activation__activate",function(b){var d=(a(b.currentTarget),c.data("product"));this.data.post("/api/product/activate",{product_id:d}).then(function(a){a.success&&this.fire("productActivated",{product_id:d},function(a){switch(d){case 2:c.html(this.tpl.render("c-activation-workspace-success"));break;case 3:c.html(this.tpl.render("c-activation-patternlib-success"))}}.bind(this))}.bind(this))}.bind(this)),b()}})}(Tc.$),function(a){Tc.Module.CComments=Tc.Module.extend({init:function(a,b,c){this._super(a,b,null),this.info=c,this.on()},on:function(b){var c=this.$ctx;if(this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.account=this.sandbox.getConfigParam("account"),this.sandbox.subscribe("events",this),this.sandbox.subscribe("editor",this),this.mentions=[],c.on("click",".js-co-comments__toggle",function(b){var c=a(b.currentTarget),d=c.next(".js-co-comments__menu"),e=c.data("id"),f=a(this.tpl.render("c-comments-menu",{id:e}));d.html("").append(f);var g=new Tc.Module.CSettings(f,this.sandbox),h=g.getSetting("delete_comment");h.focus(),h.deleted=function(){this.info.comments=this.info.comments.filter(function(a){return a.id!=e}),this.info.comment_count=parseInt(this.info.comment_count)-1,c.closest(".js-co-comments__item").remove()}.bind(this),h.cancelled=function(){this.fire("closeDropdown",c)}.bind(this)}.bind(this)),this.info.comments)for(var d=0;d<this.info.comments.length;d++)this.info.comments[d]=Tc.Module.CMention.applyMentions(this.info.comments[d],"layerannotation-mention",this.tpl);if(c.html(this.tpl.render("c-comments",this.info)),this.account.hasPermission("comment")){var e=c.find(".js-co-comments__form"),f=new Tc.Module.CSettings(e,this.sandbox),g=e.find("#content");g.on("keyup",function(b){var c=a(b.target);a.trim(c.val()).length>0?e.find("button[type=submit]").removeAttr("disabled"):e.find("button[type=submit]").attr("disabled","disabled")}.bind(this)),f.validation(function(){var b=f.serialize();return b.mentions=this.mentions,this.data.post("/api/annotation/comment/add",b).then(function(b){Tc.Setting.Base.prototype.showSuccess.apply(this).then(function(){e.trigger("reset"),e.find("button[type=submit]").attr("disabled","disabled"),this.info.comments||(this.info.comments=[]),b.comment=Tc.Module.CMention.applyMentions(b.comment,"layerannotation-mention",this.tpl),this.info.comments.push(b.comment),c.find(".js-co-comments__list").append(a(this.tpl.render("c-comments-item",b.comment))),this.info.comment_count=parseInt(this.info.comment_count)+1}.bind(this))}.bind(this))}.bind(this),function(){}.bind(this)),new Tc.Module.CMention(g,this.sandbox)}a.isFunction(b)&&b()},onMentionCreate:function(a){a.$ctx.is(this.$ctx.find("#content"))&&this.mentions.push({id:a.id,type:"user",string:a.name})}})}(Tc.$),function(a){Tc.Module.CCreateBrand=Tc.Module.extend({on:function(a){var b=this.$ctx;this.data=this.sandbox.getConfigParam("data"),this.sandbox.subscribe("events",this),this.settings=new Tc.Module.CSettings(b,this.sandbox),this.settings.validation(function(){this.create()}.bind(this)),a()},create:function(){var a=this.settings.serialize();a.image="/img/company@2x.png",this.data.post("/api/brand/create/",a).then(function(a){a.success&&(this.fire("closeModal",["events"]),this.fire("swal",{template:"c-swal-brand-create-done",closeOnConfirm:!0,callback:function(){page("/brands/"+a.brand.id+"/"+a.brand.slug)}.bind(this)},["events"]))}.bind(this))},onModalOpened:function(a){"modal"===a.id&&this.settings.getFirstElem().focus()}})}(Tc.$),function(a){Tc.Module.CCreateProject=Tc.Module.extend({on:function(a){var b=this.$ctx;this.data=this.sandbox.getConfigParam("data"),this.sandbox.subscribe("events",this),this.settings=new Tc.Module.CSettings(b,this.sandbox),this.settings.validation(function(){this.create()}.bind(this)),a()},create:function(){var a=(this.$ctx,this.settings.serialize());a.project_type="PROJECT",this.data.post("/api/project/add/",a).then(function(a){a.success&&(this.fire("closeModal",["events"]),page(a.project.url))}.bind(this))},onModalOpened:function(a){"modal"===a.id&&this.settings.getElem("name").focus()}})}(Tc.$),function(a){Tc.Module.CCreateStyleguide=Tc.Module.extend({on:function(a){var b=this.$ctx;this.data=this.sandbox.getConfigParam("data"),this.sandbox.subscribe("events",this),this.settings=new Tc.Module.CSettings(b,this.sandbox),this.settings.validation(function(){this.create()}.bind(this)),a()},create:function(){var a=(this.$ctx,this.settings.serialize());a.project_type="STYLEGUIDE",this.data.post("/api/hub/create/",a).then(function(a){a.success&&(this.fire("closeModal",["events"]),window.location.href=a.document.href+"?edit")}.bind(this))},onModalOpened:function(a){"modal"===a.id&&this.settings.getElem("name").focus()}})}(Tc.$),function(a){Tc.Module.CGuidelines=Tc.Module.extend({on:function(a){var b=this.$ctx;this.tpl=this.sandbox.getConfigParam("tpl"),this.data=this.sandbox.getConfigParam("data");var c="/api/document/page-content/42";this.data.get(c).then(function(a){b.find(".js-co-guidelines__title").html(a.page.document_title),b.find(".js-co-guidelines__page-title").html(a.page.title),b.find(".js-co-guidelines__content").html(a.content)}.bind(this)),a()}})}(Tc.$),function(a){Tc.Module.CHeader=Tc.Module.extend({on:function(a){this.sandbox.subscribe("events",this),a()},onOpenRevisions:function(a){var b=this.$ctx;b.velocity("transition.slideUpOut",{duration:100})},onCloseRevisions:function(a){var b=this.$ctx;b.velocity("transition.slideDownIn",{duration:100})},onInitialFullscreen:function(){var a=this.$ctx;a.velocity("transition.slideUpOut",{duration:1})},onEnterFullscreen:function(){var a=this.$ctx;a.velocity("transition.slideUpOut",{duration:100})},onLeaveFullscreen:function(){var a=this.$ctx;a.velocity("transition.slideDownIn",{duration:100})}})}(Tc.$),function(a){Tc.Module.CPayment=Tc.Module.extend({on:function(b){this.$form=null,this.activatedProducts=[],this.tpl=this.sandbox.getConfigParam("tpl"),this.data=this.sandbox.getConfigParam("data"),this.account=this.sandbox.getConfigParam("account"),this.feature="USAGE",this.duration="yearly",this.plans={},this.products=[],this.isOwner=!1,this.owner="",this.code=null,this.hasActiveSubscription=!1,this.settings=null,this.$spinner=a('<i class="icon-spinner anim-spin co-payment-spinner"></i>'),this.trial=this.account.isTrial("STYLEGUIDE"),this.$modal=a(this.tpl.render("c-modal",{id:"payment"})),this.$ctx.append(this.$modal),this.sandbox.addModules(this.$modal),this.sandbox.subscribe("events",this),this.$modal.on("click",".js-co-payment__upgrade",function(b){var c=a(b.currentTarget),d=this.plans[c.data("cm-plan-id")];this.fire("swal",{template:"c-swal-subscription-change-confirmation",type:"info",showCancelButton:!0,plan:d.name,callback:function(){var a={plan_id:d.id};c.attr("disabled","disabled"),c.prepend(this.$spinner),this.changePlan(a)}.bind(this)})}.bind(this)),this.$modal.on("click",".js-co-payment__upgrade-forbidden",function(a){this.fire("swal",{template:"c-swal-subscription-update-not-allowed",type:"warning",showCancelButton:!0,owner:this.owner,closeOnConfirm:!0})}.bind(this)),this.$modal.on("click",".js-co-payment__product-toggle",function(b){var c=a(b.currentTarget),d=c.data("id"),e=c.is(":checked");this.activatedProducts=[],this.products=this.products.map(function(a){return a.id==d&&(a.activated=e),a.activated&&this.activatedProducts.push(a.constant),a}.bind(this)),this.data.post("/api/plans/price",{products:this.activatedProducts}).then(function(b){for(var c in this.plans)this.plans.hasOwnProperty(c)&&(this.plans[c].price=a.extend(!0,{},this.plans[c].price,b.price[c]));this.onChangePaymentPeriod({duration:this.duration})}.bind(this))}.bind(this)),this.$modal.on("click",".js-co-payment__choose-plan",function(b){var c=a(b.currentTarget);this.upgradePlan(c),this.step(2)}.bind(this)),this.$modal.on("click",".js-co-payment__contact",function(a){a.preventDefault(),Intercom("showNewMessage")}.bind(this)),this.$modal.on("click",".js-co-payment__coupon-link",function(b){b.preventDefault();var c=a(b.currentTarget);c.velocity("fadeOut",{duration:300,complete:function(){this.$modal.find(".js-co-payment__coupon-details").velocity("fadeIn")}})}.bind(this)),this.$modal.on("submit",".js-co-payment__coupon-details",function(b){b.preventDefault();var c=this.$modal.find(".js-co-payment__coupon-code").val();c.length>0&&this.data.get("/api/voucher/validate?code="+c).then(function(b){if(b.success){this.code=c,a.each(b.plans,function(c,d){if(d.id>this.current_plan){var e=this.plans[c];this.plans[c]=a.extend({},e,d,{discount:b.data.discount,save_monthly:(e.price.monthly-d.price.monthly).toFixed(2),save_yearly:(e.price.yearly-d.price.yearly).toFixed(2)})}}.bind(this)),this.$modal.find(".js-co-payment__coupon-details").velocity("fadeOut",{duration:300,complete:function(){this.$modal.find(".js-co-payment__coupon-link").velocity("fadeIn")}});var d=this.$modal.find(".js-co-payment__coupon-link");d.after(a('<p class="m-usage__desc">Thanks for redeeming your coupon</p>')),d.remove(),this.onChangePaymentPeriod({duration:this.duration})}else this.$modal.find(".js-co-payment__coupon-code").addClass("state-error")}.bind(this))}.bind(this)),b()},render:function(){var b=this.plans,c=this.$modal.find(".js-co-payment__plans");for(var d in b)if(b.hasOwnProperty(d)){var e=b[d],f=e.price[this.duration].toFixed(2).toString();if(f.indexOf(".")>-1){var g=f.split(".");e.price_major=g[0],e.price_minor=g[1]}else e.price_major=f,e.price_minor="00"}c.html(a(this.tpl.render("c-payment-plans",{plans:b,products:this.products,currentPlan:this.current_plan,id:this.id,isOwner:this.isOwner,hasActiveSubscription:this.hasActiveSubscription,duration:this.duration})))},renderBilling:function(){var b=this.$modal.find(".js-co-payment__billing");b.html(a(this.tpl.render("c-payment-billing",{duration:this.duration}))),this.sandbox.addModules(b)},step:function(a){var b=this.$modal.find(".js-co-payment__step");b.velocity("transition.fadeOut",{duration:1,complete:function(){b.removeClass("state-visible");var c=b.eq(a-1);c.addClass("state-visible"),c.velocity("transition.fadeIn",{duration:1})}.bind(this)})},upgradePlan:function(a){var b=a.data("cm-plan-id"),c=this.plans[b],d=c.price[this.duration];"yearly"===this.duration&&(d*=12),this.settings.getElem("plan_id").setValue(c.id),this.$modal.find(".js-co-payment__charge").text("You'll be charged $"+d.toFixed(2)+" "+this.duration),Intercom("trackEvent","sg-hook-payment-billing",{plan:b}),Intercom("trackEvent","sg-hook-payment-billing-"+b.toLowerCase(),{})},changePlan:function(a){var b={plan_id:a.plan_id,period:this.duration.toUpperCase(),company_name:a.company_name,first_name:a.first_name,last_name:a.last_name,token:a.token,products:this.activatedProducts,trigger:this.feature};this.data.post("/api/account/change",b).then(function(a){this.$spinner.remove(),a.success?(this.$ctx.hide(),this.$modal.hide(),this.fire("swal",{template:"c-swal-subscription-updated",type:"success",showCancelButton:!1,doNotClose:!0,callback:function(){window.location.reload()}.bind(this)})):this.fire("swal",{template:"c-swal-subscription-upgrade-failed",type:"error",showCancelButton:!1,callback:function(){window.location.reload()}.bind(this)})}.bind(this))},onOpenPayment:function(b){this.feature=b.feature||this.feature,b.hasOwnProperty("current_plan")&&(this.current_plan=b.current_plan);var c=a(this.tpl.render("c-payment",b));this.fire("openModal",{closeable:!0,id:"payment",$content:c,terrific:!1},["events"]),this.$form=c.find(".js-co-payment__form"),this.settings=new Tc.Module.CSettings(this.$form,this.sandbox),this.settings.validation(function(){var a=this.settings.serialize();recurly.token(a,function(b,c){b?Intercom("trackEvent","sg-billing-input-error",{message:b.message,fields:b.fields.join(",")}):(a.token=c.id,this.changePlan(a))}.bind(this))}.bind(this),function(){this.step(1)}.bind(this));var d=[];d.push(this.data.get("/api/plans/").then(function(b){this.current_plan=b.current,this.plans=b.plans,this.products=b.products,this.products.map(function(a){a.activated&&this.activatedProducts.push(a.constant)}.bind(this)),this.duration=this.current_plan?this.current_plan.period:this.duration,"STYLEGUIDE_STATS"!==this.feature&&(this.plans.PRO.recommended=!0);var c=[];for(var d in this.plans)this.plans.hasOwnProperty(d)&&c.push(this.plans[d]);
c=c.sort(function(a,b){return a.id-b.id});var e=0;a.each(c,function(a,b){var c=b.features.filter(function(a){return a.constant===this.feature?(a.highlight=!0,!0):!1}.bind(this)).length>0;c&&0===e&&(e=b.id)}.bind(this)),e>0&&a.each(c,function(a,b){b.id<e&&(this.plans[b.key].inactive=!0)}.bind(this)),this.trial||a.each(this.plans,function(a,b){b.id==this.current_plan.id&&(b.current=!0)}.bind(this))}.bind(this))),d.push(this.data.get("/api/account/billinginfo").then(function(a){this.hasActiveSubscription=a.success}.bind(this)));var e=this.sandbox.getConfigParam("context");"styleguide"===e.product?d.push(this.data.get("/api/project/permission/"+a("body").data("project")).then(function(a){this.isOwner="EDIT"===a.permission||"ADMIN"===a.permission||e.account.is_owner,this.owner=a.owner}.bind(this))):e.project?(this.isOwner=e.project.is_owner||this.account.hasPermission("edit"),this.owner=e.project.owner_name+" ("+e.owner_mail+")"):d.push(this.data.post("/api/account/permission",{permission:"EDIT"}).then(function(a){e.account.is_owner?this.isOwner=!0:a.success?this.isOwner=a.permission:this.isOwner=!1}.bind(this))),Promise.all(d).then(function(){this.renderBilling(),this.render()}.bind(this))["catch"](function(a){console.error(a)}.bind(this)),Intercom("trackEvent","sg-hook-payment",{feature:this.feature}),Intercom("trackEvent","sg-hook-payment-"+this.feature.toLowerCase(),{})},onChangePaymentPeriod:function(a){this.duration=a.filter||this.duration,this.$modal.find(".cm-plan__price").velocity("transition.slideDownOut",{stagger:50,duration:100,complete:function(){this.render(),this.$modal.find(".cm-plan__price").velocity("transition.slideUpIn",{stagger:50,duration:100})}.bind(this)})}})}(Tc.$),function(a){Tc.Module.CPowerbar=Tc.Module.extend({on:function(b){var c=this.$ctx;if(this.isOpen=!1,this.$currentMenu=null,this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.$bg=null,this.info=null,this.fullscreen=!1,this.$content=a(".js-co-powerbar__content"),this.isAccountOwner=!1,this.minifyStrategies={usage:!1,priority:!1,hide:!1},this.$sectionBottom=null,this.$sectionContextual=null,this.sandbox.subscribe("events",this),this.sandbox.subscribe("editor",this),this.sandbox.subscribe("router",this),"styleguide"===this.sandbox.getConfigParam("context").product){var d=this.sandbox.getConfigParam("context");this.fire("context",d,["router"],function(a){this.onContext(a)}.bind(this))}window.addEventListener("offline",function(){this.setStatus(navigator.onLine)}.bind(this)),window.addEventListener("online",function(){this.setStatus(navigator.onLine)}.bind(this)),a(window).on("resize.powerbar",a.debounce(200,function(){this.resize()}.bind(this))),c.on("click",".js-co-powerbar__open-menu",function(b){var d=a(b.currentTarget),e=d.next(".js-co-powerbar__menu");0===e.length&&(e=c.find("> .js-co-powerbar__menu").eq(0).clone(),d.after(e)),e.hasClass("state-open")||this.loadContent(d,e),setTimeout(function(){var a=e.hasClass("state-open");this.closeMenus(),a||(d.addClass("state-open"),this.openMenu(e))}.bind(this),18)}.bind(this)),c.on("click",".js-co-powerbar__open-drawer",function(b){var d=a(b.currentTarget),e=d.data("drawer-id"),f=d.data("drawer-mode")||"default";e||console.log("no data-drawer-id given");var g=c.find('.js-co-powerbar__drawer[data-id="'+e+'"]');0===g.length&&(g=c.find("> .js-co-powerbar__drawer").eq(0).clone(),g.attr("data-id",e),c.append(g)),g.hasClass("state-open")?this.closeMenus():(this.loadContent(d,g.find(".js-co-powerbar__drawer-content")),setTimeout(function(){var b=g.hasClass("state-open");this.closeMenus(),b||("default"===f?(a("body").addClass("state-bg-visible"),this.$bg.addClass("state-visible")):"interactive"===f&&(this.fire("preEnterInteractiveMode",["events"]),this.$content.velocity("stop").velocity({paddingLeft:460},{duration:100,complete:function(){this.fire("enterInteractiveMode",["events"])}.bind(this)})),d.addClass("state-active state-open"),this.openMenu(g))}.bind(this),0))}.bind(this)),c.on("click",".js-co-powerbar__close",function(b){var c=a(b.currentTarget),d=c.closest(".js-co-powerbar__drawer");this.closeMenu(d)}.bind(this)),c.on("click",".js-co-powerbar__frontify, .js-co-powerbar__close-menus",function(a){this.closeMenus()}.bind(this)),c.on("click",".js-co-powerbar__item",function(b){this.closeMenus(),a(b.currentTarget).addClass("state-active")}.bind(this)),c.on("click",".js-co-powerbar__open-modal",function(b){var c=a(b.currentTarget),d=c.data("modal-id"),e=(c.data("template"),a("<div></div>"));this.loadContent(c,e),this.fire("openModal",{modifier:"default",id:d,$content:e},["events"])}.bind(this)),c.on("click",".js-co-powerbar__fullscreen-enter",function(b){a(b.currentTarget);this.fullscreen=!0,this.fire("preEnterFullscreen",["events"]),this.$content.velocity({paddingLeft:0},{duration:1,delay:100,complete:function(){this.fire("enterFullscreen",["events"]),c.velocity("transition.slideLeftOut",{duration:100,complete:function(){this.$collapsed=a(this.tpl.render("c-powerbar-fullscreen-leave",this.sandbox.getConfigParam("context"))),c.before(this.$collapsed),this.$collapsed.velocity("transition.slideLeftIn",{duration:100,visibility:"visible"})}.bind(this)})}.bind(this)})}.bind(this)),c.on("click",".js-co-powerbar__stats-disabled",function(a){this.fire("openPayment",{feature:"STYLEGUIDE_STATS"})}.bind(this)),c.on("click",".js-co-powerbar__open-changelog",function(a){var b=this.tpl.render("changelog");this.fire("openModal",{$content:b},["events"]),this.closeMenus()}.bind(this)),c.on("click",".js-co-powerbar__open-resources",function(b){a(".pattern-settings",a(".mod-document")).addClass("visible"),a(".pattern-settings",a(".mod-document")).removeClass("small"),this.closeMenus()}.bind(this)),a("body").on("click",".js-co-powerbar__fullscreen-leave",function(b){a(b.currentTarget);this.fullscreen=!1,this.fire("preLeaveFullscreen",["events"]),this.$collapsed.velocity("transition.slideLeftOut",{duration:100,visibility:"hidden"}),this.$content.velocity({paddingLeft:60},{duration:1,delay:100,complete:function(){this.fire("leaveFullscreen",["events"]),c.velocity("transition.slideLeftIn",{duration:100,complete:function(){c.css({transform:""}),this.$collapsed.remove()}.bind(this)})}.bind(this)})}.bind(this)),c.on("click",".js-co-powerbar__layer-item",function(b){var c=a(b.currentTarget),d=c.data("layer");this.info.screen.currentLayer=d||null;var e="/screens/"+this.info.screen.id+"/"+d;window.history.pushState({path:e,layer:d},"",e),this.fire("layerSwitched",{layer:d},["editor"])}.bind(this)),c.on("click",".js-co-powerbar__ws-layer-view",function(b){a(b.currentTarget);this.info.screen.currentLayer=null;var c="/screens/"+this.info.screen.id;window.history.pushState({path:c},"",c),this.fire("layerSwitched",{layer:null},["editor"])}.bind(this)),c.on("click",".js-co-powerbar__update-status",function(b){var d=a(b.currentTarget).find("span"),e=d.closest(".js-co-powerbar__menu"),f=c.find(".js-co-powerbar__status"),g={status_id:d.data("status")||!1};this.data.put("/api/workflows/status-item/"+this.info.screen.id,g).then(function(a){a.success&&f.html(this.tpl.render("c-powerbar-screen-status",{color:d.data("color"),trigger:d.data("trigger")}))}.bind(this)),this.closeMenu(e)}.bind(this)),c.on("click",".js-co-powerbar__bg",function(){this.isOpen&&this.closeMenus()}.bind(this));var e=!1;a(document).ajaxStart(function(){e||(e=!0,a(".js-co-powerbar__frontify",c).addClass("state-loading"))}),a(document).ajaxStop(function(){e&&setTimeout(function(){e=!1,a(".js-co-powerbar__frontify",c).removeClass("state-loading")},800)}),b()},render:function(a){var b=this.$ctx;if(this.minifyStrategies.usage=!1,this.minifyStrategies.priority=!1,this.minifyStrategies.hide=!1,a.screen){var c=a.screen.currentLayer||this.sandbox.getConfigParam("router").getUrlParam("layer");c&&(a.screen.currentLayer=c)}this.info=a,a.addons=this.sandbox.getConfigParam("context").addons,a.route_initial&&a.success?(b.html(this.tpl.render("c-powerbar",a)),this.isAccountOwner=a.account.is_owner,this.renderUsage(a.usage),this.rendered=!0,this.$bg=b.find(".js-co-powerbar__bg"),this.sandbox.addModules(b.find(".mod-c-notifications")),this.sandbox.addModules(b.find(".mod-stats")),this.setStatus(navigator.onLine)):b.find(".js-co-powerbar__contextual").html(this.tpl.render("c-powerbar-contextual",a))},setStatus:function(a){var b=this.$ctx,c=b.find(".js-co-powerbar__avatar"),d=b.find(".js-co-powerbar__offline");c.removeClass("state-online state-offline"),a?(this.closeMenu(d),c.addClass("state-online")):(this.openMenu(d),c.addClass("state-offline"))},openMenu:function(a){var b=this.$ctx,c=a.data("id");a.addClass("state-open"),c&&(this.$currentMenu=b.find(".js-co-powerbar__drawer[data-id="+a.data("id")+"]"),this.$currentMenu.addClass("state-active"),this.fire("open"+Tc.Utils.String.capitalize(Tc.Utils.String.toCamel(c)),this.info,["events"])),this.isOpen=!0},closeMenu:function(b){var c=this.$ctx,d=b.data("id"),e=c.find(".js-co-powerbar__open-menu.state-open, .js-co-powerbar__open-drawer.state-open");"interactive"===e.data("drawer-mode")&&(this.fire("preLeaveInteractiveMode",["events"]),this.$content.velocity("stop").velocity({paddingLeft:60},{duration:100,complete:function(){this.fire("leaveInteractiveMode",["events"])}.bind(this)})),b.removeClass("state-open"),e.removeClass("state-open state-active"),a("body").removeClass("state-bg-visible"),this.$bg.removeClass("state-visible"),d&&(c.find("[data-drawer-id="+d+"]").removeClass("state-active"),this.fire("close"+Tc.Utils.String.capitalize(Tc.Utils.String.toCamel(d)),this.info,["events"])),this.isOpen=!1},closeMenus:function(){var b=this.$ctx;this.$currentMenu&&(this.closeMenu(this.$currentMenu),this.$currentMenu=null),b.find(".js-co-powerbar__menu, .js-co-powerbar__drawer").removeClass("state-open"),b.find(".js-co-powerbar__item").removeClass("state-active"),b.find(".js-co-powerbar__open-menu, .js-co-powerbar__open-drawer").removeClass("state-active state-open"),a("body").removeClass("state-bg-visible"),this.$bg&&this.$bg.removeClass("state-visible"),this.isOpen=!1},loadContent:function(b,c){var d=b.data("url")||null,e=b.data("template")||null;d&&e?(c.html(this.tpl.render("c-loader")),this.data.get(d).then(function(b){b.success&&(b.meta=a.extend({},b.meta,{project:this.project}),c.html(this.tpl.render(e,b)),this.sandbox.addModules(c))}.bind(this))):e&&(c.html(this.tpl.render(e)),this.sandbox.addModules(c))},onUpdateAvatar:function(a){var b=this.$ctx;if(a&&a.avatar){var c=b.find(".js-co-powerbar__avatar-image");c.velocity("fadeOut",function(){c.attr("src",a.avatar),c.velocity("fadeIn")})}},onClosePowerbar:function(){this.closeMenus()},onOpenTeamSettings:function(){var a=this.$ctx;a.find('.js-co-powerbar__open-drawer[data-drawer-id="team"]').trigger("click")},onProductActivated:function(a){var b=this.$ctx;if(a&&a.product_id){var c=b.find(".js-co-powerbar__product[data-product="+a.product_id+"]");c.removeClass("state-hidden"),c.next(".js-co-powerbar__activate").remove()}},onUpdateUsage:function(a){this.renderUsage(a)},renderUsage:function(a){var b=this.$ctx,c=b.find(".js-co-powerbar__usage");if(a&&this.isAccountOwner){a.user.width=100*a.user.current/a.user.max,a.storage.width=100*a.storage.current/a.storage.max,a.user.width=-1===a.user.max?10:a.user.width,a.storage.width=-1===a.storage.max?10:a.storage.width,a.user.width=a.user.width>100?100:a.user.width,a.storage.width=a.storage.width>100?100:a.storage.width;var d=function(a){return a>=96?"#F16651":a>=75?"#FAB117":"#5FC8D7"};a.user.color=d(a.user.width),a.storage.color=d(a.storage.width),c.html(this.tpl.render("c-powerbar-usage",a)),c.addClass("state-visible")}else c.removeClass("state-visible")},onUpdateCount:function(a){"annotation"===a.layer?(this.info.screen.layers.annotation.count_open=a.count_open,this.info.screen.layers.annotation.count_resolved=a.count_resolved):this.info.screen.layers[a.layer].count=a.count,this.render(this.info),this.resize()},onSwitchLayer:function(a){var b=this.$ctx;if(a.layer){var c=b.find(".js-co-powerbar__layer-item[data-layer="+a.layer+"]");c.length>0?c.trigger("click"):this.fire("layerSwitched",{layer:a.layer},["editor"])}else{var c=b.find(".js-co-powerbar__ws-layer-view");c.length>0?c.trigger("click"):this.fire("layerSwitched",{layer:null},["editor"])}},onInitialFullscreen:function(b){var c=this.$ctx;this.$content.velocity({paddingLeft:0},{duration:1}),c.velocity("transition.slideLeftOut",{duration:1}),this.$collapsed=a(this.tpl.render("c-powerbar-fullscreen-leave",b)),c.before(this.$collapsed),this.$collapsed.velocity("transition.slideLeftIn",{duration:100,visibility:"visible"})},resize:function(){var b=this.$ctx,c=40,d=this.$sectionBottom.outerHeight(),e=this.$sectionContextual.outerHeight()+60,f=a(window).height();if(d+e>f)if(this.minifyStrategies.usage)if(this.minifyStrategies.hide){if(!this.minifyStrategies.priority){var g=b.find(".js-co-powerbar__nav-plus-space");g.each(function(b,g){var h=a(g),i=h.find(".js-co-powerbar__nav-plus"),j=i.find(".js-co-powerbar__nav-plus-items"),k=h.find("> .js-co-powerbar__nav-plus-item");if(0===k.length)this.minifyStrategies.priority=!0;else for(var l=k.length-1;l>=0;l--){var m=a(k.get(l));d+e>f&&(j.prepend(m),e-=c)}i.addClass("state-visible")}.bind(this))}}else this.minifyStrategies.hide=!0,b.find(".js-co-powerbar__hide").addClass("state-hidden"),this.resize();else this.minifyStrategies.usage=!0,b.find(".js-co-powerbar__usage").removeClass("state-visible"),this.resize()},onContext:function(a){var b=this.$ctx;this.closeMenus(),this.render(a),this.$sectionBottom=b.find(".js-co-powerbar__section--bottom"),this.$sectionContextual=b.find(".js-co-powerbar__contextual"),this.fullscreen&&this.fire("initialFullscreen",["events"],function(){this.onInitialFullscreen()}.bind(this)),a.success&&(this.isAccountOwner=a.account.is_owner,this.renderUsage(a.usage)),a.route_initial&&(this.$content.removeClass("state-hidden"),this.$ctx.removeClass("state-hidden")),this.resize()}})}(Tc.$),function(a){Tc.Module.CSettings=Tc.Module.extend({init:function(a,b,c){this._super(a,b,c),this.on()},on:function(b){var c=this.$ctx;this.settings=[],this.elems=[],this.active=!1,this.$active=null,this.validator=null,this.sandbox.subscribe("events",this);var d=c.data("settings");d&&d.destroy(),this.setup(),c.off(".settings"),c.on("click.settings",".js-co-settings__setting",function(b){var c=a(b.currentTarget);this.enter(c)}.bind(this)),c.on("click.settings",".js-co-settings__accordion-open",function(b){var c=a(b.currentTarget),d=c.next(".js-co-settings__accordion-content");d.hasClass("state-open")?d.removeClass("state-open"):d.addClass("state-open")}.bind(this)),a.isFunction(b)&&b()},setup:function(){var b=this.$ctx,c=b.find(".js-co-settings__setting");c.each(function(b,c){var d=a(c),e=d.data("id");if(d.data("setting"))return void this.settings.push({id:e,item:d.data("setting")});d.data("setting",this);var f=Tc.Utils.String.capitalize(Tc.Utils.String.toCamel(d.data("type"))),g=new Tc.Setting[f](this,d,!0);g.setting(),this.settings.push({id:e,item:g})}.bind(this));var d=b.find(".js-co-settings__elem");d.each(function(b,c){var d=a(c),e=d.data("id");if(d.data("elem"))return void this.elems.push({id:e,item:d.data("elem")});d.data("elem",this);var f=Tc.Utils.String.capitalize(Tc.Utils.String.toCamel(d.data("type"))),g=new Tc.Setting[f](this,d,!1);g.elem(!1),this.elems.push({id:e,item:g})}.bind(this)),b.data("settings",this)},validation:function(b,c){var d=this.$ctx;d.on("reset",function(){d.validate().resetForm(),a.isFunction(c)?c():Tc.Setting.Base.prototype.hideDetails.apply(this).then(function(){Tc.Setting.Base.prototype.hideActions.apply(this,[this.$actions])}.bind(this))}.bind(this));var e=this;this.validator=d.validate({onfocusout:!1,submitHandler:function(){Tc.Setting.Base.prototype.showLoader.apply(e),a.isFunction(b)&&b()},errorPlacement:Tc.Setting.Base.prototype.errorPlacement.bind(this),showErrors:function(){this.numberOfInvalids()>0&&Tc.Setting.Base.prototype.showError.apply(e),this.defaultShowErrors()}})},showErrors:function(a){this.validator?(this.validator.showErrors(a),this.validator.focusInvalid()):console.log("Validation not enabled for this settings instance"),Tc.Setting.Base.prototype.hideLoader.apply(this)},enter:function(a){this.active?a.is(this.$active)||(this.$active.addClass("state-focus"),this.getSetting(this.$active.data("id")).unfocus(a)):(this.active=!0,this.$active=a,a.removeClass("state-focus").addClass("state-active"),this.getSetting(a.data("id")).enter())},leave:function(a){this.active&&(this.active=!1,this.$active=null,a.removeClass("state-focus state-active"),this.getSetting(a.data("id")).leave())},next:function(a){var b=a.data("id"),c=this.settings.findIndex(function(a){return a.id===b});this.settings[c+1]&&this.enter(this.settings[c+1].item.$ctx)},prev:function(a){var b=a.data("id"),c=this.settings.findIndex(function(a){return a.id===b});this.settings[c-1]&&this.enter(this.settings[c-1].item.$ctx)},serialize:function(){var b={};return this.elems.forEach(function(c){b=a.extend(!0,{},b,c.item.serialize())}),this.settings.forEach(function(c){b=a.extend(!0,{},b,c.item.serialize())}),b},destroy:function(){this.elems.forEach(function(b){a.isFunction(b.item.destroy)&&b.item.destroy()}),this.settings.forEach(function(b){a.isFunction(b.item.destroy)&&b.item.destroy()})},resize:function(a){var b=this.$ctx;if(a){var c=parseInt(b.height()),d=b.offset().top;a>c+d&&b.height(a-d)}else b.css("height","auto")},get:function(b){var c=this.getSetting(b);return a.isEmptyObject(c)&&(c=this.getElem(b)),c},getSetting:function(a){var b=this.settings.find(function(b){return b.id===a});return b?b.item:{}},getElem:function(a){var b=this.elems.find(function(b){return b.id===a});return b?b.item:{}},getFirstElem:function(){return this.elems[0]?this.elems[0].item:{}},getFirstSetting:function(){return this.settings[0]?this.settings[0].item:{}}})}(Tc.$),function(a){Tc.Module.CSettingsAccessrequest=Tc.Module.extend({on:function(b){var c=this.$ctx;this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.sandbox.subscribe("events",this),this.response={},c.on("click",".js-co-settings-accessrequest__add-field",function(b){var c=a(b.currentTarget),d=a(this.tpl.render("c-settingsaccessrequest-detail",{cta:"Add",mode:"add"}));c.closest(".js-co-settings-accessrequest__wrapper").append(d),d.find("select").dropdown(),d.addClass("state-open").velocity("fadeIn",{complete:function(){Tc.Setting.Base.prototype.showActions.apply(this,[d.find(".js-co-settingsaccessrequest__item-details")])}.bind(this)})}.bind(this)),c.on("click",".js-co-settings-accessrequest__item",function(b){var c=a(b.currentTarget),d=c.closest(".js-co-settings-accessrequest__item").data("id");0===a(b.target).closest(".js-co-settingsaccessrequest__item-details").length&&this.data.get("/api/account/accessrequest/"+d).then(function(b){var d=a(this.tpl.render("c-settingsaccessrequest-detail",b.data));c.append(d),d.find("select").dropdown(),d.addClass("state-open").velocity("fadeIn",{complete:function(){Tc.Setting.Base.prototype.showActions.apply(this,[d.find(".js-co-settingsaccessrequest__item-details")])}.bind(this)})}.bind(this))}.bind(this)),c.on("click",".js-co-settingsaccessrequest__cancel",function(b){var c=a(b.currentTarget);c.closest(".js-co-settingsaccessrequest__item-details").remove()}),c.on("click",".js-co-settingsaccessrequest__save",function(b){var d=a(b.currentTarget),e=new Tc.Module.CSettings(c.find(".js-co-settingsaccessrequest__details-form"),this.sandbox),f=(d.closest(".js-co-settingsaccessrequest__item-details").data("mode"),d.closest(".js-co-settings-accessrequest__item"));e.validation(function(a){var b=e.serialize();b.id=f.data("id"),b.id>-1?this.data.put("/api/account/accessrequest/"+b.id,b).then(function(a){c.find('.js-co-settings-accessrequest__item[data-id="'+b.id+'"]').replaceWith(this.tpl.render("c-settingsaccessrequest-item",b))}.bind(this)):this.data.post("/api/account/accessrequest",b).then(function(a){a.success&&a.id&&(b.id=a.id,c.find(".js-co-settings-accessrequest__item:last").after(this.tpl.render("c-settingsaccessrequest-item",b)))}.bind(this)),d.closest(".js-co-settingsaccessrequest__item-details").remove()}.bind(this))}.bind(this)),b()}})}(Tc.$),function(a){Tc.Module.CSettingsAccount=Tc.Module.extend({on:function(a){var b=this.$ctx;this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.sandbox.subscribe("events",this),this.settings_domain=new Tc.Module.CSettings(b.find(".js-co-settings-account__domain"),this.sandbox),this.settings_team_name=new Tc.Module.CSettings(b.find(".js-co-settings-account__name"),this.sandbox),this.settings_csr=new Tc.Module.CSettings(b.find(".js-co-settings-account__form"),this.sandbox),this.settings_certificate=new Tc.Module.CSettings(b.find(".js-co-settings-certificate__form"),this.sandbox);var c=(b.data("id"),this.settings_domain.getSetting("custom_domain"));c.saved=function(a){var c=a.custom_domain;this.data.post("/api/account/domain/cname",a).then(function(a){a.success?-1==c.indexOf(".frontify.com")?b.find(".co-settings-account__csr").removeClass("state-hidden"):b.find(".co-settings-account__csr").addClass("state-hidden"):this.settings_domain.getSetting("custom_domain").showErrors(a.errors)}.bind(this))}.bind(this);var d=this.settings_team_name.getSetting("team_name");d.saved=function(a){this.data.post("/api/account/domain/name",a).then(function(a){}.bind(this))}.bind(this),this.settings_csr.validation(function(){var a=this.settings_csr.serialize(),c=this.settings_domain.getSetting("custom_domain");a.domain=c.$ctx.find(".js-cm-setting__input").val(),this.data.post("/api/account/domain/csr",a).then(function(a){a.success?(location.href="/api/account/domain/csr",b.find(".co-settings-account__csr").addClass("state-hidden"),b.find(".co-settings-account__certificate").removeClass("state-hidden")):Tc.Setting.Base.prototype.hideLoader.apply(this,[b.find(".js-co-settings-account__csr")])}.bind(this))}.bind(this),function(){}.bind(this)),this.settings_certificate.validation(function(){var a=this.settings_certificate.serialize();this.data.post("/api/account/domain/certificate",a).then(function(a){b.find(".co-settings-account__certificate").addClass("state-hidden"),b.find(".co-settings-account__status ").removeClass("state-hidden"),b.find(".js-co-settings__fieldset--notitle").html(this.tpl.render("c-settingsaccount-info",a))}.bind(this))}.bind(this),function(){}.bind(this)),a()}})}(Tc.$),function(a){Tc.Module.CSettingsAsset=Tc.Module.extend({on:function(a){var b=this.$ctx;this.sandbox.subscribe("events",this),this.settings=new Tc.Module.CSettings(b,this.sandbox);var c=(b.data("id"),b.data("type"));if("screen"===c){var d=this.settings.getSetting("title");d.saved=function(a){this.fire("updateScreen",{title:a.screen.title,id:a.screen.id})}.bind(this);var e=this.settings.getSetting("pixel_ratio");e.saved=function(a){this.fire("updateScreen",{pixel_ratio:a.pixel_ratio,id:a.id})}.bind(this);var f=this.settings.getSetting("delete_screen");f.deleted=function(a){this.fire("deleteScreen",{id:a.screen.id})}.bind(this)}else if("set"===c){var g=this.settings.getSetting("name");g.saved=function(a){this.fire("updateSet",{name:a.folder.name,id:a.folder.id})}.bind(this);var h=this.settings.getSetting("description");h.saved=function(a){this.fire("updateSet",{description:a.folder.description,id:a.folder.id})}.bind(this);var i=this.settings.getSetting("color");i.saved=function(a){this.fire("updateSet",{color:a.folder.color,id:a.folder.id})}.bind(this);var j=this.settings.getSetting("delete_set");j.deleted=function(a){this.fire("deleteSet",{id:a.folder.id})}.bind(this)}a()}})}(Tc.$),function(a){Tc.Module.CSettingsBilling=Tc.Module.extend({on:function(a){this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.info=null,this.sandbox.subscribe("events",this),this.account=this.sandbox.getConfigParam("account"),this.load(),a()},load:function(){var a=Promise.resolve(null);this.info||(a=this.data.get("/api/account/billing")),a.then(function(a){a&&(this.info=a.data),this.render()}.bind(this))},render:function(){this.settings&&this.settings.destroy();var b=this.$ctx;b.html(this.tpl.render("c-settingsbilling-content",this.info)),b.on("click",".js-co-settings-billing__cancel-product",function(c){var d=a(c.currentTarget),e=d.data("id");this.fire("swal",{closeOnConfirm:!0,showCancelButton:!0,template:"c-swal-subscription-product-disable-confirmation",type:"warning",callback:function(){this.data.post("/api/product/deactivate",{id:e,product_code:d.data("code")}).then(function(c){c.success&&(b.find('.js-co-settings-billing__product-row[data-id="'+e+'"]').fadeOut(),b.find(".js-co-setting-billing__total").text(c.total),d.closest(".js-co-settings-billing__product").remove(),a.trim(a(".js-co-settings-billing__product-container").html()).length||a(".js-co-settings-billing__product-container").closest(".js-co-settings-billing__product-fieldset").remove(),this.account.removeProduct("WORKSPACE"),this.account.addTrial({constant:"WORKSPACE",expired:!0}))}.bind(this))}.bind(this)})}.bind(this)),b.on("click",".js-co-settings-billing__change-subscription",function(a){a.preventDefault(),this.fire("openPayment",["events"]),this.fire("closePowerbar",["events"])}.bind(this)),b.on("click",".js-co-settings-billing__renew-subscription",function(a){a.preventDefault(),this.fire("openPayment",{current_plan:-1},["events"]),this.fire("closePowerbar",["events"])}.bind(this)),b.on("click",".js-co-settings-billing__contact",function(a){a.preventDefault(),Intercom("showNewMessage")}.bind(this)),this.settings=new Tc.Module.CSettings(b,this.sandbox);var c=this.settings.getSetting("action_cancel");c.deleted=function(a){this.fire("swal",{template:"c-swal-subscription-canceled",closeOnConfirm:!0,showCancelButton:!1,type:"info",callback:function(){window.location.reload()}})}.bind(this)}})}(Tc.$),function(a){Tc.Module.CSettingsBrand=Tc.Module.extend({on:function(b){var c=this.$ctx;this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.sandbox.subscribe("events",this),this.settings=new Tc.Module.CSettings(c,this.sandbox);var d=c.data("id"),e=this.settings.getSetting("name");e.saved=function(a){this.fire("updateBrand",{name:a.name,id:d})}.bind(this);var f=this.settings.getSetting("star");f.saved=function(a){this.fire("updateBrand",{star:!0,enabled:a.star,id:d})}.bind(this);var g=this.settings.getSetting("image");g.saved=function(a){this.fire("updateBrand",{image:a.image,id:d})}.bind(this);var h=this.settings.getSetting("background");h.saved=function(a){this.fire("updateBrand",{background:a.background,id:d})}.bind(this);var i=this.settings.getSetting("color");i.saved=function(a){this.fire("updateBrand",{color:a.color,id:d})}.bind(this);var j=this.settings.getSetting("delete_brand");j.deleted=function(a){this.fire("deleteBrand",{id:d})}.bind(this),c.on("click",".js-co-settingbrand__move-account",function(b){this.data.brand_id=a(b.currentTarget.closest(".js-o-brandlisting__brand")).data("brand"),this.data.get("/api/user/accountlist").then(function(b){var c=b.accounts.map(function(a){return a.name=a.organization?a.organization:a.creator_name+"("+a.email_domain+")",a.value=a.account,a}),d=a(this.tpl.render("c-settingsbrand-account",{data:c}));this.fire("openModal",{$content:d,modifier:"default"})}.bind(this))}.bind(this)),c.on("click",".js-cm-setting__actions",function(a){var b=new Tc.Module.CSettings(c.find(".js-co-settingsbrand__settings"),this.sandbox);b.validation(function(){var a=b.serialize(),c={"new":a.type};this.data.post("/api/transfer/"+this.data.brand_id,c).then(function(a){this.fire("closeModal"),a.success?this.fire("swal",{template:"c-swal-transfer-brand-success",type:"success",showCancelButton:!1,closeOnConfirm:!0,doNotClose:!0,callback:function(){window.location.reload()}}):this.fire("swal",{template:"c-swal-transfer-brand-error",type:"error",showCancelButton:!1,closeOnConfirm:!0,callback:function(){}})}.bind(this))}.bind(this))}.bind(this)),b()}})}(Tc.$),function(a){Tc.Module.CSettingsHook=Tc.Module.extend({on:function(a){var b=this.$ctx;this.sandbox.subscribe("events",this),b.on("click",".js-co-settings-hook",function(){var a=b.data("feature");this.fire("openPayment",{feature:a})}.bind(this)),a()}})}(Tc.$),function(a){Tc.Module.CSettingsIntegration=Tc.Module.extend({on:function(b){var c=this.$ctx;this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.router=this.sandbox.getConfigParam("router"),this.sandbox.subscribe("events",this),c.on("click",".js-co-settings-integration__preview",function(b){var d=a(b.currentTarget),e=d.closest(".js-co-settings-integration"),f=e.data("type");c.find(".js-co-settings-integration__details.state-open").remove(),this.data.get("/api/project/integration/"+this.router.getUrlParam("project")).then(function(b){var c=a(this.tpl.render("c-settingsintegration-"+e.data("type")+"-settings",b.integrations[f]));e.append(c);var d=new Tc.Module.CSettings(c,this.sandbox);d.validation(function(){this.save(e,d)}.bind(this),function(){c.remove()}.bind(this)),c.addClass("state-open").velocity("fadeIn",{complete:function(){Tc.Setting.Base.prototype.showActions.apply(this)}.bind(this)})}.bind(this))}.bind(this)),b()},save:function(b,c){var d=b.find(".js-co-settings-integration__details"),e=c.serialize(),f=(b.data("id"),b.data("type")),g={};d.find('[data-group="triggers"] .js-cm-setting-toggle').each(function(b,c){var d=a(c).attr("name");g[d]=e[d],delete e[d]});var h=e.paused;delete e.paused;var i={integration:{type:f},settings:e,triggers:g,paused:h};return this.data.post("/api/project/integration/"+this.router.getUrlParam("project")+"/"+b.data("id"),i).then(function(a){a.success&&(a.integration&&(h=a.integration.paused,b.data("id",a.integration.id)),b.find(".js-co-settings-integration__status").html(this.tpl.render("c-settingsintegration-item-status",{paused:h})),Tc.Setting.Base.prototype.showSuccess.apply(this).then(function(a){d.remove()}.bind(this)))}.bind(this))}})}(Tc.$),function(a){Tc.Module.CSettingsManagement=Tc.Module.extend({on:function(a){var b=this.$ctx;this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.sandbox.subscribe("events",this),this.settings_management=new Tc.Module.CSettings(b.find(".js-co-settings-management__user"),this.sandbox);var c=this.settings_management.getSetting("user_email");c.saved=function(a){a.user_email&&this.data.get("/api/account/limit/?email="+encodeURIComponent(a.user_email)).then(function(a){a.success&&(this.data.user_id=a.user_id,a.user_id=a.user_id,b.find(".js-co-settings-management__form").html(this.tpl.render("c-settingsmanagement-limit",a)),this.handleLimitationUpdate())}.bind(this))}.bind(this);var d=b.find(".js-co-settings-management__form-account"),e=new Tc.Module.CSettings(d,this.sandbox);e.validation(function(){var a=e.serialize();return this.data.post("/api/account/simulate",a).then(function(a){a.success?window.location.href=a.url:alert(a.error)}.bind(this))}.bind(this)),a()},handleLimitationUpdate:function(){var a=this.$ctx;this.settings_limits=new Tc.Module.CSettings(a.find(".js-co-settings-management__form"),this.sandbox)}})}(Tc.$),function(a){Tc.Module.CSettingsNotification=Tc.Module.extend({on:function(a){var b=this.$ctx;this.sandbox.subscribe("events",this),this.settings=new Tc.Module.CSettings(b,this.sandbox),a()}})}(Tc.$),function(a){Tc.Module.CSettingsProject=Tc.Module.extend({on:function(a){var b=this.$ctx;this.sandbox.subscribe("events",this),this.data=this.sandbox.getConfigParam("data"),this.settings=new Tc.Module.CSettings(b,this.sandbox);var c=b.data("id"),d=this.settings.getSetting("name");d.saved=function(a){this.fire("updateProject",{name:a.project.name,id:a.project.id})}.bind(this);var e=this.settings.getSetting("delete_project");e.deleted=function(a){var b=this.sandbox.getConfigParam("context");if("project"===b.view){var d=b.brand;
page("/brands/"+d.id+"/"+d.slug)}else this.fire("deleteProject",{id:c})}.bind(this);var f=this.settings.getSetting("tile_image");f.saved=function(a){this.fire("updateProject",{tile:a.tile_image,id:a.project.id,placeholder:a.placeholder})}.bind(this);var g=this.settings.getSetting("starred");g.saved=function(a){this.fire("updateStyleguide",{starred:a.starred,id:c})}.bind(this);var h=this.settings.getSetting("title");h.saved=function(a){this.fire("updateStyleguide",{title:a.title,id:c})}.bind(this);var i=this.settings.getSetting("url");i.saved=function(a){this.fire("updateStyleguide",{url:a.url,id:c})}.bind(this);var j=this.settings.getSetting("color");j.saved=function(a){this.fire("updateStyleguide",{color:a.color,id:c})}.bind(this);var k=this.settings.getSetting("delete_styleguide");k.deleted=function(a){var b=this.sandbox.getConfigParam("context");"brands"===b.view?this.fire("deleteStyleguide",{id:c}):location.href="/"}.bind(this),b.on("click",".js-co-settings-project__duplicate",function(){var a=this.sandbox.getConfigParam("account");return this.hub_id=b.data("id"),a.hasFeature("CORE_MULTIPLE_STYLEGUIDE")?(Intercom("trackEvent","sg-hook-duplicate-styleguide",{}),void swal({title:"Duplicate",text:"Proceed with duplication? This will create a copy of your styleguide and its content. This action could take some moments.",type:"info",showCancelButton:!0,confirmButtonText:"Proceed",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){this.duplicateStyleguide().then(function(){this.fire("swal",{template:"c-swal-styleguide-duplicate",closeOnConfirm:!0,callback:function(){location.reload()}.bind(this)})}.bind(this))}.bind(this))):void this.fire("swal",{template:"c-swal-styleguide-limit",closeOnConfirm:!0,callback:function(){this.fire("openPayment",{feature:"CORE_MULTIPLE_STYLEGUIDE"})}.bind(this)})}.bind(this)),a()},duplicateStyleguide:function(){return this.data.get("/api/hub/export/"+this.hub_id).then(function(a){return a.success?this.data.post("/api/hub/import/?skip_brand",a.structure):void this.showError()}.bind(this)).then(function(a){return a.success?Promise.resolve():void this.showError()}.bind(this))},showError:function(){console.log("error")}})}(Tc.$),function(a){Tc.Module.CSettingssso=Tc.Module.extend({on:function(a){var b=this.$ctx;this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.sandbox.subscribe("events",this),this.settings=new Tc.Module.CSettings(b,this.sandbox);var c=(b.data("id"),this.settings.getSetting("entity_id")),d=this.settings.getSetting("sso_enabled");d.saved=function(a){this.data.post("/api/account/sso/status/",a).then(function(c){a.sso_enabled?(b.find(".js-co-settings-sso__configuration").removeClass("state-hidden"),b.find(".js-co-settings-sso__download").removeClass("state-hidden"),b.find(".js-co-settings-sso__projects").removeClass("state-hidden"),b.find(".js-co-settings-sso__restrictions").removeClass("state-hidden"),b.find(".js-co-settings-sso__customization").removeClass("state-hidden")):(b.find(".js-co-settings-sso__projects").addClass("state-hidden"),b.find(".js-co-settings-sso__configuration").addClass("state-hidden"),b.find(".js-co-settings-sso__download").addClass("state-hidden"),b.find(".js-co-settings-sso__restrictions").addClass("state-hidden"),b.find(".js-co-settings-sso__customization").addClass("state-hidden"))})};var e=this.settings.getSetting("single_signon_service"),f=this.settings.getSetting("x509_certificate"),g=this.settings.getSetting("allowed_domains");c.saved=function(a){h(a)}.bind(this),e.saved=function(a){h(a)}.bind(this),f.saved=function(a){h(a)}.bind(this),g.saved=function(a){h(a)}.bind(this);var h=function(a){b.find(".js-co-settings-sso__download").html(this.tpl.render("c-settingssso-download",a))}.bind(this);b.on("click",".js-c-settingsso__download-metadata",function(){}),a()}})}(Tc.$),function(a){Tc.Module.CSettingsUser=Tc.Module.extend({on:function(b){var c=this.$ctx;this.sandbox.subscribe("events",this),this.settings=new Tc.Module.CSettings(c,this.sandbox),this.tpl=this.sandbox.getConfigParam("tpl");var d=this.settings.getSetting("image");d.saved=function(a){this.fire("updateAvatar",{avatar:a.image})}.bind(this);var e=this.settings.getSetting("language");e.saved=function(b){var c=a(this.tpl.render("c-swal-user-language-switched"));this.fire("openModal",{$content:c,type:"success",showCancelButton:!1}),c.on("click",".js-co-swal__confirm",function(a){window.location.reload()}.bind(this))}.bind(this),b()}})}(Tc.$),function(a){Tc.Module.CSwal=Tc.Module.extend({on:function(b){var c=this.$ctx;this.tpl=this.sandbox.getConfigParam("tpl"),this.sandbox.subscribe("events",this);var d=a(this.tpl.render("c-modal",{id:"swal"}));c.append(d),this.sandbox.addModules(d),b()},onSwal:function(b){var c=b;c.closeOnConfirm=b.closeOnConfirm||!1,c.showCancelButton=b.showCancelButton!==!1;var d;d=a(c.template?this.tpl.render(c.template,c):this.tpl.render("c-swal",c)),this.fire("openModal",{modifier:"default",id:"swal",$content:d},["events"]),d.find("[autofocus]").trigger("focus"),"success"!==c.type||c.doNotClose||setTimeout(function(){this.fire("closeModal",{id:"swal"},["events"])}.bind(this),1500),d.on("click",".js-co-swal__confirm",function(d){(c.closeOnConfirm||"success"===c.type)&&this.fire("closeModal",{id:"swal"},["events"]),a.isFunction(b.callback)&&b.callback()}.bind(this))}})}(Tc.$),function(a){Tc.Module.CTeam=Tc.Module.extend({on:function(b){var c=this.$ctx;this.sandbox.subscribe("events",this),this.sandbox.subscribe("editor",this),this.trigger="styleguide",this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.info={};var d,e=!0;c.data("project")?(e=!1,d=c.data("project")):"styleguide"===this.sandbox.getConfigParam("context").product?d=this.sandbox.getConfigParam("context").project.id:(d=this.sandbox.getConfigParam("router").getUrlParam("project"),this.trigger="workspace"),this.data.get("/api/collaborator/list/"+d).then(function(b){this.info=b,e?(c.html(this.tpl.render("c-team-settings",b)),this.$member=c.find("#email"),this.$message=c.find("#message"),this.$details=c.find(".js-co-team__details"),this.$actions=c.find(".js-co-team__actions"),this.$form=c.find(".js-co-team__form"),this.$users=c.find(".js-co-team__users"),this.animating=!1,this.settings=new Tc.Module.CSettings(this.$form,this.sandbox),this.settings.validation(function(){this.invite()}.bind(this),function(){this.hideDetails().then(function(){Tc.Setting.Base.prototype.hideActions.apply(this,[this.$actions])}.bind(this))}.bind(this)),this.$member.on("keyup",a.debounce(300,function(b){var c=a(b.currentTarget);c.val().length>0?this.showDetails().then(function(){Tc.Setting.Base.prototype.showActions.apply(this,[this.$actions])}.bind(this)):this.$form.trigger("reset")}.bind(this)))):c.html(this.tpl.render("c-team-user-list",b.collaborators))}.bind(this)),c.on("click",".js-co-team__user-delete",function(b){var c=a(b.currentTarget),d=c.closest(".js-co-team__user"),e=this.getUser(d.data("id"));this.data.post("/api/collaborator/remove/"+e.id).then(function(a){a.success&&(d.remove(),this.info.collaborators=this.info.collaborators.filter(function(a){return a.id!=e.id}),this.fire("collaboratorChanged",["editor"]),this.data.updateUserLimit())}.bind(this))}.bind(this)),c.on("click",".js-co-team__user",function(b){var d=a(b.currentTarget);if(0===a(b.target).closest(".js-co-team__user-details").length){c.find(".js-co-team__user-details.state-open").remove();var e=a(this.tpl.render("c-team-user",{project:this.info.project,user:this.getUser(d.data("id")),me:this.sandbox.getConfigParam("user"),trigger:this.trigger}));d.append(e);var f=new Tc.Module.CSettings(e,this.sandbox);f.validation(function(){this.update(e)}.bind(this),function(){e.remove()}.bind(this)),e.addClass("state-open").velocity("fadeIn",{complete:function(){Tc.Setting.Base.prototype.showActions.apply(this,[e.find(".js-co-team__user-actions")])}.bind(this)})}}.bind(this)),b()},invite:function(){var b=(this.$ctx,this.settings.serialize());this.data.post("/api/collaborator/add/",b).then(function(b){b.success?(this.$users.append(a(this.tpl.render("c-team-user-list",b.users))),this.info.collaborators=this.info.collaborators.concat(b.users),Tc.Setting.Base.prototype.showSuccess.apply(this,[this.$actions]).then(function(){this.$form.trigger("reset")}.bind(this)),this.fire("collaboratorChanged",["editor"]),this.data.updateUserLimit()):b.errors&&(b.upgrade?this.fire("swal",{template:"c-swal-team-user-limit",closeOnConfirm:!0,callback:function(){this.fire("openPayment",{feature:"CORE_USER_LIMIT"})}.bind(this)}):this.settings.showErrors(b.errors))}.bind(this))},update:function(a){var b=a.closest(".js-co-team__user"),c=a.data("settings"),d=c.serialize();this.data.put("/api/collaborator/"+d.id,d).then(function(e){if(e.success){var f=this.getUser(b.data("id"));f.permission=d.permission,f.valid_from=d.valid_from,f.valid_to=d.valid_to,Tc.Setting.Base.prototype.showSuccess.apply(this,[a.find(".js-co-team__user-actions")]).then(function(c){var d=a.find(".ca-dropdown > .selected span").text();b.find(".js-co-team__permission").text(d),a.remove()}.bind(this))}else c.showErrors(e.errors)}.bind(this))},showDetails:function(){return new Promise(function(a){this.$details.is(":not(:visible)")&&this.$details.velocity("fadeIn",{complete:function(){a()}})}.bind(this))},hideDetails:function(){return new Promise(function(a){this.$details.is(":visible")&&this.$details.velocity("fadeOut",{duration:100,complete:function(){a()}})}.bind(this))},getUser:function(a){return this.info.collaborators.find(function(b){return b.user_id==a})}})}(Tc.$),function(a){Tc.Module.CTour=Tc.Module.extend({init:function(a,b,c){this._super(a,b,c),this.on()},on:function(b){this.$ctx;this.sandbox.subscribe("events",this),this.sandbox.subscribe("router",this),this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.steps=[],this.setupPromise=Promise.resolve(),a.isFunction(b)&&b()},setup:function(b){var c=this.$ctx,d=c.find(".js-co-tour__step");d.each(function(b,c){var d=a(c),e=d.data("id"),f=a('[data-tour-target="'+e+'"]');0!=f.length&&this.steps.push({id:e,$step:d,promise:new Promise(function(b,c){d.on("click",".js-co-tour__action-ok",function(c){var e=a(c.currentTarget),f=(e.data("type"),d.data("id"));this.steps=this.steps.filter(function(a){return a.id!=f}),this.data.post("/api/user/tour",{view:this.sandbox.getConfigParam("context").view,id:f}),d.velocity("fadeOut",{complete:function(){d.remove(),b(!0)}})}.bind(this))}.bind(this))})}.bind(this)),d.each(function(b,c){var d=a(c),e=d.data("id"),f=a('[data-tour-target="'+e+'"]');if(0!=f.length){var g=d.data("deps");g=g?g.split(","):[],this.dependencies(g).then(function(){this.applyTether(d,f)}.bind(this))}}.bind(this)),b()},applyTether:function(a,b){a.addClass("state-visible");new Tether({element:a.get(0),target:b.get(0),classPrefix:"co-tour__step",enabled:!0,attachment:a.data("attachment")||"top left",targetAttachment:b.data("attachment")||"top right",offset:a.data("offset")||"0 0",targetOffset:b.data("offset")||"20px 20px",constraints:[{to:"window",attachment:"both",pin:a.data("pin")||!1}]});a.velocity("fadeIn")},dependencies:function(b){var c=[];return a.isArray(b)&&b.forEach(function(a){var b=this.getStep(a);b&&c.push(b.promise)}.bind(this)),Promise.all(c)},onTourAction:function(b){a.isFunction(b.action)&&b.deps&&this.setupPromise.then(function(){this.dependencies(b.deps).then(function(a){b.action(a)}.bind(this))}.bind(this))},getStep:function(a){var b=this.steps.find(function(b){return b.id==a}.bind(this));return b},onContext:function(b){var c=this.$ctx;if(c.html(""),b.tour&&b.tour.length>0){var d={};b.tour.forEach(function(a){d[a]=!0}),this.setupPromise=new Promise(function(e,f){setTimeout(function(){var f=a(this.tpl.render("c-tour-"+b.view,{steps:d}));c.html(f),this.setup(e)}.bind(this),500)}.bind(this))}}})}(Tc.$),function(a){Tc.Module.CTrial=Tc.Module.extend({on:function(a){var b=this.$ctx;this.sandbox.subscribe("events",this),this.sandbox.subscribe("router",this),this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.account=this.sandbox.getConfigParam("account"),"styleguide"===this.sandbox.getConfigParam("context").product&&(this.account.isExpiredTrial("styleguide")&&this.openModal("styleguide"),this.account.isTrial("styleguide")&&this.renderBar(this.account.getTrial("styleguide"))),b.on("click",".js-co-trial__upgrade",function(a){var b;b="styleguide"===this.sandbox.getConfigParam("context").product?"styleguide":this.account.isTrial("styleguide")?"styleguide":this.sandbox.getConfigParam("context").project.project_type,this.openModal(b)}.bind(this)),a()},onContext:function(a){if(this.clear(),this.account.isExpiredTrial("styleguide"))this.openModal("styleguide");else{var b=a.project?a.project.project_type:"styleguide";b&&this.account.isExpiredTrial(b)&&this.openModal(b),b&&this.account.isTrial(b)&&this.renderBar(this.account.getTrial(b))}},clear:function(){this.$ctx.html("")},renderBar:function(a){var b=this.$ctx;a.view=this.sandbox.getConfigParam("context").view,a.is_owner=this.sandbox.getConfigParam("context").account.is_owner,b.html(this.tpl.render("c-trial-bar",a))},openModal:function(b){var c=a(this.tpl.render("c-loader"));this.fire("openModal",{modifier:"default",$content:c});var d=Promise.resolve({data:{}});"styleguide"!=b&&(d=this.data.get("/api/account/plan/?product=WORKSPACE")),d.then(function(c){var d=this.sandbox.getConfigParam("context").account;if(!c.data.upgrade_allowed&&"styleguide"!=b){var e=a(this.tpl.render("requestupgrade-modal-workspace-expired",d));return void this.fire("openModal",{modifier:"default",$content:e})}c.data.no_subscription&&"styleguide"!==b&&(b="styleguide");var e=null;e=a(this.account.hasPermission("edit")||d.is_owner?this.tpl.render("c-trial-"+b,c.data):this.tpl.render("requestupgrade-modal-expired",d)),this.fire("openModal",{modifier:"default",$content:e,closeable:!0},["events"]),e.on("click",".js-co-trial__contact",function(a){a.preventDefault(),Intercom("showNewMessage")}.bind(this)),e.on("click",".js-co-trial__signup",function(a){a.preventDefault(),this.fire("closeModal"),this.fire("openPayment",{step:2},["events"])}.bind(this)),e.on("click",".js-co-trial__btn-upgrade",function(a){a.preventDefault(),this.fire("closeModal"),this.fire("swal",{template:"c-swal-upgrade-confirmation",type:"info",showCancelButton:!0,callback:function(){this.fire("closeModal"),this.data.post("/api/product/upgrade",{product:b}).then(function(a){window.location.reload()}.bind(this))}.bind(this)})}.bind(this)),e.on("click",".js-co-trial__plans",function(a){a.preventDefault(),this.fire("closeModal"),this.fire("openPayment",["events"])}.bind(this)),e.on("click",".js-co-trial__disable",function(a){this.fire("closeModal"),this.fire("swal",{template:"c-swal-workspace-disable",type:"warning",showCancelButton:!0,callback:function(){this.data.post("/api/product/disable",{product:b}).then(function(a){a.success&&(window.location.href="/")})}.bind(this)})}.bind(this))}.bind(this))},onInitialFullscreen:function(){var a=this.$ctx;a.velocity("fadeOut",{duration:1})},onEnterFullscreen:function(){var a=this.$ctx;a.velocity("fadeOut",{duration:100})},onLeaveFullscreen:function(){var a=this.$ctx;a.velocity("fadeIn",{duration:100})},onShowTrialStart:function(b){var c=a(this.tpl.render("c-trial-start-"+b.type,{}));c.on("click",".js-co-trial__contact",function(a){a.preventDefault(),Intercom("showNewMessage")}.bind(this)),c.on("click",".js-co-trial__start",function(c){this.data.post("/api/product/activate",{product:b.product}).then(function(b){b.success&&(this.fire("closeModal",["events"]),Intercom("trackEvent","workspace_trial_started",{}),this.fire("swal",{template:"c-swal-trial-started",type:"success",showCancelButton:!0,doNotClose:!0,callback:function(){this.account.addTrial({constant:"WORKSPACE",expired:!1,expires:14,product_id:"2",trial:"1"});var b=this.sandbox.getConfigParam("context");b.project&&"STYLEGUIDE"===b.project.project_type?this.sandbox.getModuleById(a(".mod-document").data("terrific-id")).createProject():this.sandbox.getModuleById(a(".modBrandProjectListing").data("terrific-id")).createProject()}.bind(this)}))}.bind(this))}.bind(this)),this.fire("openModal",{modifier:"default",$content:c},["events"])},onShowTrialEnd:function(a){this.openModal(a.type)}})}(Tc.$),function(a){Tc.Module.Viewer=Tc.Module.extend({on:function(b){var c=this.$ctx;this.data=this.sandbox.getConfigParam("data"),this.tpl=this.sandbox.getConfigParam("tpl"),this.$window=c.find(".js-co-viewer__window"),this.$bg=c.find(".js-co-viewer__bg"),this.$sidebar=c.find(".js-co-viewer__sidebar"),this.$wrap=c.find(".js-co-viewer__wrap"),this.$loader=a(this.tpl.render("c-loader")),this.$image=a(),this.$pagination=a(),this.index=0,this.assets=[],this.isOpen=!1,this.sandbox.subscribe("events",this),this.instance=null,a("body").on("click.co-viewer",".js-co-viewer__open",function(b){var c=a(b.currentTarget),d=c.data("o-viewer-hash"),e=c.closest(".block");this.collectAssets(e),this.open(d)}.bind(this)),c.on("click",".js-co-viewer__close",function(){this.close()}.bind(this)),c.on("click",".js-co-viewer__next",function(){this.index+1<this.assets.length&&(this.fire("viewerAssetChange",{hash:this.assets[this.index+1]}),this.render(this.assets[this.index+1]))}.bind(this)),c.on("click",".js-co-viewer__prev",function(){this.index>0&&(this.fire("viewerAssetChange",{hash:this.assets[this.index-1]}),this.render(this.assets[this.index-1]))}.bind(this)),a(document).keyup(function(a){this.isOpen&&(27===a.which?this.close():37===a.which?this.index>0&&(this.fire("viewerAssetChange",{hash:this.assets[this.index-1]}),this.render(this.assets[this.index-1])):39===a.which&&this.index+1<this.assets.length&&(this.fire("viewerAssetChange",{hash:this.assets[this.index+1]}),this.render(this.assets[this.index+1])))}.bind(this)),this.$window.hasClass("state-visible")&&this.open(),b()},close:function(){this.isOpen&&(this.isOpen=!1,this.index=0,this.$bg.velocity("stop"),this.$sidebar.velocity("stop"),this.$sidebar.velocity("reverse",{duration:200,complete:function(){a("body").toggleClass("state-co-viewer-visible",!1),this.$window.removeClass("state-visible"),this.$bg.velocity("reverse",{display:"none"})}.bind(this)}),this.fire("viewerClosed"))},onCloseViewer:function(){this.close()},open:function(b,c){c=c||!1,(!this.isOpen||c)&&(this.isOpen=!0,this.$sidebar.velocity("stop"),this.$bg.velocity("stop"),this.render(b),this.$bg.velocity({opacity:1},{display:"block",complete:function(){a("body").toggleClass("state-co-viewer-visible",!0),this.$window.addClass("state-visible"),this.$sidebar.velocity("transition.slideRightBigIn",{duration:200})}.bind(this)}))},render:function(b){this.$pagination.remove(),this.assets.length>1&&(this.index=this.assets.indexOf(b),this.$pagination=a(this.tpl.render("c-viewer-pagination",{current:this.index+1,total:this.assets.length})),this.$wrap.append(this.$pagination)),this.$image.detach(),this.$wrap.prepend(this.$loader),this.data.get("/api/viewer/data/"+b).then(function(b){var c=b.asset,d=b.block||{},e={};this.instance&&(e=this.instance.getViewerInfo(c.id,d.settings||{})),this.renderImage(c,e);var f=!a("body").hasClass("image-download-disabled");void 0!==e.downloadable&&(f=e.downloadable),this.$sidebar.html(this.tpl.render("c-viewer-sidebar",{block:d,asset:c,info:e,download:f,editor:parseInt(a("body").data("editor"))}))}.bind(this))},renderImage:function(b,c){b.width=b.width,b.height=b.height,b.video_width&&b.video_height&&(b.width=b.video_width,b.height=b.video_height);var d=this.$wrap.width(),e=this.$wrap.height();if(b.width&&b.height){var f=b.width/b.height;f>1?retina&&2*d<=b.width&&(d=2*d):(retina&&2*e<=b.height&&(e=2*e),d=f*e),b.displayWidth=d}else b.displayWidth=d;this.$loader.detach(),this.$image.remove(),b.video_mp4?this.$image=a(this.tpl.render("c-viewer-video",b)):this.$image=a(this.tpl.render("c-viewer-image",b)),this.$wrap.prepend(this.$image),c.background?this.$wrap.css({background:c.background}):this.$wrap.css({background:""})},collectAssets:function(b){b.length>0&&(this.assets=b.find(".js-co-viewer__open").toArray().map(function(b){return a(b).data("o-viewer-hash")}),this.instance=this.sandbox.getModuleById(b.data("terrificId")))},onShowAssetInViewer:function(a){this.collectAssets(a.$ctx),this.open(a.hash,!0)}})}(Tc.$);